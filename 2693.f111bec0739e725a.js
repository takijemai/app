"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2693],{76:(te,Y,d)=>{d.d(Y,{oK:()=>p,GW:()=>f,dk:()=>s});var p=(()=>{return(m=p||(p={})).Prompt="PROMPT",m.Camera="CAMERA",m.Photos="PHOTOS",p;var m})(),f=(()=>{return(m=f||(f={})).Rear="REAR",m.Front="FRONT",f;var m})(),s=(()=>{return(m=s||(s={})).Uri="uri",m.Base64="base64",m.DataUrl="dataUrl",s;var m})()},7423:(te,Y,d)=>{d.d(Y,{xz:()=>e,Uw:()=>D,fo:()=>k});var p=d(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var T=(()=>{return(r=T||(T={})).Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE",T;var r})();class e extends Error{constructor(t,n){super(t),this.message=t,this.code=n}}const z=r=>{var t,n,a,b,w;const U=r.CapacitorCustomPlatform||null,l=r.Capacitor||{},E=l.Plugins=l.Plugins||{},v=r.CapacitorPlatforms,g=(null===(t=null==v?void 0:v.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==U?U.name:(r=>{var t,n;return(null==r?void 0:r.androidBridge)?"android":(null===(n=null===(t=null==r?void 0:r.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(r)),c=(null===(n=null==v?void 0:v.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==g()),Z=(null===(a=null==v?void 0:v.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||(u=>{const h=W.get(u);return!(!(null==h?void 0:h.platforms.has(g()))&&!$(u))}),$=(null===(b=null==v?void 0:v.currentPlatform)||void 0===b?void 0:b.getPluginHeader)||(u=>{var h;return null===(h=l.PluginHeaders)||void 0===h?void 0:h.find(B=>B.name===u)}),W=new Map,K=(null===(w=null==v?void 0:v.currentPlatform)||void 0===w?void 0:w.registerPlugin)||((u,h={})=>{const B=W.get(u);if(B)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),B.proxy;const I=g(),G=$(u);let M;const le=function(){var P=(0,p.Z)(function*(){return!M&&I in h?M=M="function"==typeof h[I]?yield h[I]():h[I]:null!==U&&!M&&"web"in h&&(M=M="function"==typeof h.web?yield h.web():h.web),M});return function(){return P.apply(this,arguments)}}(),X=P=>{let A;const C=(..._)=>{const x=le().then(L=>{const O=((P,A)=>{var C,_;if(!G){if(P)return null===(_=P[A])||void 0===_?void 0:_.bind(P);throw new e(`"${u}" plugin is not implemented on ${I}`,T.Unimplemented)}{const x=null==G?void 0:G.methods.find(L=>A===L.name);if(x)return"promise"===x.rtype?L=>l.nativePromise(u,A.toString(),L):(L,O)=>l.nativeCallback(u,A.toString(),L,O);if(P)return null===(C=P[A])||void 0===C?void 0:C.bind(P)}})(L,P);if(O){const H=O(..._);return A=null==H?void 0:H.remove,H}throw new e(`"${u}.${P}()" is not implemented on ${I}`,T.Unimplemented)});return"addListener"===P&&(x.remove=(0,p.Z)(function*(){return A()})),x};return C.toString=()=>`${P.toString()}() { [capacitor code] }`,Object.defineProperty(C,"name",{value:P,writable:!1,configurable:!1}),C},se=X("addListener"),ae=X("removeListener"),ce=(P,A)=>{const C=se({eventName:P},A),_=function(){var L=(0,p.Z)(function*(){const O=yield C;ae({eventName:P,callbackId:O},A)});return function(){return L.apply(this,arguments)}}(),x=new Promise(L=>C.then(()=>L({remove:_})));return x.remove=(0,p.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield _()}),x},ee=new Proxy({},{get(P,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return G?ce:se;case"removeListener":return ae;default:return X(A)}}});return E[u]=ee,W.set(u,{name:u,proxy:ee,platforms:new Set([...Object.keys(h),...G?[I]:[]])}),ee});return l.convertFileSrc||(l.convertFileSrc=u=>u),l.getPlatform=g,l.handleError=u=>r.console.error(u),l.isNativePlatform=c,l.isPluginAvailable=Z,l.pluginMethodNoop=(u,h,B)=>Promise.reject(`${B} does not have an implementation of "${h}".`),l.registerPlugin=K,l.Exception=e,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},S=(r=>r.Capacitor=z(r))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),k=S.registerPlugin;class D{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){var a=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n);const w=this.windowListeners[t];w&&!w.registered&&this.addWindowListener(w);const U=function(){var E=(0,p.Z)(function*(){return a.removeListener(t,n)});return function(){return E.apply(this,arguments)}}(),l=Promise.resolve({remove:U});return Object.defineProperty(l,"remove",{value:(E=(0,p.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield U()}),function(){return E.apply(this,arguments)})}),l;var E}removeAllListeners(){var t=this;return(0,p.Z)(function*(){t.listeners={};for(const n in t.windowListeners)t.removeWindowListener(t.windowListeners[n]);t.windowListeners={}})()}notifyListeners(t,n){const a=this.listeners[t];a&&a.forEach(b=>b(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:a=>{this.notifyListeners(n,a)}}}unimplemented(t="not implemented"){return new S.Exception(t,T.Unimplemented)}unavailable(t="not available"){return new S.Exception(t,T.Unavailable)}removeListener(t,n){var a=this;return(0,p.Z)(function*(){const b=a.listeners[t];if(!b)return;const w=b.indexOf(n);a.listeners[t].splice(w,1),a.listeners[t].length||a.removeWindowListener(a.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}},2693:(te,Y,d)=>{d.r(Y),d.d(Y,{AddmoviePageModule:()=>v});var p=d(9808),f=d(4182),s=d(4433),m=d(3442),J=d(655),N=d(7423),R=d(76);const T=(0,N.fo)("Camera",{web:()=>d.e(3954).then(d.bind(d,3954)).then(i=>new i.CameraWeb)});var e=d(5e3),Q=d(2313),z=d(4111),ie=d(7556),S=d(3773);const k=(0,N.fo)("Geolocation",{web:()=>d.e(4561).then(d.bind(d,4561)).then(i=>new i.GeolocationWeb)});let oe=(()=>{class i{constructor(){}getLocation(){return(0,J.mG)(this,void 0,void 0,function*(){const o=yield k.getCurrentPosition();return this.latitude=o.coords.latitude,this.longitude=o.coords.longitude,this.accuracy=o.coords.accuracy,this.data={latitude:this.latitude,longitude:this.longitude,accuracy:this.accuracy},this.data})}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ne=(()=>{class i{constructor(){this.convertBlobToBase64=o=>new Promise((c,y)=>{const Z=new FileReader;Z.onerror=y,Z.onload=()=>{c(Z.result)},Z.readAsDataURL(o)})}readAsBase64(o){return(0,J.mG)(this,void 0,void 0,function*(){const y=yield(yield fetch(o.webPath)).blob();return yield this.convertBlobToBase64(y)})}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var D=d(4711),re=d(4586);const r=function(i){return["../","moviedetails",i]};function t(i,g){if(1&i){const o=e.EpF();e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-button",18),e.NdJ("click",function(){const Z=e.CHM(o).$implicit;return e.oxw().addmovie(Z)}),e._uU(3," Add "),e.qZA(),e.TgZ(4,"ion-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-card-subtitle"),e._uU(7),e.qZA()(),e.TgZ(8,"ion-card-content",19),e._UZ(9,"img",20),e.qZA()()}if(2&i){const o=g.$implicit;e.xp6(5),e.Oqu(o.Title),e.xp6(2),e.Oqu(o.Year),e.xp6(1),e.Q6J("routerLink",e.VKq(4,r,o.imdbID)),e.xp6(1),e.s9C("src",o.Poster,e.LSH)}}function n(i,g){if(1&i&&e._UZ(0,"img",21),2&i){const o=e.oxw();e.Q6J("src",o.url,e.LSH)}}function a(i,g){1&i&&e._UZ(0,"img",22)}function b(i,g){if(1&i&&e._UZ(0,"img",21,23),2&i){const o=e.oxw();e.Q6J("src",o.photo,e.LSH)}}function w(i,g){if(1&i&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Coordinates"),e.qZA()(),e.TgZ(4,"ion-card-content")(5,"ion-item"),e._uU(6),e.qZA(),e.TgZ(7,"ion-item"),e._uU(8),e.qZA(),e.TgZ(9,"ion-item"),e._uU(10),e.qZA()()()),2&i){const o=e.oxw();e.xp6(6),e.hij("Latitude: ",o.latitude,""),e.xp6(2),e.hij("Longitude: ",o.longitude,""),e.xp6(2),e.hij("Accuracy: ",o.accuracy,"")}}const l=[{path:"",component:(()=>{class i{constructor(o,c,y,Z,F,$,V,j,W,q,K,u){this.sanitizer=o,this.peliculaservice=c,this.route=y,this.authservice=Z,this.router=F,this.dbservice=$,this.alertCtrl=V,this.formBuilder=j,this.geolocationservice=W,this.imageService=q,this.storageservice=K,this.storage=u,this.data=[]}ngOnInit(){this.resetFields(),this.geolocation=this.geolocationservice.getLocation(),this.geolocation.then(o=>{console.log("local",o),this.data=o,this.latitude=o.latitude,this.longitude=o.longitude,this.accuracy=o.accuracy})}resetFields(){this.formValidation=this.formBuilder.group({title:new f.NI("",f.kI.required),year:new f.NI("",f.kI.required)})}onSubmit(o){this.imageService.readAsBase64(this.imageUpload).then(y=>{this.storage.upload("/images",this.imageService.convertBlobToBase64(new Blob([this.imageUpload.webPath])))}),this.router.navigate(["/movie"])}search(){this.result=this.peliculaservice.searchMovie(this.pelicula)}addmovie(o){return(0,J.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({header:"Confirming add",mode:"ios",message:"are you sure to add pelicula",buttons:[{text:"no",role:"cancel"},{text:"yes",handler:()=>{console.log("add pelicula"),this.dbservice.createMovie(o).then(y=>{console.log("pelicula anadida",y)})}}]})).present()})}takePicture(){return(0,J.mG)(this,void 0,void 0,function*(){const o=yield T.getPhoto({quality:100,allowEditing:!1,resultType:R.dk.Uri});this.imageUpload=o,this.photo=this.sanitizer.bypassSecurityTrustResourceUrl(o&&o.webPath)})}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(Q.H7),e.Y36(z.c),e.Y36(m.gz),e.Y36(ie.e),e.Y36(m.F0),e.Y36(S.M),e.Y36(s.Br),e.Y36(f.qu),e.Y36(oe),e.Y36(ne),e.Y36(D.S),e.Y36(re.Q1))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-addmovie"]],decls:40,vars:10,consts:[["slot","start"],["defaultHref","movie"],[3,"ngModel","ngModelChange"],[1,"medium",3,"click"],[4,"ngFor","ngForOf"],[1,"form",3,"formGroup","ngSubmit"],[1,"center"],["size","12"],["width","200","height","200",3,"src",4,"ngIf"],["src","../../assets/img/movie.jpg","width","200","height","200",4,"ngIf"],["size","12",1,"center"],["color","secondary",3,"click"],["lines","full"],["position","floating"],["type","text","formControlName","title"],["type","text","formControlName","year"],[4,"ngIf"],["type","submit","color","success","expand","block",3,"disabled"],["color","success",3,"click"],[3,"routerLink"],["alt","",3,"src"],["width","200","height","200",3,"src"],["src","../../assets/img/movie.jpg","width","200","height","200"],["image",""]],template:function(o,c){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"New Movie"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"div")(8,"ion-searchbar",2),e.NdJ("ngModelChange",function(Z){return c.pelicula=Z}),e.qZA(),e.TgZ(9,"ion-button",3),e.NdJ("click",function(){return c.search()}),e._uU(10,"Search"),e.qZA(),e.YNc(11,t,10,6,"ion-card",4),e.ALo(12,"async"),e.qZA(),e.TgZ(13,"form",5),e.NdJ("ngSubmit",function(){return c.onSubmit(c.formValidation.value)}),e.TgZ(14,"div")(15,"ion-row",6)(16,"ion-col",7),e.YNc(17,n,1,1,"img",8),e.YNc(18,a,1,0,"img",9),e.YNc(19,b,2,1,"img",8),e.qZA()(),e.TgZ(20,"ion-row")(21,"ion-col",10)(22,"ion-button",11),e.NdJ("click",function(){return c.takePicture()}),e._uU(23," Upload Movie Image "),e.qZA()()(),e.TgZ(24,"ion-row")(25,"ion-col")(26,"ion-item",12)(27,"ion-label",13),e._uU(28,"Title:"),e.qZA(),e._UZ(29,"ion-input",14),e.qZA()()(),e.TgZ(30,"ion-row")(31,"ion-col")(32,"ion-item",12)(33,"ion-label",13),e._uU(34,"Year:"),e.qZA(),e._UZ(35,"ion-input",15),e.qZA()()()(),e.TgZ(36,"div"),e.YNc(37,w,11,3,"ion-card",16),e.qZA(),e.TgZ(38,"ion-button",17),e._uU(39," Creat New Movie "),e.qZA()()()),2&o&&(e.xp6(8),e.Q6J("ngModel",c.pelicula),e.xp6(3),e.Q6J("ngForOf",e.lcZ(12,8,c.result)),e.xp6(2),e.Q6J("formGroup",c.formValidation),e.xp6(4),e.Q6J("ngIf",!c.photo&&c.url),e.xp6(1),e.Q6J("ngIf",!c.photo&&!c.url),e.xp6(1),e.Q6J("ngIf",c.photo),e.xp6(18),e.Q6J("ngIf",c.photo&&c.geolocation),e.xp6(1),e.Q6J("disabled",!c.formValidation.valid))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.VI,s.j9,f.JJ,f.On,s.YG,p.sg,s.PM,s.Zi,s.Dq,s.tO,s.FN,s.YI,m.rH,f._Y,f.JL,f.sg,s.Nd,s.wI,p.O5,s.Ie,s.Q$,s.pK,f.u],pipes:[p.Ov],styles:[".center[_ngcontent-%COMP%]{text-align:center!important}img[_ngcontent-%COMP%]{padding:8px}ion-button[_ngcontent-%COMP%]{font-weight:700}ion-row[_ngcontent-%COMP%]{justify-content:center}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(l)],m.Bz]}),i})(),v=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,f.u5,s.Pc,E,f.UX]]}),i})()}}]);