(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(On,Ct,L)=>{"use strict";L.d(Ct,{nm:()=>te});var a=L(6351);L(5e3),L(5867);var pt=L(5861),He=L(9681),dt=L(4859),mt=L(2090),Ft=L(1877);const Ye=new Map,st={activated:!1,tokenObservers:[]},Fe={initialized:!1,enabled:!1};function me(rt){return Ye.get(rt)||st}function Se(rt,ot){Ye.set(rt,ot)}function Ke(){return Fe}class at{constructor(ot,Tt,on,In,Qn){if(this.operation=ot,this.retryPolicy=Tt,this.getWaitDuration=on,this.lowerBound=In,this.upperBound=Qn,this.pending=null,this.nextErrorWaitInterval=In,In>Qn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ot){var Tt=this;return(0,pt.Z)(function*(){Tt.stop();try{Tt.pending=new mt.BH,yield function Et(rt){return new Promise(ot=>{setTimeout(ot,rt)})}(Tt.getNextRun(ot)),Tt.pending.resolve(),yield Tt.pending.promise,Tt.pending=new mt.BH,yield Tt.operation(),Tt.pending.resolve(),yield Tt.pending.promise,Tt.process(!0).catch(()=>{})}catch(on){Tt.retryPolicy(on)?Tt.process(!1).catch(()=>{}):Tt.stop()}})()}getNextRun(ot){if(ot)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Tt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Tt}}}const Qe=new mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function St(rt){if(!me(rt).activated)throw Qe.create("use-before-activation",{appName:rt.name})}function Fn(rt,ot){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,pt.Z)(function*({url:rt,body:ot},Tt){const on={"Content-Type":"application/json"},In=Tt.getImmediate({optional:!0});if(In){const bs=yield In.getHeartbeatsHeader();bs&&(on["X-Firebase-Client"]=bs)}const Qn={method:"POST",body:JSON.stringify(ot),headers:on};let ri,_i;try{ri=yield fetch(rt,Qn)}catch(bs){throw Qe.create("fetch-network-error",{originalErrorMessage:bs.message})}if(200!==ri.status)throw Qe.create("fetch-status-error",{httpStatus:ri.status});try{_i=yield ri.json()}catch(bs){throw Qe.create("fetch-parse-error",{originalErrorMessage:bs.message})}const Yr=_i.ttl.match(/^([\d.]+)(s)$/);if(!Yr||!Yr[2]||isNaN(Number(Yr[1])))throw Qe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_i.ttl}`});const ds=1e3*Number(Yr[1]),Gi=Date.now();return{token:_i.attestationToken,expireTimeMillis:Gi+ds,issuedAtTimeMillis:Gi}})).apply(this,arguments)}function rr(rt,ot){const{projectId:Tt,appId:on,apiKey:In}=rt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Tt}/apps/${on}:exchangeDebugToken?key=${In}`,body:{debug_token:ot}}}const Ar="firebase-app-check-store";let Ir=null;function ur(){return Ir||(Ir=new Promise((rt,ot)=>{try{const Tt=indexedDB.open("firebase-app-check-database",1);Tt.onsuccess=on=>{rt(on.target.result)},Tt.onerror=on=>{var In;ot(Qe.create("storage-open",{originalErrorMessage:null===(In=on.target.error)||void 0===In?void 0:In.message}))},Tt.onupgradeneeded=on=>{0===on.oldVersion&&on.target.result.createObjectStore(Ar,{keyPath:"compositeKey"})}}catch(Tt){ot(Qe.create("storage-open",{originalErrorMessage:Tt.message}))}}),Ir)}function Nt(){return(Nt=(0,pt.Z)(function*(rt,ot){const on=(yield ur()).transaction(Ar,"readwrite"),Qn=on.objectStore(Ar).put({compositeKey:rt,value:ot});return new Promise((ri,_i)=>{Qn.onsuccess=Yr=>{ri()},on.onerror=Yr=>{var ds;_i(Qe.create("storage-set",{originalErrorMessage:null===(ds=Yr.target.error)||void 0===ds?void 0:ds.message}))}})})).apply(this,arguments)}const Zn=new Ft.Yd("@firebase/app-check");function Er(rt,ot){return(0,mt.hl)()?function gt(rt,ot){return function Kt(rt,ot){return Nt.apply(this,arguments)}(function Xn(rt){return`${rt.options.appId}-${rt.name}`}(rt),ot)}(rt,ot).catch(Tt=>{Zn.warn(`Failed to write token to IndexedDB. Error: ${Tt}`)}):Promise.resolve()}function Wn(){return Ke().enabled}function cr(){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,pt.Z)(function*(){const rt=Ke();if(rt.enabled&&rt.token)return rt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wn={error:"UNKNOWN_ERROR"};function Yn(rt){return mt.US.encodeString(JSON.stringify(rt),!1)}function Kn(rt){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,pt.Z)(function*(rt,ot=!1){const Tt=rt.app;St(Tt);const on=me(Tt);let Qn,In=on.token;if(!In){const Yr=yield on.cachedTokenPromise;Yr&&dn(Yr)&&(In=Yr)}if(!ot&&In&&dn(In))return{token:In.token};let _i,ri=!1;if(Wn()){on.exchangeTokenPromise||(on.exchangeTokenPromise=Fn(rr(Tt,yield cr()),rt.heartbeatServiceProvider).then(ds=>(on.exchangeTokenPromise=void 0,ds)),ri=!0);const Yr=yield on.exchangeTokenPromise;return yield Er(Tt,Yr),Se(Tt,Object.assign(Object.assign({},on),{token:Yr})),{token:Yr.token}}try{on.exchangeTokenPromise||(on.exchangeTokenPromise=on.provider.getToken().then(Yr=>(on.exchangeTokenPromise=void 0,Yr)),ri=!0),In=yield on.exchangeTokenPromise}catch(Yr){"appCheck/throttled"===Yr.code?Zn.warn(Yr.message):Zn.error(Yr),Qn=Yr}return In?(_i={token:In.token},Se(Tt,Object.assign(Object.assign({},on),{token:In})),yield Er(Tt,In)):_i=tt(Qn),ri&&_t(Tt,_i),_i})).apply(this,arguments)}function De(rt,ot){const Tt=me(rt),on=Tt.tokenObservers.filter(In=>In.next!==ot);0===on.length&&Tt.tokenRefresher&&Tt.tokenRefresher.isRunning()&&Tt.tokenRefresher.stop(),Se(rt,Object.assign(Object.assign({},Tt),{tokenObservers:on}))}function Ze(rt){const{app:ot}=rt,Tt=me(ot);let on=Tt.tokenRefresher;on||(on=function Rt(rt){const{app:ot}=rt;return new at((0,pt.Z)(function*(){let on;if(on=me(ot).token?yield Kn(rt,!0):yield Kn(rt),on.error)throw on.error}),()=>!0,()=>{const Tt=me(ot);if(Tt.token){let on=Tt.token.issuedAtTimeMillis+.5*(Tt.token.expireTimeMillis-Tt.token.issuedAtTimeMillis)+3e5;return on=Math.min(on,Tt.token.expireTimeMillis-3e5),Math.max(0,on-Date.now())}return 0},3e4,96e4)}(rt),Se(ot,Object.assign(Object.assign({},Tt),{tokenRefresher:on}))),!on.isRunning()&&Tt.isTokenAutoRefreshEnabled&&on.start()}function _t(rt,ot){const Tt=me(rt).tokenObservers;for(const on of Tt)try{"EXTERNAL"===on.type&&null!=ot.error?on.error(ot.error):on.next(ot)}catch(In){}}function dn(rt){return rt.expireTimeMillis-Date.now()>0}function tt(rt){return{token:Yn(wn),error:rt}}class je{constructor(ot,Tt){this.app=ot,this.heartbeatServiceProvider=Tt}_delete(){const{tokenObservers:ot}=me(this.app);for(const Tt of ot)De(this.app,Tt.next);return Promise.resolve()}}const Ci="app-check-internal";!function gi(){(0,He._registerComponent)(new dt.wA("app-check",rt=>function Ae(rt,ot){return new je(rt,ot)}(rt.getProvider("app").getImmediate(),rt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((rt,ot,Tt)=>{rt.getProvider(Ci).initialize()})),(0,He._registerComponent)(new dt.wA(Ci,rt=>function lt(rt){return{getToken:ot=>Kn(rt,ot),addTokenListener:ot=>function We(rt,ot,Tt,on){const{app:In}=rt,Qn=me(In),ri={next:Tt,error:on,type:ot};if(Se(In,Object.assign(Object.assign({},Qn),{tokenObservers:[...Qn.tokenObservers,ri]})),Qn.token&&dn(Qn.token)){const _i=Qn.token;Promise.resolve().then(()=>{Tt({token:_i.token}),Ze(rt)}).catch(()=>{})}Qn.cachedTokenPromise.then(()=>Ze(rt))}(rt,"INTERNAL",ot),removeTokenListener:ot=>De(rt.app,ot)}}(rt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,He.registerVersion)("@firebase/app-check","0.5.6")}();class te{constructor(){return(0,a.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(On,Ct,L)=>{"use strict";L.d(Ct,{zQ:()=>vt,ww:()=>At,rT:()=>Ke,f7:()=>Lt,L6:()=>me,_Q:()=>Se,lh:()=>ut,Qv:()=>Fe,nw:()=>un});var a=L(5e3),J=L(8929),Z=L(1086),Ve=L(2916),Me=L(5254),ae=L(6787),we=L(341),Ce=L(2654),Ee=L(2102),oe=L(5279),pe=L(5283);class ee extends J.xQ{constructor(at=Number.POSITIVE_INFINITY,Et=Number.POSITIVE_INFINITY,U){super(),this.scheduler=U,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=at<1?1:at,this._windowTime=Et<1?1:Et,Et===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(at){if(!this.isStopped){const Et=this._events;Et.push(at),Et.length>this._bufferSize&&Et.shift()}super.next(at)}nextTimeWindow(at){this.isStopped||(this._events.push(new ce(this._getNow(),at)),this._trimBufferThenGetEvents()),super.next(at)}_subscribe(at){const Et=this._infiniteTimeWindow,U=Et?this._events:this._trimBufferThenGetEvents(),Qe=this.scheduler,rn=U.length;let St;if(this.closed)throw new oe.N;if(this.isStopped||this.hasError?St=Ce.w.EMPTY:(this.observers.push(at),St=new pe.W(this,at)),Qe&&at.add(at=new Ee.ht(at,Qe)),Et)for(let hn=0;hn<rn&&!at.closed;hn++)at.next(U[hn]);else for(let hn=0;hn<rn&&!at.closed;hn++)at.next(U[hn].value);return this.hasError?at.error(this.thrownError):this.isStopped&&at.complete(),St}_getNow(){return(this.scheduler||we.c).now()}_trimBufferThenGetEvents(){const at=this._getNow(),Et=this._bufferSize,U=this._windowTime,Qe=this._events,rn=Qe.length;let St=0;for(;St<rn&&!(at-Qe[St].time<U);)St++;return rn>Et&&(St=Math.max(St,rn-Et)),St>0&&Qe.splice(0,St),Qe}}class ce{constructor(at,Et){this.time=at,this.value=Et}}function Xe(ze,at,Et){let U;return U=ze&&"object"==typeof ze?ze:{bufferSize:ze,windowTime:at,refCount:!1,scheduler:Et},Qe=>Qe.lift(function Ne({bufferSize:ze=Number.POSITIVE_INFINITY,windowTime:at=Number.POSITIVE_INFINITY,refCount:Et,scheduler:U}){let Qe,St,rn=0,hn=!1,mn=!1;return function(Fn){let Dn;rn++,!Qe||hn?(hn=!1,Qe=new ee(ze,at,U),Dn=Qe.subscribe(this),St=Fn.subscribe({next(er){Qe.next(er)},error(er){hn=!0,Qe.error(er)},complete(){mn=!0,St=void 0,Qe.complete()}}),mn&&(St=void 0)):Dn=Qe.subscribe(this),this.add(()=>{rn--,Dn.unsubscribe(),Dn=void 0,St&&!mn&&Et&&0===rn&&(St.unsubscribe(),St=void 0,Qe=void 0)})}}(U))}var _e=L(7545);function ke(ze,at){return at?(0,_e.w)(()=>ze,at):(0,_e.w)(()=>ze)}var $e=L(4850),Dt=L(7224),ve=L(8915),pt=L(2198),He=L(6351),dt=L(2011),mt=L(9808),Ft=L(440),Ye=L(127);const Fe=new a.OlP("angularfire2.auth.use-emulator"),me=new a.OlP("angularfire2.auth.settings"),Se=new a.OlP("angularfire2.auth.tenant-id"),Ke=new a.OlP("angularfire2.auth.langugage-code"),ut=new a.OlP("angularfire2.auth.use-device-language"),Lt=new a.OlP("angularfire.auth.persistence"),un=(ze,at,Et,U,Qe,rn,St,hn)=>(0,dt.cc)(`${ze.name}.auth`,"AngularFireAuth",ze.name,()=>{const mn=at.runOutsideAngular(()=>ze.auth());if(Et&&mn.useEmulator(...Et),U&&(mn.tenantId=U),mn.languageCode=Qe,rn&&mn.useDeviceLanguage(),St)for(const[jn,Fn]of Object.entries(St))mn.settings[jn]=Fn;return hn&&mn.setPersistence(hn),mn},[Et,U,Qe,rn,St,hn]);let vt=(()=>{class ze{constructor(Et,U,Qe,rn,St,hn,mn,jn,Fn,Dn,er,Br){const rr=new J.xQ,lr=(0,Z.of)(void 0).pipe((0,Ee.QV)(St.outsideAngular),(0,_e.w)(()=>rn.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,820)))),(0,$e.U)(()=>(0,dt.on)(Et,rn,U)),(0,$e.U)(pn=>un(pn,rn,hn,jn,Fn,Dn,mn,er)),Xe({bufferSize:1,refCount:!1}));if((0,mt.PM)(Qe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{lr.pipe((0,Dt.P)()).subscribe();const Ar=lr.pipe((0,_e.w)(ur=>ur.getRedirectResult().then(ar=>ar,()=>null)),He.iC,Xe({bufferSize:1,refCount:!1})),vr=lr.pipe((0,_e.w)(ur=>new Ve.y(ar=>({unsubscribe:rn.runOutsideAngular(()=>ur.onAuthStateChanged(gt=>ar.next(gt),gt=>ar.error(gt),()=>ar.complete()))})))),Ir=lr.pipe((0,_e.w)(ur=>new Ve.y(ar=>({unsubscribe:rn.runOutsideAngular(()=>ur.onIdTokenChanged(gt=>ar.next(gt),gt=>ar.error(gt),()=>ar.complete()))}))));this.authState=Ar.pipe(ke(vr),(0,ve.R)(St.outsideAngular),(0,Ee.QV)(St.insideAngular)),this.user=Ar.pipe(ke(Ir),(0,ve.R)(St.outsideAngular),(0,Ee.QV)(St.insideAngular)),this.idToken=this.user.pipe((0,_e.w)(ur=>ur?(0,Me.D)(ur.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,_e.w)(ur=>ur?(0,Me.D)(ur.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,ae.T)(Ar,rr,this.authState.pipe((0,pt.h)(ur=>!ur))).pipe((0,$e.U)(ur=>(null==ur?void 0:ur.user)?ur:null),(0,ve.R)(St.outsideAngular),(0,Ee.QV)(St.insideAngular))}return(0,dt.pX)(this,lr,rn,{spy:{apply:(pn,Ar,vr)=>{(pn.startsWith("signIn")||pn.startsWith("createUser"))&&vr.then(Ir=>rr.next(Ir))}}})}}return ze.\u0275fac=function(Et){return new(Et||ze)(a.LFG(dt.Dh),a.LFG(dt.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(He.HU),a.LFG(Fe,8),a.LFG(me,8),a.LFG(Se,8),a.LFG(Ke,8),a.LFG(ut,8),a.LFG(Lt,8),a.LFG(Ft.nm,8))},ze.\u0275prov=a.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"any"}),ze})(),At=(()=>{class ze{constructor(){Ye.Z.registerVersion("angularfire",He.q4.full,"auth-compat")}}return ze.\u0275fac=function(Et){return new(Et||ze)},ze.\u0275mod=a.oAB({type:ze}),ze.\u0275inj=a.cJS({providers:[vt]}),ze})()},2796:(On,Ct,L)=>{"use strict";L.d(Ct,{ST:()=>Dh,yb:()=>bf});var a=L(5e3),J=L(353),Z=L(2916),Ve=L(5254),Me=L(1086),ae=L(6351),we=L(3489);function Ce(){return i=>i.lift(new Ee)}class Ee{call(e,t){return t.subscribe(new oe(e))}}class oe extends we.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var st,pe=L(1059),ee=L(4850),ce=L(2014),Xe=L(5778),Ne=L(2198),_e=L(2011),ke=L(9808),Dt=(L(820),L(3942)),ve=L(5861),pt=L(9681),He=L(4859),dt=L(1877),mt=L(2090),Ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ye={},Fe=Fe||{},me=Ft||self;function Se(){}function Ke(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ut(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var un="closure_uid_"+(1e9*Math.random()>>>0),vt=0;function At(i,e,t){return i.call.apply(i.bind,arguments)}function ze(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function at(i,e,t){return(at=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?At:ze).apply(null,arguments)}function Et(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function U(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,d,m){for(var C=Array(arguments.length-2),k=2;k<arguments.length;k++)C[k-2]=arguments[k];return e.prototype[d].apply(o,C)}}function Qe(){this.s=this.s,this.o=this.o}var St={};Qe.prototype.s=!1,Qe.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Lt(i){return Object.prototype.hasOwnProperty.call(i,un)&&i[un]||(i[un]=++vt)}(this);delete St[i]}},Qe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},mn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,d="string"==typeof i?i.split(""):i;for(let m=0;m<o;m++)m in d&&e.call(t,d[m],m,i)};function Fn(i){return Array.prototype.concat.apply([],arguments)}function Dn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function er(i){return/^[\s\xa0]*$/.test(i)}var pn,Br=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function rr(i,e){return-1!=i.indexOf(e)}function lr(i,e){return i<e?-1:i>e?1:0}e:{var Ar=me.navigator;if(Ar){var vr=Ar.userAgent;if(vr){pn=vr;break e}}pn=""}function Ir(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function ur(i){const e={};for(const t in i)e[t]=i[t];return e}var ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let m=0;m<ar.length;m++)t=ar[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function qe(i){return qe[" "](i),i}qe[" "]=Se;var Hn,i,Kt=rr(pn,"Opera"),Nt=rr(pn,"Trident")||rr(pn,"MSIE"),nn=rr(pn,"Edge"),Tn=nn||Nt,Xn=rr(pn,"Gecko")&&!(rr(pn.toLowerCase(),"webkit")&&!rr(pn,"Edge"))&&!(rr(pn,"Trident")||rr(pn,"MSIE"))&&!rr(pn,"Edge"),Zn=rr(pn.toLowerCase(),"webkit")&&!rr(pn,"Edge");function Ln(){var i=me.document;return i?i.documentMode:void 0}e:{var Er="",Cr=(i=pn,Xn?/rv:([^\);]+)(\)|;)/.exec(i):nn?/Edge\/([\d\.]+)/.exec(i):Nt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Zn?/WebKit\/(\S+)/.exec(i):Kt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Cr&&(Er=Cr?Cr[1]:""),Nt){var yn=Ln();if(null!=yn&&yn>parseFloat(Er)){Hn=String(yn);break e}}Hn=Er}var Wn={};var wn=me.document&&Nt&&(Ln()||parseInt(Hn,10))||void 0,Yn=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{me.addEventListener("test",Se,e),me.removeEventListener("test",Se,e)}catch(t){}return i}();function Kn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Vn(i,e){if(Kn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Xn){e:{try{qe(e.nodeName);var d=!0;break e}catch(m){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:We[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Vn.Z.h.call(this)}}Kn.prototype.h=function(){this.defaultPrevented=!0},U(Vn,Kn);var We={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Rt(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=d,this.key=++Ze,this.ca=this.fa=!1}function _t(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function dn(i){this.src=i,this.g={},this.h=0}function tt(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],d=hn(o,e);(m=0<=d)&&Array.prototype.splice.call(o,d,1),m&&(_t(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function je(i,e,t,o){for(var d=0;d<i.length;++d){var m=i[d];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==o)return d}return-1}dn.prototype.add=function(i,e,t,o,d){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var C=je(i,e,o,d);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new Rt(e,this.src,m,!!o,d)).fa=t,i.push(e)),e};var Ae="closure_lm_"+(1e6*Math.random()|0),lt={};function qt(i,e,t,o,d){if(o&&o.once)return xe(i,e,t,o,d);if(Array.isArray(e)){for(var m=0;m<e.length;m++)qt(i,e[m],t,o,d);return null}return t=En(t),i&&i[De]?i.N(e,t,ut(o)?!!o.capture:!!o,d):_n(i,e,t,!1,o,d)}function _n(i,e,t,o,d,m){if(!e)throw Error("Invalid event type");var C=ut(d)?!!d.capture:!!d,k=Qt(i);if(k||(i[Ae]=k=new dn(i)),(t=k.add(e,t,o,C,m)).proxy)return t;if(o=function Un(){var e=Yt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Yn||(d=C),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(Ot(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function xe(i,e,t,o,d){if(Array.isArray(e)){for(var m=0;m<e.length;m++)xe(i,e[m],t,o,d);return null}return t=En(t),i&&i[De]?i.O(e,t,ut(o)?!!o.capture:!!o,d):_n(i,e,t,!0,o,d)}function Te(i,e,t,o,d){if(Array.isArray(e))for(var m=0;m<e.length;m++)Te(i,e[m],t,o,d);else o=ut(o)?!!o.capture:!!o,t=En(t),i&&i[De]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=je(m=i.g[e],t,o,d))&&(_t(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Qt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=je(e,t,o,d)),(t=-1<i?e[i]:null)&&$t(t))}function $t(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[De])tt(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Ot(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Qt(e))?(tt(t,i),0==t.h&&(t.src=null,e[Ae]=null)):_t(i)}}}function Ot(i){return i in lt?lt[i]:lt[i]="on"+i}function Yt(i,e){if(i.ca)i=!0;else{e=new Vn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&$t(i),i=t.call(o,e)}return i}function Qt(i){return(i=i[Ae])instanceof dn?i:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(i){return"function"==typeof i?i:(i[an]||(i[an]=function(e){return i.handleEvent(e)}),i[an])}function ft(){Qe.call(this),this.i=new dn(this),this.P=this,this.I=null}function cn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Kn(e,i);else if(e instanceof Kn)e.target=e.target||i;else{var d=e;gt(e=new Kn(o,i),d)}if(d=!0,t)for(var m=t.length-1;0<=m;m--){var C=e.g=t[m];d=Pn(C,o,!0,e)&&d}if(d=Pn(C=e.g=i,o,!0,e)&&d,d=Pn(C,o,!1,e)&&d,t)for(m=0;m<t.length;m++)d=Pn(C=e.g=t[m],o,!1,e)&&d}function Pn(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var C=e[m];if(C&&!C.ca&&C.capture==t){var k=C.listener,Q=C.ia||C.src;C.fa&&tt(i.i,C),d=!1!==k.call(Q,o)&&d}}return d&&!o.defaultPrevented}U(ft,Qe),ft.prototype[De]=!0,ft.prototype.removeEventListener=function(i,e,t,o){Te(this,i,e,t,o)},ft.prototype.M=function(){if(ft.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)_t(t[o]);delete i.g[e],i.h--}}this.I=null},ft.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},ft.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var hr=me.JSON.stringify;function Xr(){var i=Si;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var br,ei=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Or,i=>i.reset());class Or{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function si(i){me.setTimeout(()=>{throw i},0)}function pi(i,e){br||function Hi(){var i=me.Promise.resolve(void 0);br=function(){i.then(Ci)}}(),Ni||(br(),Ni=!0),Si.add(i,e)}var Ni=!1,Si=new class Mr{constructor(){this.h=this.g=null}add(e,t){const o=ei.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Ci(){for(var i;i=Xr();){try{i.h.call(i.g)}catch(t){si(t)}var e=ei;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ni=!1}function gi(i,e){ft.call(this),this.h=i||1,this.g=e||me,this.j=at(this.kb,this),this.l=Date.now()}function Mi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ai(i,e,t){if("function"==typeof i)t&&(i=at(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=at(i.handleEvent,i)}return 2147483647<Number(e)?-1:me.setTimeout(i,e||0)}function te(i){i.g=Ai(()=>{i.g=null,i.i&&(i.i=!1,te(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}U(gi,ft),(st=gi.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cn(this,"tick"),this.da&&(Mi(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){gi.Z.M.call(this),Mi(this),delete this.g};class ye extends Qe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:te(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(i){Qe.call(this),this.h=i,this.g={}}U(Je,Qe);var bt=[];function be(i,e,t,o){Array.isArray(t)||(t&&(bt[0]=t.toString()),t=bt);for(var d=0;d<t.length;d++){var m=qt(e,t[d],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function Oe(i){Ir(i.g,function(e,t){this.g.hasOwnProperty(t)&&$t(e)},i),i.g={}}function yt(){this.g=!0}function kt(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var m=d[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var C=1;C<d.length;C++)d[C]=""}}}return hr(t)}catch(k){return e}}(i,t)+(o?" "+o:"")})}Je.prototype.M=function(){Je.Z.M.call(this),Oe(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yt.prototype.Aa=function(){this.g=!1},yt.prototype.info=function(){};var fr={},xr=null;function xi(){return xr=xr||new ft}function Oi(i){Kn.call(this,fr.Ma,i)}function rt(i){const e=xi();cn(e,new Oi(e,i))}function ot(i,e){Kn.call(this,fr.STAT_EVENT,i),this.stat=e}function Tt(i){const e=xi();cn(e,new ot(e,i))}function on(i,e){Kn.call(this,fr.Na,i),this.size=e}function In(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){i()},e)}fr.Ma="serverreachability",U(Oi,Kn),fr.STAT_EVENT="statevent",U(ot,Kn),fr.Na="timingevent",U(on,Kn);var Qn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ri={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function _i(){}function ds(){}_i.prototype.h=null;var Qi,Gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bs(){Kn.call(this,"d")}function Ss(){Kn.call(this,"c")}function As(){}function xs(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Je(this),this.P=Tr,this.W=new gi(i=Tn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}U(bs,Kn),U(Ss,Kn),U(As,_i),As.prototype.g=function(){return new XMLHttpRequest},As.prototype.i=function(){return{}},Qi=new As;var Tr=45e3,wr={},zi={};function Qr(i,e,t){i.K=1,i.v=en(H(e)),i.s=t,i.U=!0,Rs(i,null)}function Rs(i,e){i.F=Date.now(),Kr(i),i.A=H(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),N(t.h,"t",o),i.C=0,t=i.l.H,i.h=new qr,i.g=Cl(i.l,t?e:null,!i.s),0<i.O&&(i.L=new ye(at(i.Ia,i,i.g),i.O)),be(i.V,i.g,"readystatechange",i.gb),e=i.H?ur(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),rt(1),function Gt(i,e,t,o,d,m){i.info(function(){if(i.g)if(m)for(var C="",k=m.split("&"),Q=0;Q<k.length;Q++){var ne=k[Q].split("=");if(1<ne.length){var Ue=ne[0];ne=ne[1];var ht=Ue.split("_");C=2<=ht.length&&"type"==ht[1]?C+(Ue+"=")+ne+"&":C+(Ue+"=redacted&")}}else C=null;else C=m;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function vo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function is(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=ws(i,t),d==zi){4==e&&(i.o=4,Tt(14),o=!1),kt(i.j,i.m,null,"[Incomplete Response]");break}if(d==wr){i.o=4,Tt(15),kt(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}kt(i.j,i.m,d,null),Pi(i,d)}vo(i)&&d!=zi&&d!=wr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Tt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zi(e),e.L=!0,Tt(11))):(kt(i.j,i.m,t,"[Invalid Chunked Response]"),wi(i),mi(i))}function ws(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?zi:(t=Number(e.substring(t,o)),isNaN(t)?wr:(o+=1)+t>e.length?zi:(e=e.substr(o,t),i.C=o+t,e))}function Kr(i){i.Y=Date.now()+i.P,jr(i,i.P)}function jr(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=In(at(i.eb,i),e)}function ui(i){i.B&&(me.clearTimeout(i.B),i.B=null)}function mi(i){0==i.l.G||i.I||po(i.l,i)}function wi(i){ui(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Mi(i.W),Oe(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Pi(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||q(t.i,i)))if(t.I=i.N,!i.J&&q(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(ne){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=In(at(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;$a(t),ts(t)}pa(t),Tt(18)}if(1>=I(t.i)&&t.ka){try{t.ka()}catch(ne){}t.ka=void 0}}else Ko(t,11)}else if((i.J||t.g==i)&&$a(t),!er(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let ne=d[e];if(t.U=ne[0],ne=ne[1],2==t.G)if("c"==ne[0]){t.J=ne[1],t.la=ne[2];const Ue=ne[3];null!=Ue&&(t.ma=Ue,t.h.info("VER="+t.ma));const ht=ne[4];null!=ht&&(t.za=ht,t.h.info("SVER="+t.za));const zt=ne[5];null!=zt&&"number"==typeof zt&&0<zt&&(t.K=o=1.5*zt,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const bn=i.g;if(bn){const Sn=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sn){var m=o.i;!m.g&&(rr(Sn,"spdy")||rr(Sn,"quic")||rr(Sn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(fe(m,m.h),m.h=null))}if(o.D){const dr=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;dr&&(o.sa=dr,Mt(o.F,o.D,dr))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((o=t).oa=os(o,o.H?o.la:null,o.W),C.J){Le(o.i,C);var k=C,Q=o.K;Q&&k.setTimeout(Q),k.B&&(ui(k),Kr(k)),o.g=C}else wo(o);0<t.l.length&&Il(t)}else"stop"!=ne[0]&&"close"!=ne[0]||Ko(t,7);else 3==t.G&&("stop"==ne[0]||"close"==ne[0]?"stop"==ne[0]?Ko(t,7):ha(t):"noop"!=ne[0]&&t.j&&t.j.wa(ne),t.A=0)}rt(4)}catch(ne){}}function ss(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ke(i)||"string"==typeof i)mn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ke(i)||"string"==typeof i){t=[];for(var o=i.length,d=0;d<o;d++)t.push(d)}else for(d in t=[],o=0,i)t[o++]=d;o=function so(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ke(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length;for(var m=0;m<d;m++)e.call(void 0,o[m],t&&t[m],i)}}function Ms(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Ms)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Os(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Ei(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)Ei(d,o=i.g[e])||(i.g[t++]=o,d[o]=1),e++;i.g.length=t}}function Ei(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(st=xs.prototype).setTimeout=function(i){this.P=i},st.gb=function(i){i=i.target;const e=this.L;e&&3==Vo(i)?e.l():this.Ia(i)},st.Ia=function(i){try{if(i==this.g)e:{const Ue=Vo(this.g);var e=this.g.Da();const ht=this.g.ba();if(!(3>Ue)&&(3!=Ue||Tn||this.g&&(this.h.h||this.g.ga()||Ta(this.g)))){this.I||4!=Ue||7==e||rt(8==e||0>=ht?3:2),ui(this);var t=this.g.ba();this.N=t;t:if(vo(this)){var o=Ta(this.g);i="";var d=o.length,m=4==Vo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wi(this),mi(this);var C="";break t}this.h.i=new me.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function Jt(i,e,t,o,d,m,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+m+" "+C})}(this.j,this.u,this.A,this.m,this.X,Ue,t),this.i){if(this.$&&!this.J){t:{if(this.g){var k,Q=this.g;if((k=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!er(k)){var ne=k;break t}}ne=null}if(!(t=ne)){this.i=!1,this.o=3,Tt(12),wi(this),mi(this);break e}kt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pi(this,t)}this.U?(is(this,Ue,C),Tn&&this.i&&3==Ue&&(be(this.V,this.W,"tick",this.fb),this.W.start())):(kt(this.j,this.m,C,null),Pi(this,C)),4==Ue&&wi(this),this.i&&!this.I&&(4==Ue?po(this.l,this):(this.i=!1,Kr(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Tt(12)):(this.o=0,Tt(13)),wi(this),mi(this)}}}catch(Ue){}},st.fb=function(){if(this.g){var i=Vo(this.g),e=this.g.ga();this.C<e.length&&(ui(this),is(this,i,e),this.i&&4!=i&&Kr(this))}},st.cancel=function(){this.I=!0,wi(this)},st.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Nn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rt(3),Tt(17)),wi(this),this.o=2,mi(this)):jr(this,this.Y-i)},(st=Ms.prototype).R=function(){Os(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},st.T=function(){return Os(this),this.g.concat()},st.get=function(i,e){return Ei(this.h,i)?this.h[i]:e},st.set=function(i,e){Ei(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},st.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var d=t[o],m=this.get(d);i.call(e,m,d,this)}};var ys=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ti(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof ti){this.g=void 0!==e?e:i.g,ie(this,i.j),this.s=i.s,j(this,i.i),de(this,i.m),this.l=i.l,e=i.h;var t=new ir;t.i=e.i,e.g&&(t.g=new Ms(e.g),t.h=e.h),nt(this,t),this.o=i.o}else i&&(t=String(i).match(ys))?(this.g=!!e,ie(this,t[1]||"",!0),this.s=Hr(t[2]||""),j(this,t[3]||"",!0),de(this,t[4]),this.l=Hr(t[5]||"",!0),nt(this,t[6]||"",!0),this.o=Hr(t[7]||"")):(this.g=!!e,this.h=new ir(null,this.g))}function H(i){return new ti(i)}function ie(i,e,t){i.j=t?Hr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function j(i,e,t){i.i=t?Hr(e,!0):e}function de(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function nt(i,e,t){e instanceof ir?(i.h=e,function jt(i,e){e&&!i.j&&(Wi(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(G(this,o),N(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Nr(e,ki)),i.h=new ir(e,i.g))}function Mt(i,e,t){i.h.set(e,t)}function en(i){return Mt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Hr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Nr(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Pr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Pr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ti.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Nr(e,Di,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Nr(e,Di,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Nr(t,"/"==t.charAt(0)?bi:ni,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Nr(t,Ji)),i.join("")};var Di=/[#\/\?@]/g,ni=/[#\?:]/g,bi=/[#\?]/g,ki=/[#\?@]/g,Ji=/#/g;function ir(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Wi(i){i.g||(i.g=new Ms,i.h=0,i.i&&function Gs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var m=i[t].substring(0,o);d=i[t].substring(o+1)}else m=i[t];e(m,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function G(i,e){Wi(i),e=se(i,e),Ei(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ei((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Os(i)))}function B(i,e){return Wi(i),e=se(i,e),Ei(i.g.h,e)}function N(i,e,t){G(i,e),0<t.length&&(i.i=null,i.g.set(se(i,e),Dn(t)),i.h+=t.length)}function se(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function P(i){this.l=i||b,i=me.PerformanceNavigationTiming?0<(i=me.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(me.g&&me.g.Ea&&me.g.Ea()&&me.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=ir.prototype).add=function(i,e){Wi(this),this.i=null,i=se(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},st.forEach=function(i,e){Wi(this),this.g.forEach(function(t,o){mn(t,function(d){i.call(e,d,o,this)},this)},this)},st.T=function(){Wi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var d=i[o],m=0;m<d.length;m++)t.push(e[o]);return t},st.R=function(i){Wi(this);var e=[];if("string"==typeof i)B(this,i)&&(e=Fn(e,this.g.get(se(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Fn(e,i[t])}return e},st.set=function(i,e){return Wi(this),this.i=null,B(this,i=se(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},st.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],d=encodeURIComponent(String(o));o=this.R(o);for(var m=0;m<o.length;m++){var C=d;""!==o[m]&&(C+="="+encodeURIComponent(String(o[m]))),i.push(C)}}return this.i=i.join("&")};var b=10;function E(i){return!!i.h||!!i.g&&i.g.size>=i.j}function I(i){return i.h?1:i.g?i.g.size:0}function q(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function fe(i,e){i.g?i.g.add(e):i.h=e}function Le(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function It(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Dn(i.i)}function sn(){}function kn(){this.g=new sn}function An(i,e,t){const o=t||"";try{ss(i,function(d,m){let C=d;ut(d)&&(C=hr(d)),e.push(o+m+"="+encodeURIComponent(C))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Mn(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(m){}}function zr(i){this.l=i.$b||null,this.j=i.ib||!1}function Dr(i,e){ft.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Fi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}P.prototype.cancel=function(){if(this.i=It(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},sn.prototype.stringify=function(i){return me.JSON.stringify(i,void 0)},sn.prototype.parse=function(i){return me.JSON.parse(i,void 0)},U(zr,_i),zr.prototype.g=function(){return new Dr(this.l,this.j)},zr.prototype.i=function(i){return function(){return i}}({}),U(Dr,ft);var Fi=0;function Fr(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ri(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Li(i)}function Li(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(st=Dr.prototype).open=function(i,e){if(this.readyState!=Fi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Li(this)},st.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ri(this)),this.readyState=Fi},st.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==me.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fr(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ri(this):Li(this),3==this.readyState&&Fr(this)}},st.Ua=function(i){this.g&&(this.response=this.responseText=i,Ri(this))},st.Ta=function(i){this.g&&(this.response=i,Ri(this))},st.ha=function(){this.g&&Ri(this)},st.setRequestHeader=function(i,e){this.v.append(i,e)},st.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var zs=me.JSON.parse;function ci(i){ft.call(this),this.headers=new Ms,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=es,this.K=this.L=!1}U(ci,ft);var es="",Ki=/^https?$/i,co=["POST","PUT"];function da(i){return"content-type"==i.toLowerCase()}function Ro(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Bo(i),Wo(i)}function Bo(i){i.D||(i.D=!0,cn(i,"complete"),cn(i,"error"))}function ho(i){if(i.h&&void 0!==Fe&&(!i.C[1]||4!=Vo(i)||2!=i.ba()))if(i.v&&4==Vo(i))Ai(i.Fa,0,i);else if(cn(i,"readystatechange"),4==Vo(i)){i.h=!1;try{const k=i.ba();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===k){var d=String(i.H).match(ys)[1]||null;if(!d&&me.self&&me.self.location){var m=me.self.location.protocol;d=m.substr(0,m.length-1)}o=!Ki.test(d?d.toLowerCase():"")}t=o}if(t)cn(i,"complete"),cn(i,"success");else{i.m=6;try{var C=2<Vo(i)?i.g.statusText:""}catch(Q){C=""}i.j=C+" ["+i.ba()+"]",Bo(i)}}finally{Wo(i)}}}function Wo(i,e){if(i.g){fo(i);const t=i.g,o=i.C[0]?Se:null;i.g=null,i.C=null,e||cn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function fo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(me.clearTimeout(i.A),i.A=null)}function Vo(i){return i.g?i.g.readyState:0}function Ta(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case es:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function wl(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function Mo(i){let e="";return Ir(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Mt(i,e,t))}function Oo(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ws(i){this.za=0,this.l=[],this.h=new yt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Oo("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Oo("baseRetryDelayMs",5e3,i),this.$a=Oo("retryDelaySeedMs",1e4,i),this.Ya=Oo("forwardChannelMaxRetries",2,i),this.ra=Oo("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new P(i&&i.concurrentRequestLimit),this.Ca=new kn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ha(i){if(el(i),3==i.G){var e=i.V++,t=H(i.F);Mt(t,"SID",i.J),Mt(t,"RID",e),Mt(t,"TYPE","terminate"),fa(i,t),(e=new xs(i,i.h,e,void 0)).K=2,e.v=en(H(t)),t=!1,me.navigator&&me.navigator.sendBeacon&&(t=me.navigator.sendBeacon(e.v.toString(),"")),!t&&me.Image&&((new Image).src=e.v,t=!0),t||(e.g=Cl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kr(e)}Ba(i)}function ts(i){i.g&&(Zi(i),i.g.cancel(),i.g=null)}function el(i){ts(i),i.u&&(me.clearTimeout(i.u),i.u=null),$a(i),i.i.cancel(),i.m&&("number"==typeof i.m&&me.clearTimeout(i.m),i.m=null)}function lu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Il(i)}function Il(i){E(i.i)||i.m||(i.m=!0,pi(i.Ha,i),i.C=0)}function nl(i,e){var t;t=e?e.m:i.V++;const o=H(i.F);Mt(o,"SID",i.J),Mt(o,"RID",t),Mt(o,"AID",i.U),fa(i,o),i.o&&i.s&&wl(o,i.o,i.s),t=new xs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=bo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),fe(i.i,t),Qr(t,o,e)}function fa(i,e){i.j&&ss({},function(t,o){Mt(e,o,t)})}function bo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?at(i.j.Oa,i.j,i):null;e:{var d=i.l;let m=-1;for(;;){const C=["count="+t];-1==m?0<t?(m=d[0].h,C.push("ofs="+m)):m=0:C.push("ofs="+m);let k=!0;for(let Q=0;Q<t;Q++){let ne=d[Q].h;const Ue=d[Q].g;if(ne-=m,0>ne)m=Math.max(0,d[Q].h-100),k=!1;else try{An(Ue,C,"req"+ne+"_")}catch(ht){o&&o(Ue)}}if(k){o=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function wo(i){i.g||i.u||(i.Y=1,pi(i.Ga,i),i.A=0)}function pa(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=In(at(i.Ga,i),Yo(i,i.A)),i.A++,0))}function Zi(i){null!=i.B&&(me.clearTimeout(i.B),i.B=null)}function qo(i){i.g=new xs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=H(i.oa);Mt(e,"RID","rpc"),Mt(e,"SID",i.J),Mt(e,"CI",i.N?"0":"1"),Mt(e,"AID",i.U),fa(i,e),Mt(e,"TYPE","xmlhttp"),i.o&&i.s&&wl(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=en(H(e)),t.s=null,t.U=!0,Rs(t,i)}function $a(i){null!=i.v&&(me.clearTimeout(i.v),i.v=null)}function po(i,e){var t=null;if(i.g==e){$a(i),Zi(i),i.g=null;var o=2}else{if(!q(i.i,e))return;t=e.D,Le(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;cn(o=xi(),new on(o,t,e,d)),Il(i)}else wo(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==o&&function tl(i,e){return!(I(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=In(at(i.Ha,i,e),Yo(i,i.C)),i.C++,0)))}(i,e)||2==o&&pa(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:Ko(i,5);break;case 4:Ko(i,10);break;case 3:Ko(i,6);break;default:Ko(i,2)}}function Yo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ko(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=at(i.jb,i);t||(t=new ti("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||ie(t,"https"),en(t)),function pr(i,e){const t=new yt;if(me.Image){const o=new Image;o.onload=Et(Mn,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Et(Mn,t,o,"TestLoadImage: error",!1,e),o.onabort=Et(Mn,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Et(Mn,t,o,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Tt(2);i.G=0,i.j&&i.j.va(e),Ba(i),el(i)}function Ba(i){i.G=0,i.I=-1,i.j&&((0!=It(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Dn(i.l),i.l.length=0),i.j.ua())}function os(i,e,t){let o=function Zt(i){return i instanceof ti?H(i):new ti(i,void 0)}(t);if(""!=o.i)e&&j(o,e+"."+o.i),de(o,o.m);else{const d=me.location;o=function oi(i,e,t,o){var d=new ti(null,void 0);return i&&ie(d,i),e&&j(d,e),t&&de(d,t),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&Ir(i.aa,function(d,m){Mt(o,m,d)}),t=i.sa,(e=i.D)&&t&&Mt(o,e,t),Mt(o,"VER",i.ma),fa(i,o),o}function Cl(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ci(t&&i.Ba&&!i.qa?new zr({ib:!0}):i.qa)).L=i.H,e}function Ll(){}function Cs(){if(Nt&&!(10<=Number(wn)))throw Error("Environmental error: no available transport.")}function qs(i,e){ft.call(this),this.g=new Ws(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!er(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!er(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ps(this)}function ns(i){bs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Va(){Ss.call(this),this.status=1}function Ps(i){this.g=i}(st=ci.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qi.g(),this.C=function Yr(i){return i.h||(i.h=i.i())}(this.u?this.u:Qi),this.g.onreadystatechange=at(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ro(this,m)}i=t||"";const d=new Ms(this.headers);o&&ss(o,function(m,C){d.set(C,m)}),o=function jn(i){e:{var e=da;const t=i.length,o="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in o&&e.call(void 0,o[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=me.FormData&&i instanceof me.FormData,!(0<=hn(co,e))||o||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(m,C){this.g.setRequestHeader(C,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fo(this),0<this.B&&((this.K=function Eo(i){return Nt&&function cr(){return function Ie(i){var e=Wn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Br(String(Hn)).split("."),t=Br("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var d=e[C]||"",m=t[C]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==d[0].length&&0==m[0].length)break;i=lr(0==d[1].length?0:parseInt(d[1],10),0==m[1].length?0:parseInt(m[1],10))||lr(0==d[2].length,0==m[2].length)||lr(d[2],m[2]),d=d[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=at(this.pa,this)):this.A=Ai(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ro(this,m)}},st.pa=function(){void 0!==Fe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cn(this,"timeout"),this.abort(8))},st.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,cn(this,"complete"),cn(this,"abort"),Wo(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wo(this,!0)),ci.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?ho(this):this.cb())},st.cb=function(){ho(this)},st.ba=function(){try{return 2<Vo(this)?this.g.status:-1}catch(i){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},st.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),zs(e)}},st.Da=function(){return this.m},st.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=Ws.prototype).ma=8,st.G=1,st.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},st.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new xs(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=ur(m),gt(m,this.P)):m=this.P),null===this.o&&(d.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bo(this,d,e),Mt(t=H(this.F),"RID",i),Mt(t,"CVER",22),this.D&&Mt(t,"X-HTTP-Session-Id",this.D),fa(this,t),this.o&&m&&wl(t,this.o,m),fe(this.i,d),this.Ra&&Mt(t,"TYPE","init"),this.ja?(Mt(t,"$req",e),Mt(t,"SID","null"),d.$=!0,Qr(d,t,null)):Qr(d,t,e),this.G=2}}else 3==this.G&&(i?nl(this,i):0==this.l.length||E(this.i)||nl(this))},st.Ga=function(){if(this.u=null,qo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=In(at(this.bb,this),i)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Tt(10),ts(this),qo(this))},st.ab=function(){null!=this.v&&(this.v=null,ts(this),pa(this),Tt(19))},st.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Tt(2)):(this.h.info("Failed to ping google.com"),Tt(1))},(st=Ll.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},Cs.prototype.g=function(i,e){return new qs(i,e)},U(qs,ft),qs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),pi(at(i.hb,i,e))),Tt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=os(i,null,i.W),Il(i)},qs.prototype.close=function(){ha(this.g)},qs.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,lu(this.g,e)}else this.v?((e={}).__data__=hr(i),lu(this.g,e)):lu(this.g,i)},qs.prototype.M=function(){this.g.j=null,delete this.j,ha(this.g),delete this.g,qs.Z.M.call(this)},U(ns,bs),U(Va,Ss),U(Ps,Ll),Ps.prototype.xa=function(){cn(this.g,"a")},Ps.prototype.wa=function(i){cn(this.g,new ns(i))},Ps.prototype.va=function(i){cn(this.g,new Va(i))},Ps.prototype.ua=function(){cn(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,qs.prototype.send=qs.prototype.u,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,Qn.NO_ERROR=0,Qn.TIMEOUT=8,Qn.HTTP_ERROR=6,ri.COMPLETE="complete",ds.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",ft.prototype.listen=ft.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.La,ci.prototype.getLastErrorCode=ci.prototype.Da,ci.prototype.getStatus=ci.prototype.ba,ci.prototype.getResponseJson=ci.prototype.Qa,ci.prototype.getResponseText=ci.prototype.ga,ci.prototype.send=ci.prototype.ea;var ga=Ye.createWebChannelTransport=function(){return new Cs},Io=Ye.getStatEventTarget=function(){return xi()},oo=Ye.ErrorCode=Qn,Uo=Ye.EventType=ri,$i=Ye.Event=fr,Uu=Ye.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_s=Ye.FetchXmlHttpFactory=zr,ma=Ye.WebChannel=ds,ya=Ye.XhrIo=ci;const Dl="@firebase/firestore";class as{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let Zo="9.6.11";const Po=new dt.Yd("@firebase/firestore");function ao(){return Po.logLevel}function xn(i,...e){if(Po.logLevel<=dt.in.DEBUG){const t=e.map(eo);Po.debug(`Firestore (${Zo}): ${i}`,...t)}}function Ur(i,...e){if(Po.logLevel<=dt.in.ERROR){const t=e.map(eo);Po.error(`Firestore (${Zo}): ${i}`,...t)}}function qi(i,...e){if(Po.logLevel<=dt.in.WARN){const t=e.map(eo);Po.warn(`Firestore (${Zo}): ${i}`,...t)}}function eo(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function sr(i="Unexpected state"){const e=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: `+i;throw Ur(e),new Error(e)}function kr(i,e){i||sr()}function $n(i,e){return i}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class R extends mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class A{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(as.UNAUTHENTICATED))}shutdown(){}}class Y{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class le{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const m=ne=>this.i!==d?(d=this.i,t(ne)):Promise.resolve();let C=new A;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new A,e.enqueueRetryable(()=>m(this.currentUser))};const k=()=>{const ne=C;e.enqueueRetryable((0,ve.Z)(function*(){yield ne.promise,yield m(o.currentUser)}))},Q=ne=>{xn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ne,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(ne=>Q(ne)),setTimeout(()=>{if(!this.auth){const ne=this.t.getImmediate({optional:!0});ne?Q(ne):(xn("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new A)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(xn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(kr("string"==typeof o.accessToken),new S(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kr(null===e||"string"==typeof e),new as(e)}}class Be{constructor(e,t,o){this.type="FirstParty",this.user=as.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class it{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Be(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ln{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jn{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=m=>{null!=m.error&&xn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const C=m.token!==this.p;return this.p=m.token,xn("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const d=m=>{xn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?d(m):xn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kr("string"==typeof t.token),this.p=t.token,new ln(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class qn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function vi(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}qn.A=-1;class ii{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=vi(40);for(let m=0;m<d.length;++m)o.length<20&&d[m]<t&&(o+=e.charAt(d[m]%e.length))}return o}}function Vr(i,e){return i<e?-1:i>e?1:0}function lo(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function Qo(i){return i+"\0"}class Yi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new R(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new R(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new R(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yi.fromMillis(Date.now())}static fromDate(e){return Yi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Yi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vr(this.nanoseconds,e.nanoseconds):Vr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lr(e)}static min(){return new Lr(new Yi(0,0))}static max(){return new Lr(new Yi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function hs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Sa(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function pc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class $l{constructor(e,t,o){void 0===t?t=0:t>e.length&&sr(),void 0===o?o=e.length-t:o>e.length-t&&sr(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===$l.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const m=e.get(d),C=t.get(d);if(m<C)return-1;if(m>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yi extends $l{construct(e,t,o){return new yi(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new R(Ht.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new yi(t)}static emptyPath(){return new yi([])}}const Wc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ks extends $l{construct(e,t,o){return new ks(e,t,o)}static isValidIdentifier(e){return Wc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ks.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ks(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const m=()=>{if(0===o.length)throw new R(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;d<e.length;){const k=e[d];if("\\"===k){if(d+1===e.length)throw new R(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[d+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new R(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Q,d+=2}else"`"===k?(C=!C,d++):"."!==k||C?(o+=k,d++):(m(),d++)}if(m(),C)throw new R(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ks(t)}static emptyPath(){return new ks([])}}class Tl{constructor(e){this.fields=e,e.sort(ks.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ys(t)}static fromUint8Array(e){const t=function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d}(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const vs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(i){if(kr(!!i),"string"==typeof i){let e=0;const t=vs.exec(i);if(kr(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Bi(i.seconds),nanos:Bi(i.nanos)}}function Bi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ha(i){return"string"==typeof i?Ys.fromBase64String(i):Ys.fromUint8Array(i)}function rl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ks(i){const e=i.mapValue.fields.__previous_value__;return rl(e)?Ks(e):e}function Zs(i){const e=Jo(i.mapValue.fields.__local_write_time__.timestampValue);return new Yi(e.seconds,e.nanos)}class Bl{constructor(e,t,o,d,m,C,k,Q){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=m,this.forceLongPolling=C,this.autoDetectLongPolling=k,this.useFetchStreams=Q}}class Ns{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ns("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ns&&e.projectId===this.projectId&&e.database===this.database}}function Fs(i){return null==i}function jo(i){return 0===i&&1/i==-1/0}function ju(i){return"number"==typeof i&&Number.isInteger(i)&&!jo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Gn{constructor(e){this.path=e}static fromPath(e){return new Gn(yi.fromString(e))}static fromName(e){return new Gn(yi.fromString(e).popFirst(5))}static empty(){return new Gn(yi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gn(new yi(e.slice()))}}const Hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qc={nullValue:"NULL_VALUE"};function go(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rl(i)?4:W(i)?9:10:sr()}function ls(i,e){if(i===e)return!0;const t=go(i);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Zs(i).isEqual(Zs(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=Jo(o.timestampValue),C=Jo(d.timestampValue);return m.seconds===C.seconds&&m.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,Ha(i.bytesValue).isEqual(Ha(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return Bi(o.geoPointValue.latitude)===Bi(d.geoPointValue.latitude)&&Bi(o.geoPointValue.longitude)===Bi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Bi(o.integerValue)===Bi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=Bi(o.doubleValue),C=Bi(d.doubleValue);return m===C?jo(m)===jo(C):isNaN(m)&&isNaN(C)}return!1}(i,e);case 9:return lo(i.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:return function(o,d){const m=o.mapValue.fields||{},C=d.mapValue.fields||{};if(hs(m)!==hs(C))return!1;for(const k in m)if(m.hasOwnProperty(k)&&(void 0===C[k]||!ls(m[k],C[k])))return!1;return!0}(i,e);default:return sr()}var d}function il(i,e){return void 0!==(i.values||[]).find(t=>ls(t,e))}function ko(i,e){if(i===e)return 0;const t=go(i),o=go(e);if(t!==o)return Vr(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vr(i.booleanValue,e.booleanValue);case 2:return function(d,m){const C=Bi(d.integerValue||d.doubleValue),k=Bi(m.integerValue||m.doubleValue);return C<k?-1:C>k?1:C===k?0:isNaN(C)?isNaN(k)?0:-1:1}(i,e);case 3:return Aa(i.timestampValue,e.timestampValue);case 4:return Aa(Zs(i),Zs(e));case 5:return Vr(i.stringValue,e.stringValue);case 6:return function(d,m){const C=Ha(d),k=Ha(m);return C.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(d,m){const C=d.split("/"),k=m.split("/");for(let Q=0;Q<C.length&&Q<k.length;Q++){const ne=Vr(C[Q],k[Q]);if(0!==ne)return ne}return Vr(C.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,m){const C=Vr(Bi(d.latitude),Bi(m.latitude));return 0!==C?C:Vr(Bi(d.longitude),Bi(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,m){const C=d.values||[],k=m.values||[];for(let Q=0;Q<C.length&&Q<k.length;++Q){const ne=ko(C[Q],k[Q]);if(ne)return ne}return Vr(C.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,m){const C=d.fields||{},k=Object.keys(C),Q=m.fields||{},ne=Object.keys(Q);k.sort(),ne.sort();for(let Ue=0;Ue<k.length&&Ue<ne.length;++Ue){const ht=Vr(k[Ue],ne[Ue]);if(0!==ht)return ht;const zt=ko(C[k[Ue]],Q[ne[Ue]]);if(0!==zt)return zt}return Vr(k.length,ne.length)}(i.mapValue,e.mapValue);default:throw sr()}}function Aa(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Vr(i,e);const t=Jo(i),o=Jo(e),d=Vr(t.seconds,o.seconds);return 0!==d?d:Vr(t.nanos,o.nanos)}function sl(i){return Ho(i)}function Ho(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=Jo(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ha(i.bytesValue).toBase64():"referenceValue"in i?Gn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",m=!0;for(const C of o.values||[])m?m=!1:d+=",",d+=Ho(C);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let m="{",C=!0;for(const k of d)C?C=!1:m+=",",m+=`${k}:${Ho(o.fields[k])}`;return m+"}"}(i.mapValue):sr();var e}function ol(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Vl(i){return!!i&&"integerValue"in i}function xa(i){return!!i&&"arrayValue"in i}function gc(i){return!!i&&"nullValue"in i}function al(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ga(i){return!!i&&"mapValue"in i}function $(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Sa(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=$(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$(i.arrayValue.values[t]);return e}return Object.assign({},i)}function W(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ue(i){return"nullValue"in i?qc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ol(Ns.empty(),Gn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:sr()}function Ge(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ol(Ns.empty(),Gn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Hu:sr()}function xt(i,e){return void 0===i?e:void 0===e||ko(i,e)>0?i:e}function Ut(i,e){return void 0===i?e:void 0===e||ko(i,e)<0?i:e}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Ga(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$(t)}setAll(e){let t=ks.emptyPath(),o={},d=[];e.forEach((C,k)=>{if(!t.isImmediateParentOf(k)){const Q=this.getFieldsMap(t);this.applyChanges(Q,o,d),o={},d=[],t=k.popLast()}C?o[k.lastSegment()]=$(C):d.push(k.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,d)}delete(e){const t=this.field(e.popLast());Ga(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];Ga(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Sa(t,(d,m)=>e[d]=m);for(const d of o)delete e[d]}clone(){return new vn($(this.value))}}function gr(i){const e=[];return Sa(i.fields,(t,o)=>{const d=new ks([t]);if(Ga(o)){const m=gr(o.mapValue).fields;if(0===m.length)e.push(d);else for(const C of m)e.push(d.child(C))}else e.push(d)}),new Tl(e)}class or{constructor(e,t,o,d,m,C){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=m,this.documentState=C}static newInvalidDocument(e){return new or(e,0,Lr.min(),Lr.min(),vn.empty(),0)}static newFoundDocument(e,t,o){return new or(e,1,t,Lr.min(),o,0)}static newNoDocument(e,t){return new or(e,2,t,Lr.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,Lr.min(),vn.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rr{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function fi(i){return i.fields.find(e=>2===e.kind)}function Wr(i){return i.fields.filter(e=>2!==e.kind)}Rr.UNKNOWN_ID=-1;class us{constructor(e,t){this.fieldPath=e,this.kind=t}}class li{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new li(0,mo.min())}}function Ra(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=Lr.fromTimestamp(1e9===o?new Yi(t+1,0):new Yi(t,o));return new mo(d,Gn.empty(),e)}function Ul(i){return new mo(i.readTime,i.key,-1)}class mo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new mo(Lr.min(),Gn.empty(),-1)}static max(){return new mo(Lr.max(),Gn.empty(),-1)}}function No(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Gn.comparator(i.documentKey,e.documentKey),0!==t?t:Vr(i.largestBatchId,e.largestBatchId))}class _a{constructor(e,t=null,o=[],d=[],m=null,C=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=m,this.startAt=C,this.endAt=k,this.P=null}}function ll(i,e=null,t=[],o=[],d=null,m=null,C=null){return new _a(i,e,t,o,d,m,C)}function Sl(i){const e=$n(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+sl(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),Fs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>sl(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>sl(o)).join(",")),e.P=t}return e.P}function ta(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!Pd(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!ls(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!_c(i.startAt,e.startAt)&&_c(i.endAt,e.endAt)}function uu(i){return Gn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ul(i,e){return i.filters.filter(t=>t instanceof Xs&&t.field.isEqual(e))}function Yc(i,e,t){let o,d=!0;for(const m of ul(i,e)){let C,k=!0;switch(m.op){case"<":case"<=":C=ue(m.value);break;case"==":case"in":case">=":C=m.value;break;case">":C=m.value,k=!1;break;case"!=":case"not-in":C=qc}xt(o,C)===C&&(o=C,d=k)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];xt(o,C)===C&&(o=C,d=t.inclusive);break}return{value:o,inclusive:d}}function Gu(i,e,t){let o,d=!0;for(const m of ul(i,e)){let C,k=!0;switch(m.op){case">=":case">":C=Ge(m.value),k=!1;break;case"==":case"in":case"<=":C=m.value;break;case"<":C=m.value,k=!1;break;case"!=":case"not-in":C=Hu}Ut(o,C)===C&&(o=C,d=k)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const C=t.position[m];Ut(o,C)===C&&(o=C,d=t.inclusive);break}return{value:o,inclusive:d}}class Xs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new cu(e,t,o):"array-contains"===t?new na(e,o):"in"===t?new du(e,o):"not-in"===t?new Md(e,o):"array-contains-any"===t?new Od(e,o):new Xs(e,t,o)}static V(e,t,o){return"in"===t?new Kc(e,o):new mc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ko(t,this.value)):null!==t&&go(this.value)===go(t)&&this.v(ko(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sr()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class cu extends Xs{constructor(e,t,o){super(e,t,o),this.key=Gn.fromName(o.referenceValue)}matches(e){const t=Gn.comparator(e.key,this.key);return this.v(t)}}class Kc extends Xs{constructor(e,t){super(e,"in",t),this.keys=Rd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mc extends Xs{constructor(e,t){super(e,"not-in",t),this.keys=Rd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rd(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Gn.fromName(o.referenceValue))}class na extends Xs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xa(t)&&il(t.arrayValue,this.value)}}class du extends Xs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&il(this.value.arrayValue,t)}}class Md extends Xs{constructor(e,t){super(e,"not-in",t)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!il(this.value.arrayValue,t)}}class Od extends Xs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>il(this.value.arrayValue,o))}}class va{constructor(e,t){this.position=e,this.inclusive=t}}class Ea{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function yc(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const m=e[d],C=i.position[d];if(o=m.field.isKeyField()?Gn.comparator(Gn.fromName(C.referenceValue),t.key):ko(C,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function _c(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ls(i.position[t],e.position[t]))return!1;return!0}class cl{constructor(e,t=null,o=[],d=[],m=null,C="F",k=null,Q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=m,this.limitType=C,this.startAt=k,this.endAt=Q,this.D=null,this.C=null}}function dl(i,e,t,o,d,m,C,k){return new cl(i,e,t,o,d,m,C,k)}function Al(i){return new cl(i)}function hl(i){return!Fs(i.limit)&&"F"===i.limitType}function vc(i){return!Fs(i.limit)&&"L"===i.limitType}function jl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ec(i){for(const e of i.filters)if(e.S())return e.field;return null}function hu(i){return null!==i.collectionGroup}function fl(i){const e=$n(i);if(null===e.D){e.D=[];const t=Ec(e),o=jl(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new Ea(t)),e.D.push(new Ea(ks.keyField(),"asc"));else{let d=!1;for(const m of e.explicitOrderBy)e.D.push(m),m.field.isKeyField()&&(d=!0);if(!d){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ea(ks.keyField(),m))}}}return e.D}function ra(i){const e=$n(i);if(!e.C)if("F"===e.limitType)e.C=ll(e.path,e.collectionGroup,fl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of fl(e))t.push(new Ea(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new va(e.endAt.position,!e.endAt.inclusive):null,d=e.startAt?new va(e.startAt.position,!e.startAt.inclusive):null;e.C=ll(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.C}function Zc(i,e,t){return new cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xl(i,e){return ta(ra(i),ra(e))&&i.limitType===e.limitType}function za(i){return`${Sl(ra(i))}|lt:${i.limitType}`}function zu(i){return`Query(target=${function ea(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${sl(o.value)}`;var o}).join(", ")}]`),Fs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>sl(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>sl(t)).join(",")),`Target(${e})`}(ra(i))}; limitType=${i.limitType})`}function Wu(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Gn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,m,C){const k=yc(d,m,C);return d.inclusive?k<=0:k<0}(t.startAt,fl(t),o)||t.endAt&&!function(d,m,C){const k=yc(d,m,C);return d.inclusive?k>=0:k>0}(t.endAt,fl(t),o)));var t,o}function qu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Wa(i){return(e,t)=>{let o=!1;for(const d of fl(i)){const m=Xc(d,e,t);if(0!==m)return m;o=o||d.field.isKeyField()}return 0}}function Xc(i,e,t){const o=i.field.isKeyField()?Gn.comparator(e.key,t.key):function(d,m,C){const k=m.data.field(d),Q=C.data.field(d);return null!==k&&null!==Q?ko(k,Q):sr()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return sr()}}function ia(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jo(e)?"-0":e}}function Hl(i){return{integerValue:""+i}}function Gl(i,e){return ju(e)?Hl(e):ia(i,e)}class Yu{constructor(){this._=void 0}}function Qc(i,e,t){return i instanceof zl?function(o,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(m.fields.__previous_value__=d),{mapValue:m}}(t,e):i instanceof Rl?kd(i,e):i instanceof pl?bc(i,e):function(o,d){const m=Zu(o,d),C=Th(m)+Th(o.k);return Vl(m)&&Vl(o.k)?Hl(C):ia(o.M,C)}(i,e)}function Ku(i,e,t){return i instanceof Rl?kd(i,e):i instanceof pl?bc(i,e):t}function Zu(i,e){return i instanceof sa?Vl(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class zl extends Yu{}class Rl extends Yu{constructor(e){super(),this.elements=e}}function kd(i,e){const t=fu(e);for(const o of i.elements)t.some(d=>ls(d,o))||t.push(o);return{arrayValue:{values:t}}}class pl extends Yu{constructor(e){super(),this.elements=e}}function bc(i,e){let t=fu(e);for(const o of i.elements)t=t.filter(d=>!ls(d,o));return{arrayValue:{values:t}}}class sa extends Yu{constructor(e,t){super(),this.M=e,this.k=t}}function Th(i){return Bi(i.integerValue||i.doubleValue)}function fu(i){return xa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Qs{constructor(e,t){this.field=e,this.transform=t}}class ba{constructor(e,t){this.version=e,this.transformResults=t}}class fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fs}static exists(e){return new fs(void 0,e)}static updateTime(e){return new fs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Ma{}function gu(i,e,t){i instanceof qa?function(o,d,m){const C=o.value.clone(),k=Jc(o.fieldTransforms,d,m.transformResults);C.setAll(k),d.convertToFoundDocument(m.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Oa?function(o,d,m){if(!Wl(o.precondition,d))return void d.convertToUnknownDocument(m.version);const C=Jc(o.fieldTransforms,d,m.transformResults),k=d.data;k.setAll(wa(o)),k.setAll(C),d.convertToFoundDocument(m.version,k).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Nd(i,e,t){var d;i instanceof qa?function(o,d,m){if(!Wl(o.precondition,d))return;const C=o.value.clone(),k=Xu(o.fieldTransforms,m,d);C.setAll(k),d.convertToFoundDocument(wc(d),C).setHasLocalMutations()}(i,e,t):i instanceof Oa?function(o,d,m){if(!Wl(o.precondition,d))return;const C=Xu(o.fieldTransforms,m,d),k=d.data;k.setAll(wa(o)),k.setAll(C),d.convertToFoundDocument(wc(d),k).setHasLocalMutations()}(i,e,t):Wl(i.precondition,d=e)&&d.convertToNoDocument(Lr.min())}function oa(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),m=Zu(o.transform,d||null);null!=m&&(null==t&&(t=vn.empty()),t.set(o.field,m))}return t||null}function Fd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&lo(t,o,(d,m)=>function pu(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Rl&&o instanceof Rl||t instanceof pl&&o instanceof pl?lo(t.elements,o.elements,ls):t instanceof sa&&o instanceof sa?ls(t.k,o.k):t instanceof zl&&o instanceof zl);var t,o}(d,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function wc(i){return i.isFoundDocument()?i.version:Lr.min()}class qa extends Ma{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}}class Oa extends Ma{constructor(e,t,o,d,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=m,this.type=1}}function wa(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Jc(i,e,t){const o=new Map;kr(i.length===t.length);for(let d=0;d<t.length;d++){const m=i[d],C=m.transform,k=e.data.field(m.field);o.set(m.field,Ku(C,k,t[d]))}return o}function Xu(i,e,t){const o=new Map;for(const d of i){const m=d.transform,C=t.data.field(d.field);o.set(d.field,Qc(m,C,e))}return o}class mu extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ed extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class td{constructor(e){this.count=e}}var Ds,Ii;function gl(i){switch(i){default:return sr();case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0}}function ql(i){if(void 0===i)return Ur("GRPC error has no .code"),Ht.UNKNOWN;switch(i){case Ds.OK:return Ht.OK;case Ds.CANCELLED:return Ht.CANCELLED;case Ds.UNKNOWN:return Ht.UNKNOWN;case Ds.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case Ds.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case Ds.INTERNAL:return Ht.INTERNAL;case Ds.UNAVAILABLE:return Ht.UNAVAILABLE;case Ds.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case Ds.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case Ds.NOT_FOUND:return Ht.NOT_FOUND;case Ds.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case Ds.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case Ds.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case Ds.ABORTED:return Ht.ABORTED;case Ds.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case Ds.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case Ds.DATA_LOSS:return Ht.DATA_LOSS;default:return sr()}}(Ii=Ds||(Ds={}))[Ii.OK=0]="OK",Ii[Ii.CANCELLED=1]="CANCELLED",Ii[Ii.UNKNOWN=2]="UNKNOWN",Ii[Ii.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ii[Ii.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ii[Ii.NOT_FOUND=5]="NOT_FOUND",Ii[Ii.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ii[Ii.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ii[Ii.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ii[Ii.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ii[Ii.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ii[Ii.ABORTED=10]="ABORTED",Ii[Ii.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ii[Ii.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ii[Ii.INTERNAL=13]="INTERNAL",Ii[Ii.UNAVAILABLE=14]="UNAVAILABLE",Ii[Ii.DATA_LOSS=15]="DATA_LOSS";class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,m]of o)if(this.equalsFn(d,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,o)=>{for(const[d,m]of o)e(d,m)})}isEmpty(){return pc(this.inner)}size(){return this.innerSize}}class Ls{constructor(e,t){this.comparator=e,this.root=t||$s.EMPTY}insert(e,t){return new Ls(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(e){return new Ls(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$s.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}}class cs{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $s{constructor(e,t,o,d,m){this.key=e,this.value=t,this.color=null!=o?o:$s.RED,this.left=null!=d?d:$s.EMPTY,this.right=null!=m?m:$s.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,m){return new $s(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const m=o(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===m?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return $s.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return $s.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$s.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sr();const e=this.left.check();if(e!==this.right.check())throw sr();return e+(this.isRed()?0:1)}}$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1,$s.EMPTY=new class{constructor(){this.size=0}get key(){throw sr()}get value(){throw sr()}get color(){throw sr()}get left(){throw sr()}get right(){throw sr()}copy(i,e,t,o,d){return this}insert(i,e,t){return new $s(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ps{constructor(e){this.comparator=e,this.data=new Ls(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yu(this.data.getIterator())}getIteratorFrom(e){return new yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(d,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ps(this.comparator);return t.data=e,t}}class yu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(i){return i.hasNext()?i.getNext():void 0}const Sh=new Ls(Gn.comparator);function Fo(){return Sh}const Ld=new Ls(Gn.comparator);function Ic(){return Ld}function Qu(){return new Pa(i=>i.toString(),(i,e)=>i.isEqual(e))}const Cf=new Ls(Gn.comparator),$d=new ps(Gn.comparator);function Ti(...i){let e=$d;for(const t of i)e=e.add(t);return e}const Co=new ps(Vr);function aa(){return Co}class Lo{constructor(e,t,o,d,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,t)),new Lo(Lr.min(),o,aa(),Fo(),Ti())}}class Kl{constructor(e,t,o,d,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Kl(Ys.EMPTY_BYTE_STRING,t,Ti(),Ti(),Ti())}}class Bs{constructor(e,t,o,d){this.O=e,this.removedTargetIds=t,this.key=o,this.F=d}}class ka{constructor(e,t){this.targetId=e,this.$=t}}class Cc{constructor(e,t,o=Ys.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class to{constructor(){this.B=0,this.L=nd(),this.U=Ys.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Ti(),t=Ti(),o=Ti();return this.L.forEach((d,m)=>{switch(m){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:sr()}}),new Kl(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=nd()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Ju{constructor(e){this.nt=e,this.st=new Map,this.it=Fo(),this.rt=ec(),this.ot=new ps(Vr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:sr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,d)=>{this.ft(d)&&t(d)})}_t(e){const t=e.targetId,o=e.$.count,d=this.wt(t);if(d){const m=d.target;if(uu(m))if(0===o){const C=new Gn(m.path);this.ct(t,C,or.newNoDocument(C,Lr.min()))}else kr(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((m,C)=>{const k=this.wt(C);if(k){if(m.current&&uu(k.target)){const Q=new Gn(k.target.path);null!==this.it.get(Q)||this.It(C,Q)||this.ct(C,Q,or.newNoDocument(Q,e))}m.j&&(t.set(C,m.H()),m.J())}});let o=Ti();this.rt.forEach((m,C)=>{let k=!0;C.forEachWhile(Q=>{const ne=this.wt(Q);return!ne||2===ne.purpose||(k=!1,!1)}),k&&(o=o.add(m))}),this.it.forEach((m,C)=>C.setReadTime(e));const d=new Lo(e,t,this.ot,this.it,o);return this.it=Fo(),this.rt=ec(),this.ot=new ps(Vr),d}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const d=this.lt(e);this.It(e,t)?d.Y(t,1):d.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new to,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ps(Vr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||xn("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new to),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ec(){return new Ls(Gn.comparator)}function nd(){return new Ls(Gn.comparator)}const tc={asc:"ASCENDING",desc:"DESCENDING"},_u={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Dc{constructor(e,t){this.databaseId=e,this.N=t}}function Ml(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bd(i,e){return i.N?e.toBase64():e.toUint8Array()}function Ya(i,e){return Ml(i,e.toTimestamp())}function Vs(i){return kr(!!i),Lr.fromTimestamp(function(e){const t=Jo(e);return new Yi(t.seconds,t.nanos)}(i))}function rd(i,e){return(t=i,new yi(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nc(i){const e=yi.fromString(i);return kr(mr(e)),e}function vu(i,e){return rd(i.databaseId,e.path)}function Ia(i,e){const t=nc(e);if(t.get(1)!==i.databaseId.projectId)throw new R(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new R(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Gn(ml(t))}function Js(i,e){return rd(i.databaseId,e)}function yo(i){const e=nc(i);return 4===e.length?yi.emptyPath():ml(e)}function Ka(i){return new yi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ml(i){return kr(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function la(i,e,t){return{name:vu(i,e),fields:t.value.mapValue.fields}}function _o(i,e,t){const o=Ia(i,e.name),d=Vs(e.updateTime),m=new vn({mapValue:{fields:e.fields}}),C=or.newFoundDocument(o,d,m);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function Eu(i,e){let t;if(e instanceof qa)t={update:la(i,e.key,e.value)};else if(e instanceof mu)t={delete:vu(i,e.key)};else if(e instanceof Oa)t={update:la(i,e.key,e.data),updateMask:zn(e.fieldMask)};else{if(!(e instanceof ed))return sr();t={verify:vu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,m){const C=m.transform;if(C instanceof zl)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Rl)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof pl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof sa)return{fieldPath:m.field.canonicalString(),increment:C.k};throw sr()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Ya(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:sr()),t;var d}function Na(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?fs.updateTime(Vs(d.updateTime)):void 0!==d.exists?fs.exists(d.exists):fs.none():fs.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(m,C){let k=null;"setToServerValue"in C?(kr("REQUEST_TIME"===C.setToServerValue),k=new zl):"appendMissingElements"in C?k=new Rl(C.appendMissingElements.values||[]):"removeAllFromArray"in C?k=new pl(C.removeAllFromArray.values||[]):"increment"in C?k=new sa(m,C.increment):sr();const Q=ks.fromServerFormat(C.fieldPath);return new Qs(Q,k)}(i,d)):[];var d;if(e.update){const d=Ia(i,e.update.name),m=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Tl((e.updateMask.fieldPaths||[]).map(ne=>ks.fromServerFormat(ne)));return new Oa(d,m,C,t,o)}return new qa(d,m,t,o)}if(e.delete){const d=Ia(i,e.delete);return new mu(d,t)}if(e.verify){const d=Ia(i,e.verify);return new ed(d,t)}return sr()}function Vd(i,e){return{documents:[Js(i,e.path)]}}function Ud(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Js(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Js(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(Q){if(0===Q.length)return;const ne=Q.map(Ue=>function(ht){if("=="===ht.op){if(al(ht.value))return{unaryFilter:{field:K(ht.field),op:"IS_NAN"}};if(gc(ht.value))return{unaryFilter:{field:K(ht.field),op:"IS_NULL"}}}else if("!="===ht.op){if(al(ht.value))return{unaryFilter:{field:K(ht.field),op:"IS_NOT_NAN"}};if(gc(ht.value))return{unaryFilter:{field:K(ht.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K(ht.field),op:x(ht.op),value:ht.value}}}(Ue));return 1===ne.length?ne[0]:{compositeFilter:{op:"AND",filters:ne}}}(e.filters);d&&(t.structuredQuery.where=d);const m=function(Q){if(0!==Q.length)return Q.map(ne=>{return{field:K((Ue=ne).field),direction:_(Ue.dir)};var Ue})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const C=(ne=e.limit,i.N||Fs(ne)?ne:{value:ne});var ne,k,Q;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(Q=e.endAt).inclusive,values:Q.position}),t}function Tc(i){let e=yo(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){kr(1===o);const Ue=t.from[0];Ue.allDescendants?d=Ue.collectionId:e=e.child(Ue.collectionId)}let m=[];t.where&&(m=p(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(Ue=>{return new Ea(ge((ht=Ue).field),function(zt){switch(zt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ht.direction));var ht}));let k=null;t.limit&&(k=function(Ue){let ht;return ht="object"==typeof Ue?Ue.value:Ue,Fs(ht)?null:ht}(t.limit));let Q=null;var Ue;t.startAt&&(Q=new va((Ue=t.startAt).values||[],!!Ue.before));let ne=null;return t.endAt&&(ne=function(Ue){return new va(Ue.values||[],!Ue.before)}(t.endAt)),dl(e,d,C,m,k,"F",Q,ne)}function p(i){return i?void 0!==i.unaryFilter?[Xt(i)]:void 0!==i.fieldFilter?[wt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>p(e)).reduce((e,t)=>e.concat(t)):sr():[]}function _(i){return tc[i]}function x(i){return _u[i]}function K(i){return{fieldPath:i.canonicalString()}}function ge(i){return ks.fromServerFormat(i.fieldPath)}function wt(i){return Xs.create(ge(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sr()}}(i.fieldFilter.op),i.fieldFilter.value)}function Xt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=ge(i.unaryFilter.field);return Xs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ge(i.unaryFilter.field);return Xs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ge(i.unaryFilter.field);return Xs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ge(i.unaryFilter.field);return Xs.create(d,"!=",{nullValue:"NULL_VALUE"});default:return sr()}}function zn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mr(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function yr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=gs(e)),e=$r(i.get(t),e);return gs(e)}function $r(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const m=i.charAt(d);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function gs(i){return i+"\x01\x01"}function Ui(i){const e=i.length;if(kr(e>=2),2===e)return kr("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),yi.emptyPath();const t=e-2,o=[];let d="";for(let m=0;m<e;){const C=i.indexOf("\x01",m);switch((C<0||C>t)&&sr(),i.charAt(C+1)){case"\x01":const k=i.substring(m,C);let Q;0===d.length?Q=k:(d+=k,Q=d,d=""),o.push(Q);break;case"\x10":d+=i.substring(m,C),d+="\0";break;case"\x11":d+=i.substring(m,C+1);break;default:sr()}m=C+2}return new yi(o)}const Zl=["userId","batchId"];function Xl(i,e){return[i,yr(e)]}function bu(i,e,t){return[i,yr(e),t]}const sd={},jd=["prefixPath","collectionGroup","readTime","documentId"],Ol=["prefixPath","collectionGroup","documentId"],Sc=["collectionGroup","readTime","prefixPath","documentId"],od=["canonicalId","targetId"],ad=["targetId","path"],Ac=["path","targetId"],Ah=["collectionId","parent"],ld=["indexId","uid"],xh=["uid","sequenceNumber"],xp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Rp=["indexId","uid","orderedDocumentKey"],Mp=["userId","collectionPath","documentId"],Tf=["userId","collectionPath","largestBatchId"],Rh=["userId","collectionGroup","largestBatchId"],Mh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oh=[...Mh,"documentOverlays"],Sf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Op=[...Sf,"indexConfiguration","indexState","indexEntries"],Fa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ph{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class tn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tn((o,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,d)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tn?t:tn.resolve(t)}catch(t){return tn.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tn.reject(t)}static resolve(e){return new tn((t,o)=>{t(e)})}static reject(e){return new tn((t,o)=>{o(e)})}static waitFor(e){return new tn((t,o)=>{let d=0,m=0,C=!1;e.forEach(k=>{++d,k.next(()=>{++m,C&&m===d&&t()},Q=>o(Q))}),C=!0,m===d&&t()})}static or(e){let t=tn.resolve(!1);for(const o of e)t=t.next(d=>d?tn.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,m)=>{o.push(t.call(this,d,m))}),this.waitFor(o)}}class xc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new A,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new wu(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const d=ud(o.target.error);this.At.reject(new wu(e,d))}}static open(e,t,o,d){try{return new xc(t,e.transaction(d,o))}catch(m){throw new wu(t,m)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(xn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xf(t)}}class Za{constructor(e,t,o){this.name=e,this.version=t,this.bt=o,12.2===Za.Vt((0,mt.z$)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xn("SimpleDb","Removing database:",e),Iu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,mt.hl)())return!1;if(Za.St())return!0;const e=(0,mt.z$)(),t=Za.Vt(e),o=0<t&&t<10,d=Za.Dt(e),m=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(xn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=C=>{o(C.target.result)},m.onblocked=()=>{d(new wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=C=>{const k=C.target.error;d("VersionError"===k.name?new R(Ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new R(Ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new wu(e,k))},m.onupgradeneeded=C=>{xn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.bt.kt(C.target.result,m.transaction,C.oldVersion,t.version).next(()=>{xn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var m=this;return(0,ve.Z)(function*(){const C="readonly"===t;let k=0;for(;;){++k;try{m.db=yield m.Nt(e);const Q=xc.open(m.db,e,C?"readonly":"readwrite",o),ne=d(Q).next(Ue=>(Q.Pt(),Ue)).catch(Ue=>(Q.abort(Ue),tn.reject(Ue))).toPromise();return ne.catch(()=>{}),yield Q.Rt,ne}catch(Q){const ne="FirebaseError"!==Q.name&&k<3;if(xn("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ne),m.close(),!ne)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Af{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Iu(this.Ft.delete())}}class wu extends R{constructor(e,t){super(Ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rc(i){return"IndexedDbTransactionError"===i.name}class xf{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(xn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(xn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Iu(o)}add(e){return xn("SimpleDb","ADD",this.store.name,e,e),Iu(this.store.add(e))}get(e){return Iu(this.store.get(e)).next(t=>(void 0===t&&(t=null),xn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xn("SimpleDb","DELETE",this.store.name,e),Iu(this.store.delete(e))}count(){return xn("SimpleDb","COUNT",this.store.name),Iu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),m=[];return this.Kt(d,(C,k)=>{m.push(k)}).next(()=>m)}{const d=this.store.getAll(o.range);return new tn((m,C)=>{d.onerror=k=>{C(k.target.error)},d.onsuccess=k=>{m(k.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new tn((d,m)=>{o.onerror=C=>{m(C.target.error)},o.onsuccess=C=>{d(C.target.result)}})}Qt(e,t){xn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const d=this.cursor(o);return this.Kt(d,(m,C,k)=>k.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.Kt(d,t)}zt(e){const t=this.cursor({});return new tn((o,d)=>{t.onerror=m=>{const C=ud(m.target.error);d(C)},t.onsuccess=m=>{const C=m.target.result;C?e(C.primaryKey,C.value).next(k=>{k?C.continue():o()}):o()}})}Kt(e,t){const o=[];return new tn((d,m)=>{e.onerror=C=>{m(C.target.error)},e.onsuccess=C=>{const k=C.target.result;if(!k)return void d();const Q=new Af(k),ne=t(k.primaryKey,k.value,Q);if(ne instanceof tn){const Ue=ne.catch(ht=>(Q.done(),tn.reject(ht)));o.push(Ue)}Q.isDone?d():null===Q.Lt?k.continue():k.continue(Q.Lt)}}).next(()=>tn.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Iu(i){return new tn((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=ud(o.target.error);t(d)}})}let Rf=!1;function ud(i){const e=Za.Vt((0,mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new R("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rf||(Rf=!0,setTimeout(()=>{throw o},0)),o}}return i}class kh extends Ph{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function no(i,e){const t=$n(i);return Za.xt(t.Ht,e)}class Rc{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&gu(m,e,o[d])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Nd(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Nd(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),d=o;this.applyToLocalView(d),o.isValidDocument()||d.convertToNoDocument(Lr.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ti())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(t,o)=>Fd(t,o))&&lo(this.baseMutations,e.baseMutations,(t,o)=>Fd(t,o))}}class Hd{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){kr(e.mutations.length===o.length);let d=Cf;const m=e.mutations;for(let C=0;C<m.length;C++)d=d.insert(m[C].key,o[C].version);return new Hd(e,t,o,d)}}class cd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ql{constructor(e,t,o,d,m=Lr.min(),C=Lr.min(),k=Ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=k}withSequenceNumber(e){return new Ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gd{constructor(e){this.Jt=e}}function Mf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:vu(d=i.Jt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ml(d,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Mc(e.version)};else{if(!e.isUnknownDocument())return sr();o.unknownDocument={path:t.path.toArray(),version:Mc(e.version)}}var d,m;return o}function zd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Mc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ic(i){const e=new Yi(i.seconds,i.nanoseconds);return Lr.fromTimestamp(e)}function sc(i,e){const t=(e.baseMutations||[]).map(m=>Na(i.Jt,m));for(let m=0;m<e.mutations.length-1;++m){const C=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(C.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>Na(i.Jt,m)),d=Yi.fromMillis(e.localWriteTimeMs);return new Rc(e.batchId,d,t,o)}function oc(i){const e=ic(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ic(i.lastLimboFreeSnapshotVersion):Lr.min();let o;var d;return void 0!==i.query.documents?(kr(1===(d=i.query).documents.length),o=ra(Al(yo(d.documents[0])))):o=ra(Tc(i.query)),new Ql(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Ys.fromBase64String(i.resumeToken))}function Wd(i,e){const t=Mc(e.snapshotVersion),o=Mc(e.lastLimboFreeSnapshotVersion);let d;d=uu(e.target)?Vd(i.Jt,e.target):Ud(i.Jt,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Of(i){const e=Tc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Zc(e,e.limit,"L"):e}function qd(i,e){return new cd(e.largestBatchId,Na(i.Jt,e.overlayMutation))}function Pf(i,e){const t=e.path.lastSegment();return[i,yr(e.path.popLast()),t]}class kf{getBundleMetadata(e,t){return Jl(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:ic(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Jl(e).put({bundleId:(o=t).id,createTime:Mc(Vs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Do(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Of(d.bundledQuery),readTime:ic(d.readTime)};var d})}saveNamedQuery(e,t){return Do(e).put({name:(o=t).name,readTime:Mc(Vs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Jl(i){return no(i,"bundles")}function Do(i){return no(i,"namedQueries")}class Is{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Is(e,t.uid||"")}getOverlay(e,t){return eu(e).get(Pf(this.userId,t)).next(o=>o?qd(this.M,o):null)}saveOverlays(e,t,o){const d=[];return o.forEach((m,C)=>{const k=new cd(t,C);d.push(this.Xt(e,k))}),tn.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(C=>d.add(yr(C.getCollectionPath())));const m=[];return d.forEach(C=>{const k=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);m.push(eu(e).Qt("collectionPathOverlayIndex",k))}),tn.waitFor(m)}getOverlaysForCollection(e,t,o){const d=Qu(),m=yr(t),C=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return eu(e).qt("collectionPathOverlayIndex",C).next(k=>{for(const Q of k){const ne=qd(this.M,Q);d.set(ne.getKey(),ne)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const m=Qu();let C;const k=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eu(e).Wt({index:"collectionGroupOverlayIndex",range:k},(Q,ne,Ue)=>{const ht=qd(this.M,ne);m.size()<d||ht.largestBatchId===C?(m.set(ht.getKey(),ht),C=ht.largestBatchId):Ue.done()}).next(()=>m)}Xt(e,t){return eu(e).put(function(o,d,m){const[C,k,Q]=Pf(d,m.mutation.key);return{userId:d,collectionPath:k,documentId:Q,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Eu(o.Jt,m.mutation)}}(this.M,this.userId,t))}}function eu(i){return no(i,"documentOverlays")}class Cu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Bi(e.integerValue));else if("doubleValue"in e){const o=Bi(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),jo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ha(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?W(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):sr()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const d of Object.keys(o))this.re(d,t),this.te(o[d],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const d of o)this.te(d,t)}ae(e,t){this.ne(t,37),Gn.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Pp(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Nf(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const m=Pp(255&t[d]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}Cu.fe=new Cu;class kp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const d=t.codePointAt(0);this._e(240|d>>>18),this._e(128|63&d>>>12),this._e(128|63&d>>>6),this._e(128|63&d)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const d=t.codePointAt(0);this.ge(240|d>>>18),this.ge(128|63&d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d)}}this.ye()}Te(e){const t=this.Ee(e),o=Nf(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Re(e){const t=this.Ee(e),o=Nf(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class Np{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Ff{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class hd{constructor(){this.De=new kp,this.Ce=new Np(this.De),this.xe=new Ff(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Du{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Du(this.indexId,this.documentKey,this.arrayValue,o)}}function Tu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=ai(i.arrayValue,e.arrayValue),0!==t?t:(t=ai(i.directionalValue,e.directionalValue),0!==t?t:Gn.comparator(i.documentKey,e.documentKey)))}function ai(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Nh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=fi(e);if(void 0!==t&&!this.Be(t))return!1;const o=Wr(e);let d=0,m=0;for(;d<o.length&&this.Be(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Fe){const C=o[d];if(!this.Le(this.Fe,C)||!this.Ue(this.Me[m++],C))return!1;++d}for(;d<o.length;++d){const C=o[d];if(m>=this.Me.length||!this.Ue(this.Me[m++],C))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Fh{constructor(){this.qe=new Su}addToCollectionParentIndex(e,t){return this.qe.add(t),tn.resolve()}getCollectionParents(e,t){return tn.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return tn.resolve()}deleteFieldIndex(e,t){return tn.resolve()}getDocumentsMatchingTarget(e,t){return tn.resolve(null)}getFieldIndex(e,t){return tn.resolve(null)}getFieldIndexes(e,t){return tn.resolve([])}getNextCollectionGroupToUpdate(e){return tn.resolve(null)}updateCollectionGroup(e,t,o){return tn.resolve()}updateIndexEntries(e,t){return tn.resolve()}}class Su{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new ps(yi.comparator),m=!d.has(o);return this.index[t]=d.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new ps(yi.comparator)).toArray()}}const tu=new Uint8Array(0);class Xa{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Su,this.Ge=new Pa(o=>Sl(o),(o,d)=>ta(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const m={collectionId:o,parent:yr(d)};return Lh(e).put(m)}return tn.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[Qo(t),""],!1,!0);return Lh(e).qt(d).next(m=>{for(const C of m){if(C.collectionId!==t)break;o.push(Ui(C.parent))}return o})}addFieldIndex(e,t){const o=ac(e),d={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var m;return delete d.indexId,o.add(d).next()}deleteFieldIndex(e,t){const o=ac(e),d=La(e),m=fd(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=fd(e);let d=!0;const m=new Map;return tn.forEach(this.Qe(t),C=>this.getFieldIndex(e,C).next(k=>{d&&(d=!!k),m.set(C,k)})).next(()=>{if(d){let C=Ti();const k=[];return tn.forEach(m,(Q,ne)=>{var Ue;xn("IndexedDbIndexManager",`Using index ${Ue=Q,`id=${Ue.indexId}|cg=${Ue.collectionGroup}|f=${Ue.fields.map(Xi=>`${Xi.fieldPath}:${Xi.kind}`).join(",")}`} to execute ${Sl(t)}`);const ht=function(Xi,xo){const Hs=fi(xo);if(void 0===Hs)return null;for(const io of ul(Xi,Hs.fieldPath))switch(io.op){case"array-contains-any":return io.value.arrayValue.values||[];case"array-contains":return[io.value]}return null}(ne,Q),zt=function(Xi,xo){const Hs=new Map;for(const io of Wr(xo))for(const Da of ul(Xi,io.fieldPath))switch(Da.op){case"==":case"in":Hs.set(io.fieldPath.canonicalString(),Da.value);break;case"not-in":case"!=":return Hs.set(io.fieldPath.canonicalString(),Da.value),Array.from(Hs.values())}return null}(ne,Q),bn=function(Xi,xo){const Hs=[];let io=!0;for(const Da of Wr(xo)){const xd=0===Da.kind?Yc(Xi,Da.fieldPath,Xi.startAt):Gu(Xi,Da.fieldPath,Xi.startAt);if(!xd.value)return null;Hs.push(xd.value),io&&(io=xd.inclusive)}return new va(Hs,io)}(ne,Q),Sn=function(Xi,xo){const Hs=[];let io=!0;for(const Da of Wr(xo)){const xd=0===Da.kind?Gu(Xi,Da.fieldPath,Xi.endAt):Yc(Xi,Da.fieldPath,Xi.endAt);if(!xd.value)return null;Hs.push(xd.value),io&&(io=xd.inclusive)}return new va(Hs,io)}(ne,Q),dr=this.je(Q,ne,bn),hi=this.je(Q,ne,Sn),js=this.We(Q,ne,zt),uo=this.ze(Q.indexId,ht,dr,!!bn&&bn.inclusive,hi,!!Sn&&Sn.inclusive,js);return tn.forEach(uo,Xi=>o.Gt(Xi,t.limit).next(xo=>{xo.forEach(Hs=>{const io=Gn.fromSegments(Hs.documentKey);C.has(io)||(C=C.add(io),k.push(io))})}))}).next(()=>k)}return tn.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,o,d,m,C,k){const Q=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=m?m.length:1),ne=Q/(null!=t?t.length:1),Ue=[];for(let ht=0;ht<Q;++ht){const zt=t?this.He(t[ht/ne]):tu,bn=o?this.Je(e,zt,o[ht%ne],d):this.Ye(e),Sn=m?this.Xe(e,zt,m[ht%ne],C):this.Ye(e+1);Ue.push(...this.createRange(bn,Sn,k.map(dr=>this.Je(e,zt,dr,!0))))}return Ue}Je(e,t,o,d){const m=new Du(e,Gn.empty(),t,o);return d?m:m.ke()}Xe(e,t,o,d){const m=new Du(e,Gn.empty(),t,o);return d?m.ke():m}Ye(e){return new Du(e,Gn.empty(),tu,tu)}getFieldIndex(e,t){const o=new Nh(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(m=>{const C=m.filter(k=>o.$e(k));return C.sort((k,Q)=>Q.fields.length-k.fields.length),C.length>0?C[0]:null})}Ze(e,t){const o=new hd;for(const d of Wr(e)){const m=t.data.field(d.fieldPath);if(null==m)return null;const C=o.Ne(d.kind);Cu.fe.Zt(m,C)}return o.Se()}He(e){const t=new hd;return Cu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new hd;return Cu.fe.Zt(ol(this.databaseId,t),o.Ne(function(d){const m=Wr(d);return 0===m.length?0:m[m.length-1].kind}(e))),o.Se()}We(e,t,o){if(null===o)return[];let d=[];d.push(new hd);let m=0;for(const C of Wr(e)){const k=o[m++];for(const Q of d)if(this.en(t,C.fieldPath)&&xa(k))d=this.nn(d,C,k);else{const ne=Q.Ne(C.kind);Cu.fe.Zt(k,ne)}}return this.sn(d)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const d=[...e],m=[];for(const C of o.arrayValue.values||[])for(const k of d){const Q=new hd;Q.seed(k.Se()),Cu.fe.Zt(C,Q.Ne(t.kind)),m.push(Q)}return m}en(e,t){return!!e.filters.find(o=>o instanceof Xs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=ac(e),d=La(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(m=>{const C=[];return tn.forEach(m,k=>d.get([k.indexId,this.uid]).next(Q=>{C.push(function(ne,Ue){const ht=Ue?new li(Ue.sequenceNumber,new mo(ic(Ue.readTime),new Gn(Ui(Ue.documentKey)),Ue.largestBatchId)):li.empty(),zt=ne.fields.map(([bn,Sn])=>new us(ks.fromServerFormat(bn),Sn));return new Rr(ne.indexId,ne.collectionGroup,zt,ht)}(k,Q))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const m=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==m?m:Vr(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=ac(e),m=La(e);return this.rn(e).next(C=>d.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>tn.forEach(k,Q=>{return m.put({indexId:Q.indexId,uid:this.user.uid||"",sequenceNumber:C,readTime:Mc((zt=o).readTime),documentKey:yr(zt.documentKey.path),largestBatchId:zt.largestBatchId});var zt})))}updateIndexEntries(e,t){const o=new Map;return tn.forEach(t,(d,m)=>{const C=o.get(d.collectionGroup);return(C?tn.resolve(C):this.getFieldIndexes(e,d.collectionGroup)).next(k=>(o.set(d.collectionGroup,k),tn.forEach(k,Q=>this.on(e,d,Q).next(ne=>{const Ue=this.un(m,Q);return ne.isEqual(Ue)?tn.resolve():this.an(e,m,Q,ne,Ue)}))))})}cn(e,t,o,d){return fd(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,d){return fd(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const d=fd(e);let m=new ps(Tu);return d.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(C,k)=>{m=m.add(new Du(o.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>m)}un(e,t){let o=new ps(Tu);const d=this.Ze(t,e);if(null==d)return o;const m=fi(t);if(null!=m){const C=e.data.field(m.fieldPath);if(xa(C))for(const k of C.arrayValue.values||[])o=o.add(new Du(t.indexId,e.key,this.He(k),d))}else o=o.add(new Du(t.indexId,e.key,tu,d));return o}an(e,t,o,d,m){xn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(k,Q,ne,Ue,ht){const zt=k.getIterator(),bn=Q.getIterator();let Sn=Yl(zt),dr=Yl(bn);for(;Sn||dr;){let hi=!1,js=!1;if(Sn&&dr){const uo=ne(Sn,dr);uo<0?js=!0:uo>0&&(hi=!0)}else null!=Sn?js=!0:hi=!0;hi?(Ue(dr),dr=Yl(bn)):js?(ht(Sn),Sn=Yl(zt)):(Sn=Yl(zt),dr=Yl(bn))}}(d,m,Tu,k=>{C.push(this.cn(e,t,o,k))},k=>{C.push(this.hn(e,t,o,k))}),tn.waitFor(C)}rn(e){let t=1;return La(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,m)=>{m.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,k)=>Tu(C,k)).filter((C,k,Q)=>!k||0!==Tu(C,Q[k-1]));const d=[];d.push(e);for(const C of o){const k=Tu(C,e),Q=Tu(C,t);if(0===k)d[0]=e.ke();else if(k>0&&Q<0)d.push(C),d.push(C.ke());else if(Q>0)break}d.push(t);const m=[];for(let C=0;C<d.length;C+=2)m.push(IDBKeyRange.bound([d[C].indexId,this.uid,d[C].arrayValue,d[C].directionalValue,tu,[]],[d[C+1].indexId,this.uid,d[C+1].arrayValue,d[C+1].directionalValue,tu,[]]));return m}}function Lh(i){return no(i,"collectionParents")}function fd(i){return no(i,"indexEntries")}function ac(i){return no(i,"indexConfiguration")}function La(i){return no(i,"indexState")}const pd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ua{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yd(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),m=[],C=IDBKeyRange.only(t.batchId);let k=0;const Q=o.Wt({range:C},(Ue,ht,zt)=>(k++,zt.delete()));m.push(Q.next(()=>{kr(1===k)}));const ne=[];for(const Ue of t.mutations){const ht=bu(e,Ue.key.path,t.batchId);m.push(d.delete(ht)),ne.push(Ue.key)}return tn.waitFor(m).next(()=>ne)}function $h(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw sr();e=i.noDocument}return JSON.stringify(e).length}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(41943040,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class gd{constructor(e,t,o,d){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=d,this.ln={}}static Yt(e,t,o,d){kr(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new gd(m,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).Wt({index:"userMutationsIndex",range:o},(d,m,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const m=Pl(e),C=_l(e);return C.add({}).next(k=>{kr("number"==typeof k);const Q=new Rc(k,t,o,d),ne=function(zt,bn,Sn){const dr=Sn.baseMutations.map(js=>Eu(zt.Jt,js)),hi=Sn.mutations.map(js=>Eu(zt.Jt,js));return{userId:bn,batchId:Sn.batchId,localWriteTimeMs:Sn.localWriteTime.toMillis(),baseMutations:dr,mutations:hi}}(this.M,this.userId,Q),Ue=[];let ht=new ps((zt,bn)=>Vr(zt.canonicalString(),bn.canonicalString()));for(const zt of d){const bn=bu(this.userId,zt.key.path,k);ht=ht.add(zt.key.path.popLast()),Ue.push(C.put(ne)),Ue.push(m.put(bn,sd))}return ht.forEach(zt=>{Ue.push(this.indexManager.addToCollectionParentIndex(e,zt))}),e.addOnCommittedListener(()=>{this.ln[k]=Q.keys()}),tn.waitFor(Ue).next(()=>Q)})}lookupMutationBatch(e,t){return _l(e).get(t).next(o=>o?(kr(o.userId===this.userId),sc(this.M,o)):null)}fn(e,t){return this.ln[t]?tn.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.ln[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return _l(e).Wt({index:"userMutationsIndex",range:d},(C,k,Q)=>{k.userId===this.userId&&(kr(k.batchId>=o),m=sc(this.M,k)),Q.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return _l(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(d,m,C)=>{o=m.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).qt("userMutationsIndex",t).next(o=>o.map(d=>sc(this.M,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Xl(this.userId,t.path),d=IDBKeyRange.lowerBound(o),m=[];return Pl(e).Wt({range:d},(C,k,Q)=>{const[ne,Ue,ht]=C,zt=Ui(Ue);if(ne===this.userId&&t.path.isEqual(zt))return _l(e).get(ht).next(bn=>{if(!bn)throw sr();kr(bn.userId===this.userId),m.push(sc(this.M,bn))});Q.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ps(Vr);const d=[];return t.forEach(m=>{const C=Xl(this.userId,m.path),k=IDBKeyRange.lowerBound(C),Q=Pl(e).Wt({range:k},(ne,Ue,ht)=>{const[zt,bn,Sn]=ne,dr=Ui(bn);zt===this.userId&&m.path.isEqual(dr)?o=o.add(Sn):ht.done()});d.push(Q)}),tn.waitFor(d).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,m=Xl(this.userId,o),C=IDBKeyRange.lowerBound(m);let k=new ps(Vr);return Pl(e).Wt({range:C},(Q,ne,Ue)=>{const[ht,zt,bn]=Q,Sn=Ui(zt);ht===this.userId&&o.isPrefixOf(Sn)?Sn.length===d&&(k=k.add(bn)):Ue.done()}).next(()=>this.dn(e,k))}dn(e,t){const o=[],d=[];return t.forEach(m=>{d.push(_l(e).get(m).next(C=>{if(null===C)throw sr();kr(C.userId===this.userId),o.push(sc(this.M,C))}))}),tn.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Yd(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),tn.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tn.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Pl(e).Wt({range:o},(m,C,k)=>{if(m[0]===this.userId){const Q=Ui(m[1]);d.push(Q)}else k.done()}).next(()=>{kr(0===d.length)})})}containsKey(e,t){return Fp(e,this.userId,t)}wn(e){return Kd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Fp(i,e,t){const o=Xl(e,t.path),d=o[1],m=IDBKeyRange.lowerBound(o);let C=!1;return Pl(i).Wt({range:m,jt:!0},(k,Q,ne)=>{const[Ue,ht,zt]=k;Ue===e&&ht===d&&(C=!0),ne.done()}).next(()=>C)}function _l(i){return no(i,"mutations")}function Pl(i){return no(i,"documentMutations")}function Kd(i){return no(i,"mutationQueues")}class nu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new nu(0)}static yn(){return new nu(-1)}}class Bh{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new nu(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Lr.fromTimestamp(new Yi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.In(e,d)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>md(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(kr(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let d=0;const m=[];return md(e).Wt((C,k)=>{const Q=oc(k);Q.sequenceNumber<=t&&null===o.get(Q.targetId)&&(d++,m.push(this.removeTargetData(e,Q)))}).next(()=>tn.waitFor(m)).next(()=>d)}forEachTarget(e,t){return md(e).Wt((o,d)=>{const m=oc(d);t(m)})}pn(e){return Lf(e).get("targetGlobalKey").next(t=>(kr(null!==t),t))}In(e,t){return Lf(e).put("targetGlobalKey",t)}Tn(e,t){return md(e).put(Wd(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Sl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return md(e).Wt({range:d,index:"queryTargetsIndex"},(C,k,Q)=>{const ne=oc(k);ta(t,ne.target)&&(m=ne,Q.done())}).next(()=>m)}addMatchingKeys(e,t,o){const d=[],m=Au(e);return t.forEach(C=>{const k=yr(C.path);d.push(m.put({targetId:o,path:k})),d.push(this.referenceDelegate.addReference(e,o,C))}),tn.waitFor(d)}removeMatchingKeys(e,t,o){const d=Au(e);return tn.forEach(t,m=>{const C=yr(m.path);return tn.waitFor([d.delete([o,C]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=Au(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=Au(e);let m=Ti();return d.Wt({range:o,jt:!0},(C,k,Q)=>{const ne=Ui(C[1]),Ue=new Gn(ne);m=m.add(Ue)}).next(()=>m)}containsKey(e,t){const o=yr(t.path),d=IDBKeyRange.bound([o],[Qo(o)],!1,!0);let m=0;return Au(e).Wt({index:"documentTargetsIndex",jt:!0,range:d},([C,k],Q,ne)=>{0!==C&&(m++,ne.done())}).next(()=>m>0)}Et(e,t){return md(e).get(t).next(o=>o?oc(o):null)}}function md(i){return no(i,"targets")}function Lf(i){return no(i,"targetGlobal")}function Au(i){return no(i,"targetDocuments")}function lc(i){return h.apply(this,arguments)}function h(){return h=(0,ve.Z)(function*(i){if(i.code!==Ht.FAILED_PRECONDITION||i.message!==Fa)throw i;xn("LocalStore","Unexpectedly lost primary lease")}),h.apply(this,arguments)}function u([i,e],[t,o]){const d=Vr(i,t);return 0===d?Vr(e,o):d}class c{constructor(e){this.An=e,this.buffer=new ps(u),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();u(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;xn("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ve.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(d){rc(d)?xn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield lc(d)}yield t.Sn(e)}))}}class T{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return tn.resolve(qn.A);const o=new c(t);return this.Dn.forEachTarget(e,d=>o.bn(d.sequenceNumber)).next(()=>this.Dn.xn(e,d=>o.bn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xn("LruGarbageCollector","Garbage collection skipped; disabled"),tn.resolve(pd)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(xn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pd):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,d,m,C,k,Q,ne;const Ue=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ht=>(ht>this.params.maximumSequenceNumbersToCollect?(xn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ht}`),d=this.params.maximumSequenceNumbersToCollect):d=ht,C=Date.now(),this.nthSequenceNumber(e,d))).next(ht=>(o=ht,k=Date.now(),this.removeTargets(e,o,t))).next(ht=>(m=ht,Q=Date.now(),this.removeOrphanedDocuments(e,o))).next(ht=>(ne=Date.now(),ao()<=dt.in.DEBUG&&xn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-Ue}ms\n\tDetermined least recently used ${d} in `+(k-C)+`ms\n\tRemoved ${m} targets in `+(Q-k)+`ms\n\tRemoved ${ht} documents in `+(ne-Q)+`ms\nTotal Duration: ${ne-Ue}ms`),tn.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:ht})))}}class O{constructor(e,t){this.db=e,this.garbageCollector=new T(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,d)=>t(d))}addReference(e,t,o){return z(e,o)}removeReference(e,t,o){return z(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return z(e,t)}On(e,t){return function(o,d){let m=!1;return Kd(o).zt(C=>Fp(o,C,d).next(k=>(k&&(m=!0),tn.resolve(!k)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let m=0;return this.Mn(e,(C,k)=>{if(k<=t){const Q=this.On(e,C).next(ne=>{if(!ne)return m++,o.getEntry(e,C).next(()=>(o.removeEntry(C,Lr.min()),Au(e).delete([0,yr(C.path)])))});d.push(Q)}}).next(()=>tn.waitFor(d)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return z(e,t)}Mn(e,t){const o=Au(e);let d,m=qn.A;return o.Wt({index:"documentTargetsIndex"},([C,k],{path:Q,sequenceNumber:ne})=>{0===C?(m!==qn.A&&t(new Gn(Ui(d)),m),m=ne,d=Q):m=qn.A}).next(()=>{m!==qn.A&&t(new Gn(Ui(d)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function z(i,e){return Au(i).put((o=i.currentSequenceNumber,{targetId:0,path:yr(e.path),sequenceNumber:o}));var o}class he{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?tn.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Re{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Bt(e).put(o)}removeEntry(e,t,o){return Bt(e).delete(function(d,m){const C=d.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],zd(m),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=or.newInvalidDocument(t);return Bt(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gn(t))},(d,m)=>{o=this.$n(t,m)}).next(()=>o)}Bn(e,t){let o={size:0,document:or.newInvalidDocument(t)};return Bt(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(gn(t))},(d,m)=>{o={document:this.$n(t,m),size:$h(m)}}).next(()=>o)}getEntries(e,t){let o=Fo();return this.Ln(e,t,(d,m)=>{const C=this.$n(d,m);o=o.insert(d,C)}).next(()=>o)}Un(e,t){let o=Fo(),d=new Ls(Gn.comparator);return this.Ln(e,t,(m,C)=>{const k=this.$n(m,C);o=o.insert(m,k),d=d.insert(m,$h(C))}).next(()=>({documents:o,qn:d}))}Ln(e,t,o){if(t.isEmpty())return tn.resolve();let d=new ps(Gr);t.forEach(Q=>d=d.add(Q));const m=IDBKeyRange.bound(gn(d.first()),gn(d.last())),C=d.getIterator();let k=C.getNext();return Bt(e).Wt({index:"documentKeyIndex",range:m},(Q,ne,Ue)=>{const ht=Gn.fromSegments([...ne.prefixPath,ne.collectionGroup,ne.documentId]);for(;k&&Gr(k,ht)<0;)o(k,null),k=C.getNext();k&&k.isEqual(ht)&&(o(k,ne),k=C.hasNext()?C.getNext():null),k?Ue.Ut(gn(k)):Ue.done()}).next(()=>{for(;k;)o(k,null),k=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),zd(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bt(e).qt(IDBKeyRange.bound(d,m,!0)).next(C=>{let k=Fo();for(const Q of C){const ne=this.$n(Gn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);k=k.insert(ne.key,ne)}return k})}getAllFromCollectionGroup(e,t,o,d){let m=Fo();const C=_r(t,o),k=_r(t,mo.max());return Bt(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,k,!0)},(Q,ne,Ue)=>{const ht=this.$n(Gn.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);m=m.insert(ht.key,ht),m.size===d&&Ue.done()}).next(()=>m)}newChangeBuffer(e){return new et(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wt(e).get("remoteDocumentGlobalKey").next(t=>(kr(!!t),t))}Fn(e,t){return Wt(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function dd(i,e){let t;if(e.document)t=_o(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Gn.fromSegments(e.noDocument.path),d=ic(e.noDocument.readTime);t=or.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return sr();{const o=Gn.fromSegments(e.unknownDocument.path),d=ic(e.unknownDocument.version);t=or.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Yi(o[0],o[1]);return Lr.fromTimestamp(d)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(Lr.min()))return o}return or.newInvalidDocument(e)}}class et extends he{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Pa(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new ps((m,C)=>Vr(m.canonicalString(),C.canonicalString()));return this.changes.forEach((m,C)=>{const k=this.Gn.get(m);if(t.push(this.Kn.removeEntry(e,m,k.readTime)),C.isValidDocument()){const Q=Mf(this.Kn.M,C);d=d.add(m.path.popLast()),o+=$h(Q)-k.size,t.push(this.Kn.addEntry(e,m,Q))}else if(o-=k.size,this.trackRemovals){const Q=Mf(this.Kn.M,C.convertToNoDocument(Lr.min()));t.push(this.Kn.addEntry(e,m,Q))}}),d.forEach(m=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Kn.updateMetadata(e,o)),tn.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:d})=>(d.forEach((m,C)=>{this.Gn.set(m,{size:C,readTime:o.get(m).readTime})}),o))}}function Wt(i){return no(i,"remoteDocumentGlobal")}function Bt(i){return no(i,"remoteDocumentsV14")}function gn(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _r(i,e){const t=e.documentKey.path.toArray();return[i,zd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gr(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(d=Vr(t[m],o[m]),d)return d;return d=Vr(t.length,o.length),d||(d=Vr(t[t.length-2],o[o.length-2]),d||Vr(t[t.length-1],o[o.length-1]))}class rs{constructor(e){this.M=e}kt(e,t,o,d){const m=new xc("createOrUpgrade",t);var k;o<1&&d>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zl,{unique:!0}),k.createObjectStore("documentMutations"),To(e),function(k){k.createObjectStore("remoteDocuments")}(e));let C=tn.resolve();return o<3&&d>=3&&(0!==o&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),To(e)),C=C.next(()=>function(k){const Q=k.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lr.min().toTimestamp(),targetCount:0};return Q.put("targetGlobalKey",ne)}(m))),o<4&&d>=4&&(0!==o&&(C=C.next(()=>function(k,Q){return Q.store("mutations").qt().next(ne=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zl,{unique:!0});const Ue=Q.store("mutations"),ht=ne.map(zt=>Ue.put(zt));return tn.waitFor(ht)})}(e,m))),C=C.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(C=C.next(()=>this.Qn(m))),o<6&&d>=6&&(C=C.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.jn(m)))),o<7&&d>=7&&(C=C.next(()=>this.Wn(m))),o<8&&d>=8&&(C=C.next(()=>this.zn(e,m))),o<9&&d>=9&&(C=C.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(C=C.next(()=>this.Hn(m))),o<11&&d>=11&&(C=C.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(C=C.next(()=>{!function(k){const Q=k.createObjectStore("documentOverlays",{keyPath:Mp});Q.createIndex("collectionPathOverlayIndex",Tf,{unique:!1}),Q.createIndex("collectionGroupOverlayIndex",Rh,{unique:!1})}(e)})),o<13&&d>=13&&(C=C.next(()=>function(k){const Q=k.createObjectStore("remoteDocumentsV14",{keyPath:jd});Q.createIndex("documentKeyIndex",Ol),Q.createIndex("collectionGroupIndex",Sc)}(e)).next(()=>this.Jn(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(C=C.next(()=>{!function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:ld}).createIndex("sequenceNumberIndex",xh,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:xp}).createIndex("documentKeyIndex",Rp,{unique:!1})}(e)})),C}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,d)=>{t+=$h(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(d=>tn.forEach(d,m=>{const C=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",C).next(k=>tn.forEach(k,Q=>{kr(Q.userId===m.userId);const ne=sc(this.M,Q);return Yd(e,m.userId,ne).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const m=[];return o.Wt((C,k)=>{const Q=new yi(C),ne=[0,yr(Q)];m.push(t.get(ne).next(Ue=>Ue?tn.resolve():t.put({targetId:0,path:yr(Q),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>tn.waitFor(m))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Ah});const o=t.store("collectionParents"),d=new Su,m=C=>{if(d.add(C)){const k=C.lastSegment(),Q=C.popLast();return o.put({collectionId:k,parent:yr(Q)})}};return t.store("remoteDocuments").Wt({jt:!0},(C,k)=>{const Q=new yi(C);return m(Q.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([C,k,Q],ne)=>{const Ue=Ui(k);return m(Ue.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,d)=>{const m=oc(d),C=Wd(this.M,m);return t.put(C)})}Jn(e,t){const o=t.store("remoteDocuments"),d=[];return o.Wt((m,C)=>{const k=t.store("remoteDocumentsV14"),Q=(ne=C,ne.document?new Gn(yi.fromString(ne.document.name).popFirst(5)):ne.noDocument?Gn.fromSegments(ne.noDocument.path):ne.unknownDocument?Gn.fromSegments(ne.unknownDocument.path):sr()).path.toArray();var ne;const Ue={prefixPath:Q.slice(0,Q.length-2),collectionGroup:Q[Q.length-2],documentId:Q[Q.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};d.push(k.put(Ue))}).next(()=>tn.waitFor(d))}}function To(i){i.createObjectStore("targetDocuments",{keyPath:ad}).createIndex("documentTargetsIndex",Ac,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",od,{unique:!0}),i.createObjectStore("targetGlobal")}const xu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kl{constructor(e,t,o,d,m,C,k,Q,ne,Ue,ht=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=m,this.window=C,this.document=k,this.Xn=ne,this.Zn=Ue,this.ts=ht,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=zt=>Promise.resolve(),!kl.vt())throw new R(Ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new O(this,d),this.hs=t+"main",this.M=new Gd(Q),this.ls=new Za(this.hs,this.ts,new rs(this.M)),this.fs=new Bh(this.referenceDelegate,this.M),this.ds=new Re(this.M),this._s=new kf,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===Ue&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new R(Ht.FAILED_PRECONDITION,xu);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new qn(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,ve.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ve.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Oc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(rc(e))return xn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return $o(e).get("owner").next(t=>tn.resolve(this.bs(t)))}Vs(e){return Oc(e).delete(this.clientId)}vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=no(o,"clientMetadata");return d.qt().next(m=>{const C=e.Ds(m,18e5),k=m.filter(Q=>-1===C.indexOf(Q));return tn.forEach(k,Q=>d.delete(Q.clientId)).next(()=>k)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?tn.resolve(!0):$o(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new R(Ht.FAILED_PRECONDITION,xu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Oc(e).qt().next(o=>void 0===this.Ds(o,5e3).find(d=>{if(this.clientId!==d.clientId){const C=!this.inForeground&&d.inForeground,k=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||C&&k)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new kh(t,qn.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Oc(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return gd.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Xa(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Is.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){xn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",m=14===(C=this.ts)?Op:13===C?Sf:12===C?Oh:11===C?Mh:void sr();var C;let k;return this.ls.runTransaction(e,d,m,Q=>(k=new kh(Q,this.es?this.es.next():qn.A),"readwrite-primary"===t?this.Es(k).next(ne=>!!ne||this.As(k)).next(ne=>{if(!ne)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new R(Ht.FAILED_PRECONDITION,Fa);return o(k)}).next(ne=>this.Ps(k).next(()=>ne)):this.$s(k).next(()=>o(k)))).then(Q=>(k.raiseOnCommittedEvent(),Q))}$s(e){return $o(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new R(Ht.FAILED_PRECONDITION,xu)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $o(e).put("owner",t)}static vt(){return Za.vt()}Rs(e){const t=$o(e);return t.get("owner").next(o=>this.bs(o)?(xn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):tn.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(Ur(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return xn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ur("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $o(i){return no(i,"owner")}function Oc(i){return no(i,"clientMetadata")}function Lp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class um{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(d=>{for(const m of o)m.applyToLocalView(d);return d})}qs(e,t){e.forEach((o,d)=>{for(const m of t)m.applyToLocalView(d)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return Gn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.js(e,t.path):hu(t)?this.Ws(e,t,o):this.zs(e,t,o);var d}js(e,t){return this.Ls(e,new Gn(t)).next(o=>{let d=Ic();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}Ws(e,t,o){const d=t.collectionGroup;let m=Ic();return this.indexManager.getCollectionParents(e,d).next(C=>tn.forEach(C,k=>{const Q=(ne=t,Ue=k.child(d),new cl(Ue,null,ne.explicitOrderBy.slice(),ne.filters.slice(),ne.limit,ne.limitType,ne.startAt,ne.endAt));var ne,Ue;return this.zs(e,Q,o).next(ne=>{ne.forEach((Ue,ht)=>{m=m.insert(Ue,ht)})})}).next(()=>m))}zs(e,t,o){let d;return this.ds.getAllFromCollection(e,t.path,o).next(m=>(d=m,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(m=>{for(const C of m)for(const k of C.mutations){const Q=k.key;let ne=d.get(Q);null==ne&&(ne=or.newInvalidDocument(Q),d=d.insert(Q,ne)),Nd(k,ne,C.localWriteTime),ne.isFoundDocument()||(d=d.remove(Q))}}).next(()=>(d.forEach((m,C)=>{Wu(t,C)||(d=d.remove(m))}),d))}}class Vh{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=d}static Ys(e,t){let o=Ti(),d=Ti();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new Vh(e,t.fromCache,o,d)}}class $p{Xs(e){this.Zs=e}Qs(e,t,o,d){return 0===(m=t).filters.length&&null===m.limit&&null==m.startAt&&null==m.endAt&&(0===m.explicitOrderBy.length||1===m.explicitOrderBy.length&&m.explicitOrderBy[0].field.isKeyField())||o.isEqual(Lr.min())?this.ti(e,t):this.Zs.Ks(e,d).next(m=>{const C=this.ei(t,m);return(hl(t)||vc(t))&&this.ni(t.limitType,C,d,o)?this.ti(e,t):(ao()<=dt.in.DEBUG&&xn("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zu(t)),this.Zs.Qs(e,t,Ra(o,-1)).next(k=>(C.forEach(Q=>{k=k.insert(Q.key,Q)}),k)))});var m}ei(e,t){let o=new ps(Wa(e));return t.forEach((d,m)=>{Wu(e,m)&&(o=o.add(m))}),o}ni(e,t,o,d){if(o.size!==t.size)return!0;const m="F"===e?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}ti(e,t){return ao()<=dt.in.DEBUG&&xn("QueryEngine","Using full collection scan to execute query:",zu(t)),this.Zs.Qs(e,t,mo.min())}}class Bp{constructor(e,t,o,d){this.persistence=e,this.si=t,this.M=d,this.ii=new Ls(Vr),this.ri=new Pa(m=>Sl(m),ta),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(o)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new um(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function cm(i,e,t,o){return new Bp(i,e,t,o)}function uc(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,ve.Z)(function*(i,e){const t=$n(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.Bs.getAllMutationBatches(o).next(m=>(d=m,t.ai(e),t.Bs.getAllMutationBatches(o))).next(m=>{const C=[],k=[];let Q=Ti();for(const ne of d){C.push(ne.batchId);for(const Ue of ne.mutations)Q=Q.add(Ue.key)}for(const ne of m){k.push(ne.batchId);for(const Ue of ne.mutations)Q=Q.add(Ue.key)}return t.ci.Ks(o,Q).next(ne=>({hi:ne,removedBatchIds:C,addedBatchIds:k}))})})}),$f.apply(this,arguments)}function Qy(i,e){const t=$n(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),m=t.ui.newChangeBuffer({trackRemovals:!0});return function(C,k,Q,ne){const Ue=Q.batch,ht=Ue.keys();let zt=tn.resolve();return ht.forEach(bn=>{zt=zt.next(()=>ne.getEntry(k,bn)).next(Sn=>{const dr=Q.docVersions.get(bn);kr(null!==dr),Sn.version.compareTo(dr)<0&&(Ue.applyToRemoteDocument(Sn,Q),Sn.isValidDocument()&&(Sn.setReadTime(Q.commitVersion),ne.addEntry(Sn)))})}),zt.next(()=>C.Bs.removeMutationBatch(k,Ue))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.ci.Ks(o,d))})}function Bf(i){const e=$n(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Jy(i,e){const t=$n(i),o=e.snapshotVersion;let d=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const C=t.ui.newChangeBuffer({trackRemovals:!0});d=t.ii;const k=[];e.targetChanges.forEach((ne,Ue)=>{const ht=d.get(Ue);if(!ht)return;k.push(t.fs.removeMatchingKeys(m,ne.removedDocuments,Ue).next(()=>t.fs.addMatchingKeys(m,ne.addedDocuments,Ue)));let zt=ht.withSequenceNumber(m.currentSequenceNumber);var bn,Sn,dr;e.targetMismatches.has(Ue)?zt=zt.withResumeToken(Ys.EMPTY_BYTE_STRING,Lr.min()).withLastLimboFreeSnapshotVersion(Lr.min()):ne.resumeToken.approximateByteSize()>0&&(zt=zt.withResumeToken(ne.resumeToken,o)),d=d.insert(Ue,zt),Sn=zt,dr=ne,(0===(bn=ht).resumeToken.approximateByteSize()||Sn.snapshotVersion.toMicroseconds()-bn.snapshotVersion.toMicroseconds()>=3e8||dr.addedDocuments.size+dr.modifiedDocuments.size+dr.removedDocuments.size>0)&&k.push(t.fs.updateTargetData(m,zt))});let Q=Fo();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(m,ne))}),k.push(Vp(m,C,e.documentUpdates).next(ne=>{Q=ne})),!o.isEqual(Lr.min())){const ne=t.fs.getLastRemoteSnapshotVersion(m).next(Ue=>t.fs.setTargetsMetadata(m,m.currentSequenceNumber,o));k.push(ne)}return tn.waitFor(k).next(()=>C.apply(m)).next(()=>t.ci.Gs(m,Q)).next(()=>Q)}).then(m=>(t.ii=d,m))}function Vp(i,e,t){let o=Ti();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let m=Fo();return t.forEach((C,k)=>{const Q=d.get(C);k.isNoDocument()&&k.version.isEqual(Lr.min())?(e.removeEntry(C,k.readTime),m=m.insert(C,k)):!Q.isValidDocument()||k.version.compareTo(Q.version)>0||0===k.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(k),m=m.insert(C,k)):xn("LocalStore","Ignoring outdated watch update for ",C,". Current version:",Q.version," Watch version:",k.version)}),m})}function e_(i,e){const t=$n(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Zd(i,e){const t=$n(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.fs.getTargetData(o,e).next(m=>m?(d=m,tn.resolve(d)):t.fs.allocateTargetId(o).next(C=>(d=new Ql(e,C,0,o.currentSequenceNumber),t.fs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.ii.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.ii=t.ii.insert(o.targetId,o),t.ri.set(e,o.targetId)),o})}function Ru(i,e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,ve.Z)(function*(i,e,t){const o=$n(i),d=o.ii.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,C=>o.persistence.referenceDelegate.removeTarget(C,d)))}catch(C){if(!rc(C))throw C;xn("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.ii=o.ii.remove(e),o.ri.delete(d.target)}),Pc.apply(this,arguments)}function Xd(i,e,t){const o=$n(i);let d=Lr.min(),m=Ti();return o.persistence.runTransaction("Execute query","readonly",C=>function(k,Q,ne){const Ue=$n(k),ht=Ue.ri.get(ne);return void 0!==ht?tn.resolve(Ue.ii.get(ht)):Ue.fs.getTargetData(Q,ne)}(o,C,ra(e)).next(k=>{if(k)return d=k.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(C,k.targetId).next(Q=>{m=Q})}).next(()=>o.si.Qs(C,e,t?d:Lr.min(),t?m:Ti())).next(k=>(_d(o,qu(e),k),{documents:k,li:m})))}function yd(i,e){const t=$n(i),o=$n(t.fs),d=t.ii.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",m=>o.Et(m,e).next(C=>C?C.target:null))}function Qd(i,e){const t=$n(i),o=t.oi.get(e)||Lr.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.ui.getAllFromCollectionGroup(d,e,Ra(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(_d(t,e,d),d))}function _d(i,e,t){let o=Lr.min();t.forEach((d,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.oi.set(e,o)}function Vf(){return Vf=(0,ve.Z)(function*(i,e,t,o){const d=$n(i);let m=Ti(),C=Fo();for(const ne of t){const Ue=e.fi(ne.metadata.name);ne.document&&(m=m.add(Ue));const ht=e.di(ne);ht.setReadTime(e._i(ne.metadata.readTime)),C=C.insert(Ue,ht)}const k=d.ui.newChangeBuffer({trackRemovals:!0}),Q=yield Zd(d,(ne=o,ra(Al(yi.fromString(`__bundle__/docs/${ne}`)))));var ne;return d.persistence.runTransaction("Apply bundle documents","readwrite",ne=>Vp(ne,k,C).next(Ue=>(k.apply(ne),Ue)).next(Ue=>d.fs.removeMatchingKeysForTargetId(ne,Q.targetId).next(()=>d.fs.addMatchingKeys(ne,m,Q.targetId)).next(()=>d.ci.Gs(ne,Ue)).next(()=>Ue)))}),Vf.apply(this,arguments)}function dm(i,e){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,ve.Z)(function*(i,e,t=Ti()){const o=yield Zd(i,ra(Of(e.bundledQuery))),d=$n(i);return d.persistence.runTransaction("Save named query","readwrite",m=>{const C=Vs(e.readTime);if(o.snapshotVersion.compareTo(C)>=0)return d._s.saveNamedQuery(m,e);const k=o.withResumeToken(Ys.EMPTY_BYTE_STRING,C);return d.ii=d.ii.insert(k.targetId,k),d.fs.updateTargetData(m,k).next(()=>d.fs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>d.fs.addMatchingKeys(m,t,o.targetId)).next(()=>d._s.saveNamedQuery(m,e))})}),Uh.apply(this,arguments)}class Up{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return tn.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var o;return this.wi.set(t.id,{id:(o=t).id,version:o.version,createTime:Vs(o.createTime)}),tn.resolve()}getNamedQuery(e,t){return tn.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(o=t).name,query:Of(o.bundledQuery),readTime:Vs(o.readTime)}),tn.resolve();var o}}class hm{constructor(){this.overlays=new Ls(Gn.comparator),this.gi=new Map}getOverlay(e,t){return tn.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((d,m)=>{this.Xt(e,t,m)}),tn.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.gi.get(o);return void 0!==d&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.gi.delete(o)),tn.resolve()}getOverlaysForCollection(e,t,o){const d=Qu(),m=t.length+1,C=new Gn(t.child("")),k=this.overlays.getIteratorFrom(C);for(;k.hasNext();){const Q=k.getNext().value,ne=Q.getKey();if(!t.isPrefixOf(ne.path))break;ne.path.length===m&&Q.largestBatchId>o&&d.set(Q.getKey(),Q)}return tn.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let m=new Ls((ne,Ue)=>ne-Ue);const C=this.overlays.getIterator();for(;C.hasNext();){const ne=C.getNext().value;if(ne.getKey().getCollectionGroup()===t&&ne.largestBatchId>o){let Ue=m.get(ne.largestBatchId);null===Ue&&(Ue=Qu(),m=m.insert(ne.largestBatchId,Ue)),Ue.set(ne.getKey(),ne)}}const k=Qu(),Q=m.getIterator();for(;Q.hasNext()&&(Q.getNext().value.forEach((ne,Ue)=>k.set(ne,Ue)),!(k.size()>=d)););return tn.resolve(k)}Xt(e,t,o){if(null===o)return;const d=this.overlays.get(o.key);if(null!==d){const C=this.gi.get(d.largestBatchId).delete(o.key);this.gi.set(d.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new cd(t,o));let m=this.gi.get(t);void 0===m&&(m=Ti(),this.gi.set(t,m)),this.gi.set(t,m.add(o.key))}}class Jd{constructor(){this.yi=new ps(Go.pi),this.Ii=new ps(Go.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const o=new Go(e,t);this.yi=this.yi.add(o),this.Ii=this.Ii.add(o)}Ei(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ai(new Go(e,t))}Ri(e,t){e.forEach(o=>this.removeReference(o,t))}Pi(e){const t=new Gn(new yi([])),o=new Go(t,e),d=new Go(t,e+1),m=[];return this.Ii.forEachInRange([o,d],C=>{this.Ai(C),m.push(C.key)}),m}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Gn(new yi([])),o=new Go(t,e),d=new Go(t,e+1);let m=Ti();return this.Ii.forEachInRange([o,d],C=>{m=m.add(C.key)}),m}containsKey(e){const t=new Go(e,0),o=this.yi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Go{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Gn.comparator(e.key,t.key)||Vr(e.vi,t.vi)}static Ti(e,t){return Vr(e.vi,t.vi)||Gn.comparator(e.key,t.key)}}class fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new ps(Go.pi)}checkEmpty(e){return tn.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,d){const m=this.Si;this.Si++;const C=new Rc(m,t,o,d);this.Bs.push(C);for(const k of d)this.Di=this.Di.add(new Go(k.key,m)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return tn.resolve(C)}lookupMutationBatch(e,t){return tn.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.xi(t+1),m=d<0?0:d;return tn.resolve(this.Bs.length>m?this.Bs[m]:null)}getHighestUnacknowledgedBatchId(){return tn.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return tn.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Go(t,0),d=new Go(t,Number.POSITIVE_INFINITY),m=[];return this.Di.forEachInRange([o,d],C=>{const k=this.Ci(C.vi);m.push(k)}),tn.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ps(Vr);return t.forEach(d=>{const m=new Go(d,0),C=new Go(d,Number.POSITIVE_INFINITY);this.Di.forEachInRange([m,C],k=>{o=o.add(k.vi)})}),tn.resolve(this.Ni(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let m=o;Gn.isDocumentKey(m)||(m=m.child(""));const C=new Go(new Gn(m),0);let k=new ps(Vr);return this.Di.forEachWhile(Q=>{const ne=Q.key.path;return!!o.isPrefixOf(ne)&&(ne.length===d&&(k=k.add(Q.vi)),!0)},C),tn.resolve(this.Ni(k))}Ni(e){const t=[];return e.forEach(o=>{const d=this.Ci(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){kr(0===this.ki(t.batchId,"removed")),this.Bs.shift();let o=this.Di;return tn.forEach(t.mutations,d=>{const m=new Go(d.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Di=o})}_n(e){}containsKey(e,t){const o=new Go(t,0),d=this.Di.firstAfterOrEqual(o);return tn.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return tn.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class jv{constructor(e){this.Mi=e,this.docs=new Ls(Gn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),m=d?d.size:0,C=this.Mi(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return tn.resolve(o?o.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let o=Fo();return t.forEach(d=>{const m=this.docs.get(d);o=o.insert(d,m?m.document.mutableCopy():or.newInvalidDocument(d))}),tn.resolve(o)}getAllFromCollection(e,t,o){let d=Fo();const m=new Gn(t.child("")),C=this.docs.getIteratorFrom(m);for(;C.hasNext();){const{key:k,value:{document:Q}}=C.getNext();if(!t.isPrefixOf(k.path))break;k.path.length>t.length+1||No(Ul(Q),o)<=0||(d=d.insert(Q.key,Q.mutableCopy()))}return tn.resolve(d)}getAllFromCollectionGroup(e,t,o,d){sr()}Oi(e,t){return tn.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new pm(this)}getSize(e){return tn.resolve(this.size)}}class pm extends he{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Kn.addEntry(e,d)):this.Kn.removeEntry(o)}),tn.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class gm{constructor(e){this.persistence=e,this.Fi=new Pa(t=>Sl(t),ta),this.lastRemoteSnapshotVersion=Lr.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Jd,this.targetCount=0,this.Li=nu.gn()}forEachTarget(e,t){return this.Fi.forEach((o,d)=>t(d)),tn.resolve()}getLastRemoteSnapshotVersion(e){return tn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tn.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),tn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.$i&&(this.$i=t),tn.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new nu(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,tn.resolve()}updateTargetData(e,t){return this.Tn(t),tn.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,tn.resolve()}removeTargets(e,t,o){let d=0;const m=[];return this.Fi.forEach((C,k)=>{k.sequenceNumber<=t&&null===o.get(k.targetId)&&(this.Fi.delete(C),m.push(this.removeMatchingKeysForTargetId(e,k.targetId)),d++)}),tn.waitFor(m).next(()=>d)}getTargetCount(e){return tn.resolve(this.targetCount)}getTargetData(e,t){const o=this.Fi.get(t)||null;return tn.resolve(o)}addMatchingKeys(e,t,o){return this.Bi.Ei(t,o),tn.resolve()}removeMatchingKeys(e,t,o){this.Bi.Ri(t,o);const d=this.persistence.referenceDelegate,m=[];return d&&t.forEach(C=>{m.push(d.markPotentiallyOrphaned(e,C))}),tn.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),tn.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Bi.Vi(t);return tn.resolve(o)}containsKey(e,t){return tn.resolve(this.Bi.containsKey(t))}}class n_{constructor(e,t){this.Ui={},this.overlays={},this.es=new qn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new gm(this),this.indexManager=new Fh,this.ds=new jv(o=>this.referenceDelegate.qi(o)),this.M=new Gd(t),this._s=new Up(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Ui[e.toKey()];return o||(o=new fm(t,this.referenceDelegate),this.Ui[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){xn("MemoryPersistence","Starting transaction:",e);const d=new mm(this.es.next());return this.referenceDelegate.Ki(),o(d).next(m=>this.referenceDelegate.Gi(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}Qi(e,t){return tn.or(Object.values(this.Ui).map(o=>()=>o.containsKey(e,t)))}}class mm extends Ph{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ji=new Jd,this.Wi=null}static zi(e){return new jp(e)}get Hi(){if(this.Wi)return this.Wi;throw sr()}addReference(e,t,o){return this.ji.addReference(o,t),this.Hi.delete(o.toString()),tn.resolve()}removeReference(e,t,o){return this.ji.removeReference(o,t),this.Hi.add(o.toString()),tn.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),tn.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(d=>this.Hi.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(m=>this.Hi.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tn.forEach(this.Hi,o=>{const d=Gn.fromPath(o);return this.Ji(e,d).next(m=>{m||t.removeEntry(d,Lr.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(o=>{o?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return tn.or([()=>tn.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function ym(i,e){return`firestore_clients_${i}_${e}`}function Qa(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Hp(i,e){return`firestore_targets_${i}_${e}`}class Uf{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Yi(e,t,o){const d=JSON.parse(o);let m,C="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return C&&d.error&&(C="string"==typeof d.error.message&&"string"==typeof d.error.code,C&&(m=new R(d.error.code,d.error.message))),C?new Uf(e,t,d.state,m):(Ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Yi(e,t){const o=JSON.parse(t);let d,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(d=new R(o.error.code,o.error.message))),m?new jf(e,o.state,d):(Ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,m=aa();for(let C=0;d&&C<o.activeTargetIds.length;++C)d=ju(o.activeTargetIds[C]),m=m.add(o.activeTargetIds[C]);return d?new Gp(e,m):(Ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hf{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Hf(t.clientId,t.onlineState):(Ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _m{constructor(){this.activeTargetIds=aa()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zp{constructor(e,t,o,d,m){this.window=e,this.Yn=t,this.persistenceKey=o,this.er=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Ls(Vr),this.started=!1,this.rr=[];const C=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ur=ym(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new _m),this.cr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Fs();for(const d of t){if(d===e.er)continue;const m=e.getItem(ym(e.persistenceKey,d));if(m){const C=Gp.Yi(d,m);C&&(e.ir=e.ir.insert(C.clientId,C))}}e.wr();const o=e.storage.getItem(e.dr);if(o){const d=e.mr(o);d&&e.gr(d)}for(const d of e.rr)e.sr(d);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,o){this.pr(e,t,o),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Hp(this.persistenceKey,e));if(o){const d=jf.Yi(e,o);d&&(t=d.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Er(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.Ir(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xn("SharedClientState","READ",e,t),t}setItem(e,t){xn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(xn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ur)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==o.key)if(t.cr.test(o.key)){if(null==o.newValue){const d=t.Pr(o.key);return t.br(d,null)}{const d=t.Vr(o.key,o.newValue);if(d)return t.br(d.clientId,d)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const d=t.vr(o.key,o.newValue);if(d)return t.Sr(d)}}else if(t.lr.test(o.key)){if(null!==o.newValue){const d=t.Dr(o.key,o.newValue);if(d)return t.Cr(d)}}else if(o.key===t.dr){if(null!==o.newValue){const d=t.mr(o.newValue);if(d)return t.gr(d)}}else if(o.key===t.ar){const d=function(m){let C=qn.A;if(null!=m)try{const k=JSON.parse(m);kr("number"==typeof k),C=k}catch(k){Ur("SharedClientState","Failed to read sequence number from WebStorage",k)}return C}(o.newValue);d!==qn.A&&t.sequenceNumberHandler(d)}else if(o.key===t._r){const d=t.Nr(o.newValue);yield Promise.all(d.map(m=>t.syncEngine.kr(m)))}}else t.rr.push(o)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,o){const d=new Uf(this.currentUser,e,t,o),m=Qa(this.persistenceKey,this.currentUser,e);this.setItem(m,d.Xi())}Ir(e){const t=Qa(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,o){const d=Hp(this.persistenceKey,e),m=new jf(e,t,o);this.setItem(d,m.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const o=this.Pr(e);return Gp.Yi(o,t)}vr(e,t){const o=this.hr.exec(e),d=Number(o[1]);return Uf.Yi(new as(void 0!==o[2]?o[2]:null),d,t)}Dr(e,t){const o=this.lr.exec(e),d=Number(o[1]);return jf.Yi(d,t)}mr(e){return Hf.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);xn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const o=t?this.ir.insert(e,t):this.ir.remove(e),d=this.yr(this.ir),m=this.yr(o),C=[],k=[];return m.forEach(Q=>{d.has(Q)||C.push(Q)}),d.forEach(Q=>{m.has(Q)||k.push(Q)}),this.syncEngine.Fr(C,k).then(()=>{this.ir=o})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=aa();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Gf{constructor(){this.$r=new _m,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,o){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new _m,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vm{Lr(e){}shutdown(){}}class Em{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){xn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){xn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const r_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class i_{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class bm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,o,d,m){const C=this.uo(e,t);xn("RestConnection","Sending: ",C,o);const k={};return this.ao(k,d,m),this.co(e,C,k,o).then(Q=>(xn("RestConnection","Received: ",Q),Q),Q=>{throw qi("RestConnection",`${e} failed with error: `,Q,"url: ",C,"request:",o),Q})}ho(e,t,o,d,m){return this.oo(e,t,o,d,m)}ao(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,m)=>e[m]=d),o&&o.headers.forEach((d,m)=>e[m]=d)}uo(e,t){return`${this.io}/v1/${t}:${r_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,o,d){return new Promise((m,C)=>{const k=new ya;k.listenOnce(Uo.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case oo.NO_ERROR:const ne=k.getResponseJson();xn("Connection","XHR received:",JSON.stringify(ne)),m(ne);break;case oo.TIMEOUT:xn("Connection",'RPC "'+e+'" timed out'),C(new R(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:const Ue=k.getStatus();if(xn("Connection",'RPC "'+e+'" failed with status:',Ue,"response text:",k.getResponseText()),Ue>0){const ht=k.getResponseJson().error;if(ht&&ht.status&&ht.message){const zt=function(bn){const Sn=bn.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(Sn)>=0?Sn:Ht.UNKNOWN}(ht.status);C(new R(zt,ht.message))}else C(new R(Ht.UNKNOWN,"Server responded with status "+k.getStatus()))}else C(new R(Ht.UNAVAILABLE,"Connection failed."));break;default:sr()}}finally{xn("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(d);k.send(t,"POST",Q,o,15)})}lo(e,t,o){const d=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=ga(),C=Io(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(k.xmlHttpFactory=new _s({})),this.ao(k.initMessageHeaders,t,o),(0,mt.uI)()||(0,mt.b$)()||(0,mt.d)()||(0,mt.w1)()||(0,mt.Mn)()||(0,mt.ru)()||(k.httpHeadersOverwriteParam="$httpHeaders");const Q=d.join("");xn("Connection","Creating WebChannel: "+Q,k);const ne=m.createWebChannel(Q,k);let Ue=!1,ht=!1;const zt=new i_({Wr:Sn=>{ht?xn("Connection","Not sending because WebChannel is closed:",Sn):(Ue||(xn("Connection","Opening WebChannel transport."),ne.open(),Ue=!0),xn("Connection","WebChannel sending:",Sn),ne.send(Sn))},zr:()=>ne.close()}),bn=(Sn,dr,hi)=>{Sn.listen(dr,js=>{try{hi(js)}catch(uo){setTimeout(()=>{throw uo},0)}})};return bn(ne,ma.EventType.OPEN,()=>{ht||xn("Connection","WebChannel transport opened.")}),bn(ne,ma.EventType.CLOSE,()=>{ht||(ht=!0,xn("Connection","WebChannel transport closed"),zt.no())}),bn(ne,ma.EventType.ERROR,Sn=>{ht||(ht=!0,qi("Connection","WebChannel transport errored:",Sn),zt.no(new R(Ht.UNAVAILABLE,"The operation could not be completed")))}),bn(ne,ma.EventType.MESSAGE,Sn=>{var dr;if(!ht){const hi=Sn.data[0];kr(!!hi);const js=hi,uo=js.error||(null===(dr=js[0])||void 0===dr?void 0:dr.error);if(uo){xn("Connection","WebChannel received error:",uo);const Xi=uo.status;let xo=function(io){const Da=Ds[io];if(void 0!==Da)return ql(Da)}(Xi),Hs=uo.message;void 0===xo&&(xo=Ht.INTERNAL,Hs="Unknown error status: "+Xi+" with message "+uo.message),ht=!0,zt.no(new R(xo,Hs)),ne.close()}else xn("Connection","WebChannel received:",hi),zt.so(hi)}}),bn(C,$i.STAT_EVENT,Sn=>{Sn.stat===Uu.PROXY?xn("Connection","Detected buffering proxy"):Sn.stat===Uu.NOPROXY&&xn("Connection","Detected no buffering proxy")}),setTimeout(()=>{zt.eo()},0),zt}}function wm(){return"undefined"!=typeof window?window:null}function jh(){return"undefined"!=typeof document?document:null}function Hh(i){return new Dc(i,!0)}class Wp{constructor(e,t,o=1e3,d=1.5,m=6e4){this.Yn=e,this.timerId=t,this.fo=o,this._o=d,this.wo=m,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),o=Math.max(0,Date.now()-this.po),d=Math.max(0,t-o);d>0&&xn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,d,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class qp{constructor(e,t,o,d,m,C,k,Q){this.Yn=e,this.Ro=o,this.Po=d,this.bo=m,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=k,this.listener=Q,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Wp(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ve.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ve.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var o=this;return(0,ve.Z)(function*(){o.$o(),o.Bo(),o.Do.cancel(),o.Vo++,4!==e?o.Do.reset():t&&t.code===Ht.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),o.Do.Io()):t&&t.code===Ht.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Lo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Vo===t&&this.qo(o,d)},o=>{e(()=>{const d=new R(Ht.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ko(d)})})}qo(e,t){const o=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{o(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(d=>{o(()=>this.Ko(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}No(){var e=this;this.state=5,this.Do.To((0,ve.Z)(function*(){e.state=0,e.start()}))}Ko(e){return xn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(xn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Im extends qp{constructor(e,t,o,d,m,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,C),this.M=m}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function id(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:sr(),d=e.targetChange.targetIds||[],m=function(Q,ne){return Q.N?(kr(void 0===ne||"string"==typeof ne),Ys.fromBase64String(ne||"")):(kr(void 0===ne||ne instanceof Uint8Array),Ys.fromUint8Array(ne||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,k=C&&function(Q){const ne=void 0===Q.code?Ht.UNKNOWN:ql(Q.code);return new R(ne,Q.message||"")}(C);t=new Cc(o,d,m,k||null)}else if("documentChange"in e){const o=e.documentChange,d=Ia(i,o.document.name),m=Vs(o.document.updateTime),C=new vn({mapValue:{fields:o.document.fields}}),k=or.newFoundDocument(d,m,C);t=new Bs(o.targetIds||[],o.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const o=e.documentDelete,d=Ia(i,o.document),m=o.readTime?Vs(o.readTime):Lr.min(),C=or.newNoDocument(d,m);t=new Bs([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,d=Ia(i,o.document);t=new Bs([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return sr();{const o=e.filter,m=new td(o.count||0);t=new ka(o.targetId,m)}}var Q;return t}(this.M,e),o=function(d){if(!("targetChange"in d))return Lr.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Lr.min():m.readTime?Vs(m.readTime):Lr.min()}(e);return this.listener.Qo(t,o)}jo(e){const t={};t.database=Ka(this.M),t.addTarget=function(d,m){let C;const k=m.target;return C=uu(k)?{documents:Vd(d,k)}:{query:Ud(d,k)},C.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?C.resumeToken=Bd(d,m.resumeToken):m.snapshotVersion.compareTo(Lr.min())>0&&(C.readTime=Ml(d,m.snapshotVersion.toTimestamp())),C}(this.M,e);const o=function w(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return sr()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Fo(t)}Wo(e){const t={};t.database=Ka(this.M),t.removeTarget=e,this.Fo(t)}}class s_ extends qp{constructor(e,t,o,d,m,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,C),this.M=m,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(kr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Df(i,e){return i&&i.length>0?(kr(void 0!==e),i.map(t=>function(o,d){let m=Vs(o.updateTime?o.updateTime:d);return m.isEqual(Lr.min())&&(m=Vs(d)),new ba(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Vs(e.commitTime);return this.listener.Yo(o,t)}return kr(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Ka(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Eu(this.M,o))};this.Fo(t)}}class Mu extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=d,this.tu=!1}eu(){if(this.tu)throw new R(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.bo.oo(e,t,o,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new R(Ht.UNKNOWN,d.toString())})}ho(e,t,o){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.bo.ho(e,t,o,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new R(Ht.UNKNOWN,d.toString())})}terminate(){this.tu=!0}}class Yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Ur(t),this.iu=!1):xn("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class o_{constructor(e,t,o,d,m){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=m,this._u.Lr(k=>{o.enqueueAndForget((0,ve.Z)(function*(){var Q;Ou(C)&&(xn("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,ve.Z)(function*(ne){const Ue=$n(ne);Ue.fu.add(4),yield vd(Ue),Ue.wu.set("Unknown"),Ue.fu.delete(4),yield Gh(Ue)}),function(ne){return Q.apply(this,arguments)})(C))}))}),this.wu=new Yp(o,d)}}function Gh(i){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ve.Z)(function*(i){if(Ou(i))for(const e of i.du)yield e(!0)}),Cm.apply(this,arguments)}function vd(i){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,ve.Z)(function*(i){for(const e of i.du)yield e(!1)}),Kp.apply(this,arguments)}function zf(i,e){const t=$n(i);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),eh(t)?Zp(t):th(t).xo()&&Wh(t,e))}function zh(i,e){const t=$n(i),o=th(t);t.lu.delete(e),o.xo()&&Dm(t,e),0===t.lu.size&&(o.xo()?o.Mo():Ou(t)&&t.wu.set("Unknown"))}function Wh(i,e){i.mu.Z(e.targetId),th(i).jo(e)}function Dm(i,e){i.mu.Z(e),th(i).Wo(e)}function Zp(i){i.mu=new Ju({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.lu.get(e)||null}),th(i).start(),i.wu.ru()}function eh(i){return Ou(i)&&!th(i).Co()&&i.lu.size>0}function Ou(i){return 0===$n(i).fu.size}function Tm(i){i.mu=void 0}function Xp(i){return qh.apply(this,arguments)}function qh(){return qh=(0,ve.Z)(function*(i){i.lu.forEach((e,t)=>{Wh(i,e)})}),qh.apply(this,arguments)}function Sm(i,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ve.Z)(function*(i,e){Tm(i),eh(i)?(i.wu.au(e),Zp(i)):i.wu.set("Unknown")}),Qp.apply(this,arguments)}function a_(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,ve.Z)(function*(i,e,t){if(i.wu.set("Online"),e instanceof Cc&&2===e.state&&e.cause)try{yield(o=(0,ve.Z)(function*(d,m){const C=m.cause;for(const k of m.targetIds)d.lu.has(k)&&(yield d.remoteSyncer.rejectListen(k,C),d.lu.delete(k),d.mu.removeTarget(k))}),function(d,m){return o.apply(this,arguments)})(i,e)}catch(o){xn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Jp(i,o)}else if(e instanceof Bs?i.mu.ut(e):e instanceof ka?i.mu._t(e):i.mu.ht(e),!t.isEqual(Lr.min()))try{const o=yield Bf(i.localStore);t.compareTo(o)>=0&&(yield function(d,m){const C=d.mu.yt(m);return C.targetChanges.forEach((k,Q)=>{if(k.resumeToken.approximateByteSize()>0){const ne=d.lu.get(Q);ne&&d.lu.set(Q,ne.withResumeToken(k.resumeToken,m))}}),C.targetMismatches.forEach(k=>{const Q=d.lu.get(k);if(!Q)return;d.lu.set(k,Q.withResumeToken(Ys.EMPTY_BYTE_STRING,Q.snapshotVersion)),Dm(d,k);const ne=new Ql(Q.target,k,1,Q.sequenceNumber);Wh(d,ne)}),d.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){xn("RemoteStore","Failed to raise snapshot:",o),yield Jp(i,o)}var o}),Yh.apply(this,arguments)}function Jp(i,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,ve.Z)(function*(i,e,t){if(!rc(e))throw e;i.fu.add(1),yield vd(i),i.wu.set("Offline"),t||(t=()=>Bf(i.localStore)),i.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){xn("RemoteStore","Retrying IndexedDB access"),yield t(),i.fu.delete(1),yield Gh(i)}))}),eg.apply(this,arguments)}function tg(i,e){return e().catch(t=>Jp(i,t,e))}function Ed(i){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ve.Z)(function*(i){const e=$n(i),t=ku(e);let o=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;Am(e);)try{const d=yield e_(e.localStore,o);if(null===d){0===e.hu.length&&t.Mo();break}o=d.batchId,xm(e,d)}catch(d){yield Jp(e,d)}Pu(e)&&Kh(e)}),Wf.apply(this,arguments)}function Am(i){return Ou(i)&&i.hu.length<10}function xm(i,e){i.hu.push(e);const t=ku(i);t.xo()&&t.Ho&&t.Jo(e.mutations)}function Pu(i){return Ou(i)&&!ku(i).Co()&&i.hu.length>0}function Kh(i){ku(i).start()}function l_(i){return ng.apply(this,arguments)}function ng(){return ng=(0,ve.Z)(function*(i){ku(i).Zo()}),ng.apply(this,arguments)}function Hv(i){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,ve.Z)(function*(i){const e=ku(i);for(const t of i.hu)e.Jo(t.mutations)}),Zh.apply(this,arguments)}function Rm(i,e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,ve.Z)(function*(i,e,t){const o=i.hu.shift(),d=Hd.from(o,e,t);yield tg(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Ed(i)}),Xh.apply(this,arguments)}function Qh(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ve.Z)(function*(i,e){var t;e&&ku(i).Ho&&(yield(t=(0,ve.Z)(function*(o,d){if(gl(m=d.code)&&m!==Ht.ABORTED){const C=o.hu.shift();ku(o).ko(),yield tg(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,d)),yield Ed(o)}var m}),function(o,d){return t.apply(this,arguments)})(i,e)),Pu(i)&&Kh(i)}),rg.apply(this,arguments)}function qf(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,ve.Z)(function*(i,e){const t=$n(i);t.asyncQueue.verifyOperationInProgress(),xn("RemoteStore","RemoteStore received new credentials");const o=Ou(t);t.fu.add(3),yield vd(t),o&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Gh(t)}),Yf.apply(this,arguments)}function Kf(i,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,ve.Z)(function*(i,e){const t=$n(i);e?(t.fu.delete(2),yield Gh(t)):e||(t.fu.add(2),yield vd(t),t.wu.set("Unknown"))}),Zf.apply(this,arguments)}function th(i){return i.gu||(i.gu=function(e,t,o){const d=$n(e);return d.eu(),new Im(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{Hr:Xp.bind(null,i),Yr:Sm.bind(null,i),Qo:a_.bind(null,i)}),i.du.push(function(){var e=(0,ve.Z)(function*(t){t?(i.gu.ko(),eh(i)?Zp(i):i.wu.set("Unknown")):(yield i.gu.stop(),Tm(i))});return function(t){return e.apply(this,arguments)}}())),i.gu}function ku(i){return i.yu||(i.yu=function(e,t,o){const d=$n(e);return d.eu(),new s_(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{Hr:l_.bind(null,i),Yr:Qh.bind(null,i),Xo:Hv.bind(null,i),Yo:Rm.bind(null,i)}),i.du.push(function(){var e=(0,ve.Z)(function*(t){t?(i.yu.ko(),yield Ed(i)):(yield i.yu.stop(),i.hu.length>0&&(xn("RemoteStore",`Stopping write stream with ${i.hu.length} pending writes`),i.hu=[]))});return function(t){return e.apply(this,arguments)}}())),i.yu}class ig{constructor(e,t,o,d,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=m,this.deferred=new A,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,d,m){const C=Date.now()+o,k=new ig(e,t,C,d,m);return k.start(o),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new R(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(i,e){if(Ur("AsyncQueue",`${e}: ${i}`),rc(i))return new R(Ht.UNAVAILABLE,`${e}: ${i}`);throw i}class bd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Gn.comparator(t.key,o.key):(t,o)=>Gn.comparator(t.key,o.key),this.keyedMap=Ic(),this.sortedSet=new Ls(this.comparator)}static emptySet(e){return new bd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new bd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class wd{constructor(){this.pu=new Ls(Gn.comparator)}track(e){const t=e.doc.key,o=this.pu.get(t);o?0!==e.type&&3===o.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==o.type?this.pu=this.pu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.pu=this.pu.remove(t):1===e.type&&2===o.type?this.pu=this.pu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):sr():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Id{constructor(e,t,o,d,m,C,k,Q){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=m,this.fromCache=C,this.syncStateChanged=k,this.excludesMetadataChanges=Q}static fromInitialDocuments(e,t,o,d){const m=[];return t.forEach(C=>{m.push({type:0,doc:C})}),new Id(e,t,bd.emptySet(t),m,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class u_{constructor(){this.Tu=void 0,this.listeners=[]}}class c_{constructor(){this.queries=new Pa(e=>za(e),xl),this.onlineState="Unknown",this.Eu=new Set}}function kc(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,ve.Z)(function*(i,e){const t=$n(i),o=e.query;let d=!1,m=t.queries.get(o);if(m||(d=!0,m=new u_),d)try{m.Tu=yield t.onListen(o)}catch(C){const k=nh(C,`Initialization of query '${zu(e.query)}' failed`);return void e.onError(k)}t.queries.set(o,m),m.listeners.push(e),e.Au(t.onlineState),m.Tu&&e.Ru(m.Tu)&&Jh(t)}),sg.apply(this,arguments)}function og(i,e){return ag.apply(this,arguments)}function ag(){return ag=(0,ve.Z)(function*(i,e){const t=$n(i),o=e.query;let d=!1;const m=t.queries.get(o);if(m){const C=m.listeners.indexOf(e);C>=0&&(m.listeners.splice(C,1),d=0===m.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),ag.apply(this,arguments)}function d_(i,e){const t=$n(i);let o=!1;for(const d of e){const C=t.queries.get(d.query);if(C){for(const k of C.listeners)k.Ru(d)&&(o=!0);C.Tu=d}}o&&Jh(t)}function ru(i,e,t){const o=$n(i),d=o.queries.get(e);if(d)for(const m of d.listeners)m.onError(t);o.queries.delete(e)}function Jh(i){i.Eu.forEach(e=>{e.next()})}class Xf{constructor(e,t,o){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=o||{}}Ru(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new Id(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Mm{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class lg{constructor(e){this.M=e}fi(e){return Ia(this.M,e)}di(e){return e.metadata.exists?_o(this.M,e.document,!1):or.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Vs(e)}}class Om{constructor(e,t,o){this.Nu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pm(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=yi.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,o=new lg(this.M);for(const d of e)if(d.metadata.queries){const m=o.fi(d.metadata.name);for(const C of d.metadata.queries){const k=(t.get(C)||Ti()).add(m);t.set(C,k)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function t_(i,e,t,o){return Vf.apply(this,arguments)}(e.localStore,new lg(e.M),e.documents,e.Nu.id),o=e.Mu(e.documents);for(const d of e.queries)yield dm(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Pm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class km{constructor(e){this.key=e}}class Nm{constructor(e){this.key=e}}class Fm{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Ti(),this.mutatedKeys=Ti(),this.Uu=Wa(e),this.qu=new bd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const o=t?t.Qu:new wd,d=t?t.qu:this.qu;let m=t?t.mutatedKeys:this.mutatedKeys,C=d,k=!1;const Q=hl(this.query)&&d.size===this.query.limit?d.last():null,ne=vc(this.query)&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Ue,ht)=>{const zt=d.get(Ue),bn=Wu(this.query,ht)?ht:null,Sn=!!zt&&this.mutatedKeys.has(zt.key),dr=!!bn&&(bn.hasLocalMutations||this.mutatedKeys.has(bn.key)&&bn.hasCommittedMutations);let hi=!1;zt&&bn?zt.data.isEqual(bn.data)?Sn!==dr&&(o.track({type:3,doc:bn}),hi=!0):this.ju(zt,bn)||(o.track({type:2,doc:bn}),hi=!0,(Q&&this.Uu(bn,Q)>0||ne&&this.Uu(bn,ne)<0)&&(k=!0)):!zt&&bn?(o.track({type:0,doc:bn}),hi=!0):zt&&!bn&&(o.track({type:1,doc:zt}),hi=!0,(Q||ne)&&(k=!0)),hi&&(bn?(C=C.add(bn),m=dr?m.add(Ue):m.delete(Ue)):(C=C.delete(Ue),m=m.delete(Ue)))}),hl(this.query)||vc(this.query))for(;C.size>this.query.limit;){const Ue=hl(this.query)?C.last():C.first();C=C.delete(Ue.key),m=m.delete(Ue.key),o.track({type:1,doc:Ue})}return{qu:C,Qu:o,ni:k,mutatedKeys:m}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const m=e.Qu.Iu();m.sort((ne,Ue)=>function(ht,zt){const bn=Sn=>{switch(Sn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sr()}};return bn(ht)-bn(zt)}(ne.type,Ue.type)||this.Uu(ne.doc,Ue.doc)),this.Wu(o);const C=t?this.zu():[],k=0===this.Lu.size&&this.current?1:0,Q=k!==this.Bu;return this.Bu=k,0!==m.length||Q?{snapshot:new Id(this.query,e.qu,d,m,e.mutatedKeys,0===k,Q,!1),Hu:C}:{Hu:C}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new wd,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Ti(),this.qu.forEach(o=>{this.Ju(o.key)&&(this.Lu=this.Lu.add(o.key))});const t=[];return e.forEach(o=>{this.Lu.has(o)||t.push(new Nm(o))}),this.Lu.forEach(o=>{e.has(o)||t.push(new km(o))}),t}Yu(e){this.$u=e.li,this.Lu=Ti();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Id.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Lm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Gv{constructor(e){this.key=e,this.Zu=!1}}class $m{constructor(e,t,o,d,m,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=C,this.ta={},this.ea=new Pa(k=>za(k),xl),this.na=new Map,this.sa=new Set,this.ia=new Ls(Gn.comparator),this.ra=new Map,this.oa=new Jd,this.ua={},this.aa=new Map,this.ca=nu.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function h_(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,ve.Z)(function*(i,e){const t=Lc(i);let o,d;const m=t.ea.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),d=m.view.Xu();else{const C=yield Zd(t.localStore,ra(e));t.isPrimaryClient&&zf(t.remoteStore,C);const k=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,d=yield Bm(t,e,o,"current"===k)}return d}),ug.apply(this,arguments)}function Bm(i,e,t,o){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ve.Z)(function*(i,e,t,o){i.la=(Ue,ht,zt)=>{return(bn=(0,ve.Z)(function*(Sn,dr,hi,js){let uo=dr.view.Gu(hi);uo.ni&&(uo=yield Xd(Sn.localStore,dr.query,!1).then(({documents:Hs})=>dr.view.Gu(Hs,uo)));const Xi=js&&js.targetChanges.get(dr.targetId),xo=dr.view.applyChanges(uo,Sn.isPrimaryClient,Xi);return fg(Sn,dr.targetId,xo.Hu),xo.snapshot}),function(Sn,dr,hi,js){return bn.apply(this,arguments)})(i,Ue,ht,zt);var bn};const d=yield Xd(i.localStore,e,!0),m=new Fm(e,d.li),C=m.Gu(d.documents),k=Kl.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),Q=m.applyChanges(C,i.isPrimaryClient,k);fg(i,t,Q.Hu);const ne=new Lm(e,t,m);return i.ea.set(e,ne),i.na.has(t)?i.na.get(t).push(e):i.na.set(t,[e]),Q.snapshot}),Vm.apply(this,arguments)}function cg(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,ve.Z)(function*(i,e){const t=$n(i),o=t.ea.get(e),d=t.na.get(o.targetId);if(d.length>1)return t.na.set(o.targetId,d.filter(m=>!xl(m,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Ru(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),zh(t.remoteStore,o.targetId),rh(t,o.targetId)}).catch(lc))):(rh(t,o.targetId),yield Ru(t.localStore,o.targetId,!0))}),dg.apply(this,arguments)}function Qf(){return Qf=(0,ve.Z)(function*(i,e,t){const o=$c(i);try{const d=yield function(m,C){const k=$n(m),Q=Yi.now(),ne=C.reduce((ht,zt)=>ht.add(zt.key),Ti());let Ue;return k.persistence.runTransaction("Locally write mutations","readwrite",ht=>k.ci.Ks(ht,ne).next(zt=>{Ue=zt;const bn=[];for(const Sn of C){const dr=oa(Sn,Ue.get(Sn.key));null!=dr&&bn.push(new Oa(Sn.key,dr,gr(dr.value.mapValue),fs.exists(!0)))}return k.Bs.addMutationBatch(ht,Q,bn,C)})).then(ht=>(ht.applyToLocalDocumentSet(Ue),{batchId:ht.batchId,changes:Ue}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(m,C,k){let Q=m.ua[m.currentUser.toKey()];Q||(Q=new Ls(Vr)),Q=Q.insert(C,k),m.ua[m.currentUser.toKey()]=Q}(o,d.batchId,t),yield cc(o,d.changes),yield Ed(o.remoteStore)}catch(d){const m=nh(d,"Failed to persist write");t.reject(m)}}),Qf.apply(this,arguments)}function f_(i,e){return vl.apply(this,arguments)}function vl(){return vl=(0,ve.Z)(function*(i,e){const t=$n(i);try{const o=yield Jy(t.localStore,e);e.targetChanges.forEach((d,m)=>{const C=t.ra.get(m);C&&(kr(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?C.Zu=!0:d.modifiedDocuments.size>0?kr(C.Zu):d.removedDocuments.size>0&&(kr(C.Zu),C.Zu=!1))}),yield cc(t,o,e)}catch(o){yield lc(o)}}),vl.apply(this,arguments)}function p_(i,e,t){const o=$n(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ea.forEach((m,C)=>{const k=C.view.Au(e);k.snapshot&&d.push(k.snapshot)}),function(m,C){const k=$n(m);k.onlineState=C;let Q=!1;k.queries.forEach((ne,Ue)=>{for(const ht of Ue.listeners)ht.Au(C)&&(Q=!0)}),Q&&Jh(k)}(o.eventManager,e),d.length&&o.ta.Qo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function zv(i,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ve.Z)(function*(i,e,t){const o=$n(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.ra.get(e),m=d&&d.key;if(m){let C=new Ls(Gn.comparator);C=C.insert(m,or.newNoDocument(m,Lr.min()));const k=Ti().add(m),Q=new Lo(Lr.min(),new Map,new ps(Vr),C,k);yield f_(o,Q),o.ia=o.ia.remove(m),o.ra.delete(e),pg(o)}else yield Ru(o.localStore,e,!1).then(()=>rh(o,e,t)).catch(lc)}),Jf.apply(this,arguments)}function jm(i,e){return ep.apply(this,arguments)}function ep(){return ep=(0,ve.Z)(function*(i,e){const t=$n(i),o=e.batch.batchId;try{const d=yield Qy(t.localStore,e);tf(t,o,null),hg(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield cc(t,d)}catch(d){yield lc(d)}}),ep.apply(this,arguments)}function g_(i,e,t){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ve.Z)(function*(i,e,t){const o=$n(i);try{const d=yield function(m,C){const k=$n(m);return k.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let ne;return k.Bs.lookupMutationBatch(Q,C).next(Ue=>(kr(null!==Ue),ne=Ue.keys(),k.Bs.removeMutationBatch(Q,Ue))).next(()=>k.Bs.performConsistencyCheck(Q)).next(()=>k.ci.Ks(Q,ne))})}(o.localStore,e);tf(o,e,t),hg(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield cc(o,d)}catch(d){yield lc(d)}}),Hm.apply(this,arguments)}function ef(){return ef=(0,ve.Z)(function*(i,e){const t=$n(i);Ou(t.remoteStore)||xn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const C=$n(m);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>C.Bs.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===o)return void e.resolve();const d=t.aa.get(o)||[];d.push(e),t.aa.set(o,d)}catch(o){const d=nh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),ef.apply(this,arguments)}function hg(i,e){(i.aa.get(e)||[]).forEach(t=>{t.resolve()}),i.aa.delete(e)}function tf(i,e,t){const o=$n(i);let d=o.ua[o.currentUser.toKey()];if(d){const m=d.get(e);m&&(t?m.reject(t):m.resolve(),d=d.remove(e)),o.ua[o.currentUser.toKey()]=d}}function rh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.na.get(e))i.ea.delete(o),t&&i.ta.fa(o,t);i.na.delete(e),i.isPrimaryClient&&i.oa.Pi(e).forEach(o=>{i.oa.containsKey(o)||zm(i,o)})}function zm(i,e){i.sa.delete(e.path.canonicalString());const t=i.ia.get(e);null!==t&&(zh(i.remoteStore,t),i.ia=i.ia.remove(e),i.ra.delete(t),pg(i))}function fg(i,e,t){for(const o of t)o instanceof km?(i.oa.addReference(o.key,e),m_(i,o)):o instanceof Nm?(xn("SyncEngine","Document no longer in limbo: "+o.key),i.oa.removeReference(o.key,e),i.oa.containsKey(o.key)||zm(i,o.key)):sr()}function m_(i,e){const t=e.key,o=t.path.canonicalString();i.ia.get(t)||i.sa.has(o)||(xn("SyncEngine","New document in limbo: "+t),i.sa.add(o),pg(i))}function pg(i){for(;i.sa.size>0&&i.ia.size<i.maxConcurrentLimboResolutions;){const e=i.sa.values().next().value;i.sa.delete(e);const t=new Gn(yi.fromString(e)),o=i.ca.next();i.ra.set(o,new Gv(t)),i.ia=i.ia.insert(t,o),zf(i.remoteStore,new Ql(ra(Al(t.path)),o,2,qn.A))}}function cc(i,e,t){return ih.apply(this,arguments)}function ih(){return ih=(0,ve.Z)(function*(i,e,t){const o=$n(i),d=[],m=[],C=[];var k;o.ea.isEmpty()||(o.ea.forEach((k,Q)=>{C.push(o.la(Q,e,t).then(ne=>{if(ne){o.isPrimaryClient&&o.sharedClientState.updateQueryState(Q.targetId,ne.fromCache?"not-current":"current"),d.push(ne);const Ue=Vh.Ys(Q.targetId,ne);m.push(Ue)}}))}),yield Promise.all(C),o.ta.Qo(d),yield(k=(0,ve.Z)(function*(Q,ne){const Ue=$n(Q);try{yield Ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",ht=>tn.forEach(ne,zt=>tn.forEach(zt.Hs,bn=>Ue.persistence.referenceDelegate.addReference(ht,zt.targetId,bn)).next(()=>tn.forEach(zt.Js,bn=>Ue.persistence.referenceDelegate.removeReference(ht,zt.targetId,bn)))))}catch(ht){if(!rc(ht))throw ht;xn("LocalStore","Failed to update sequence numbers: "+ht)}for(const ht of ne){const zt=ht.targetId;if(!ht.fromCache){const bn=Ue.ii.get(zt),dr=bn.withLastLimboFreeSnapshotVersion(bn.snapshotVersion);Ue.ii=Ue.ii.insert(zt,dr)}}}),function(Q,ne){return k.apply(this,arguments)})(o.localStore,m))}),ih.apply(this,arguments)}function sh(i,e){return gg.apply(this,arguments)}function gg(){return gg=(0,ve.Z)(function*(i,e){const t=$n(i);if(!t.currentUser.isEqual(e)){xn("SyncEngine","User change. New user:",e.toKey());const o=yield uc(t.localStore,e);t.currentUser=e,(d=t).aa.forEach(C=>{C.forEach(k=>{k.reject(new R(Ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.aa.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield cc(t,o.hi)}var d}),gg.apply(this,arguments)}function nf(i,e){const t=$n(i),o=t.ra.get(e);if(o&&o.Zu)return Ti().add(o.key);{let d=Ti();const m=t.na.get(e);if(!m)return d;for(const C of m){const k=t.ea.get(C);d=d.unionWith(k.view.Ku)}return d}}function y_(i,e){return mg.apply(this,arguments)}function mg(){return mg=(0,ve.Z)(function*(i,e){const t=$n(i),o=yield Xd(t.localStore,e.query,!0),d=e.view.Yu(o);return t.isPrimaryClient&&fg(t,e.targetId,d.Hu),d}),mg.apply(this,arguments)}function yg(i,e){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,ve.Z)(function*(i,e){const t=$n(i);return Qd(t.localStore,e).then(o=>cc(t,o))}),Nl.apply(this,arguments)}function rf(i,e,t,o){return zo.apply(this,arguments)}function zo(){return zo=(0,ve.Z)(function*(i,e,t,o){const d=$n(i),m=yield function(C,k){const Q=$n(C),ne=$n(Q.Bs);return Q.persistence.runTransaction("Lookup mutation documents","readonly",Ue=>ne.fn(Ue,k).next(ht=>ht?Q.ci.Ks(Ue,ht):tn.resolve(null)))}(d.localStore,e);var k;null!==m?("pending"===t?yield Ed(d.remoteStore):"acknowledged"===t||"rejected"===t?(tf(d,e,o||null),hg(d,e),k=e,$n($n(d.localStore).Bs)._n(k)):sr(),yield cc(d,m)):xn("SyncEngine","Cannot apply mutation batch with id: "+e)}),zo.apply(this,arguments)}function oh(){return oh=(0,ve.Z)(function*(i,e){const t=$n(i);if(Lc(t),$c(t),!0===e&&!0!==t.ha){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield El(t,o.toArray());t.ha=!0,yield Kf(t.remoteStore,!0);for(const m of d)zf(t.remoteStore,m)}else if(!1===e&&!1!==t.ha){const o=[];let d=Promise.resolve();t.na.forEach((m,C)=>{t.sharedClientState.isLocalQueryTarget(C)?o.push(C):d=d.then(()=>(rh(t,C),Ru(t.localStore,C,!0))),zh(t.remoteStore,C)}),yield d,yield El(t,o),function(m){const C=$n(m);C.ra.forEach((k,Q)=>{zh(C.remoteStore,Q)}),C.oa.bi(),C.ra=new Map,C.ia=new Ls(Gn.comparator)}(t),t.ha=!1,yield Kf(t.remoteStore,!1)}}),oh.apply(this,arguments)}function El(i,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,ve.Z)(function*(i,e,t){const o=$n(i),d=[],m=[];for(const C of e){let k;const Q=o.na.get(C);if(Q&&0!==Q.length){k=yield Zd(o.localStore,ra(Q[0]));for(const ne of Q){const Ue=o.ea.get(ne),ht=yield y_(o,Ue);ht.snapshot&&m.push(ht.snapshot)}}else{const ne=yield yd(o.localStore,C);k=yield Zd(o.localStore,ne),yield Bm(o,Dd(ne),C,!1)}d.push(k)}return o.ta.Qo(m),d}),sf.apply(this,arguments)}function Dd(i){return dl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ah(i){const e=$n(i);return $n($n(e.localStore).persistence).Fs()}function lh(i,e,t,o){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,ve.Z)(function*(i,e,t,o){const d=$n(i);if(d.ha)return void xn("SyncEngine","Ignoring unexpected query state notification.");const m=d.na.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const C=yield Qd(d.localStore,qu(m[0])),k=Lo.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cc(d,C,k);break}case"rejected":yield Ru(d.localStore,e,!0),rh(d,e,o);break;default:sr()}}),Nc.apply(this,arguments)}function uh(i,e,t){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,ve.Z)(function*(i,e,t){const o=Lc(i);if(o.ha){for(const d of e){if(o.na.has(d)){xn("SyncEngine","Adding an already active target "+d);continue}const m=yield yd(o.localStore,d),C=yield Zd(o.localStore,m);yield Bm(o,Dd(m),C.targetId,!1),zf(o.remoteStore,C)}for(const d of t)o.na.has(d)&&(yield Ru(o.localStore,d,!1).then(()=>{zh(o.remoteStore,d),rh(o,d)}).catch(lc))}}),Fc.apply(this,arguments)}function Lc(i){const e=$n(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zv.bind(null,e),e.ta.Qo=d_.bind(null,e.eventManager),e.ta.fa=ru.bind(null,e.eventManager),e}function $c(i){const e=$n(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g_.bind(null,e),e}class _g{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Hh(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return cm(this.persistence,new $p,e.initialUser,this.M)}wa(e){return new n_(jp.zi,this.M)}_a(e){return new Gf}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vg extends _g{constructor(e,t,o){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ve.Z)(function*(){yield t().call(o,e),yield o.ya.initialize(o,e),yield $c(o.ya.syncEngine),yield Ed(o.ya.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ga(e){return cm(this.persistence,new $p,e.initialUser,this.M)}ma(e){return new g(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new kl(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,wm(),jh(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Gf}}class Wm extends vg{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ve.Z)(function*(){yield t().call(o,e);const d=o.ya.syncEngine;o.sharedClientState instanceof zp&&(o.sharedClientState.syncEngine={Mr:rf.bind(null,d),Or:lh.bind(null,d),Fr:uh.bind(null,d),Fs:ah.bind(null,d),kr:yg.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var m=(0,ve.Z)(function*(C){yield function Cd(i,e){return oh.apply(this,arguments)}(o.ya.syncEngine,C),o.gcScheduler&&(C&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):C||o.gcScheduler.stop())});return function(C){return m.apply(this,arguments)}}())})()}_a(e){const t=wm();if(!zp.vt(t))throw new R(Ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Lp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zp(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class tp{initialize(e,t){var o=this;return(0,ve.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>p_(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=sh.bind(null,o.syncEngine),yield Kf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new c_}createDatastore(e){const t=Hh(e.databaseInfo.databaseId),o=new bm(e.databaseInfo);return new Mu(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,m=k=>p_(this.syncEngine,k,0),C=Em.vt()?new Em:new vm,new o_(t,o,d,m,C);var t,o,d,m,C}createSyncEngine(e,t){return function(o,d,m,C,k,Q,ne){const Ue=new $m(o,d,m,C,k,Q);return ne&&(Ue.ha=!0),Ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const o=$n(t);xn("RemoteStore","RemoteStore shutting down."),o.fu.add(5),yield vd(o),o._u.shutdown(),o.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Eg(i,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qm{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new A,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(o=>{o&&o.xu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const o=e.Ea.decode(t),d=Number(o);isNaN(d)&&e.Pa(`length string (${o}) is not valid number`);const m=yield e.ba(d);return new Mm(JSON.parse(m),t.length+d)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ve.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const o=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Ym{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new R(Ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,ve.Z)(function*(m,C){const k=$n(m),Q=Ka(k.M)+"/documents",ne={documents:C.map(bn=>vu(k.M,bn))},Ue=yield k.ho("BatchGetDocuments",Q,ne),ht=new Map;Ue.forEach(bn=>{const Sn=function yl(i,e){return"found"in e?function(t,o){kr(!!o.found);const d=Ia(t,o.found.name),m=Vs(o.found.updateTime),C=new vn({mapValue:{fields:o.found.fields}});return or.newFoundDocument(d,m,C)}(i,e):"missing"in e?function(t,o){kr(!!o.missing),kr(!!o.readTime);const d=Ia(t,o.missing),m=Vs(o.readTime);return or.newNoDocument(d,m)}(i,e):sr()}(k.M,bn);ht.set(Sn.key.toString(),Sn)});const zt=[];return C.forEach(bn=>{const Sn=ht.get(bn.toString());kr(!!Sn),zt.push(Sn)}),zt}),function(m,C){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new mu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const m=Gn.fromPath(d);e.mutations.push(new ed(m,e.precondition(m)))}),yield(o=(0,ve.Z)(function*(d,m){const C=$n(d),k=Ka(C.M)+"/documents",Q={writes:m.map(ne=>Eu(C.M,ne))};yield C.oo("Commit",k,Q)}),function(d,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sr();t=Lr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new R(Ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?fs.updateTime(t):fs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lr.min()))throw new R(Ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fs.updateTime(t)}return fs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Km{constructor(e,t,o,d){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=d,this.Sa=5,this.Do=new Wp(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ve.Z)(function*(){const t=new Ym(e.datastore),o=e.Ca(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(m=>{e.xa(m)}))}).catch(d=>{e.xa(d)})}))}Ca(e){try{const t=this.updateFunction(e);return!Fs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gl(t)}return!1}}class __{constructor(e,t,o,d){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=as.UNAUTHENTICATED,this.clientId=ii.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,ve.Z)(function*(k){xn("FirestoreClient","Received user=",k.uid),yield m.authCredentialListener(k),m.user=k});return function(k){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(xn("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new A;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=nh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function bg(i,e){return wg.apply(this,arguments)}function wg(){return wg=(0,ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),xn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,ve.Z)(function*(m){o.isEqual(m)||(yield uc(e.localStore,m),o=m)});return function(m){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),wg.apply(this,arguments)}function Zm(i,e){return np.apply(this,arguments)}function np(){return np=(0,ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Ig(i);xn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>qf(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,m)=>qf(e.remoteStore,m)),i.onlineComponents=e}),np.apply(this,arguments)}function Ig(i){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,ve.Z)(function*(i){return i.offlineComponents||(xn("FirestoreClient","Using default OfflineComponentProvider"),yield bg(i,new _g)),i.offlineComponents}),Cg.apply(this,arguments)}function lf(i){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,ve.Z)(function*(i){return i.onlineComponents||(xn("FirestoreClient","Using default OnlineComponentProvider"),yield Zm(i,new tp)),i.onlineComponents}),Dg.apply(this,arguments)}function Tg(i){return Ig(i).then(e=>e.persistence)}function Sg(i){return Ig(i).then(e=>e.localStore)}function Xm(i){return lf(i).then(e=>e.remoteStore)}function Qm(i){return lf(i).then(e=>e.syncEngine)}function dh(i){return uf.apply(this,arguments)}function uf(){return uf=(0,ve.Z)(function*(i){const e=yield lf(i),t=e.eventManager;return t.onListen=h_.bind(null,e.syncEngine),t.onUnlisten=cg.bind(null,e.syncEngine),t}),uf.apply(this,arguments)}function E_(i,e,t={}){const o=new A;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(d,m,C,k,Q){const ne=new af({next:ht=>{m.enqueueAndForget(()=>og(d,Ue));const zt=ht.docs.has(C);!zt&&ht.fromCache?Q.reject(new R(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):zt&&ht.fromCache&&k&&"server"===k.source?Q.reject(new R(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(ht)},error:ht=>Q.reject(ht)}),Ue=new Xf(Al(C.path),ne,{includeMetadataChanges:!0,Cu:!0});return kc(d,Ue)}(yield dh(i),i.asyncQueue,e,t,o)})),o.promise}function Jm(i,e,t={}){const o=new A;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(d,m,C,k,Q){const ne=new af({next:ht=>{m.enqueueAndForget(()=>og(d,Ue)),ht.fromCache&&"server"===k.source?Q.reject(new R(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(ht)},error:ht=>Q.reject(ht)}),Ue=new Xf(C,ne,{includeMetadataChanges:!0,Cu:!0});return kc(d,Ue)}(yield dh(i),i.asyncQueue,e,t,o)})),o.promise}const ty=new Map;function rp(i,e,t){if(!t)throw new R(Ht.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ny(i,e,t,o){if(!0===e&&!0===o)throw new R(Ht.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function xg(i){if(!Gn.isDocumentKey(i))throw new R(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function cf(i){if(Gn.isDocumentKey(i))throw new R(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ip(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":sr()}function Vi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new R(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ip(i);throw new R(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function ry(i,e){if(e<=0)throw new R(Ht.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class iy{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new R(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new R(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ny("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iy({}),this._settingsFrozen=!1,e instanceof Ns?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new R(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(d.options.projectId)}(e))}get app(){if(!this._app)throw new R(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new R(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iy(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new V;switch(t.type){case"gapi":const o=t.client;return kr(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new it(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new R(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ty.get(e);t&&(xn("ComponentProvider","Removing Datastore"),ty.delete(e),t.terminate())}(this),Promise.resolve()}}class Us{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Us(this.firestore,e,this._key)}}class ca{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ca(this.firestore,e,this._query)}}class Nu extends ca{constructor(e,t,o){super(e,t,Al(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Us(this.firestore,null,new Gn(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function Rg(i,e,...t){if(i=(0,mt.m9)(i),rp("collection","path",e),i instanceof df){const o=yi.fromString(e,...t);return cf(o),new Nu(i,null,o)}{if(!(i instanceof Us||i instanceof Nu))throw new R(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(yi.fromString(e,...t));return cf(o),new Nu(i.firestore,null,o)}}function fh(i,e,...t){if(i=(0,mt.m9)(i),1===arguments.length&&(e=ii.R()),rp("doc","path",e),i instanceof df){const o=yi.fromString(e,...t);return xg(o),new Us(i,null,new Gn(o))}{if(!(i instanceof Us||i instanceof Nu))throw new R(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(yi.fromString(e,...t));return xg(o),new Us(i.firestore,i instanceof Nu?i.converter:null,new Gn(o))}}function I_(i,e){return i=(0,mt.m9)(i),e=(0,mt.m9)(e),(i instanceof Us||i instanceof Nu)&&(e instanceof Us||e instanceof Nu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function sp(i,e){return i=(0,mt.m9)(i),e=(0,mt.m9)(e),i instanceof ca&&e instanceof ca&&i.firestore===e.firestore&&xl(i._query,e._query)&&i.converter===e.converter}class C_{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Wp(this,"async_queue_retry"),this.qa=()=>{const t=jh();t&&xn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=jh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=jh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new A;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!rc(t))throw t;xn("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(o=>{throw this.$a=o,this.Ba=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(m){let C=m.message||"";return m.stack&&(C=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),C}(o)),o}).then(o=>(this.Ba=!1,o))));return this.ka=t,t}enqueueAfterDelay(e,t,o){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const d=ig.createAndSchedule(this,e,t,o,m=>this.ja(m));return this.Fa.push(d),d}Ka(){this.$a&&sr()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function oy(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class hf{constructor(){this._progressObserver={},this._taskCompletionResolver=new A,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ts extends df{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new C_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ff(this),this._firestoreClient.terminate()}}function ro(i){return i._firestoreClient||ff(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ff(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Bl(i._databaseId,m,i._persistenceKey,(k=t).host,k.ssl,k.experimentalForceLongPolling,k.experimentalAutoDetectLongPolling,k.useFetchStreams));var m,k;i._firestoreClient=new __(i._authCredentials,i._appCheckCredentials,i._queue,o)}function uy(i,e,t){const o=new A;return i.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield bg(i,t),yield Zm(i,e),o.resolve()}catch(d){if(!("FirebaseError"===(m=d).name?m.code===Ht.FAILED_PRECONDITION||m.code===Ht.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var m})).then(()=>o.promise)}function lp(i){if(i._initialized||i._terminated)throw new R(Ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new R(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ks(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(Ys.fromBase64String(e))}catch(t){throw new R(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iu(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bc{constructor(e){this._methodName=e}}class ph{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new R(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vr(this._lat,e._lat)||Vr(this._long,e._long)}}const py=/^__.*__$/;class D_{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new qa(e,this.data,t,this.fieldTransforms)}}class Pg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sr()}}class gh{constructor(e,t,o,d,m,C){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=d,void 0===m&&this.Ya(),this.fieldTransforms=m||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new gh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Za({path:o,ec:!1});return d.nc(e),d}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Za({path:o,ec:!1});return d.Ya(),d}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return dp(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(kg(this.Xa)&&py.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Ng{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Hh(e)}ac(e,t,o,d=!1){return new gh({Xa:e,methodName:t,uc:o,path:ks.emptyPath(),ec:!1,oc:d},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Vc(i){const e=i._freezeSettings(),t=Hh(i._databaseId);return new Ng(i._databaseId,!!e.ignoreUndefinedProperties,t)}function pf(i,e,t,o,d,m={}){const C=i.ac(m.merge||m.mergeFields?2:0,e,t,d);cp("Data must be an object, but it was:",C,o);const k=Ey(o,C);let Q,ne;if(m.merge)Q=new Tl(C.fieldMask),ne=C.fieldTransforms;else if(m.mergeFields){const Ue=[];for(const ht of m.mergeFields){const zt=$g(e,ht,t);if(!C.contains(zt))throw new R(Ht.INVALID_ARGUMENT,`Field '${zt}' is specified in your field mask but missing from your input data.`);Bg(Ue,zt)||Ue.push(zt)}Q=new Tl(Ue),ne=C.fieldTransforms.filter(ht=>Q.covers(ht.field))}else Q=null,ne=C.fieldTransforms;return new D_(new vn(k),Q,ne)}class mh extends Bc{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}function Fg(i,e,t){return new gh({Xa:3,uc:e.settings.uc,methodName:i._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class up extends Bc{_toFieldTransform(e){return new Qs(e.path,new zl)}isEqual(e){return e instanceof up}}class gy extends Bc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Fg(this,e,!0),o=this.cc.map(m=>Uc(m,t)),d=new Rl(o);return new Qs(e.path,d)}isEqual(e){return this===e}}class my extends Bc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=Fg(this,e,!0),o=this.cc.map(m=>Uc(m,t)),d=new pl(o);return new Qs(e.path,d)}isEqual(e){return this===e}}class yy extends Bc{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new sa(e.M,Gl(e.M,this.hc));return new Qs(e.path,t)}isEqual(e){return this===e}}function _y(i,e,t,o){const d=i.ac(1,e,t);cp("Data must be an object, but it was:",d,o);const m=[],C=vn.empty();Sa(o,(Q,ne)=>{const Ue=gf(e,Q,t);ne=(0,mt.m9)(ne);const ht=d.sc(Ue);if(ne instanceof mh)m.push(Ue);else{const zt=Uc(ne,ht);null!=zt&&(m.push(Ue),C.set(Ue,zt))}});const k=new Tl(m);return new Pg(C,k,d.fieldTransforms)}function Lg(i,e,t,o,d,m){const C=i.ac(1,e,t),k=[$g(e,o,t)],Q=[d];if(m.length%2!=0)throw new R(Ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let zt=0;zt<m.length;zt+=2)k.push($g(e,m[zt])),Q.push(m[zt+1]);const ne=[],Ue=vn.empty();for(let zt=k.length-1;zt>=0;--zt)if(!Bg(ne,k[zt])){const bn=k[zt];let Sn=Q[zt];Sn=(0,mt.m9)(Sn);const dr=C.sc(bn);if(Sn instanceof mh)ne.push(bn);else{const hi=Uc(Sn,dr);null!=hi&&(ne.push(bn),Ue.set(bn,hi))}}const ht=new Tl(ne);return new Pg(Ue,ht,C.fieldTransforms)}function vy(i,e,t,o=!1){return Uc(t,i.ac(o?4:3,e))}function Uc(i,e){if(So(i=(0,mt.m9)(i)))return cp("Unsupported field value:",e,i),Ey(i,e);if(i instanceof Bc)return function(t,o){if(!kg(o.Xa))throw o.rc(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.rc(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,o){const d=[];let m=0;for(const C of t){let k=Uc(C,o.ic(m));null==k&&(k={nullValue:"NULL_VALUE"}),d.push(k),m++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gl(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Yi.fromDate(t);return{timestampValue:Ml(o.M,d)}}if(t instanceof Yi){const d=new Yi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ml(o.M,d)}}if(t instanceof ph)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof iu)return{bytesValue:Bd(o.M,t._byteString)};if(t instanceof Us){const d=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(d))throw o.rc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:rd(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.rc(`Unsupported field value: ${ip(t)}`)}(i,e)}function Ey(i,e){const t={};return pc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(i,(o,d)=>{const m=Uc(d,e.tc(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function So(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Yi||i instanceof ph||i instanceof iu||i instanceof Us||i instanceof Bc)}function cp(i,e,t){if(!So(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=ip(t);throw e.rc("an object"===o?i+" a custom object":i+" "+o)}var o}function $g(i,e,t){if((e=(0,mt.m9)(e))instanceof Fu)return e._internalPath;if("string"==typeof e)return gf(i,e);throw dp("Field path arguments must be of type string or ",i,!1,void 0,t)}const T_=new RegExp("[~\\*/\\[\\]]");function gf(i,e,t){if(e.search(T_)>=0)throw dp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Fu(...e.split("."))._internalPath}catch(o){throw dp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function dp(i,e,t,o,d){const m=o&&!o.isEmpty(),C=void 0!==d;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let Q="";return(m||C)&&(Q+=" (found",m&&(Q+=` in field ${o}`),C&&(Q+=` in document ${d}`),Q+=")"),new R(Ht.INVALID_ARGUMENT,k+i+Q)}function Bg(i,e){return i.some(t=>t.isEqual(e))}class yh{constructor(e,t,o,d,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Us(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _h(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _h extends yh{data(){return super.data()}}function hp(i,e){return"string"==typeof e?gf(i,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}class Td{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lu extends yh{constructor(e,t,o,d,m,C){super(e,t,o,d,C),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(hp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class mf extends Lu{data(e={}){return super.data(e)}}class dc{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Td(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new mf(this._firestore,this._userDataWriter,o.key,o,new Td(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new mf(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Td(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>d||3!==C.type).map(C=>{const k=new mf(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Td(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let Q=-1,ne=-1;return 0!==C.type&&(Q=m.indexOf(C.doc.key),m=m.delete(C.doc.key)),1!==C.type&&(m=m.add(C.doc),ne=m.indexOf(C.doc.key)),{type:Qv(C.type),doc:k,oldIndex:Q,newIndex:ne}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sr()}}function Vg(i,e){return i instanceof Lu&&e instanceof Lu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof dc&&e instanceof dc&&i._firestore===e._firestore&&sp(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function fp(i){if(vc(i)&&0===i.explicitOrderBy.length)throw new R(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ja{}function jc(i,...e){for(const t of e)i=t._apply(i);return i}class S_ extends Ja{constructor(e,t,o){super(),this.lc=e,this.fc=t,this.dc=o,this.type="where"}_apply(e){const t=Vc(e.firestore),o=function(d,m,C,k,Q,ne,Ue){let ht;if(Q.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new R(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){Hg(Ue,ne);const bn=[];for(const Sn of Ue)bn.push(Iy(k,d,Sn));ht={arrayValue:{values:bn}}}else ht=Iy(k,d,Ue)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||Hg(Ue,ne),ht=vy(C,"where",Ue,"in"===ne||"not-in"===ne);const zt=Xs.create(Q,ne,ht);return function(bn,Sn){if(Sn.S()){const hi=Ec(bn);if(null!==hi&&!hi.isEqual(Sn.field))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${hi.toString()}' and '${Sn.field.toString()}'`);const js=jl(bn);null!==js&&Gg(0,Sn.field,js)}const dr=function(hi,js){for(const uo of hi.filters)if(js.indexOf(uo.op)>=0)return uo.op;return null}(bn,function(hi){switch(hi){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Sn.op));if(null!==dr)throw new R(Ht.INVALID_ARGUMENT,dr===Sn.op?`Invalid query. You cannot use more than one '${Sn.op.toString()}' filter.`:`Invalid query. You cannot use '${Sn.op.toString()}' filters with '${dr.toString()}' filters.`)}(d,zt),zt}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new ca(e.firestore,e.converter,function(d,m){const C=d.filters.concat([m]);return new cl(d.path,d.collectionGroup,d.explicitOrderBy.slice(),C,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class su extends Ja{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(o,d,m){if(null!==o.startAt)throw new R(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new R(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ea(d,m);return function(k,Q){if(null===jl(k)){const ne=Ec(k);null!==ne&&Gg(0,ne,Q.field)}}(o,C),C}(e._query,this.lc,this._c);return new ca(e.firestore,e.converter,function(o,d){const m=o.explicitOrderBy.concat([d]);return new cl(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Ug extends Ja{constructor(e,t,o){super(),this.type=e,this.wc=t,this.mc=o}_apply(e){return new ca(e.firestore,e.converter,Zc(e._query,this.wc,this.mc))}}class wy extends Ja{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=jg(e,this.type,this.gc,this.yc);return new ca(e.firestore,e.converter,(d=t,new cl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class pp extends Ja{constructor(e,t,o){super(),this.type=e,this.gc=t,this.yc=o}_apply(e){const t=jg(e,this.type,this.gc,this.yc);return new ca(e.firestore,e.converter,(d=t,new cl((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function jg(i,e,t,o){if(t[0]=(0,mt.m9)(t[0]),t[0]instanceof yh)return function(d,m,C,k,Q){if(!k)throw new R(Ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const ne=[];for(const Ue of fl(d))if(Ue.field.isKeyField())ne.push(ol(m,k.key));else{const ht=k.data.field(Ue.field);if(rl(ht))throw new R(Ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ht){const zt=Ue.field.canonicalString();throw new R(Ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${zt}' (used as the orderBy) does not exist.`)}ne.push(ht)}return new va(ne,Q)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=Vc(i.firestore);return function(m,C,k,Q,ne,Ue){const ht=m.explicitOrderBy;if(ne.length>ht.length)throw new R(Ht.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const zt=[];for(let bn=0;bn<ne.length;bn++){const Sn=ne[bn];if(ht[bn].field.isKeyField()){if("string"!=typeof Sn)throw new R(Ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof Sn}`);if(!hu(m)&&-1!==Sn.indexOf("/"))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Q}() must be a plain document ID, but '${Sn}' contains a slash.`);const dr=m.path.child(yi.fromString(Sn));if(!Gn.isDocumentKey(dr))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Q}() must result in a valid document path, but '${dr}' is not because it contains an odd number of segments.`);const hi=new Gn(dr);zt.push(ol(C,hi))}else{const dr=vy(k,Q,Sn);zt.push(dr)}}return new va(zt,Ue)}(i._query,i.firestore._databaseId,d,e,t,o)}}function Iy(i,e,t){if("string"==typeof(t=(0,mt.m9)(t))){if(""===t)throw new R(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hu(e)&&-1!==t.indexOf("/"))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(yi.fromString(t));if(!Gn.isDocumentKey(o))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return ol(i,new Gn(o))}if(t instanceof Us)return ol(i,t._key);throw new R(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(t)}.`)}function Hg(i,e){if(!Array.isArray(i)||0===i.length)throw new R(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new R(Ht.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Gg(i,e,t){if(!t.isEqual(e))throw new R(Ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vh{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sr()}}convertObject(e,t){const o={};return Sa(e.fields,(d,m)=>{o[d]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new ph(Bi(e.latitude),Bi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ks(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Zs(e));default:return null}}convertTimestamp(e){const t=Jo(e);return new Yi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=yi.fromString(e);kr(mr(o));const d=new Ns(o.get(1),o.get(3)),m=new Gn(o.popFirst(5));return d.isEqual(t)||Ur(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function gp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Cy extends vh{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}class zg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,t,o){this._verifyNotCommitted();const d=Bu(e,this._firestore),m=gp(d.converter,t,o),C=pf(this._dataReader,"WriteBatch.set",d._key,m,null!==d.converter,o);return this._mutations.push(C.toMutation(d._key,fs.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const m=Bu(e,this._firestore);let C;return C="string"==typeof(t=(0,mt.m9)(t))||t instanceof Fu?Lg(this._dataReader,"WriteBatch.update",m._key,t,o,d):_y(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(C.toMutation(m._key,fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bu(e,this._firestore);return this._mutations=this._mutations.concat(new mu(t._key,fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new R(Ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bu(i,e){if((i=(0,mt.m9)(i)).firestore!==e)throw new R(Ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Hc extends vh{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Us(this.firestore,null,t)}}function Wg(i,e,t){i=Vi(i,Us);const o=Vi(i.firestore,Ts),d=gp(i.converter,e,t);return Eh(o,[pf(Vc(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,fs.none())])}function qg(i,e,t,...o){i=Vi(i,Us);const d=Vi(i.firestore,Ts),m=Vc(d);let C;return C="string"==typeof(e=(0,mt.m9)(e))||e instanceof Fu?Lg(m,"updateDoc",i._key,e,t,o):_y(m,"updateDoc",i._key,e),Eh(d,[C.toMutation(i._key,fs.exists(!0))])}function Ry(i,...e){var t,o,d;i=(0,mt.m9)(i);let m={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||oy(e[C])||(m=e[C],C++);const k={includeMetadataChanges:m.includeMetadataChanges};if(oy(e[C])){const ht=e[C];e[C]=null===(t=ht.next)||void 0===t?void 0:t.bind(ht),e[C+1]=null===(o=ht.error)||void 0===o?void 0:o.bind(ht),e[C+2]=null===(d=ht.complete)||void 0===d?void 0:d.bind(ht)}let Q,ne,Ue;if(i instanceof Us)ne=Vi(i.firestore,Ts),Ue=Al(i._key.path),Q={next:ht=>{e[C]&&e[C](Yg(ne,i,ht))},error:e[C+1],complete:e[C+2]};else{const ht=Vi(i,ca);ne=Vi(ht.firestore,Ts),Ue=ht._query;const zt=new Hc(ne);Q={next:bn=>{e[C]&&e[C](new dc(ne,zt,ht,bn))},error:e[C+1],complete:e[C+2]},fp(i._query)}return function(ht,zt,bn,Sn){const dr=new af(Sn),hi=new Xf(zt,dr,bn);return ht.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return kc(yield dh(ht),hi)})),()=>{dr.Ia(),ht.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return og(yield dh(ht),hi)}))}}(ro(ne),Ue,k,Q)}function Eh(i,e){return function(t,o){const d=new A;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Um(i,e,t){return Qf.apply(this,arguments)}(yield Qm(t),o,d)})),d.promise}(ro(i),e)}function Yg(i,e,t){const o=t.docs.get(e._key),d=new Hc(i);return new Lu(i,d,e._key,o,new Td(t.hasPendingWrites,t.fromCache),e.converter)}class N_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vc(e)}get(e){const t=Bu(e,this._firestore),o=new Cy(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return sr();const m=d[0];if(m.isFoundDocument())return new yh(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new yh(this._firestore,o,t._key,null,t.converter);throw sr()})}set(e,t,o){const d=Bu(e,this._firestore),m=gp(d.converter,t,o),C=pf(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,o);return this._transaction.set(d._key,C),this}update(e,t,o,...d){const m=Bu(e,this._firestore);let C;return C="string"==typeof(t=(0,mt.m9)(t))||t instanceof Fu?Lg(this._dataReader,"Transaction.update",m._key,t,o,d):_y(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,C),this}delete(e){const t=Bu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bu(e,this._firestore),o=new Hc(this._firestore);return super.get(e).then(d=>new Lu(this._firestore,o,t._key,d._document,new Td(!1,!1),t.converter))}}function yp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new R("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Kg(){if("undefined"==typeof Uint8Array)throw new R("unimplemented","Uint8Arrays are not available in this environment.")}function Zg(){if(!function ja(){return"undefined"!=typeof atob}())throw new R("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Zo=pt.SDK_VERSION,(0,pt._registerComponent)(new He.wA("firestore",(t,{options:o})=>{const d=t.getProvider("app").getImmediate(),m=new Ts(d,new le(t.getProvider("auth-internal")),new Jn(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),m._setSettings(o),m},"PUBLIC")),(0,pt.registerVersion)(Dl,"3.4.8",i),(0,pt.registerVersion)(Dl,"3.4.8","esm2017")}();class bh{constructor(e){this._delegate=e}static fromBase64String(e){return Zg(),new bh(iu.fromBase64String(e))}static fromUint8Array(e){return Kg(),new bh(iu.fromUint8Array(e))}toBase64(){return Zg(),this._delegate.toBase64()}toUint8Array(){return Kg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _p(i){return function Oy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Py{enableIndexedDbPersistence(e,t){return function Mg(i,e){lp(i=Vi(i,Ts));const t=ro(i),o=i._freezeSettings(),d=new tp;return uy(t,d,new vg(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Zv(i){lp(i=Vi(i,Ts));const e=ro(i),t=i._freezeSettings(),o=new tp;return uy(e,o,new Wm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function op(i){if(i._initialized&&!i._terminated)throw new R(Ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new A;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(o){if(!Za.vt())return Promise.resolve();const d=o+"main";yield Za.delete(d)}),function(o){return t.apply(this,arguments)})(Lp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Xg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ns||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function w_(i,e,t,o={}){var d;const m=(i=Vi(i,df))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&qi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,k;if("string"==typeof o.mockUserToken)C=o.mockUserToken,k=as.MOCK_USER;else{C=(0,mt.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const Q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!Q)throw new R(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new as(Q)}i._authCredentials=new Y(new S(C,k))}}(this._delegate,e,t,o)}enableNetwork(){return function Og(i){return function Ag(i){return i.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Tg(i),t=yield Xm(i);return e.setNetworkEnabled(!0),function(o){const d=$n(o);return d.fu.delete(0),Gh(d)}(t)}))}(ro(i=Vi(i,Ts)))}(this._delegate)}disableNetwork(){return function cy(i){return function v_(i){return i.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield Tg(i),t=yield Xm(i);return e.setNetworkEnabled(!1),(o=(0,ve.Z)(function*(d){const m=$n(d);m.fu.add(0),yield vd(m),m.wu.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(ro(i=Vi(i,Ts)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,ny("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ap(i){return function(e){const t=new A;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Gm(i,e){return ef.apply(this,arguments)}(yield Qm(e),t)})),t.promise}(ro(i=Vi(i,Ts)))}(this._delegate)}onSnapshotsInSync(e){return function k_(i,e){return function ey(i,e){const t=new af(e);return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return o=yield dh(i),d=t,$n(o).Eu.add(d),void d.next();var o,d})),()=>{t.Ia(),i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return o=yield dh(i),d=t,void $n(o).Eu.delete(d);var o,d}))}}(ro(i=Vi(i,Ts)),oy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new R("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ih(this,Rg(this._delegate,e))}catch(t){throw Ao(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fl(this,fh(this._delegate,e))}catch(t){throw Ao(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ca(this,function sy(i,e){if(i=Vi(i,df),rp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new R(Ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ca(i,null,(t=e,new cl(yi.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ao(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function Yv(i,e){const t=new A;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const o=yield(d=i,lf(d).then(m=>m.datastore));var d;new Km(i.asyncQueue,o,e,t).run()})),t.promise}(ro(i=Vi(i,Ts)),t=>e(new N_(i,t)))}(this._delegate,t=>e(new Qg(this,t)))}batch(){return ro(this._delegate),new Gc(new zg(this._delegate,e=>Eh(this._delegate,e)))}loadBundle(e){return function hy(i,e){const t=ro(i=Vi(i,Ts)),o=new hf;return function b_(i,e,t,o){const d=function(m,C){let k;return k="string"==typeof m?(new TextEncoder).encode(m):m,Q=function(Q,ne){if(Q instanceof Uint8Array)return Eg(Q,void 0);if(Q instanceof ArrayBuffer)return Eg(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new qm(Q,C);var Q}(t,Hh(e));i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function ch(i,e,t){const o=$n(i);var d;(d=(0,ve.Z)(function*(m,C,k){try{const Q=yield C.getMetadata();if(yield function(zt,bn){const Sn=$n(zt),dr=Vs(bn.createTime);return Sn.persistence.runTransaction("hasNewerBundle","readonly",hi=>Sn._s.getBundleMetadata(hi,bn.id)).then(hi=>!!hi&&hi.createTime.compareTo(dr)>=0)}(m.localStore,Q))return yield C.close(),k._completeWith({taskState:"Success",documentsLoaded:(zt=Q).totalDocuments,bytesLoaded:zt.totalBytes,totalDocuments:zt.totalDocuments,totalBytes:zt.totalBytes}),Promise.resolve(new Set);k._updateProgress(Pm(Q));const ne=new Om(Q,m.localStore,C.M);let Ue=yield C.da();for(;Ue;){const zt=yield ne.ku(Ue);zt&&k._updateProgress(zt),Ue=yield C.da()}const ht=yield ne.complete();return yield cc(m,ht.Fu,void 0),yield function(zt,bn){const Sn=$n(zt);return Sn.persistence.runTransaction("Save bundle","readwrite",dr=>Sn._s.saveBundleMetadata(dr,bn))}(m.localStore,Q),k._completeWith(ht.progress),Promise.resolve(ht.Ou)}catch(Q){return qi("SyncEngine",`Loading bundle failed with ${Q}`),k._failWith(Q),Promise.resolve(new Set)}var zt}),function(m,C,k){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield Qm(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function fy(i,e){return function hh(i,e){return i.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,o){const d=$n(t);return d.persistence.runTransaction("Get named query","readonly",m=>d._s.getNamedQuery(m,o))}(yield Sg(i),e)}))}(ro(i=Vi(i,Ts)),e).then(t=>t?new ca(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ca(this,t):null)}}class _f extends vh{constructor(e){super(),this.firestore=e}convertBytes(e){return new bh(new iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fl.forKey(t,this.firestore,null)}}class Qg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _f(e)}get(e){const t=Ad(e);return this._delegate.get(t).then(o=>new Ep(this._firestore,new Lu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=Ad(e);return o?(yp("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Ad(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Ad(e);return this._delegate.delete(t),this}}class Gc{constructor(e){this._delegate=e}set(e,t,o){const d=Ad(e);return o?(yp("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Ad(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Ad(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new mf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wh(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Sd.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let m=d.get(t);return m||(m=new Sd(e,new _f(e),t),d.set(t,m)),m}}Sd.INSTANCES=new WeakMap;class Fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _f(e)}static forPath(e,t,o){if(e.length%2!=0)throw new R("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fl(t,new Us(t._delegate,o,new Gn(e)))}static forKey(e,t,o){return new Fl(t,new Us(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ih(this.firestore,Rg(this._delegate,e))}catch(t){throw Ao(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,mt.m9)(e))instanceof Us&&I_(this._delegate,e)}set(e,t){t=yp("DocumentReference.set",t);try{return t?Wg(this._delegate,e,t):Wg(this._delegate,e)}catch(o){throw Ao(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?qg(this._delegate,e):qg(this._delegate,e,t,...o)}catch(d){throw Ao(d,"updateDoc()","DocumentReference.update()")}}delete(){return function O_(i){return Eh(Vi(i.firestore,Ts),[new mu(i._key,fs.none())])}(this._delegate)}onSnapshot(...e){const t=G_(e),o=vp(e,d=>new Ep(this.firestore,new Lu(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Ry(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Dy(i){i=Vi(i,Us);const e=Vi(i.firestore,Ts),t=ro(e),o=new Hc(e);return function Wv(i,e){const t=new A;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(o=(0,ve.Z)(function*(d,m,C){try{const k=yield function(Q,ne){const Ue=$n(Q);return Ue.persistence.runTransaction("read document","readonly",ht=>Ue.ci.Ls(ht,ne))}(d,m);k.isFoundDocument()?C.resolve(k):k.isNoDocument()?C.resolve(null):C.reject(new R(Ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const Q=nh(k,`Failed to get document '${m} from cache`);C.reject(Q)}}),function(d,m,C){return o.apply(this,arguments)})(yield Sg(i),e,t);var o})),t.promise}(t,i._key).then(d=>new Lu(e,o,i._key,d,new Td(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ty(i){i=Vi(i,Us);const e=Vi(i.firestore,Ts);return E_(ro(e),i._key,{source:"server"}).then(t=>Yg(e,i,t))}(this._delegate):function mp(i){i=Vi(i,Us);const e=Vi(i.firestore,Ts);return E_(ro(e),i._key).then(t=>Yg(e,i,t))}(this._delegate),t.then(o=>new Ep(this.firestore,new Lu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Fl(this.firestore,this._delegate.withConverter(e?Sd.getInstance(this.firestore,e):null))}}function Ao(i,e,t){return i.message=i.message.replace(e,t),i}function G_(i){for(const e of i)if("object"==typeof e&&!_p(e))return e;return{}}function vp(i,e){var t,o;let d;return d=_p(i[0])?i[0]:_p(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{d.next&&d.next(e(m))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class Ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Vg(this._delegate,e._delegate)}}class wh extends Ep{data(e){const t=this._delegate.data(e);return function Ua(i,e){i||sr()}(void 0!==t),t}}class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _f(e)}where(e,t,o){try{return new Ca(this.firestore,jc(this._delegate,function $u(i,e,t){const o=e,d=hp("where",i);return new S_(d,o,t)}(e,t,o)))}catch(d){throw Ao(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ca(this.firestore,jc(this._delegate,function ou(i,e="asc"){const t=e,o=hp("orderBy",i);return new su(o,t)}(e,t)))}catch(o){throw Ao(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ca(this.firestore,jc(this._delegate,function by(i){return ry("limit",i),new Ug("limit",i,"F")}(e)))}catch(t){throw Ao(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ca(this.firestore,jc(this._delegate,function A_(i){return ry("limitToLast",i),new Ug("limitToLast",i,"L")}(e)))}catch(t){throw Ao(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ca(this.firestore,jc(this._delegate,function x_(...i){return new wy("startAt",i,!0)}(...e)))}catch(t){throw Ao(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ca(this.firestore,jc(this._delegate,function R_(...i){return new wy("startAfter",i,!1)}(...e)))}catch(t){throw Ao(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ca(this.firestore,jc(this._delegate,function yf(...i){return new pp("endBefore",i,!1)}(...e)))}catch(t){throw Ao(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ca(this.firestore,jc(this._delegate,function M_(...i){return new pp("endAt",i,!0)}(...e)))}catch(t){throw Ao(t,"endAt()","Query.endAt()")}}isEqual(e){return sp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ay(i){i=Vi(i,ca);const e=Vi(i.firestore,Ts),t=ro(e),o=new Hc(e);return function qv(i,e){const t=new A;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(o=(0,ve.Z)(function*(d,m,C){try{const k=yield Xd(d,m,!0),Q=new Fm(m,k.li),ne=Q.Gu(k.documents),Ue=Q.applyChanges(ne,!1);C.resolve(Ue.snapshot)}catch(k){const Q=nh(k,`Failed to execute query '${m} against cache`);C.reject(Q)}}),function(d,m,C){return o.apply(this,arguments)})(yield Sg(i),e,t);var o})),t.promise}(t,i._query).then(d=>new dc(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function xy(i){i=Vi(i,ca);const e=Vi(i.firestore,Ts),t=ro(e),o=new Hc(e);return Jm(t,i._query,{source:"server"}).then(d=>new dc(e,o,i,d))}(this._delegate):function Sy(i){i=Vi(i,ca);const e=Vi(i.firestore,Ts),t=ro(e),o=new Hc(e);return fp(i._query),Jm(t,i._query).then(d=>new dc(e,o,i,d))}(this._delegate),t.then(o=>new Zr(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=G_(e),o=vp(e,d=>new Zr(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Ry(this._delegate,t,o)}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?Sd.getInstance(this.firestore,e):null))}}class t0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zr{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ca(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new wh(this._firestore,o))})}isEqual(e){return Vg(this._delegate,e._delegate)}}class Ih extends Ca{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fl(this.firestore,e):null}doc(e){try{return new Fl(this.firestore,void 0===e?fh(this._delegate):fh(this._delegate,e))}catch(t){throw Ao(t,"doc()","CollectionReference.doc()")}}add(e){return function P_(i,e){const t=Vi(i.firestore,Ts),o=fh(i),d=gp(i.converter,e);return Eh(t,[pf(Vc(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,fs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Fl(this.firestore,t))}isEqual(e){return I_(this._delegate,e._delegate)}withConverter(e){return new Ih(this.firestore,this._delegate.withConverter(e?Sd.getInstance(this.firestore,e):null))}}function Ad(i){return Vi(i,Us)}class Jg{constructor(...e){this._delegate=new Fu(...e)}static documentId(){return new Jg(ks.keyField().canonicalString())}isEqual(e){return(e=(0,mt.m9)(e))instanceof Fu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $_(){return new up("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vu(e)}static delete(){const e=function L_(){return new mh("deleteField")}();return e._methodName="FieldValue.delete",new Vu(e)}static arrayUnion(...e){const t=function B_(...i){return new gy("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Vu(t)}static arrayRemove(...e){const t=function V_(...i){return new my("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Vu(t)}static increment(e){const t=function U_(i){return new yy("increment",i)}(e);return t._methodName="FieldValue.increment",new Vu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const z_={Firestore:Xg,GeoPoint:ph,Timestamp:Yi,Blob:bh,Transaction:Qg,WriteBatch:Gc,DocumentReference:Fl,DocumentSnapshot:Ep,Query:Ca,QueryDocumentSnapshot:wh,QuerySnapshot:Zr,CollectionReference:Ih,FieldPath:Jg,FieldValue:Vu,setLogLevel:function ky(i){!function Xo(i){Po.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function wp(i){(function bp(i,e){i.INTERNAL.registerComponent(new He.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},z_)))})(i,(e,t)=>new Xg(e,t,new Py)),i.registerVersion("@firebase/firestore-compat","0.1.17")}(Dt.Z);var ms=L(4941),n0=L(440),Ny=L(127);function Fy(i,e){return function W_(i,e=J.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Ip(i,e){return Fy(i,e).pipe((0,ee.U)(t=>({payload:t,type:"query"})))}function vf(i,e){return Ip(i,e).pipe((0,pe.O)(void 0),Ce(),(0,ee.U)(([t,o])=>{const d=o.payload.docChanges(),m=d.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((C,k)=>{const Q=d.find(Ue=>Ue.doc.ref.isEqual(C.ref)),ne=null==t?void 0:t.payload.docs.find(Ue=>Ue.ref.isEqual(C.ref));Q&&JSON.stringify(Q.doc.metadata)===JSON.stringify(C.metadata)||!Q&&ne&&JSON.stringify(ne.metadata)===JSON.stringify(C.metadata)||m.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:C}})}),m}))}function em(i,e,t){return vf(i,t).pipe((0,ce.R)((o,d)=>function q_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Y_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return tm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tm(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(m=>m.payload),e),[]),(0,Xe.x)(),(0,ee.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function tm(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function Ch(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class $y{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=vf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ee.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,pe.O)(void 0),Ce(),(0,Ne.h)(([o,d])=>d.length>0||!o),(0,ee.U)(([o,d])=>d),ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ch(e);return em(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return Ip(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ae.iC)}get(e){return(0,Ve.D)(this.query.get(e)).pipe(ae.iC)}add(e){return this.ref.add(e)}doc(e){return new By(this.ref.doc(e),this.afs)}}class By{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:m}=jy(o,t);return new $y(d,m,this.afs)}snapshotChanges(){return function Ly(i,e){return Fy(i,e).pipe((0,pe.O)(void 0),Ce(),(0,ee.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ee.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ve.D)(this.ref.get(e)).pipe(ae.iC)}}class K_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Ne.h)(t=>t.length>0),ae.iC):vf(this.query,this.afs.schedulers.outsideAngular).pipe(ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ce.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ch(e);return em(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return Ip(this.query,this.afs.schedulers.outsideAngular).pipe((0,ee.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ae.iC)}get(e){return(0,Ve.D)(this.query.get(e)).pipe(ae.iC)}}const Ef=new a.OlP("angularfire2.enableFirestorePersistence"),nm=new a.OlP("angularfire2.firestore.persistenceSettings"),Vy=new a.OlP("angularfire2.firestore.settings"),Uy=new a.OlP("angularfire2.firestore.use-emulator");function jy(i,e=(t=>t)){return{query:e(i),ref:i}}let Dh=(()=>{class i{constructor(t,o,d,m,C,k,Q,ne,Ue,ht,zt,bn,Sn,dr,hi,js,uo){this.schedulers=Q;const Xi=(0,_e.on)(t,k,o),xo=Ue;ht&&(0,ms.nw)(Xi,k,zt,Sn,dr,hi,bn,js),[this.firestore,this.persistenceEnabled$]=(0,_e.cc)(`${Xi.name}.firestore`,"AngularFirestore",Xi.name,()=>{const Hs=k.runOutsideAngular(()=>Xi.firestore());if(m&&Hs.settings(m),xo&&Hs.useEmulator(...xo),d&&!(0,ke.PM)(C)){const io=()=>{try{return(0,Ve.D)(Hs.enablePersistence(ne||void 0).then(()=>!0,()=>!1))}catch(Da){return"undefined"!=typeof console&&console.warn(Da),(0,Me.of)(!1)}};return[Hs,k.runOutsideAngular(io)]}return[Hs,(0,Me.of)(!1)]},[m,xo,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:C}=jy(d,o),k=this.schedulers.ngZone.run(()=>m);return new $y(k,C,this)}collectionGroup(t,o){const d=o||(C=>C),m=this.firestore.collectionGroup(t);return new K_(d(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new By(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(_e.Dh),a.LFG(_e.xv,8),a.LFG(Ef,8),a.LFG(Vy,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(ae.HU),a.LFG(nm,8),a.LFG(Uy,8),a.LFG(ms.zQ,8),a.LFG(ms.Qv,8),a.LFG(ms.L6,8),a.LFG(ms._Q,8),a.LFG(ms.rT,8),a.LFG(ms.lh,8),a.LFG(ms.f7,8),a.LFG(n0.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),bf=(()=>{class i{constructor(){Ny.Z.registerVersion("angularfire",ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ef,useValue:!0},{provide:nm,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({providers:[Dh]}),i})()},4586:(On,Ct,L)=>{"use strict";L.d(Ct,{Q1:()=>jt,TE:()=>b});var a=L(2916),J=L(1086),Z=L(5254),Ve=L(3489),Me=L(353);class we{constructor(I,q){this.dueTime=I,this.scheduler=q}call(I,q){return q.subscribe(new Ce(I,this.dueTime,this.scheduler))}}class Ce extends Ve.L{constructor(I,q,fe){super(I),this.dueTime=q,this.scheduler=fe,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(I){this.clearDebounce(),this.lastValue=I,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ee,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:I}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(I)}}clearDebounce(){const I=this.debouncedSubscription;null!==I&&(this.remove(I),I.unsubscribe(),this.debouncedSubscription=null)}}function Ee(E){E.debouncedNext()}var oe=L(4850),pe=L(7545),ee=L(6351),ce=L(5e3),Xe=L(2011),Ne=L(3942),_e=L(5861),ke=L(9681),$e=L(2090),Dt=L(4859);const ve="firebasestorage.googleapis.com",pt="storageBucket";class mt extends $e.ZR{constructor(I,q){super(Ft(I),`Firebase Storage: ${q} (${Ft(I)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}_codeEquals(I){return Ft(I)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(I){this.customData.serverResponse=I,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ft(E){return"storage/"+E}function Ye(){return new mt("unknown","An unknown error occurred, please check the error payload for server response.")}function Lt(){return new mt("canceled","User canceled the upload/download.")}function ze(){return new mt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function U(E){return new mt("invalid-argument",E)}function Qe(){return new mt("app-deleted","The Firebase app was deleted.")}function rn(E){return new mt("invalid-root-operation","The operation '"+E+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function St(E,I){return new mt("invalid-format","String does not match format '"+E+"': "+I)}function hn(E){throw new mt("internal-error","Internal error: "+E)}class mn{constructor(I,q){this.bucket=I,this.path_=q}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const I=encodeURIComponent;return"/b/"+I(this.bucket)+"/o/"+I(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(I,q){let fe;try{fe=mn.makeFromUrl(I,q)}catch(Le){return new mn(I,"")}if(""===fe.path)return fe;throw function vt(E){return new mt("invalid-default-bucket","Invalid default bucket '"+E+"'.")}(I)}static makeFromUrl(I,q){let fe=null;const Le="([A-Za-z0-9.\\-_]+)",kn=new RegExp("^gs://"+Le+"(/(.*))?$","i");function pr(Ki){Ki.path_=decodeURIComponent(Ki.path)}const zr=q.replace(/[.]/g,"\\."),es=[{regex:kn,indices:{bucket:1,path:3},postModify:function It(Ki){"/"===Ki.path.charAt(Ki.path.length-1)&&(Ki.path_=Ki.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${zr}/v[A-Za-z0-9_]+/b/${Le}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:pr},{regex:new RegExp(`^https?://${q===ve?"(?:storage.googleapis.com|storage.cloud.google.com)":q}/${Le}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:pr}];for(let Ki=0;Ki<es.length;Ki++){const co=es[Ki],Eo=co.regex.exec(I);if(Eo){let Ro=Eo[co.indices.path];Ro||(Ro=""),fe=new mn(Eo[co.indices.bucket],Ro),co.postModify(fe);break}}if(null==fe)throw function un(E){return new mt("invalid-url","Invalid URL '"+E+"'.")}(I);return fe}}class jn{constructor(I){this.promise_=Promise.reject(I)}getPromise(){return this.promise_}cancel(I=!1){}}function lr(E){return"string"==typeof E||E instanceof String}function pn(E){return Ar()&&E instanceof Blob}function Ar(){return"undefined"!=typeof Blob}function vr(E,I,q,fe){if(fe<I)throw U(`Invalid value for '${E}'. Expected ${I} or greater.`);if(fe>q)throw U(`Invalid value for '${E}'. Expected ${q} or less.`)}function Ir(E,I,q){let fe=I;return null==q&&(fe=`https://${I}`),`${q}://${fe}/v0${E}`}function ur(E){const I=encodeURIComponent;let q="?";for(const fe in E)E.hasOwnProperty(fe)&&(q=q+(I(fe)+"=")+I(E[fe])+"&");return q=q.slice(0,-1),q}var ar=(()=>{return(E=ar||(ar={}))[E.NO_ERROR=0]="NO_ERROR",E[E.NETWORK_ERROR=1]="NETWORK_ERROR",E[E.ABORT=2]="ABORT",ar;var E})();class gt{constructor(I,q,fe,Le,It,sn,kn,An,pr,Mn,zr){this.url_=I,this.method_=q,this.headers_=fe,this.body_=Le,this.successCodes_=It,this.additionalRetryCodes_=sn,this.callback_=kn,this.errorCallback_=An,this.timeout_=pr,this.progressCallback_=Mn,this.connectionFactory_=zr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Dr,Fi)=>{this.resolve_=Dr,this.reject_=Fi,this.start_()})}start_(){const q=(fe,Le)=>{const It=this.resolve_,sn=this.reject_,kn=Le.connection;if(Le.wasSuccessCode)try{const An=this.callback_(kn,kn.getResponse());!function er(E){return void 0!==E}(An)?It():It(An)}catch(An){sn(An)}else if(null!==kn){const An=Ye();An.serverResponse=kn.getErrorText(),sn(this.errorCallback_?this.errorCallback_(kn,An):An)}else sn(Le.canceled?this.appDelete_?Qe():Lt():function ut(){return new mt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?q(0,new qe(!1,null,!0)):this.backoffId_=function Fn(E,I,q){let fe=1,Le=null,It=null,sn=!1,kn=0;function An(){return 2===kn}let pr=!1;function Mn(...Li){pr||(pr=!0,I.apply(null,Li))}function zr(Li){Le=setTimeout(()=>{Le=null,E(Fi,An())},Li)}function Dr(){It&&clearTimeout(It)}function Fi(Li,...zs){if(pr)return void Dr();if(Li)return Dr(),void Mn.call(null,Li,...zs);if(An()||sn)return Dr(),void Mn.call(null,Li,...zs);let es;fe<64&&(fe*=2),1===kn?(kn=2,es=0):es=1e3*(fe+Math.random()),zr(es)}let Fr=!1;function Ri(Li){Fr||(Fr=!0,Dr(),!pr&&(null!==Le?(Li||(kn=2),clearTimeout(Le),zr(0)):Li||(kn=1)))}return zr(0),It=setTimeout(()=>{sn=!0,Ri(!0)},q),Ri}((fe,Le)=>{if(Le)return void fe(!1,new qe(!1,null,!0));const It=this.connectionFactory_();this.pendingConnection_=It;const sn=kn=>{null!==this.progressCallback_&&this.progressCallback_(kn.loaded,kn.lengthComputable?kn.total:-1)};null!==this.progressCallback_&&It.addUploadProgressListener(sn),It.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&It.removeUploadProgressListener(sn),this.pendingConnection_=null;const kn=It.getErrorCode()===ar.NO_ERROR,An=It.getStatus();if(!kn||this.isRetryStatusCode_(An)){const Mn=It.getErrorCode()===ar.ABORT;return void fe(!1,new qe(!1,null,Mn))}const pr=-1!==this.successCodes_.indexOf(An);fe(!0,new qe(pr,It))})},q,this.timeout_)}getPromise(){return this.promise_}cancel(I){this.canceled_=!0,this.appDelete_=I||!1,null!==this.backoffId_&&function Dn(E){E(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(I){const q=I>=500&&I<600,Le=-1!==[408,429].indexOf(I),It=-1!==this.additionalRetryCodes_.indexOf(I);return q||Le||It}}class qe{constructor(I,q,fe){this.wasSuccessCode=I,this.connection=q,this.canceled=!!fe}}function Zn(...E){const I=function Xn(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==I){const q=new I;for(let fe=0;fe<E.length;fe++)q.append(E[fe]);return q.getBlob()}if(Ar())return new Blob(E);throw new mt("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Er={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cr{constructor(I,q){this.data=I,this.contentType=q||null}}function yn(E,I){switch(E){case Er.RAW:return new Cr(Wn(I));case Er.BASE64:case Er.BASE64URL:return new Cr(Rn(E,I));case Er.DATA_URL:return new Cr(function wn(E){const I=new Vt(E);return I.base64?Rn(Er.BASE64,I.rest):function cr(E){let I;try{I=decodeURIComponent(E)}catch(q){throw St(Er.DATA_URL,"Malformed data URL.")}return Wn(I)}(I.rest)}(I),function Yn(E){return new Vt(E).contentType}(I))}throw Ye()}function Wn(E){const I=[];for(let q=0;q<E.length;q++){let fe=E.charCodeAt(q);fe<=127?I.push(fe):fe<=2047?I.push(192|fe>>6,128|63&fe):55296==(64512&fe)?q<E.length-1&&56320==(64512&E.charCodeAt(q+1))?(fe=65536|(1023&fe)<<10|1023&E.charCodeAt(++q),I.push(240|fe>>18,128|fe>>12&63,128|fe>>6&63,128|63&fe)):I.push(239,191,189):56320==(64512&fe)?I.push(239,191,189):I.push(224|fe>>12,128|fe>>6&63,128|63&fe)}return new Uint8Array(I)}function Rn(E,I){switch(E){case Er.BASE64:{const Le=-1!==I.indexOf("-"),It=-1!==I.indexOf("_");if(Le||It)throw St(E,"Invalid character '"+(Le?"-":"_")+"' found: is it base64url encoded?");break}case Er.BASE64URL:{const Le=-1!==I.indexOf("+"),It=-1!==I.indexOf("/");if(Le||It)throw St(E,"Invalid character '"+(Le?"+":"/")+"' found: is it base64 encoded?");I=I.replace(/-/g,"+").replace(/_/g,"/");break}}let q;try{q=function Hn(E){return atob(E)}(I)}catch(Le){throw St(E,"Invalid character found")}const fe=new Uint8Array(q.length);for(let Le=0;Le<q.length;Le++)fe[Le]=q.charCodeAt(Le);return fe}class Vt{constructor(I){this.base64=!1,this.contentType=null;const q=I.match(/^data:([^,]+)?,/);if(null===q)throw St(Er.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const fe=q[1]||null;null!=fe&&(this.base64=function Kn(E,I){return E.length>=I.length&&E.substring(E.length-I.length)===I}(fe,";base64"),this.contentType=this.base64?fe.substring(0,fe.length-7):fe),this.rest=I.substring(I.indexOf(",")+1)}}class Vn{constructor(I,q){let fe=0,Le="";pn(I)?(this.data_=I,fe=I.size,Le=I.type):I instanceof ArrayBuffer?(q?this.data_=new Uint8Array(I):(this.data_=new Uint8Array(I.byteLength),this.data_.set(new Uint8Array(I))),fe=this.data_.length):I instanceof Uint8Array&&(q?this.data_=I:(this.data_=new Uint8Array(I.length),this.data_.set(I)),fe=I.length),this.size_=fe,this.type_=Le}size(){return this.size_}type(){return this.type_}slice(I,q){if(pn(this.data_)){const Le=function Ln(E,I,q){return E.webkitSlice?E.webkitSlice(I,q):E.mozSlice?E.mozSlice(I,q):E.slice?E.slice(I,q):null}(this.data_,I,q);return null===Le?null:new Vn(Le)}{const fe=new Uint8Array(this.data_.buffer,I,q-I);return new Vn(fe,!0)}}static getBlob(...I){if(Ar()){const q=I.map(fe=>fe instanceof Vn?fe.data_:fe);return new Vn(Zn.apply(null,q))}{const q=I.map(sn=>lr(sn)?yn(Er.RAW,sn).data:sn.data_);let fe=0;q.forEach(sn=>{fe+=sn.byteLength});const Le=new Uint8Array(fe);let It=0;return q.forEach(sn=>{for(let kn=0;kn<sn.length;kn++)Le[It++]=sn[kn]}),new Vn(Le,!0)}}uploadData(){return this.data_}}function We(E){let I;try{I=JSON.parse(E)}catch(q){return null}return function rr(E){return"object"==typeof E&&!Array.isArray(E)}(I)?I:null}function Rt(E){const I=E.lastIndexOf("/",E.length-2);return-1===I?E:E.slice(I+1)}function _t(E,I){return I}class dn{constructor(I,q,fe,Le){this.server=I,this.local=q||I,this.writable=!!fe,this.xform=Le||_t}}let tt=null;function Ae(){if(tt)return tt;const E=[];E.push(new dn("bucket")),E.push(new dn("generation")),E.push(new dn("metageneration")),E.push(new dn("name","fullPath",!0));const q=new dn("name");q.xform=function I(It,sn){return function je(E){return!lr(E)||E.length<2?E:Rt(E)}(sn)},E.push(q);const Le=new dn("size");return Le.xform=function fe(It,sn){return void 0!==sn?Number(sn):sn},E.push(Le),E.push(new dn("timeCreated")),E.push(new dn("updated")),E.push(new dn("md5Hash",null,!0)),E.push(new dn("cacheControl",null,!0)),E.push(new dn("contentDisposition",null,!0)),E.push(new dn("contentEncoding",null,!0)),E.push(new dn("contentLanguage",null,!0)),E.push(new dn("contentType",null,!0)),E.push(new dn("metadata","customMetadata",!0)),tt=E,tt}function _n(E,I,q){const fe=We(I);return null===fe?null:function qt(E,I,q){const fe={type:"file"},Le=q.length;for(let It=0;It<Le;It++){const sn=q[It];fe[sn.local]=sn.xform(fe,I[sn.server])}return function lt(E,I){Object.defineProperty(E,"ref",{get:function q(){const It=new mn(E.bucket,E.fullPath);return I._makeStorageReference(It)}})}(fe,E),fe}(E,fe,q)}function xe(E,I){const q={},fe=I.length;for(let Le=0;Le<fe;Le++){const It=I[Le];It.writable&&(q[It.server]=E[It.local])}return JSON.stringify(q)}const Te="prefixes";class Qt{constructor(I,q,fe,Le){this.url=I,this.method=q,this.handler=fe,this.timeout=Le,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function an(E){if(!E)throw Ye()}function En(E,I){return function q(fe,Le){const It=_n(E,Le,I);return an(null!==It),It}}function Pn(E){return function I(q,fe){let Le;return Le=401===q.getStatus()?q.getErrorText().includes("Firebase App Check token is invalid")?function Se(){return new mt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function me(){return new mt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===q.getStatus()?function Fe(E){return new mt("quota-exceeded","Quota for bucket '"+E+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(E.bucket):403===q.getStatus()?function Ke(E){return new mt("unauthorized","User does not have permission to access '"+E+"'.")}(E.path):fe,Le.serverResponse=fe.serverResponse,Le}}function hr(E){const I=Pn(E);return function q(fe,Le){let It=I(fe,Le);return 404===fe.getStatus()&&(It=function st(E){return new mt("object-not-found","Object '"+E+"' does not exist.")}(E.path)),It.serverResponse=Le.serverResponse,It}}function Xr(E,I,q){const Le=Ir(I.fullServerUrl(),E.host,E._protocol),sn=E.maxOperationRetryTime,kn=new Qt(Le,"GET",En(E,q),sn);return kn.errorHandler=hr(I),kn}function Mr(E,I,q,fe,Le){const It={};It.prefix=I.isRoot?"":I.path+"/",q&&q.length>0&&(It.delimiter=q),fe&&(It.pageToken=fe),Le&&(It.maxResults=Le);const kn=Ir(I.bucketOnlyServerUrl(),E.host,E._protocol),pr=E.maxOperationRetryTime,Mn=new Qt(kn,"GET",function ft(E,I){return function q(fe,Le){const It=function Yt(E,I,q){const fe=We(q);return null===fe?null:function Ot(E,I,q){const fe={prefixes:[],items:[],nextPageToken:q.nextPageToken};if(q[Te])for(const Le of q[Te]){const It=Le.replace(/\/$/,""),sn=E._makeStorageReference(new mn(I,It));fe.prefixes.push(sn)}if(q.items)for(const Le of q.items){const It=E._makeStorageReference(new mn(I,Le.name));fe.items.push(It)}return fe}(E,I,fe)}(E,I,Le);return an(null!==It),It}}(E,I.bucket),pr);return Mn.urlParams=It,Mn.errorHandler=Pn(I),Mn}function Hi(E,I,q){const fe=Object.assign({},q);return fe.fullPath=E.path,fe.size=I.size(),fe.contentType||(fe.contentType=function br(E,I){return E&&E.contentType||I&&I.type()||"application/octet-stream"}(null,I)),fe}class Si{constructor(I,q,fe,Le){this.current=I,this.total=q,this.finalized=!!fe,this.metadata=Le||null}}function Ci(E,I){let q=null;try{q=E.getResponseHeader("X-Goog-Upload-Status")}catch(Le){an(!1)}return an(!!q&&-1!==(I||["active"]).indexOf(q)),q}const ye={STATE_CHANGED:"state_changed"},Je={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bt(E){switch(E){case"running":case"pausing":case"canceling":return Je.RUNNING;case"paused":return Je.PAUSED;case"success":return Je.SUCCESS;case"canceled":return Je.CANCELED;default:return Je.ERROR}}class be{constructor(I,q,fe){if(function Br(E){return"function"==typeof E}(I)||null!=q||null!=fe)this.next=I,this.error=null!=q?q:void 0,this.complete=null!=fe?fe:void 0;else{const It=I;this.next=It.next,this.error=It.error,this.complete=It.complete}}}function Oe(E){return(...I)=>{Promise.resolve().then(()=>E(...I))}}class Jt extends class Gt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ar.NO_ERROR,this.sendPromise_=new Promise(I=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ar.ABORT,I()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ar.NETWORK_ERROR,I()}),this.xhr_.addEventListener("load",()=>{I()})})}send(I,q,fe,Le){if(this.sent_)throw hn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(q,I,!0),void 0!==Le)for(const It in Le)Le.hasOwnProperty(It)&&this.xhr_.setRequestHeader(It,Le[It].toString());return void 0!==fe?this.xhr_.send(fe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(I){return-1}}getResponse(){if(!this.sent_)throw hn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(I){return this.xhr_.getResponseHeader(I)}addUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",I)}removeUploadProgressListener(I){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",I)}}{initXhr(){this.xhr_.responseType="text"}}function kt(){return new Jt}class xi{constructor(I,q,fe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=I,this._blob=q,this._metadata=fe,this._mappings=Ae(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Le=>{this._request=void 0,this._chunkMultiplier=1,Le._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Le,this._transition("error"))},this._metadataErrorHandler=Le=>{this._request=void 0,Le._codeEquals("canceled")?this.completeTransitions_():(this._error=Le,this._transition("error"))},this._promise=new Promise((Le,It)=>{this._resolve=Le,this._reject=It,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const I=this._transferred;return q=>this._updateProgress(I+q)}_shouldDoResumable(I){return I.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(I){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([q,fe])=>{switch(this._state){case"running":I(q,fe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((I,q)=>{const fe=function gi(E,I,q,fe,Le){const It=I.bucketOnlyServerUrl(),sn=Hi(I,fe,Le),kn={name:sn.fullPath},An=Ir(It,E.host,E._protocol),Mn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${fe.size()}`,"X-Goog-Upload-Header-Content-Type":sn.contentType,"Content-Type":"application/json; charset=utf-8"},zr=xe(sn,q),Fr=new Qt(An,"POST",function Fi(Ri){let Li;Ci(Ri);try{Li=Ri.getResponseHeader("X-Goog-Upload-URL")}catch(zs){an(!1)}return an(lr(Li)),Li},E.maxUploadRetryTime);return Fr.urlParams=kn,Fr.headers=Mn,Fr.body=zr,Fr.errorHandler=Pn(I),Fr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(fe,kt,I,q);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._uploadUrl=It,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const I=this._uploadUrl;this._resolveToken((q,fe)=>{const Le=function Mi(E,I,q,fe){const An=new Qt(q,"POST",function It(pr){const Mn=Ci(pr,["active","final"]);let zr=null;try{zr=pr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Fi){an(!1)}zr||an(!1);const Dr=Number(zr);return an(!isNaN(Dr)),new Si(Dr,fe.size(),"final"===Mn)},E.maxUploadRetryTime);return An.headers={"X-Goog-Upload-Command":"query"},An.errorHandler=Pn(I),An}(this._ref.storage,this._ref._location,I,this._blob),It=this._ref.storage._makeRequest(Le,kt,q,fe);this._request=It,It.getPromise().then(sn=>{sn=sn,this._request=void 0,this._updateProgress(sn.current),this._needToFetchStatus=!1,sn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const I=262144*this._chunkMultiplier,q=new Si(this._transferred,this._blob.size()),fe=this._uploadUrl;this._resolveToken((Le,It)=>{let sn;try{sn=function te(E,I,q,fe,Le,It,sn,kn){const An=new Si(0,0);if(sn?(An.current=sn.current,An.total=sn.total):(An.current=0,An.total=fe.size()),fe.size()!==An.total)throw function at(){return new mt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const pr=An.total-An.current;let Mn=pr;Le>0&&(Mn=Math.min(Mn,Le));const zr=An.current,Fr={"X-Goog-Upload-Command":Mn===pr?"upload, finalize":"upload","X-Goog-Upload-Offset":`${An.current}`},Ri=fe.slice(zr,zr+Mn);if(null===Ri)throw ze();const es=new Qt(q,"POST",function Li(Ki,co){const Eo=Ci(Ki,["active","final"]),da=An.current+Mn,Ro=fe.size();let Bo;return Bo="final"===Eo?En(I,It)(Ki,co):null,new Si(da,Ro,"final"===Eo,Bo)},I.maxUploadRetryTime);return es.headers=Fr,es.body=Ri.uploadData(),es.progressCallback=kn||null,es.errorHandler=Pn(E),es}(this._ref._location,this._ref.storage,fe,this._blob,I,this._mappings,q,this._makeProgressCallback())}catch(An){return this._error=An,void this._transition("error")}const kn=this._ref.storage._makeRequest(sn,kt,Le,It);this._request=kn,kn.getPromise().then(An=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(An.current),An.finalized?(this._metadata=An.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((I,q)=>{const fe=Xr(this._ref.storage,this._ref._location,this._mappings),Le=this._ref.storage._makeRequest(fe,kt,I,q);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._metadata=It,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((I,q)=>{const fe=function Ni(E,I,q,fe,Le){const It=I.bucketOnlyServerUrl(),sn={"X-Goog-Upload-Protocol":"multipart"},An=function kn(){let es="";for(let Ki=0;Ki<2;Ki++)es+=Math.random().toString().slice(2);return es}();sn["Content-Type"]="multipart/related; boundary="+An;const pr=Hi(I,fe,Le),Mn=xe(pr,q),Fi=Vn.getBlob("--"+An+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mn+"\r\n--"+An+"\r\nContent-Type: "+pr.contentType+"\r\n\r\n",fe,"\r\n--"+An+"--");if(null===Fi)throw ze();const Fr={name:pr.fullPath},Ri=Ir(It,E.host,E._protocol),zs=E.maxUploadRetryTime,ci=new Qt(Ri,"POST",En(E,q),zs);return ci.urlParams=Fr,ci.headers=sn,ci.body=Fi.uploadData(),ci.errorHandler=Pn(I),ci}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Le=this._ref.storage._makeRequest(fe,kt,I,q);this._request=Le,Le.getPromise().then(It=>{this._request=void 0,this._metadata=It,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(I){const q=this._transferred;this._transferred=I,this._transferred!==q&&this._notifyObservers()}_transition(I){if(this._state!==I)switch(I){case"canceling":case"pausing":this._state=I,void 0!==this._request&&this._request.cancel();break;case"running":const q="paused"===this._state;this._state=I,q&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=I,this._notifyObservers();break;case"canceled":this._error=Lt(),this._state=I,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const I=bt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:I,metadata:this._metadata,task:this,ref:this._ref}}on(I,q,fe,Le){const It=new be(q||void 0,fe||void 0,Le||void 0);return this._addObserver(It),()=>{this._removeObserver(It)}}then(I,q){return this._promise.then(I,q)}catch(I){return this.then(null,I)}_addObserver(I){this._observers.push(I),this._notifyObserver(I)}_removeObserver(I){const q=this._observers.indexOf(I);-1!==q&&this._observers.splice(q,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(q=>{this._notifyObserver(q)})}_finishPromise(){if(void 0!==this._resolve){let I=!0;switch(bt(this._state)){case Je.SUCCESS:Oe(this._resolve.bind(null,this.snapshot))();break;case Je.CANCELED:case Je.ERROR:Oe(this._reject.bind(null,this._error))();break;default:I=!1}I&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(I){switch(bt(this._state)){case Je.RUNNING:case Je.PAUSED:I.next&&Oe(I.next.bind(I,this.snapshot))();break;case Je.SUCCESS:I.complete&&Oe(I.complete.bind(I))();break;default:I.error&&Oe(I.error.bind(I,this._error))()}}resume(){const I="paused"===this._state||"pausing"===this._state;return I&&this._transition("running"),I}pause(){const I="running"===this._state;return I&&this._transition("pausing"),I}cancel(){const I="running"===this._state||"pausing"===this._state;return I&&this._transition("canceling"),I}}class Oi{constructor(I,q){this._service=I,this._location=q instanceof mn?q:mn.makeFromUrl(q,I.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(I,q){return new Oi(I,q)}get root(){const I=new mn(this._location.bucket,"");return this._newRef(this._service,I)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rt(this._location.path)}get storage(){return this._service}get parent(){const I=function De(E){if(0===E.length)return null;const I=E.lastIndexOf("/");return-1===I?"":E.slice(0,I)}(this._location.path);if(null===I)return null;const q=new mn(this._location.bucket,I);return new Oi(this._service,q)}_throwIfRoot(I){if(""===this._location.path)throw rn(I)}}function ri(E,I,q){return _i.apply(this,arguments)}function _i(){return(_i=(0,_e.Z)(function*(E,I,q){const Le=yield Yr(E,{pageToken:q});I.prefixes.push(...Le.prefixes),I.items.push(...Le.items),null!=Le.nextPageToken&&(yield ri(E,I,Le.nextPageToken))})).apply(this,arguments)}function Yr(E,I){null!=I&&"number"==typeof I.maxResults&&vr("options.maxResults",1,1e3,I.maxResults);const q=I||{},fe=Mr(E.storage,E._location,"/",q.pageToken,q.maxResults);return E.storage.makeRequestWithTokens(fe,kt)}function bs(E){E._throwIfRoot("getDownloadURL");const I=function Or(E,I,q){const Le=Ir(I.fullServerUrl(),E.host,E._protocol),sn=E.maxOperationRetryTime,kn=new Qt(Le,"GET",function cn(E,I){return function q(fe,Le){const It=_n(E,Le,I);return an(null!==It),function Un(E,I,q,fe){const Le=We(I);if(null===Le||!lr(Le.downloadTokens))return null;const It=Le.downloadTokens;if(0===It.length)return null;const sn=encodeURIComponent;return It.split(",").map(pr=>{const zr=E.fullPath;return Ir("/b/"+sn(E.bucket)+"/o/"+sn(zr),q,fe)+ur({alt:"media",token:pr})})[0]}(It,Le,E.host,E._protocol)}}(E,q),sn);return kn.errorHandler=hr(I),kn}(E.storage,E._location,Ae());return E.storage.makeRequestWithTokens(I,kt).then(q=>{if(null===q)throw function Et(){return new mt("no-download-url","The given file does not have any download URLs.")}();return q})}function Qi(E,I){const q=function Ze(E,I){const q=I.split("/").filter(fe=>fe.length>0).join("/");return 0===E.length?q:E+"/"+q}(E._location.path,I),fe=new mn(E._location.bucket,q);return new Oi(E.storage,fe)}function qr(E,I){if(E instanceof Qr){const q=E;if(null==q._bucket)throw function At(){return new mt("no-default-bucket","No default bucket found. Did you set the '"+pt+"' property when initializing the app?")}();const fe=new Oi(q,q._bucket);return null!=I?qr(fe,I):fe}return void 0!==I?Qi(E,I):E}function Tr(E,I){if(I&&function As(E){return/^[A-Za-z]+:\/\//.test(E)}(I)){if(E instanceof Qr)return function xs(E,I){return new Oi(E,I)}(E,I);throw U("To use ref(service, url), the first argument must be a Storage instance.")}return qr(E,I)}function wr(E,I){const q=null==I?void 0:I[pt];return null==q?null:mn.makeFromBucketSpec(q,E)}class Qr{constructor(I,q,fe,Le,It){this.app=I,this._authProvider=q,this._appCheckProvider=fe,this._url=Le,this._firebaseVersion=It,this._bucket=null,this._host=ve,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Le?mn.makeFromBucketSpec(Le,this._host):wr(this._host,this.app.options)}get host(){return this._host}set host(I){this._host=I,this._bucket=null!=this._url?mn.makeFromBucketSpec(this._url,I):wr(I,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(I){vr("time",0,Number.POSITIVE_INFINITY,I),this._maxUploadRetryTime=I}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(I){vr("time",0,Number.POSITIVE_INFINITY,I),this._maxOperationRetryTime=I}_getAuthToken(){var I=this;return(0,_e.Z)(function*(){if(I._overrideAuthToken)return I._overrideAuthToken;const q=I._authProvider.getImmediate({optional:!0});if(q){const fe=yield q.getToken();if(null!==fe)return fe.accessToken}return null})()}_getAppCheckToken(){var I=this;return(0,_e.Z)(function*(){const q=I._appCheckProvider.getImmediate({optional:!0});return q?(yield q.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(I=>I.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(I){return new Oi(this,I)}_makeRequest(I,q,fe,Le){if(this._deleted)return new jn(Qe());{const It=function Tn(E,I,q,fe,Le,It){const sn=ur(E.urlParams),kn=E.url+sn,An=Object.assign({},E.headers);return function Nt(E,I){I&&(E["X-Firebase-GMPID"]=I)}(An,I),function Ie(E,I){null!==I&&I.length>0&&(E.Authorization="Firebase "+I)}(An,q),function Kt(E,I){E["X-Firebase-Storage-Version"]="webjs/"+(null!=I?I:"AppManager")}(An,It),function nn(E,I){null!==I&&(E["X-Firebase-AppCheck"]=I)}(An,fe),new gt(kn,E.method,An,E.body,E.successCodes,E.additionalRetryCodes,E.handler,E.errorHandler,E.timeout,E.progressCallback,Le)}(I,this._appId,fe,Le,q,this._firebaseVersion);return this._requests.add(It),It.getPromise().then(()=>this._requests.delete(It),()=>this._requests.delete(It)),It}}makeRequestWithTokens(I,q){var fe=this;return(0,_e.Z)(function*(){const[Le,It]=yield Promise.all([fe._getAuthToken(),fe._getAppCheckToken()]);return fe._makeRequest(I,q,Le,It).getPromise()})()}}const Rs="@firebase/storage";function Os(E,I){return Tr(E=(0,$e.m9)(E),I)}function ie(E,{instanceIdentifier:I}){const q=E.getProvider("app").getImmediate(),fe=E.getProvider("auth-internal"),Le=E.getProvider("app-check-internal");return new Qr(q,fe,Le,I,ke.SDK_VERSION)}!function j(){(0,ke._registerComponent)(new Dt.wA("storage",ie,"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(Rs,"0.9.5",""),(0,ke.registerVersion)(Rs,"0.9.5","esm2017")}();class de{constructor(I,q,fe){this._delegate=I,this.task=q,this.ref=fe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nt{constructor(I,q){this._delegate=I,this._ref=q,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new de(this._delegate.snapshot,this,this._ref)}then(I,q){return this._delegate.then(fe=>{if(I)return I(new de(fe,this,this._ref))},q)}on(I,q,fe,Le){let It;return q&&(It="function"==typeof q?sn=>q(new de(sn,this,this._ref)):{next:q.next?sn=>q.next(new de(sn,this,this._ref)):void 0,complete:q.complete||void 0,error:q.error||void 0}),this._delegate.on(I,It,fe||void 0,Le||void 0)}}class Mt{constructor(I,q){this._delegate=I,this._service=q}get prefixes(){return this._delegate.prefixes.map(I=>new en(I,this._service))}get items(){return this._delegate.items.map(I=>new en(I,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class en{constructor(I,q){this._delegate=I,this.storage=q}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(I){const q=function Ei(E,I){return Qi(E,I)}(this._delegate,I);return new en(q,this.storage)}get root(){return new en(this._delegate.root,this.storage)}get parent(){const I=this._delegate.parent;return null==I?null:new en(I,this.storage)}put(I,q){return this._throwIfRoot("put"),new nt(function ui(E,I,q){return function on(E,I,q){return E._throwIfRoot("uploadBytesResumable"),new xi(E,new Vn(I),q)}(E=(0,$e.m9)(E),I,q)}(this._delegate,I,q),this)}putString(I,q=Er.RAW,fe){this._throwIfRoot("putString");const Le=yn(q,I),It=Object.assign({},fe);return null==It.contentType&&null!=Le.contentType&&(It.contentType=Le.contentType),new nt(new xi(this._delegate,new Vn(Le.data,!0),It),this)}listAll(){return function so(E){return function Qn(E){const I={prefixes:[],items:[]};return ri(E,I).then(()=>I)}(E=(0,$e.m9)(E))}(this._delegate).then(I=>new Mt(I,this.storage))}list(I){return function Pi(E,I){return Yr(E=(0,$e.m9)(E),I)}(this._delegate,I||void 0).then(q=>new Mt(q,this.storage))}getMetadata(){return function mi(E){return function ds(E){E._throwIfRoot("getMetadata");const I=Xr(E.storage,E._location,Ae());return E.storage.makeRequestWithTokens(I,kt)}(E=(0,$e.m9)(E))}(this._delegate)}updateMetadata(I){return function wi(E,I){return function Gi(E,I){E._throwIfRoot("updateMetadata");const q=function si(E,I,q,fe){const It=Ir(I.fullServerUrl(),E.host,E._protocol),kn=xe(q,fe),pr=E.maxOperationRetryTime,Mn=new Qt(It,"PATCH",En(E,fe),pr);return Mn.headers={"Content-Type":"application/json; charset=utf-8"},Mn.body=kn,Mn.errorHandler=hr(I),Mn}(E.storage,E._location,I,Ae());return E.storage.makeRequestWithTokens(q,kt)}(E=(0,$e.m9)(E),I)}(this._delegate,I)}getDownloadURL(){return function ss(E){return bs(E=(0,$e.m9)(E))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ms(E){return function Ss(E){E._throwIfRoot("deleteObject");const I=function pi(E,I){const fe=Ir(I.fullServerUrl(),E.host,E._protocol),kn=new Qt(fe,"DELETE",function sn(An,pr){},E.maxOperationRetryTime);return kn.successCodes=[200,204],kn.errorHandler=hr(I),kn}(E.storage,E._location);return E.storage.makeRequestWithTokens(I,kt)}(E=(0,$e.m9)(E))}(this._delegate)}_throwIfRoot(I){if(""===this._delegate._location.path)throw rn(I)}}class Zt{constructor(I,q){this.app=I,this._delegate=q}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(I){if(oi(I))throw U("ref() expected a child path but got a URL, use refFromURL instead.");return new en(Os(this._delegate,I),this)}refFromURL(I){if(!oi(I))throw U("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mn.makeFromUrl(I,this._delegate.host)}catch(q){throw U("refFromUrl() expected a valid full URL but got an invalid one.")}return new en(Os(this._delegate,I),this)}setMaxUploadRetryTime(I){this._delegate.maxUploadRetryTime=I}setMaxOperationRetryTime(I){this._delegate.maxOperationRetryTime=I}useEmulator(I,q,fe={}){!function Gs(E,I,q,fe={}){!function zi(E,I,q,fe={}){E.host=`${I}:${q}`,E._protocol="http";const{mockUserToken:Le}=fe;Le&&(E._overrideAuthToken="string"==typeof Le?Le:(0,$e.Sg)(Le,E.app.options.projectId))}(E,I,q,fe)}(this._delegate,I,q,fe)}}function oi(E){return/^[A-Za-z]+:\/\//.test(E)}function Di(E,{instanceIdentifier:I}){const q=E.getProvider("app-compat").getImmediate(),fe=E.getProvider("storage").getImmediate({identifier:I});return new Zt(q,fe)}!function ni(E){const I={TaskState:Je,TaskEvent:ye,StringFormat:Er,Storage:Zt,Reference:en};E.INTERNAL.registerComponent(new Dt.wA("storage-compat",Di,"PUBLIC").setServiceProps(I).setMultipleInstances(!0)),E.registerVersion("@firebase/storage-compat","0.1.13")}(Ne.Z);var bi=L(440),ki=L(127);function ir(E){const I=function Ji(E){return new a.y(I=>{const q=sn=>I.next(sn);q(E.snapshot);const It=E.on("state_changed",q);return E.then(sn=>{q(sn),I.complete()},sn=>{q(E.snapshot),(sn=>{I.error(sn)})(sn)}),function(){It()}}).pipe(function ae(E,I=Me.P){return q=>q.lift(new we(E,I))}(0))}(E);return{task:E,then:E.then.bind(E),catch:E.catch.bind(E),pause:E.pause.bind(E),cancel:E.cancel.bind(E),resume:E.resume.bind(E),snapshotChanges:()=>I,percentageChanges:()=>I.pipe((0,oe.U)(q=>q.bytesTransferred/q.totalBytes*100))}}function Wi(E){return{getDownloadURL:()=>(0,J.of)(void 0).pipe(ee.fc,(0,pe.w)(()=>E.getDownloadURL()),ee.iC),getMetadata:()=>(0,J.of)(void 0).pipe(ee.fc,(0,pe.w)(()=>E.getMetadata()),ee.iC),delete:()=>(0,Z.D)(E.delete()),child:I=>Wi(E.child(I)),updateMetadata:I=>(0,Z.D)(E.updateMetadata(I)),put:(I,q)=>ir(E.put(I,q)),putString:(I,q,fe)=>ir(E.putString(I,q,fe)),list:I=>(0,Z.D)(E.list(I)),listAll:()=>(0,Z.D)(E.listAll())}}const G=new ce.OlP("angularfire2.storageBucket"),B=new ce.OlP("angularfire2.storage.maxUploadRetryTime"),N=new ce.OlP("angularfire2.storage.maxOperationRetryTime"),se=new ce.OlP("angularfire2.storage.use-emulator");let jt=(()=>{class E{constructor(q,fe,Le,It,sn,kn,An,pr,Mn,zr){const Dr=(0,Xe.on)(q,sn,fe);this.storage=(0,Xe.cc)(`${Dr.name}.storage.${Le}`,"AngularFireStorage",Dr.name,()=>{const Fi=sn.runOutsideAngular(()=>Dr.storage(Le||void 0)),Fr=Mn;return Fr&&Fi.useEmulator(...Fr),An&&Fi.setMaxUploadRetryTime(An),pr&&Fi.setMaxOperationRetryTime(pr),Fi},[An,pr])}ref(q){return Wi(this.storage.ref(q))}refFromURL(q){return Wi(this.storage.refFromURL(q))}upload(q,fe,Le){return Wi(this.storage.ref(q)).put(fe,Le)}}return E.\u0275fac=function(q){return new(q||E)(ce.LFG(Xe.Dh),ce.LFG(Xe.xv,8),ce.LFG(G,8),ce.LFG(ce.Lbi),ce.LFG(ce.R0b),ce.LFG(ee.HU),ce.LFG(B,8),ce.LFG(N,8),ce.LFG(se,8),ce.LFG(bi.nm,8))},E.\u0275prov=ce.Yz7({token:E,factory:E.\u0275fac,providedIn:"any"}),E})(),P=(()=>{class E{}return E.\u0275fac=function(q){return new(q||E)},E.\u0275mod=ce.oAB({type:E}),E.\u0275inj=ce.cJS({}),E})(),b=(()=>{class E{constructor(){ki.Z.registerVersion("angularfire",ee.q4.full,"gcs-compat")}}return E.\u0275fac=function(q){return new(q||E)},E.\u0275mod=ce.oAB({type:E}),E.\u0275inj=ce.cJS({providers:[jt],imports:[P]}),E})()},2011:(On,Ct,L)=>{"use strict";L.d(Ct,{hO:()=>ce,xv:()=>Ee,Dh:()=>Ce,GT:()=>ae,cc:()=>Xe,on:()=>oe,pX:()=>Me});var a=L(5e3),J=L(127),Z=L(6351);On=L.hmd(On);const Ve=["ngOnDestroy"],Me=($e,Dt,ve,pt={})=>new Proxy($e,{get:(He,dt)=>ve.runOutsideAngular(()=>{var mt;if($e[dt])return(null===(mt=null==pt?void 0:pt.spy)||void 0===mt?void 0:mt.get)&&pt.spy.get(dt,$e[dt]),$e[dt];if(Ve.indexOf(dt)>-1)return()=>{};const Ft=Dt.toPromise().then(Ye=>{const st=Ye&&Ye[dt];return"function"==typeof st?st.bind(Ye):st&&st.then?st.then(Fe=>ve.run(()=>Fe)):ve.run(()=>st)});return new Proxy(()=>{},{get:(Ye,st)=>Ft[st],apply:(Ye,st,Fe)=>Ft.then(me=>{var Se;const Ke=me&&me(...Fe);return(null===(Se=null==pt?void 0:pt.spy)||void 0===Se?void 0:Se.apply)&&pt.spy.apply(dt,Fe,Ke),Ke})})})}),ae=($e,Dt)=>{Dt.forEach(ve=>{Object.getOwnPropertyNames(ve.prototype||ve).forEach(pt=>{Object.defineProperty($e.prototype,pt,Object.getOwnPropertyDescriptor(ve.prototype||ve,pt))})})};class we{constructor(Dt){return Dt}}const Ce=new a.OlP("angularfire2.app.options"),Ee=new a.OlP("angularfire2.app.name");function oe($e,Dt,ve){const He="object"==typeof ve&&ve||{};He.name=He.name||"string"==typeof ve&&ve||"[DEFAULT]";const mt=J.Z.apps.filter(Ft=>Ft&&Ft.name===He.name)[0]||Dt.runOutsideAngular(()=>J.Z.initializeApp($e,He));try{JSON.stringify($e)!==JSON.stringify(mt.options)&&pe("error",`${mt.name} Firebase App already initialized with different options${On.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ft){}return new we(mt)}const pe=($e,...Dt)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[$e](...Dt)},ee={provide:we,useFactory:oe,deps:[Ce,a.R0b,[new a.FiY,Ee]]};let ce=(()=>{class $e{constructor(ve){J.Z.registerVersion("angularfire",Z.q4.full,"core"),J.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),J.Z.registerVersion("angular",a.q4F.full,ve.toString())}static initializeApp(ve,pt){return{ngModule:$e,providers:[{provide:Ce,useValue:ve},{provide:Ee,useValue:pt}]}}}return $e.\u0275fac=function(ve){return new(ve||$e)(a.LFG(a.Lbi))},$e.\u0275mod=a.oAB({type:$e}),$e.\u0275inj=a.cJS({providers:[ee]}),$e})();function Xe($e,Dt,ve,pt,He){const[,dt,mt]=globalThis.\u0275AngularfireInstanceCache.find(Ft=>Ft[0]===$e)||[];if(dt)return function Ne($e,Dt){try{return $e.toString()===Dt.toString()}catch(ve){return $e===Dt}}(He,mt)||(ke("error",`${Dt} was already initialized on the ${ve} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),ke("warn",{is:He,was:mt})),dt;{const Ft=pt();return globalThis.\u0275AngularfireInstanceCache.push([$e,Ft,He]),Ft}}const _e=!!On.hot,ke=($e,...Dt)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[$e](...Dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(On,Ct,L)=>{"use strict";L.d(Ct,{q4:()=>Bi,iC:()=>xa,fc:()=>ol,HU:()=>ko,vb:()=>qc,JM:()=>Hu});var a=L(5e3),J=L(5867),Z=L(5861),Ve=L(9681),Me=L(2090),ae=L(4859),we=L(1877);const Ce="@firebase/installations",pe="w:0.5.8",ee="FIS_v2",$e=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt($){return $ instanceof Me.ZR&&$.code.includes("request-failed")}function ve({projectId:$}){return`https://firebaseinstallations.googleapis.com/v1/projects/${$}/installations`}function pt($){return{token:$.token,requestStatus:2,expiresIn:Fe($.expiresIn),creationTime:Date.now()}}function He($,W){return dt.apply(this,arguments)}function dt(){return(dt=(0,Z.Z)(function*($,W){const Ge=(yield W.json()).error;return $e.create("request-failed",{requestName:$,serverCode:Ge.code,serverMessage:Ge.message,serverStatus:Ge.status})})).apply(this,arguments)}function mt({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function Ft($,{refreshToken:W}){const ue=mt($);return ue.append("Authorization",function me($){return`${ee} ${$}`}(W)),ue}function Ye($){return st.apply(this,arguments)}function st(){return(st=(0,Z.Z)(function*($){const W=yield $();return W.status>=500&&W.status<600?$():W})).apply(this,arguments)}function Fe($){return Number($.replace("s","000"))}function Se($,W){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,Z.Z)(function*({appConfig:$,heartbeatServiceProvider:W},{fid:ue}){const Ge=ve($),xt=mt($),Ut=W.getImmediate({optional:!0});if(Ut){const Rr=yield Ut.getHeartbeatsHeader();Rr&&xt.append("x-firebase-client",Rr)}const gr={method:"POST",headers:xt,body:JSON.stringify({fid:ue,authVersion:ee,appId:$.appId,sdkVersion:pe})},or=yield Ye(()=>fetch(Ge,gr));if(or.ok){const Rr=yield or.json();return{fid:Rr.fid||ue,registrationStatus:2,refreshToken:Rr.refreshToken,authToken:pt(Rr.authToken)}}throw yield He("Create Installation",or)})).apply(this,arguments)}function ut($){return new Promise(W=>{setTimeout(W,$)})}const un=/^[cdef][\w-]{21}$/;function At(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const ue=function ze($){return function Lt($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return un.test(ue)?ue:""}catch($){return""}}function at($){return`${$.appName}!${$.appId}`}const Et=new Map;function U($,W){const ue=at($);St(ue,W),function hn($,W){const ue=function jn(){return!mn&&"BroadcastChannel"in self&&(mn=new BroadcastChannel("[Firebase] FID Change"),mn.onmessage=$=>{St($.data.key,$.data.fid)}),mn}();ue&&ue.postMessage({key:$,fid:W}),function Fn(){0===Et.size&&mn&&(mn.close(),mn=null)}()}(ue,W)}function St($,W){const ue=Et.get($);if(ue)for(const Ge of ue)Ge(W)}let mn=null;const Br="firebase-installations-store";let rr=null;function lr(){return rr||(rr=(0,Me.X3)("firebase-installations-database",1,($,W)=>{0===W&&$.createObjectStore(Br)})),rr}function pn($,W){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Z.Z)(function*($,W){const ue=at($),xt=(yield lr()).transaction(Br,"readwrite"),Ut=xt.objectStore(Br),vn=yield Ut.get(ue);return yield Ut.put(W,ue),yield xt.complete,(!vn||vn.fid!==W.fid)&&U($,W.fid),W})).apply(this,arguments)}function vr($){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,Z.Z)(function*($){const W=at($),Ge=(yield lr()).transaction(Br,"readwrite");yield Ge.objectStore(Br).delete(W),yield Ge.complete})).apply(this,arguments)}function ur($,W){return ar.apply(this,arguments)}function ar(){return(ar=(0,Z.Z)(function*($,W){const ue=at($),xt=(yield lr()).transaction(Br,"readwrite"),Ut=xt.objectStore(Br),vn=yield Ut.get(ue),gr=W(vn);return void 0===gr?yield Ut.delete(ue):yield Ut.put(gr,ue),yield xt.complete,gr&&(!vn||vn.fid!==gr.fid)&&U($,gr.fid),gr})).apply(this,arguments)}function gt($){return qe.apply(this,arguments)}function qe(){return(qe=(0,Z.Z)(function*($){let W;const ue=yield ur($.appConfig,Ge=>{const xt=Ie(Ge),Ut=Kt($,xt);return W=Ut.registrationPromise,Ut.installationEntry});return""===ue.fid?{installationEntry:yield W}:{installationEntry:ue,registrationPromise:W}})).apply(this,arguments)}function Ie($){return Ln($||{fid:At(),registrationStatus:0})}function Kt($,W){if(0===W.registrationStatus){if(!navigator.onLine)return{installationEntry:W,registrationPromise:Promise.reject($e.create("app-offline"))};const ue={fid:W.fid,registrationStatus:1,registrationTime:Date.now()},Ge=function Nt($,W){return nn.apply(this,arguments)}($,ue);return{installationEntry:ue,registrationPromise:Ge}}return 1===W.registrationStatus?{installationEntry:W,registrationPromise:Tn($)}:{installationEntry:W}}function nn(){return(nn=(0,Z.Z)(function*($,W){try{const ue=yield Se($,W);return pn($.appConfig,ue)}catch(ue){throw Dt(ue)&&409===ue.customData.serverCode?yield vr($.appConfig):yield pn($.appConfig,{fid:W.fid,registrationStatus:0}),ue}})).apply(this,arguments)}function Tn($){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,Z.Z)(function*($){let W=yield Zn($.appConfig);for(;1===W.registrationStatus;)yield ut(100),W=yield Zn($.appConfig);if(0===W.registrationStatus){const{installationEntry:ue,registrationPromise:Ge}=yield gt($);return Ge||ue}return W})).apply(this,arguments)}function Zn($){return ur($,W=>{if(!W)throw $e.create("installation-not-found");return Ln(W)})}function Ln($){return function Hn($){return 1===$.registrationStatus&&$.registrationTime+1e4<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function Er($,W){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Z.Z)(function*({appConfig:$,heartbeatServiceProvider:W},ue){const Ge=yn($,ue),xt=Ft($,ue),Ut=W.getImmediate({optional:!0});if(Ut){const Rr=yield Ut.getHeartbeatsHeader();Rr&&xt.append("x-firebase-client",Rr)}const gr={method:"POST",headers:xt,body:JSON.stringify({installation:{sdkVersion:pe,appId:$.appId}})},or=yield Ye(()=>fetch(Ge,gr));if(or.ok)return pt(yield or.json());throw yield He("Generate Auth Token",or)})).apply(this,arguments)}function yn($,{fid:W}){return`${ve($)}/${W}/authTokens:generate`}function Wn($){return cr.apply(this,arguments)}function cr(){return(cr=(0,Z.Z)(function*($,W=!1){let ue;const Ge=yield ur($.appConfig,Ut=>{if(!Vn(Ut))throw $e.create("not-registered");const vn=Ut.authToken;if(!W&&We(vn))return Ut;if(1===vn.requestStatus)return ue=Rn($,W),Ut;{if(!navigator.onLine)throw $e.create("app-offline");const gr=Ze(Ut);return ue=Yn($,gr),gr}});return ue?yield ue:Ge.authToken})).apply(this,arguments)}function Rn($,W){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,Z.Z)(function*($,W){let ue=yield wn($.appConfig);for(;1===ue.authToken.requestStatus;)yield ut(100),ue=yield wn($.appConfig);const Ge=ue.authToken;return 0===Ge.requestStatus?Wn($,W):Ge})).apply(this,arguments)}function wn($){return ur($,W=>{if(!Vn(W))throw $e.create("not-registered");return function Rt($){return 1===$.requestStatus&&$.requestTime+1e4<Date.now()}(W.authToken)?Object.assign(Object.assign({},W),{authToken:{requestStatus:0}}):W})}function Yn($,W){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,Z.Z)(function*($,W){try{const ue=yield Er($,W),Ge=Object.assign(Object.assign({},W),{authToken:ue});return yield pn($.appConfig,Ge),ue}catch(ue){if(!Dt(ue)||401!==ue.customData.serverCode&&404!==ue.customData.serverCode){const Ge=Object.assign(Object.assign({},W),{authToken:{requestStatus:0}});yield pn($.appConfig,Ge)}else yield vr($.appConfig);throw ue}})).apply(this,arguments)}function Vn($){return void 0!==$&&2===$.registrationStatus}function We($){return 2===$.requestStatus&&!function De($){const W=Date.now();return W<$.creationTime||$.creationTime+$.expiresIn<W+36e5}($)}function Ze($){const W={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:W})}function dn(){return(dn=(0,Z.Z)(function*($){const W=$,{installationEntry:ue,registrationPromise:Ge}=yield gt(W);return Ge?Ge.catch(console.error):Wn(W).catch(console.error),ue.fid})).apply(this,arguments)}function je(){return(je=(0,Z.Z)(function*($,W=!1){const ue=$;return yield Ae(ue),(yield Wn(ue,W)).token})).apply(this,arguments)}function Ae($){return lt.apply(this,arguments)}function lt(){return(lt=(0,Z.Z)(function*($){const{registrationPromise:W}=yield gt($);W&&(yield W)})).apply(this,arguments)}function Qt($){return $e.create("missing-app-config-values",{valueName:$})}const an="installations",ft=$=>{const W=$.getProvider("app").getImmediate(),ue=function Yt($){if(!$||!$.options)throw Qt("App Configuration");if(!$.name)throw Qt("App Name");const W=["projectId","apiKey","appId"];for(const ue of W)if(!$.options[ue])throw Qt(ue);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(W);return{app:W,appConfig:ue,heartbeatServiceProvider:(0,Ve._getProvider)(W,"heartbeat"),_delete:()=>Promise.resolve()}},cn=$=>{const W=$.getProvider("app").getImmediate(),ue=(0,Ve._getProvider)(W,an).getImmediate();return{getId:()=>function _t($){return dn.apply(this,arguments)}(ue),getToken:xt=>function tt($){return je.apply(this,arguments)}(ue,xt)}};(function Pn(){(0,Ve._registerComponent)(new ae.wA(an,ft,"PUBLIC")),(0,Ve._registerComponent)(new ae.wA("installations-internal",cn,"PRIVATE"))})(),(0,Ve.registerVersion)(Ce,"0.5.8"),(0,Ve.registerVersion)(Ce,"0.5.8","esm2017");const hr="@firebase/remote-config",si=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Nn{constructor(W,ue,Ge,xt){this.client=W,this.storage=ue,this.storageCache=Ge,this.logger=xt}isCachedDataFresh(W,ue){if(!ue)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ge=Date.now()-ue,xt=Ge<=W;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${W}. Is cache hit: ${xt}.`),xt}fetch(W){var ue=this;return(0,Z.Z)(function*(){const[Ge,xt]=yield Promise.all([ue.storage.getLastSuccessfulFetchTimestampMillis(),ue.storage.getLastSuccessfulFetchResponse()]);if(xt&&ue.isCachedDataFresh(W.cacheMaxAgeMillis,Ge))return xt;W.eTag=xt&&xt.eTag;const Ut=yield ue.client.fetch(W),vn=[ue.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ut.status&&vn.push(ue.storage.setLastSuccessfulFetchResponse(Ut)),yield Promise.all(vn),Ut})()}}function nr($=navigator){return $.languages&&$.languages[0]||$.language}class fr{constructor(W,ue,Ge,xt,Ut,vn){this.firebaseInstallations=W,this.sdkVersion=ue,this.namespace=Ge,this.projectId=xt,this.apiKey=Ut,this.appId=vn}fetch(W){var ue=this;return(0,Z.Z)(function*(){const[Ge,xt]=yield Promise.all([ue.firebaseInstallations.getId(),ue.firebaseInstallations.getToken()]),vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ue.projectId}/namespaces/${ue.namespace}:fetch?key=${ue.apiKey}`,gr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":W.eTag||"*"},or={sdk_version:ue.sdkVersion,app_instance_id:Ge,app_instance_id_token:xt,app_id:ue.appId,language_code:nr()},Rr={method:"POST",headers:gr,body:JSON.stringify(or)},fi=fetch(vn,Rr),Wr=new Promise((No,_a)=>{W.signal.addEventListener(()=>{const ll=new Error("The operation was aborted.");ll.name="AbortError",_a(ll)})});let us;try{yield Promise.race([fi,Wr]),us=yield fi}catch(No){let _a="fetch-client-network";throw"AbortError"===No.name&&(_a="fetch-timeout"),si.create(_a,{originalErrorMessage:No.message})}let li=us.status;const Ra=us.headers.get("ETag")||void 0;let Ul,mo;if(200===us.status){let No;try{No=yield us.json()}catch(_a){throw si.create("fetch-client-parse",{originalErrorMessage:_a.message})}Ul=No.entries,mo=No.state}if("INSTANCE_STATE_UNSPECIFIED"===mo?li=500:"NO_CHANGE"===mo?li=304:("NO_TEMPLATE"===mo||"EMPTY_CONFIG"===mo)&&(Ul={}),304!==li&&200!==li)throw si.create("fetch-status",{httpStatus:li});return{status:li,eTag:Ra,config:Ul}})()}}class Oi{constructor(W,ue){this.client=W,this.storage=ue}fetch(W){var ue=this;return(0,Z.Z)(function*(){const Ge=(yield ue.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ue.attemptFetch(W,Ge)})()}attemptFetch(W,{throttleEndTimeMillis:ue,backoffCount:Ge}){var xt=this;return(0,Z.Z)(function*(){yield function xr($,W){return new Promise((ue,Ge)=>{const xt=Math.max(W-Date.now(),0),Ut=setTimeout(ue,xt);$.addEventListener(()=>{clearTimeout(Ut),Ge(si.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}(W.signal,ue);try{const Ut=yield xt.client.fetch(W);return yield xt.storage.deleteThrottleMetadata(),Ut}catch(Ut){if(!function xi($){if(!($ instanceof Me.ZR&&$.customData))return!1;const W=Number($.customData.httpStatus);return 429===W||500===W||503===W||504===W}(Ut))throw Ut;const vn={throttleEndTimeMillis:Date.now()+(0,Me.$s)(Ge),backoffCount:Ge+1};return yield xt.storage.setThrottleMetadata(vn),xt.attemptFetch(W,vn)}})()}}class Tt{constructor(W,ue,Ge,xt,Ut){this.app=W,this._client=ue,this._storageCache=Ge,this._storage=xt,this._logger=Ut,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function on($,W){const ue=$.target.error||void 0;return si.create(W,{originalErrorMessage:ue&&ue.message})}const In="app_namespace_store";class Yr{constructor(W,ue,Ge,xt=function _i(){return new Promise(($,W)=>{try{const ue=indexedDB.open("firebase_remote_config",1);ue.onerror=Ge=>{W(on(Ge,"storage-open"))},ue.onsuccess=Ge=>{$(Ge.target.result)},ue.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(In,{keyPath:"compositeKey"})}}catch(ue){W(si.create("storage-open",{originalErrorMessage:ue}))}})}()){this.appId=W,this.appName=ue,this.namespace=Ge,this.openDbPromise=xt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(W){return this.set("last_fetch_status",W)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(W){return this.set("last_successful_fetch_timestamp_millis",W)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(W){return this.set("last_successful_fetch_response",W)}getActiveConfig(){return this.get("active_config")}setActiveConfig(W){return this.set("active_config",W)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(W){return this.set("active_config_etag",W)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(W){return this.set("throttle_metadata",W)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(W){var ue=this;return(0,Z.Z)(function*(){const Ge=yield ue.openDbPromise;return new Promise((xt,Ut)=>{const gr=Ge.transaction([In],"readonly").objectStore(In),or=ue.createCompositeKey(W);try{const Rr=gr.get(or);Rr.onerror=fi=>{Ut(on(fi,"storage-get"))},Rr.onsuccess=fi=>{const Wr=fi.target.result;xt(Wr?Wr.value:void 0)}}catch(Rr){Ut(si.create("storage-get",{originalErrorMessage:Rr&&Rr.message}))}})})()}set(W,ue){var Ge=this;return(0,Z.Z)(function*(){const xt=yield Ge.openDbPromise;return new Promise((Ut,vn)=>{const or=xt.transaction([In],"readwrite").objectStore(In),Rr=Ge.createCompositeKey(W);try{const fi=or.put({compositeKey:Rr,value:ue});fi.onerror=Wr=>{vn(on(Wr,"storage-set"))},fi.onsuccess=()=>{Ut()}}catch(fi){vn(si.create("storage-set",{originalErrorMessage:fi&&fi.message}))}})})()}delete(W){var ue=this;return(0,Z.Z)(function*(){const Ge=yield ue.openDbPromise;return new Promise((xt,Ut)=>{const gr=Ge.transaction([In],"readwrite").objectStore(In),or=ue.createCompositeKey(W);try{const Rr=gr.delete(or);Rr.onerror=fi=>{Ut(on(fi,"storage-delete"))},Rr.onsuccess=()=>{xt()}}catch(Rr){Ut(si.create("storage-delete",{originalErrorMessage:Rr&&Rr.message}))}})})()}createCompositeKey(W){return[this.appId,this.appName,this.namespace,W].join()}}class ds{constructor(W){this.storage=W}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var W=this;return(0,Z.Z)(function*(){const ue=W.storage.getLastFetchStatus(),Ge=W.storage.getLastSuccessfulFetchTimestampMillis(),xt=W.storage.getActiveConfig(),Ut=yield ue;Ut&&(W.lastFetchStatus=Ut);const vn=yield Ge;vn&&(W.lastSuccessfulFetchTimestampMillis=vn);const gr=yield xt;gr&&(W.activeConfig=gr)})()}setLastFetchStatus(W){return this.lastFetchStatus=W,this.storage.setLastFetchStatus(W)}setLastSuccessfulFetchTimestampMillis(W){return this.lastSuccessfulFetchTimestampMillis=W,this.storage.setLastSuccessfulFetchTimestampMillis(W)}setActiveConfig(W){return this.activeConfig=W,this.storage.setActiveConfig(W)}}function Qi(){return As.apply(this,arguments)}function As(){return(As=(0,Z.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch($){return!1}})).apply(this,arguments)}!function Gi(){(0,Ve._registerComponent)(new ae.wA("remote-config",function $(W,{instanceIdentifier:ue}){const Ge=W.getProvider("app").getImmediate(),xt=W.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw si.create("registration-window");if(!(0,Me.hl)())throw si.create("indexed-db-unavailable");const{projectId:Ut,apiKey:vn,appId:gr}=Ge.options;if(!Ut)throw si.create("registration-project-id");if(!vn)throw si.create("registration-api-key");if(!gr)throw si.create("registration-app-id");const or=new Yr(gr,Ge.name,ue=ue||"firebase"),Rr=new ds(or),fi=new we.Yd(hr);fi.logLevel=we.in.ERROR;const Wr=new fr(xt,Ve.SDK_VERSION,ue,Ut,vn,gr),us=new Oi(Wr,or),li=new Nn(us,or,Rr,fi),Ra=new Tt(Ge,li,Rr,or,fi);return function te($){const W=(0,Me.m9)($);W._initializePromise||(W._initializePromise=W._storageCache.loadFromStorage().then(()=>{W._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,Ve.registerVersion)(hr,"0.3.7"),(0,Ve.registerVersion)(hr,"0.3.7","esm2017")}();const xs="/firebase-messaging-sw.js",qr="/firebase-cloud-messaging-push-scope",Tr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zi="google.c.a.c_id",Qr="google.c.a.c_l",Rs="google.c.a.ts",vo="google.c.a.e";var ws=(()=>{return($=ws||(ws={})).PUSH_RECEIVED="push-received",$.NOTIFICATION_CLICKED="notification-clicked",ws;var $})();function Kr($){const W=new Uint8Array($);return btoa(String.fromCharCode(...W)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jr($){const ue=($+"=".repeat((4-$.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ge=atob(ue),xt=new Uint8Array(Ge.length);for(let Ut=0;Ut<Ge.length;++Ut)xt[Ut]=Ge.charCodeAt(Ut);return xt}const ui="fcm_token_details_db",wi="fcm_token_object_Store";function Pi($){return so.apply(this,arguments)}function so(){return so=(0,Z.Z)(function*($){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ut=>Ut.name).includes(ui))return null;let W=null;return(yield(0,Me.X3)(ui,5,function(){var Ge=(0,Z.Z)(function*(xt,Ut,vn,gr){var or;if(Ut<2||!xt.objectStoreNames.contains(wi))return;const Rr=gr.objectStore(wi),fi=yield Rr.index("fcmSenderId").get($);if(yield Rr.clear(),fi)if(2===Ut){const Wr=fi;if(!Wr.auth||!Wr.p256dh||!Wr.endpoint)return;W={token:Wr.fcmToken,createTime:null!==(or=Wr.createTime)&&void 0!==or?or:Date.now(),subscriptionOptions:{auth:Wr.auth,p256dh:Wr.p256dh,endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:"string"==typeof Wr.vapidKey?Wr.vapidKey:Kr(Wr.vapidKey)}}}else if(3===Ut){const Wr=fi;W={token:Wr.fcmToken,createTime:Wr.createTime,subscriptionOptions:{auth:Kr(Wr.auth),p256dh:Kr(Wr.p256dh),endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:Kr(Wr.vapidKey)}}}else if(4===Ut){const Wr=fi;W={token:Wr.fcmToken,createTime:Wr.createTime,subscriptionOptions:{auth:Kr(Wr.auth),p256dh:Kr(Wr.p256dh),endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:Kr(Wr.vapidKey)}}}});return function(xt,Ut,vn,gr){return Ge.apply(this,arguments)}}())).close(),yield(0,Me.Lj)(ui),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),ss(W)?W:null}),so.apply(this,arguments)}function ss($){if(!$||!$.subscriptionOptions)return!1;const{subscriptionOptions:W}=$;return"number"==typeof $.createTime&&$.createTime>0&&"string"==typeof $.token&&$.token.length>0&&"string"==typeof W.auth&&W.auth.length>0&&"string"==typeof W.p256dh&&W.p256dh.length>0&&"string"==typeof W.endpoint&&W.endpoint.length>0&&"string"==typeof W.swScope&&W.swScope.length>0&&"string"==typeof W.vapidKey&&W.vapidKey.length>0}const Ei="firebase-messaging-store";let ys=null;function Gs(){return ys||(ys=(0,Me.X3)("firebase-messaging-database",1,($,W)=>{0===W&&$.createObjectStore(Ei)})),ys}function ti($){return H.apply(this,arguments)}function H(){return(H=(0,Z.Z)(function*($){const W=Mt($),Ge=yield(yield Gs()).transaction(Ei).objectStore(Ei).get(W);if(Ge)return Ge;{const xt=yield Pi($.appConfig.senderId);if(xt)return yield ie($,xt),xt}})).apply(this,arguments)}function ie($,W){return j.apply(this,arguments)}function j(){return(j=(0,Z.Z)(function*($,W){const ue=Mt($),xt=(yield Gs()).transaction(Ei,"readwrite");return yield xt.objectStore(Ei).put(W,ue),yield xt.complete,W})).apply(this,arguments)}function de($){return nt.apply(this,arguments)}function nt(){return(nt=(0,Z.Z)(function*($){const W=Mt($),Ge=(yield Gs()).transaction(Ei,"readwrite");yield Ge.objectStore(Ei).delete(W),yield Ge.complete})).apply(this,arguments)}function Mt({appConfig:$}){return $.appId}const Zt=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oi($,W){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,Z.Z)(function*($,W){const ue=yield ki($),Ge=ir(W),xt={method:"POST",headers:ue,body:JSON.stringify(Ge)};let Ut;try{Ut=yield(yield fetch(bi($.appConfig),xt)).json()}catch(vn){throw Zt.create("token-subscribe-failed",{errorInfo:vn})}if(Ut.error)throw Zt.create("token-subscribe-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw Zt.create("token-subscribe-no-token");return Ut.token})).apply(this,arguments)}function Nr($,W){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,Z.Z)(function*($,W){const ue=yield ki($),Ge=ir(W.subscriptionOptions),xt={method:"PATCH",headers:ue,body:JSON.stringify(Ge)};let Ut;try{Ut=yield(yield fetch(`${bi($.appConfig)}/${W.token}`,xt)).json()}catch(vn){throw Zt.create("token-update-failed",{errorInfo:vn})}if(Ut.error)throw Zt.create("token-update-failed",{errorInfo:Ut.error.message});if(!Ut.token)throw Zt.create("token-update-no-token");return Ut.token})).apply(this,arguments)}function Di($,W){return ni.apply(this,arguments)}function ni(){return(ni=(0,Z.Z)(function*($,W){const Ge={method:"DELETE",headers:yield ki($)};try{const Ut=yield(yield fetch(`${bi($.appConfig)}/${W}`,Ge)).json();if(Ut.error)throw Zt.create("token-unsubscribe-failed",{errorInfo:Ut.error.message})}catch(xt){throw Zt.create("token-unsubscribe-failed",{errorInfo:xt})}})).apply(this,arguments)}function bi({projectId:$}){return`https://fcmregistrations.googleapis.com/v1/projects/${$}/registrations`}function ki($){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,Z.Z)(function*({appConfig:$,installations:W}){const ue=yield W.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$.apiKey,"x-goog-firebase-installations-auth":`FIS ${ue}`})})).apply(this,arguments)}function ir({p256dh:$,auth:W,endpoint:ue,vapidKey:Ge}){const xt={web:{endpoint:ue,auth:W,p256dh:$}};return Ge!==Tr&&(xt.web.applicationPubKey=Ge),xt}const Wi=6048e5;function G($){return B.apply(this,arguments)}function B(){return(B=(0,Z.Z)(function*($){const W=yield E($.swRegistration,$.vapidKey),ue={vapidKey:$.vapidKey,swScope:$.swRegistration.scope,endpoint:W.endpoint,auth:Kr(W.getKey("auth")),p256dh:Kr(W.getKey("p256dh"))},Ge=yield ti($.firebaseDependencies);if(Ge){if(q(Ge.subscriptionOptions,ue))return Date.now()>=Ge.createTime+Wi?jt($,{token:Ge.token,createTime:Date.now(),subscriptionOptions:ue}):Ge.token;try{yield Di($.firebaseDependencies,Ge.token)}catch(xt){console.warn(xt)}return P($.firebaseDependencies,ue)}return P($.firebaseDependencies,ue)})).apply(this,arguments)}function N($){return se.apply(this,arguments)}function se(){return(se=(0,Z.Z)(function*($){const W=yield ti($.firebaseDependencies);W&&(yield Di($.firebaseDependencies,W.token),yield de($.firebaseDependencies));const ue=yield $.swRegistration.pushManager.getSubscription();return!ue||ue.unsubscribe()})).apply(this,arguments)}function jt($,W){return v.apply(this,arguments)}function v(){return(v=(0,Z.Z)(function*($,W){try{const ue=yield Nr($.firebaseDependencies,W),Ge=Object.assign(Object.assign({},W),{token:ue,createTime:Date.now()});return yield ie($.firebaseDependencies,Ge),ue}catch(ue){throw yield N($),ue}})).apply(this,arguments)}function P($,W){return b.apply(this,arguments)}function b(){return(b=(0,Z.Z)(function*($,W){const Ge={token:yield oi($,W),createTime:Date.now(),subscriptionOptions:W};return yield ie($,Ge),Ge.token})).apply(this,arguments)}function E($,W){return I.apply(this,arguments)}function I(){return(I=(0,Z.Z)(function*($,W){return(yield $.pushManager.getSubscription())||$.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jr(W)})})).apply(this,arguments)}function q($,W){return W.vapidKey===$.vapidKey&&W.endpoint===$.endpoint&&W.auth===$.auth&&W.p256dh===$.p256dh}function fe($){const W={from:$.from,collapseKey:$.collapse_key,messageId:$.fcmMessageId};return function Le($,W){if(!W.notification)return;$.notification={};const ue=W.notification.title;ue&&($.notification.title=ue);const Ge=W.notification.body;Ge&&($.notification.body=Ge);const xt=W.notification.image;xt&&($.notification.image=xt)}(W,$),function It($,W){!W.data||($.data=W.data)}(W,$),function sn($,W){if(!W.fcmOptions)return;$.fcmOptions={};const ue=W.fcmOptions.link;ue&&($.fcmOptions.link=ue);const Ge=W.fcmOptions.analytics_label;Ge&&($.fcmOptions.analyticsLabel=Ge)}(W,$),W}function kn($){return"object"==typeof $&&!!$&&zi in $}function An($,W){const ue=[];for(let Ge=0;Ge<$.length;Ge++)ue.push($.charAt(Ge)),Ge<W.length&&ue.push(W.charAt(Ge));return ue.join("")}function Mn($){return Zt.create("missing-app-config-values",{valueName:$})}An("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),An("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zr{constructor(W,ue,Ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xt=function pr($){if(!$||!$.options)throw Mn("App Configuration Object");if(!$.name)throw Mn("App Name");const W=["projectId","apiKey","appId","messagingSenderId"],{options:ue}=$;for(const Ge of W)if(!ue[Ge])throw Mn(Ge);return{appName:$.name,projectId:ue.projectId,apiKey:ue.apiKey,appId:ue.appId,senderId:ue.messagingSenderId}}(W);this.firebaseDependencies={app:W,appConfig:xt,installations:ue,analyticsProvider:Ge}}_delete(){return Promise.resolve()}}function Dr($){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,Z.Z)(function*($){try{$.swRegistration=yield navigator.serviceWorker.register(xs,{scope:qr}),$.swRegistration.update().catch(()=>{})}catch(W){throw Zt.create("failed-service-worker-registration",{browserErrorMessage:W.message})}})).apply(this,arguments)}function Fr($,W){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,Z.Z)(function*($,W){if(!W&&!$.swRegistration&&(yield Dr($)),W||!$.swRegistration){if(!(W instanceof ServiceWorkerRegistration))throw Zt.create("invalid-sw-registration");$.swRegistration=W}})).apply(this,arguments)}function Li($,W){return zs.apply(this,arguments)}function zs(){return(zs=(0,Z.Z)(function*($,W){W?$.vapidKey=W:$.vapidKey||($.vapidKey=Tr)})).apply(this,arguments)}function es(){return(es=(0,Z.Z)(function*($,W){if(!navigator)throw Zt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zt.create("permission-blocked");return yield Li($,null==W?void 0:W.vapidKey),yield Fr($,null==W?void 0:W.serviceWorkerRegistration),G($)})).apply(this,arguments)}function Ki($,W,ue){return co.apply(this,arguments)}function co(){return(co=(0,Z.Z)(function*($,W,ue){const Ge=Eo(W);(yield $.firebaseDependencies.analyticsProvider.get()).logEvent(Ge,{message_id:ue[zi],message_name:ue[Qr],message_time:ue[Rs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Eo($){switch($){case ws.NOTIFICATION_CLICKED:return"notification_open";case ws.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ro(){return(Ro=(0,Z.Z)(function*($,W){const ue=W.data;if(!ue.isFirebaseMessaging)return;$.onMessageHandler&&ue.messageType===ws.PUSH_RECEIVED&&("function"==typeof $.onMessageHandler?$.onMessageHandler(fe(ue)):$.onMessageHandler.next(fe(ue)));const Ge=ue.data;kn(Ge)&&"1"===Ge[vo]&&(yield Ki($,ue.messageType,Ge))})).apply(this,arguments)}const Bo="@firebase/messaging",Wo=$=>{const W=new zr($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),$.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ue=>function da($,W){return Ro.apply(this,arguments)}(W,ue)),W},fo=$=>{const W=$.getProvider("messaging").getImmediate();return{getToken:Ge=>function ci($,W){return es.apply(this,arguments)}(W,Ge)}};function Ta(){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,Z.Z)(function*(){try{yield(0,Me.eu)()}catch($){return!1}return"undefined"!=typeof window&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vo(){(0,Ve._registerComponent)(new ae.wA("messaging",Wo,"PUBLIC")),(0,Ve._registerComponent)(new ae.wA("messaging-internal",fo,"PRIVATE")),(0,Ve.registerVersion)(Bo,"0.9.12"),(0,Ve.registerVersion)(Bo,"0.9.12","esm2017")}();const tl="analytics",nl="firebase_id",wo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pa="https://www.googletagmanager.com/gtag/js",Zi=new we.Yd("@firebase/analytics");function qo($){return Promise.all($.map(W=>W.catch(ue=>ue)))}function $a($,W){const ue=document.createElement("script");ue.src=`${pa}?l=${$}&id=${W}`,ue.async=!0,document.head.appendChild(ue)}function Yo($,W,ue,Ge,xt,Ut){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,Z.Z)(function*($,W,ue,Ge,xt,Ut){const vn=Ge[xt];try{if(vn)yield W[vn];else{const or=(yield qo(ue)).find(Rr=>Rr.measurementId===xt);or&&(yield W[or.appId])}}catch(gr){Zi.error(gr)}$("config",xt,Ut)})).apply(this,arguments)}function Ba($,W,ue,Ge,xt){return os.apply(this,arguments)}function os(){return(os=(0,Z.Z)(function*($,W,ue,Ge,xt){try{let Ut=[];if(xt&&xt.send_to){let vn=xt.send_to;Array.isArray(vn)||(vn=[vn]);const gr=yield qo(ue);for(const or of vn){const Rr=gr.find(Wr=>Wr.measurementId===or),fi=Rr&&W[Rr.appId];if(!fi){Ut=[];break}Ut.push(fi)}}0===Ut.length&&(Ut=Object.values(W)),yield Promise.all(Ut),$("event",Ge,xt||{})}catch(Ut){Zi.error(Ut)}})).apply(this,arguments)}function Cs(){const $=window.document.getElementsByTagName("script");for(const W of Object.values($))if(W.src&&W.src.includes(pa))return W;return null}const ns=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Io=new class ga{constructor(W={},ue=1e3){this.throttleMetadata=W,this.intervalMillis=ue}getThrottleMetadata(W){return this.throttleMetadata[W]}setThrottleMetadata(W,ue){this.throttleMetadata[W]=ue}deleteThrottleMetadata(W){delete this.throttleMetadata[W]}};function oo($){return new Headers({Accept:"application/json","x-goog-api-key":$})}function Uo($){return $i.apply(this,arguments)}function $i(){return($i=(0,Z.Z)(function*($){var W;const{appId:ue,apiKey:Ge}=$,xt={method:"GET",headers:oo(Ge)},Ut=wo.replace("{app-id}",ue),vn=yield fetch(Ut,xt);if(200!==vn.status&&304!==vn.status){let gr="";try{const or=yield vn.json();(null===(W=or.error)||void 0===W?void 0:W.message)&&(gr=or.error.message)}catch(or){}throw ns.create("config-fetch-failed",{httpStatus:vn.status,responseMessage:gr})}return vn.json()})).apply(this,arguments)}function Uu($){return _s.apply(this,arguments)}function _s(){return(_s=(0,Z.Z)(function*($,W=Io,ue){const{appId:Ge,apiKey:xt,measurementId:Ut}=$.options;if(!Ge)throw ns.create("no-app-id");if(!xt){if(Ut)return{measurementId:Ut,appId:Ge};throw ns.create("no-api-key")}const vn=W.getThrottleMetadata(Ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},gr=new Zo;return setTimeout((0,Z.Z)(function*(){gr.abort()}),void 0!==ue?ue:6e4),ma({appId:Ge,apiKey:xt,measurementId:Ut},vn,gr,W)})).apply(this,arguments)}function ma($,W,ue){return ya.apply(this,arguments)}function ya(){return(ya=(0,Z.Z)(function*($,{throttleEndTimeMillis:W,backoffCount:ue},Ge,xt=Io){const{appId:Ut,measurementId:vn}=$;try{yield Dl(Ge,W)}catch(gr){if(vn)return Zi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${gr.message}]`),{appId:Ut,measurementId:vn};throw gr}try{const gr=yield Uo($);return xt.deleteThrottleMetadata(Ut),gr}catch(gr){if(!as(gr)){if(xt.deleteThrottleMetadata(Ut),vn)return Zi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${gr.message}]`),{appId:Ut,measurementId:vn};throw gr}const or=503===Number(gr.customData.httpStatus)?(0,Me.$s)(ue,xt.intervalMillis,30):(0,Me.$s)(ue,xt.intervalMillis),Rr={throttleEndTimeMillis:Date.now()+or,backoffCount:ue+1};return xt.setThrottleMetadata(Ut,Rr),Zi.debug(`Calling attemptFetch again in ${or} millis`),ma($,Rr,Ge,xt)}})).apply(this,arguments)}function Dl($,W){return new Promise((ue,Ge)=>{const xt=Math.max(W-Date.now(),0),Ut=setTimeout(ue,xt);$.addEventListener(()=>{clearTimeout(Ut),Ge(ns.create("fetch-throttle",{throttleEndTimeMillis:W}))})})}function as($){if(!($ instanceof Me.ZR&&$.customData))return!1;const W=Number($.customData.httpStatus);return 429===W||500===W||503===W||504===W}class Zo{constructor(){this.listeners=[]}addEventListener(W){this.listeners.push(W)}abort(){this.listeners.forEach(W=>W())}}function Po(){return ao.apply(this,arguments)}function ao(){return(ao=(0,Z.Z)(function*(){if(!(0,Me.hl)())return Zi.warn(ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch($){return Zi.warn(ns.create("indexeddb-unavailable",{errorInfo:$}).message),!1}return!0})).apply(this,arguments)}function xn(){return(xn=(0,Z.Z)(function*($,W,ue,Ge,xt,Ut,vn){var gr;const or=Uu($);or.then(li=>{ue[li.measurementId]=li.appId,$.options.measurementId&&li.measurementId!==$.options.measurementId&&Zi.warn(`The measurement ID in the local Firebase config (${$.options.measurementId}) does not match the measurement ID fetched from the server (${li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(li=>Zi.error(li)),W.push(or);const Rr=Po().then(li=>{if(li)return Ge.getId()}),[fi,Wr]=yield Promise.all([or,Rr]);Cs()||$a(Ut,fi.measurementId),xt("js",new Date);const us=null!==(gr=null==vn?void 0:vn.config)&&void 0!==gr?gr:{};return us.origin="firebase",us.update=!0,null!=Wr&&(us[nl]=Wr),xt("config",fi.measurementId,us),fi.measurementId})).apply(this,arguments)}class Ur{constructor(W){this.app=W}_delete(){return delete qi[this.app.options.appId],Promise.resolve()}}let qi={},eo=[];const sr={};let $n,Ht,kr="dataLayer",R=!1;function V($,W,ue){!function S(){const $=[];if((0,Me.ru)()&&$.push("This is a browser extension environment."),(0,Me.zI)()||$.push("Cookies are not available."),$.length>0){const W=$.map((Ge,xt)=>`(${xt+1}) ${Ge}`).join(" "),ue=ns.create("invalid-analytics-context",{errorInfo:W});Zi.warn(ue.message)}}();const Ge=$.options.appId;if(!Ge)throw ns.create("no-app-id");if(!$.options.apiKey){if(!$.options.measurementId)throw ns.create("no-api-key");Zi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${$.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qi[Ge])throw ns.create("already-exists",{id:Ge});if(!R){!function po($){let W=[];Array.isArray(window[$])?W=window[$]:window[$]=W}(kr);const{wrappedGtag:Ut,gtagCore:vn}=function Ll($,W,ue,Ge,xt){let Ut=function(...vn){window[Ge].push(arguments)};return window[xt]&&"function"==typeof window[xt]&&(Ut=window[xt]),window[xt]=function Cl($,W,ue,Ge){function Ut(){return(Ut=(0,Z.Z)(function*(vn,gr,or){try{"event"===vn?yield Ba($,W,ue,gr,or):"config"===vn?yield Yo($,W,ue,Ge,gr,or):$("set",gr)}catch(Rr){Zi.error(Rr)}})).apply(this,arguments)}return function xt(vn,gr,or){return Ut.apply(this,arguments)}}(Ut,$,W,ue),{gtagCore:Ut,wrappedGtag:window[xt]}}(qi,eo,sr,kr,"gtag");Ht=Ut,$n=vn,R=!0}return qi[Ge]=function Xo($,W,ue,Ge,xt,Ut,vn){return xn.apply(this,arguments)}($,eo,sr,W,$n,kr,ue),new Ur($)}function le(){return(le=(0,Z.Z)(function*($,W,ue,Ge,xt){if(xt&&xt.global)$("event",ue,Ge);else{const Ut=yield W;$("event",ue,Object.assign(Object.assign({},Ge),{send_to:Ut}))}})).apply(this,arguments)}function Qo(){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,Z.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch($){return!1}})).apply(this,arguments)}const yi="@firebase/analytics";!function ks(){(0,Ve._registerComponent)(new ae.wA(tl,(W,{options:ue})=>V(W.getProvider("app").getImmediate(),W.getProvider("installations-internal").getImmediate(),ue),"PUBLIC")),(0,Ve._registerComponent)(new ae.wA("analytics-internal",function $(W){try{const ue=W.getProvider(tl).getImmediate();return{logEvent:(Ge,xt,Ut)=>function $l($,W,ue,Ge){$=(0,Me.m9)($),function Y($,W,ue,Ge,xt){return le.apply(this,arguments)}(Ht,qi[$.app.options.appId],W,ue,Ge).catch(xt=>Zi.error(xt))}(ue,Ge,xt,Ut)}}catch(ue){throw ns.create("interop-component-reg-failed",{reason:ue})}},"PRIVATE")),(0,Ve.registerVersion)(yi,"0.7.8"),(0,Ve.registerVersion)(yi,"0.7.8","esm2017")}();var Tl=L(341),ja=L(353),Ys=L(2868),vs=L(2102),Jo=L(8915);const Bi=new a.GfV("7.3.0"),Ha="__angularfire_symbol__analyticsIsSupportedValue",rl="__angularfire_symbol__analyticsIsSupported",Ks="__angularfire_symbol__remoteConfigIsSupportedValue",Zs="__angularfire_symbol__remoteConfigIsSupported",Bl="__angularfire_symbol__messagingIsSupportedValue",Ns="__angularfire_symbol__messagingIsSupported";function Hu($,W,ue){if(W){if(1===W.length)return W[0];const Ut=W.filter(vn=>vn.app===ue);if(1===Ut.length)return Ut[0]}return ue.container.getProvider($).getImmediate({optional:!0})}globalThis[rl]||(globalThis[rl]=Qo().then($=>globalThis[Ha]=$).catch(()=>globalThis[Ha]=!1)),globalThis[Ns]||(globalThis[Ns]=Ta().then($=>globalThis[Bl]=$).catch(()=>globalThis[Bl]=!1)),globalThis[Zs]||(globalThis[Zs]=Qi().then($=>globalThis[Ks]=$).catch(()=>globalThis[Ks]=!1));const qc=($,W)=>{const ue=W?[W]:(0,J.C6)(),Ge=[];return ue.forEach(xt=>{xt.container.getProvider($).instances.forEach(vn=>{Ge.includes(vn)||Ge.push(vn)})}),Ge};function go(){}class ls{constructor(W,ue=Tl.N){this.zone=W,this.delegate=ue}now(){return this.delegate.now()}schedule(W,ue,Ge){const xt=this.zone;return this.delegate.schedule(function(vn){xt.runGuarded(()=>{W.apply(this,[vn])})},ue,Ge)}}class il{constructor(W){this.zone=W,this.task=null}call(W,ue){const Ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",go,{},go,go)),ue.pipe((0,Ys.b)({next:Ge,complete:Ge,error:Ge})).subscribe(W).add(Ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ko=(()=>{class ${constructor(ue){this.ngZone=ue,this.outsideAngular=ue.runOutsideAngular(()=>new ls(Zone.current)),this.insideAngular=ue.run(()=>new ls(Zone.current,ja.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return $.\u0275fac=function(ue){return new(ue||$)(a.LFG(a.R0b))},$.\u0275prov=a.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();function Aa(){const $=globalThis.\u0275AngularFireScheduler;if(!$)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return $}function ol($){return $.pipe((0,vs.QV)(Aa().outsideAngular))}function xa($){return Aa(),function gc($){return function(ue){return(ue=ue.lift(new il($.ngZone))).pipe((0,Jo.R)($.outsideAngular),(0,vs.QV)($.insideAngular))}}(Aa())($)}},2090:(On,Ct,L)=>{"use strict";L.d(Ct,{BH:()=>Xe,LL:()=>Lt,ZR:()=>ut,gQ:()=>lr,zI:()=>me,hu:()=>Z,g5:()=>Ve,US:()=>we,tV:()=>oe,h$:()=>Ce,L:()=>Ee,$s:()=>Hn,r3:()=>St,Sg:()=>Ne,ne:()=>pn,p$:()=>pe,vZ:()=>Fn,ZB:()=>ee,Lj:()=>Kn,gK:()=>gt,pd:()=>rr,m9:()=>yn,z$:()=>_e,GJ:()=>rn,jU:()=>Dt,ru:()=>ve,d:()=>He,xb:()=>mn,w1:()=>dt,hl:()=>st,uI:()=>ke,UG:()=>$e,Yr:()=>Ft,b$:()=>pt,G6:()=>Ye,Mn:()=>mt,w9:()=>Qe,cI:()=>At,UI:()=>jn,X3:()=>Yn,xO:()=>er,zd:()=>Br,DV:()=>hn,ug:()=>nn,dS:()=>Nt,Pz:()=>ze,Dv:()=>ar,Wj:()=>Ie,lb:()=>Kt,eu:()=>Fe});var a=L(5861);const Z=function(We,De){if(!We)throw Ve(De)},Ve=function(We){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+We)},Me=function(We){const De=[];let Ze=0;for(let Rt=0;Rt<We.length;Rt++){let _t=We.charCodeAt(Rt);_t<128?De[Ze++]=_t:_t<2048?(De[Ze++]=_t>>6|192,De[Ze++]=63&_t|128):55296==(64512&_t)&&Rt+1<We.length&&56320==(64512&We.charCodeAt(Rt+1))?(_t=65536+((1023&_t)<<10)+(1023&We.charCodeAt(++Rt)),De[Ze++]=_t>>18|240,De[Ze++]=_t>>12&63|128,De[Ze++]=_t>>6&63|128,De[Ze++]=63&_t|128):(De[Ze++]=_t>>12|224,De[Ze++]=_t>>6&63|128,De[Ze++]=63&_t|128)}return De},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(We,De){if(!Array.isArray(We))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ze=De?this.byteToCharMapWebSafe_:this.byteToCharMap_,Rt=[];for(let _t=0;_t<We.length;_t+=3){const dn=We[_t],tt=_t+1<We.length,je=tt?We[_t+1]:0,Ae=_t+2<We.length,lt=Ae?We[_t+2]:0;let Un=(15&je)<<2|lt>>6,xe=63&lt;Ae||(xe=64,tt||(Un=64)),Rt.push(Ze[dn>>2],Ze[(3&dn)<<4|je>>4],Ze[Un],Ze[xe])}return Rt.join("")},encodeString(We,De){return this.HAS_NATIVE_SUPPORT&&!De?btoa(We):this.encodeByteArray(Me(We),De)},decodeString(We,De){return this.HAS_NATIVE_SUPPORT&&!De?atob(We):function(We){const De=[];let Ze=0,Rt=0;for(;Ze<We.length;){const _t=We[Ze++];if(_t<128)De[Rt++]=String.fromCharCode(_t);else if(_t>191&&_t<224){const dn=We[Ze++];De[Rt++]=String.fromCharCode((31&_t)<<6|63&dn)}else if(_t>239&&_t<365){const Ae=((7&_t)<<18|(63&We[Ze++])<<12|(63&We[Ze++])<<6|63&We[Ze++])-65536;De[Rt++]=String.fromCharCode(55296+(Ae>>10)),De[Rt++]=String.fromCharCode(56320+(1023&Ae))}else{const dn=We[Ze++],tt=We[Ze++];De[Rt++]=String.fromCharCode((15&_t)<<12|(63&dn)<<6|63&tt)}}return De.join("")}(this.decodeStringToByteArray(We,De))},decodeStringToByteArray(We,De){this.init_();const Ze=De?this.charToByteMapWebSafe_:this.charToByteMap_,Rt=[];for(let _t=0;_t<We.length;){const dn=Ze[We.charAt(_t++)],je=_t<We.length?Ze[We.charAt(_t)]:0;++_t;const lt=_t<We.length?Ze[We.charAt(_t)]:64;++_t;const _n=_t<We.length?Ze[We.charAt(_t)]:64;if(++_t,null==dn||null==je||null==lt||null==_n)throw Error();Rt.push(dn<<2|je>>4),64!==lt&&(Rt.push(je<<4&240|lt>>2),64!==_n&&Rt.push(lt<<6&192|_n))}return Rt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let We=0;We<this.ENCODED_VALS.length;We++)this.byteToCharMap_[We]=this.ENCODED_VALS.charAt(We),this.charToByteMap_[this.byteToCharMap_[We]]=We,this.byteToCharMapWebSafe_[We]=this.ENCODED_VALS_WEBSAFE.charAt(We),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[We]]=We,We>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(We)]=We,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(We)]=We)}}},Ce=function(We){const De=Me(We);return we.encodeByteArray(De,!0)},Ee=function(We){return Ce(We).replace(/\./g,"")},oe=function(We){try{return we.decodeString(We,!0)}catch(De){console.error("base64Decode failed: ",De)}return null};function pe(We){return ee(void 0,We)}function ee(We,De){if(!(De instanceof Object))return De;switch(De.constructor){case Date:return new Date(De.getTime());case Object:void 0===We&&(We={});break;case Array:We=[];break;default:return De}for(const Ze in De)!De.hasOwnProperty(Ze)||!ce(Ze)||(We[Ze]=ee(We[Ze],De[Ze]));return We}function ce(We){return"__proto__"!==We}class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((De,Ze)=>{this.resolve=De,this.reject=Ze})}wrapCallback(De){return(Ze,Rt)=>{Ze?this.reject(Ze):this.resolve(Rt),"function"==typeof De&&(this.promise.catch(()=>{}),1===De.length?De(Ze):De(Ze,Rt))}}}function Ne(We,De){if(We.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Rt=De||"demo-project",_t=We.iat||0,dn=We.sub||We.user_id;if(!dn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const tt=Object.assign({iss:`https://securetoken.google.com/${Rt}`,aud:Rt,iat:_t,exp:_t+3600,auth_time:_t,sub:dn,user_id:dn,firebase:{sign_in_provider:"custom",identities:{}}},We);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(tt)),""].join(".")}function _e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(We){return!1}}function Dt(){return"object"==typeof self&&self.self===self}function ve(){const We="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof We&&void 0!==We.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){return _e().indexOf("Electron/")>=0}function dt(){const We=_e();return We.indexOf("MSIE ")>=0||We.indexOf("Trident/")>=0}function mt(){return _e().indexOf("MSAppHost/")>=0}function Ft(){return!1}function Ye(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function st(){return"object"==typeof indexedDB}function Fe(){return new Promise((We,De)=>{try{let Ze=!0;const Rt="validate-browser-context-for-indexeddb-analytics-module",_t=self.indexedDB.open(Rt);_t.onsuccess=()=>{_t.result.close(),Ze||self.indexedDB.deleteDatabase(Rt),We(!0)},_t.onupgradeneeded=()=>{Ze=!1},_t.onerror=()=>{var dn;De((null===(dn=_t.error)||void 0===dn?void 0:dn.message)||"")}}catch(Ze){De(Ze)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ut extends Error{constructor(De,Ze,Rt){super(Ze),this.code=De,this.customData=Rt,this.name="FirebaseError",Object.setPrototypeOf(this,ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lt.prototype.create)}}class Lt{constructor(De,Ze,Rt){this.service=De,this.serviceName=Ze,this.errors=Rt}create(De,...Ze){const Rt=Ze[0]||{},_t=`${this.service}/${De}`,dn=this.errors[De],tt=dn?function un(We,De){return We.replace(vt,(Ze,Rt)=>{const _t=De[Rt];return null!=_t?String(_t):`<${Rt}?>`})}(dn,Rt):"Error";return new ut(_t,`${this.serviceName}: ${tt} (${_t}).`,Rt)}}const vt=/\{\$([^}]+)}/g;function At(We){return JSON.parse(We)}function ze(We){return JSON.stringify(We)}const at=function(We){let De={},Ze={},Rt={},_t="";try{const dn=We.split(".");De=At(oe(dn[0])||""),Ze=At(oe(dn[1])||""),_t=dn[2],Rt=Ze.d||{},delete Ze.d}catch(dn){}return{header:De,claims:Ze,data:Rt,signature:_t}},Qe=function(We){const Ze=at(We).claims;return!!Ze&&"object"==typeof Ze&&Ze.hasOwnProperty("iat")},rn=function(We){const De=at(We).claims;return"object"==typeof De&&!0===De.admin};function St(We,De){return Object.prototype.hasOwnProperty.call(We,De)}function hn(We,De){if(Object.prototype.hasOwnProperty.call(We,De))return We[De]}function mn(We){for(const De in We)if(Object.prototype.hasOwnProperty.call(We,De))return!1;return!0}function jn(We,De,Ze){const Rt={};for(const _t in We)Object.prototype.hasOwnProperty.call(We,_t)&&(Rt[_t]=De.call(Ze,We[_t],_t,We));return Rt}function Fn(We,De){if(We===De)return!0;const Ze=Object.keys(We),Rt=Object.keys(De);for(const _t of Ze){if(!Rt.includes(_t))return!1;const dn=We[_t],tt=De[_t];if(Dn(dn)&&Dn(tt)){if(!Fn(dn,tt))return!1}else if(dn!==tt)return!1}for(const _t of Rt)if(!Ze.includes(_t))return!1;return!0}function Dn(We){return null!==We&&"object"==typeof We}function er(We){const De=[];for(const[Ze,Rt]of Object.entries(We))Array.isArray(Rt)?Rt.forEach(_t=>{De.push(encodeURIComponent(Ze)+"="+encodeURIComponent(_t))}):De.push(encodeURIComponent(Ze)+"="+encodeURIComponent(Rt));return De.length?"&"+De.join("&"):""}function Br(We){const De={};return We.replace(/^\?/,"").split("&").forEach(Rt=>{if(Rt){const[_t,dn]=Rt.split("=");De[decodeURIComponent(_t)]=decodeURIComponent(dn)}}),De}function rr(We){const De=We.indexOf("?");if(!De)return"";const Ze=We.indexOf("#",De);return We.substring(De,Ze>0?Ze:void 0)}class lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let De=1;De<this.blockSize;++De)this.pad_[De]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(De,Ze){Ze||(Ze=0);const Rt=this.W_;if("string"==typeof De)for(let _n=0;_n<16;_n++)Rt[_n]=De.charCodeAt(Ze)<<24|De.charCodeAt(Ze+1)<<16|De.charCodeAt(Ze+2)<<8|De.charCodeAt(Ze+3),Ze+=4;else for(let _n=0;_n<16;_n++)Rt[_n]=De[Ze]<<24|De[Ze+1]<<16|De[Ze+2]<<8|De[Ze+3],Ze+=4;for(let _n=16;_n<80;_n++){const Un=Rt[_n-3]^Rt[_n-8]^Rt[_n-14]^Rt[_n-16];Rt[_n]=4294967295&(Un<<1|Un>>>31)}let lt,qt,_t=this.chain_[0],dn=this.chain_[1],tt=this.chain_[2],je=this.chain_[3],Ae=this.chain_[4];for(let _n=0;_n<80;_n++){_n<40?_n<20?(lt=je^dn&(tt^je),qt=1518500249):(lt=dn^tt^je,qt=1859775393):_n<60?(lt=dn&tt|je&(dn|tt),qt=2400959708):(lt=dn^tt^je,qt=3395469782);const Un=(_t<<5|_t>>>27)+lt+Ae+qt+Rt[_n]&4294967295;Ae=je,je=tt,tt=4294967295&(dn<<30|dn>>>2),dn=_t,_t=Un}this.chain_[0]=this.chain_[0]+_t&4294967295,this.chain_[1]=this.chain_[1]+dn&4294967295,this.chain_[2]=this.chain_[2]+tt&4294967295,this.chain_[3]=this.chain_[3]+je&4294967295,this.chain_[4]=this.chain_[4]+Ae&4294967295}update(De,Ze){if(null==De)return;void 0===Ze&&(Ze=De.length);const Rt=Ze-this.blockSize;let _t=0;const dn=this.buf_;let tt=this.inbuf_;for(;_t<Ze;){if(0===tt)for(;_t<=Rt;)this.compress_(De,_t),_t+=this.blockSize;if("string"==typeof De){for(;_t<Ze;)if(dn[tt]=De.charCodeAt(_t),++tt,++_t,tt===this.blockSize){this.compress_(dn),tt=0;break}}else for(;_t<Ze;)if(dn[tt]=De[_t],++tt,++_t,tt===this.blockSize){this.compress_(dn),tt=0;break}}this.inbuf_=tt,this.total_+=Ze}digest(){const De=[];let Ze=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let _t=this.blockSize-1;_t>=56;_t--)this.buf_[_t]=255&Ze,Ze/=256;this.compress_(this.buf_);let Rt=0;for(let _t=0;_t<5;_t++)for(let dn=24;dn>=0;dn-=8)De[Rt]=this.chain_[_t]>>dn&255,++Rt;return De}}function pn(We,De){const Ze=new Ar(We,De);return Ze.subscribe.bind(Ze)}class Ar{constructor(De,Ze){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ze,this.task.then(()=>{De(this)}).catch(Rt=>{this.error(Rt)})}next(De){this.forEachObserver(Ze=>{Ze.next(De)})}error(De){this.forEachObserver(Ze=>{Ze.error(De)}),this.close(De)}complete(){this.forEachObserver(De=>{De.complete()}),this.close()}subscribe(De,Ze,Rt){let _t;if(void 0===De&&void 0===Ze&&void 0===Rt)throw new Error("Missing Observer.");_t=function Ir(We,De){if("object"!=typeof We||null===We)return!1;for(const Ze of De)if(Ze in We&&"function"==typeof We[Ze])return!0;return!1}(De,["next","error","complete"])?De:{next:De,error:Ze,complete:Rt},void 0===_t.next&&(_t.next=ur),void 0===_t.error&&(_t.error=ur),void 0===_t.complete&&(_t.complete=ur);const dn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_t.error(this.finalError):_t.complete()}catch(tt){}}),this.observers.push(_t),dn}unsubscribeOne(De){void 0===this.observers||void 0===this.observers[De]||(delete this.observers[De],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(De){if(!this.finalized)for(let Ze=0;Ze<this.observers.length;Ze++)this.sendOne(Ze,De)}sendOne(De,Ze){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[De])try{Ze(this.observers[De])}catch(Rt){"undefined"!=typeof console&&console.error&&console.error(Rt)}})}close(De){this.finalized||(this.finalized=!0,void 0!==De&&(this.finalError=De),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ur(){}const ar=function(We,De,Ze,Rt){let _t;if(Rt<De?_t="at least "+De:Rt>Ze&&(_t=0===Ze?"none":"no more than "+Ze),_t)throw new Error(We+" failed: Was called with "+Rt+(1===Rt?" argument.":" arguments.")+" Expects "+_t+".")};function gt(We,De){return`${We} failed: ${De} argument `}function Ie(We,De,Ze,Rt){if((!Rt||Ze)&&"function"!=typeof Ze)throw new Error(gt(We,De)+"must be a valid function.")}function Kt(We,De,Ze,Rt){if((!Rt||Ze)&&("object"!=typeof Ze||null===Ze))throw new Error(gt(We,De)+"must be a valid context object.")}const Nt=function(We){const De=[];let Ze=0;for(let Rt=0;Rt<We.length;Rt++){let _t=We.charCodeAt(Rt);if(_t>=55296&&_t<=56319){const dn=_t-55296;Rt++,Z(Rt<We.length,"Surrogate pair missing trail surrogate."),_t=65536+(dn<<10)+(We.charCodeAt(Rt)-56320)}_t<128?De[Ze++]=_t:_t<2048?(De[Ze++]=_t>>6|192,De[Ze++]=63&_t|128):_t<65536?(De[Ze++]=_t>>12|224,De[Ze++]=_t>>6&63|128,De[Ze++]=63&_t|128):(De[Ze++]=_t>>18|240,De[Ze++]=_t>>12&63|128,De[Ze++]=_t>>6&63|128,De[Ze++]=63&_t|128)}return De},nn=function(We){let De=0;for(let Ze=0;Ze<We.length;Ze++){const Rt=We.charCodeAt(Ze);Rt<128?De++:Rt<2048?De+=2:Rt>=55296&&Rt<=56319?(De+=4,Ze++):De+=3}return De};function Hn(We,De=1e3,Ze=2){const Rt=De*Math.pow(Ze,We),_t=Math.round(.5*Rt*(Math.random()-.5)*2);return Math.min(144e5,Rt+_t)}function yn(We){return We&&We._delegate?We._delegate:We}function Wn(We,De){return new Promise((Ze,Rt)=>{We.onsuccess=_t=>{Ze(_t.target.result)},We.onerror=_t=>{var dn;Rt(`${De}: ${null===(dn=_t.target.error)||void 0===dn?void 0:dn.message}`)}})}class cr{constructor(De){this._db=De,this.objectStoreNames=this._db.objectStoreNames}transaction(De,Ze="readonly"){return new Rn(this._db.transaction.call(this._db,De,Ze))}createObjectStore(De,Ze){return new Vt(this._db.createObjectStore(De,Ze))}close(){this._db.close()}}class Rn{constructor(De){this._transaction=De,this.complete=new Promise((Ze,Rt)=>{this._transaction.oncomplete=function(){Ze()},this._transaction.onerror=()=>{Rt(this._transaction.error)},this._transaction.onabort=()=>{Rt(this._transaction.error)}})}objectStore(De){return new Vt(this._transaction.objectStore(De))}}class Vt{constructor(De){this._store=De}index(De){return new wn(this._store.index(De))}createIndex(De,Ze,Rt){return new wn(this._store.createIndex(De,Ze,Rt))}get(De){return Wn(this._store.get(De),"Error reading from IndexedDB")}put(De,Ze){return Wn(this._store.put(De,Ze),"Error writing to IndexedDB")}delete(De){return Wn(this._store.delete(De),"Error deleting from IndexedDB")}clear(){return Wn(this._store.clear(),"Error clearing IndexedDB object store")}}class wn{constructor(De){this._index=De}get(De){return Wn(this._index.get(De),"Error reading from IndexedDB")}}function Yn(We,De,Ze){return new Promise((Rt,_t)=>{try{const dn=indexedDB.open(We,De);dn.onsuccess=tt=>{Rt(new cr(tt.target.result))},dn.onerror=tt=>{var je;_t(`Error opening indexedDB: ${null===(je=tt.target.error)||void 0===je?void 0:je.message}`)},dn.onupgradeneeded=tt=>{Ze(new cr(dn.result),tt.oldVersion,tt.newVersion,new Rn(dn.transaction))}}catch(dn){_t(`Error opening indexedDB: ${dn.message}`)}})}function Kn(We){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*(We){return new Promise((De,Ze)=>{try{const Rt=indexedDB.deleteDatabase(We);Rt.onsuccess=()=>{De()},Rt.onerror=_t=>{var dn;Ze(`Error deleting indexedDB database "${We}": ${null===(dn=_t.target.error)||void 0===dn?void 0:dn.message}`)}}catch(Rt){Ze(`Error deleting indexedDB database "${We}": ${Rt.message}`)}})})).apply(this,arguments)}},4433:(On,Ct,L)=>{"use strict";L.d(Ct,{Br:()=>Hr,dr:()=>nn,oU:()=>Xn,cs:()=>Ei,YG:()=>Cr,Sm:()=>yn,PM:()=>Wn,FN:()=>cr,Zi:()=>Rn,tO:()=>Vt,Dq:()=>wn,wI:()=>Vn,W2:()=>We,Gu:()=>je,gu:()=>Ae,pK:()=>Un,Ie:()=>xe,Q$:()=>an,q_:()=>En,jP:()=>ss,Nd:()=>Mi,VI:()=>Ai,yW:()=>nr,Bs:()=>xr,wd:()=>xi,sr:()=>rt,Pc:()=>jt,r4:()=>B,HT:()=>Nr,YI:()=>Gs,Fo:()=>ti,j9:()=>Ir});var a=L(5e3),J=L(4182),Z=L(655),Ve=L(2916),Me=L(6688),ae=L(7043),we=L(4850);function Ee(v,P,b,E){return(0,ae.m)(b)&&(E=b,b=void 0),E?Ee(v,P,b).pipe((0,we.U)(I=>(0,Me.k)(I)?E(...I):E(I))):new Ve.y(I=>{oe(v,P,function q(fe){I.next(arguments.length>1?Array.prototype.slice.call(arguments):fe)},I,b)})}function oe(v,P,b,E,I){let q;if(function ce(v){return v&&"function"==typeof v.addEventListener&&"function"==typeof v.removeEventListener}(v)){const fe=v;v.addEventListener(P,b,I),q=()=>fe.removeEventListener(P,b,I)}else if(function ee(v){return v&&"function"==typeof v.on&&"function"==typeof v.off}(v)){const fe=v;v.on(P,b),q=()=>fe.off(P,b)}else if(function pe(v){return v&&"function"==typeof v.addListener&&"function"==typeof v.removeListener}(v)){const fe=v;v.addListener(P,b),q=()=>fe.removeListener(P,b)}else{if(!v||!v.length)throw new TypeError("Invalid event target");for(let fe=0,Le=v.length;fe<Le;fe++)oe(v[fe],P,b,E,I)}E.add(q)}var Xe=L(8929),Ne=L(591),_e=L(3442),ve=(L(936),L(8447),L(3139),L(6254)),pt=L(1643),He=L(7249),mt=(L(6708),L(1450)),Ye=(L(3509),L(2361)),ut=L(2198),Lt=L(7545),un=L(5778),vt=L(9808);const ze=ve.i,U=["*"],jn=v=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(v):"function"==typeof requestAnimationFrame?requestAnimationFrame(v):setTimeout(v);let Fn=(()=>{class v{constructor(b,E){this.injector=b,this.el=E,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(b){this.el.nativeElement.value=this.lastValue=null==b?"":b,Dn(this.el)}handleChangeEvent(b,E){b===this.el.nativeElement&&(E!==this.lastValue&&(this.lastValue=E,this.onChange(E)),Dn(this.el))}_handleBlurEvent(b){b===this.el.nativeElement&&(this.onTouched(),Dn(this.el))}registerOnChange(b){this.onChange=b}registerOnTouched(b){this.onTouched=b}setDisabledState(b){this.el.nativeElement.disabled=b}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let b;try{b=this.injector.get(J.a5)}catch(I){}if(!b)return;b.statusChanges&&(this.statusChanges=b.statusChanges.subscribe(()=>Dn(this.el)));const E=b.control;E&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(q=>{if(void 0!==E[q]){const fe=E[q].bind(E);E[q]=(...Le)=>{fe(...Le),Dn(this.el)}}})}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.zs3),a.Y36(a.SBq))},v.\u0275dir=a.lG2({type:v,hostBindings:function(b,E){1&b&&a.NdJ("ionBlur",function(q){return E._handleBlurEvent(q.target)})}}),v})();const Dn=v=>{jn(()=>{const P=v.nativeElement,b=null!=P.value&&P.value.toString().length>0,E=er(P);Br(P,E);const I=P.closest("ion-item");I&&Br(I,b?[...E,"item-has-value"]:E)})},er=v=>{const P=v.classList,b=[];for(let E=0;E<P.length;E++){const I=P.item(E);null!==I&&rr(I,"ng-")&&b.push(`ion-${I.substring(3)}`)}return b},Br=(v,P)=>{const b=v.classList;b.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),b.add(...P)},rr=(v,P)=>v.substring(0,P.length)===P;let Ir=(()=>{class v extends Fn{constructor(b,E){super(b,E)}_handleInputEvent(b){this.handleChangeEvent(b,b.value)}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.zs3),a.Y36(a.SBq))},v.\u0275dir=a.lG2({type:v,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(b,E){1&b&&a.NdJ("ionChange",function(q){return E._handleInputEvent(q.target)})},features:[a._Bn([{provide:J.JU,useExisting:v,multi:!0}]),a.qOj]}),v})();const ur=(v,P)=>{const b=v.prototype;P.forEach(E=>{Object.defineProperty(b,E,{get(){return this.el[E]},set(I){this.z.runOutsideAngular(()=>this.el[E]=I)}})})},ar=(v,P)=>{const b=v.prototype;P.forEach(E=>{b[E]=function(){const I=arguments;return this.z.runOutsideAngular(()=>this.el[E].apply(this.el,I))}})},gt=(v,P,b)=>{b.forEach(E=>v[E]=Ee(P,E))};function Ie(v){return function(b){const{defineCustomElementFn:E,inputs:I,methods:q}=v;return void 0!==E&&E(),I&&ur(b,I),q&&ar(b,q),b}}let nn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-app"]],ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0})],v),v})(),Xn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],v),v})(),Cr=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement,gt(this,this.el,["ionFocus","ionBlur"])}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],v),v})(),yn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["collapse"]})],v),v})(),Wn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],v),v})(),cr=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["mode"]})],v),v})(),Rn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],v),v})(),Vt=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})(),wn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})(),Vn=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],v),v})(),We=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement,gt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],v),v})(),je=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],v),v})(),Ae=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],v),v})(),Un=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement,gt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],v),v})(),xe=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],v),v})(),an=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],v),v})(),En=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],v),v})(),Mi=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-row"]],ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0})],v),v})(),Ai=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement,gt(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],v),v})(),nr=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})(),xr=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-thumbnail"]],ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0})],v),v})(),xi=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","size"]})],v),v})(),rt=(()=>{let v=class{constructor(b,E,I){this.z=I,b.detach(),this.el=E.nativeElement}};return v.\u0275fac=function(b){return new(b||v)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},v.\u0275cmp=a.Xpm({type:v,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:U,decls:1,vars:0,template:function(b,E){1&b&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Ie({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})();class ot{constructor(P={}){this.data=P}get(P){return this.data[P]}}let Tt=(()=>{class v{constructor(b,E){this.zone=b,this.appRef=E}create(b,E,I){return new on(b,E,I,this.appRef,this.zone)}}return v.\u0275fac=function(b){return new(b||v)(a.LFG(a.R0b),a.LFG(a.z2F))},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac}),v})();class on{constructor(P,b,E,I,q){this.resolver=P,this.injector=b,this.location=E,this.appRef=I,this.zone=q,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(P,b,E,I){return this.zone.run(()=>new Promise(q=>{q(In(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,P,b,E,I))}))}removeViewFromDom(P,b){return this.zone.run(()=>new Promise(E=>{const I=this.elRefMap.get(b);if(I){I.destroy(),this.elRefMap.delete(b);const q=this.elEventsMap.get(b);q&&(q(),this.elEventsMap.delete(b))}E()}))}}const In=(v,P,b,E,I,q,fe,Le,It,sn,kn)=>{const An=P.resolveComponentFactory(It),pr=a.zs3.create({providers:Yr(sn),parent:b}),Mn=E?E.createComponent(An,E.length,pr):An.create(pr),zr=Mn.instance,Dr=Mn.location.nativeElement;if(sn&&Object.assign(zr,sn),kn)for(const Fr of kn)Dr.classList.add(Fr);const Fi=ri(v,zr,Dr);return Le.appendChild(Dr),E||I.attachView(Mn.hostView),Mn.changeDetectorRef.reattach(),q.set(Dr,Mn),fe.set(Dr,Fi),Dr},Qn=[He.L,He.a,He.b,He.c,He.d],ri=(v,P,b)=>v.run(()=>{const E=Qn.filter(I=>"function"==typeof P[I]).map(I=>{const q=fe=>P[I](fe.detail);return b.addEventListener(I,q),()=>b.removeEventListener(I,q)});return()=>E.forEach(I=>I())}),_i=new a.OlP("NavParamsToken"),Yr=v=>[{provide:_i,useValue:v},{provide:ot,useFactory:ds,deps:[_i]}],ds=v=>new ot(v),bs=(v,P)=>((v=v.filter(b=>b.stackId!==P.stackId)).push(P),v),As=(v,P)=>{const b=v.createUrlTree(["."],{relativeTo:P});return v.serializeUrl(b)},qr=(v,P)=>{if(!v)return;const b=Tr(P);for(let E=0;E<b.length;E++){if(E>=v.length)return b[E];if(b[E]!==v[E])return}},Tr=v=>v.split("/").map(P=>P.trim()).filter(P=>""!==P),wr=v=>{v&&(v.ref.destroy(),v.unlistenEvents())};class zi{constructor(P,b,E,I,q,fe){this.containerEl=b,this.router=E,this.navCtrl=I,this.zone=q,this.location=fe,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==P?Tr(P):void 0}createView(P,b){var E;const I=As(this.router,b),q=null===(E=null==P?void 0:P.location)||void 0===E?void 0:E.nativeElement,fe=ri(this.zone,P.instance,q);return{id:this.nextId++,stackId:qr(this.tabsPrefix,I),unlistenEvents:fe,element:q,ref:P,url:I}}getExistingView(P){const b=As(this.router,P),E=this.views.find(I=>I.url===b);return E&&E.ref.changeDetectorRef.reattach(),E}setActive(P){var b,E;const I=this.navCtrl.consumeTransition();let{direction:q,animation:fe,animationBuilder:Le}=I;const It=this.activeView,sn=((v,P)=>!P||v.stackId!==P.stackId)(P,It);sn&&(q="back",fe=void 0);const kn=this.views.slice();let An;const pr=this.router;pr.getCurrentNavigation?An=pr.getCurrentNavigation():(null===(b=pr.navigations)||void 0===b?void 0:b.value)&&(An=pr.navigations.value),(null===(E=null==An?void 0:An.extras)||void 0===E?void 0:E.replaceUrl)&&this.views.length>0&&this.views.splice(-1,1);const Mn=this.views.includes(P),zr=this.insertView(P,q);Mn||P.ref.changeDetectorRef.detectChanges();const Dr=P.animationBuilder;return void 0===Le&&"back"===q&&!sn&&void 0!==Dr&&(Le=Dr),It&&(It.animationBuilder=Le),this.zone.runOutsideAngular(()=>this.wait(()=>(It&&It.ref.changeDetectorRef.detach(),P.ref.changeDetectorRef.reattach(),this.transition(P,It,fe,this.canGoBack(1),!1,Le).then(()=>Qr(P,zr,kn,this.location,this.zone)).then(()=>({enteringView:P,direction:q,animation:fe,tabSwitch:sn})))))}canGoBack(P,b=this.getActiveStackId()){return this.getStack(b).length>P}pop(P,b=this.getActiveStackId()){return this.zone.run(()=>{var E,I;const q=this.getStack(b);if(q.length<=P)return Promise.resolve(!1);const fe=q[q.length-P-1];let Le=fe.url;const It=fe.savedData;if(It){const kn=It.get("primary");(null===(I=null===(E=null==kn?void 0:kn.route)||void 0===E?void 0:E._routerState)||void 0===I?void 0:I.snapshot.url)&&(Le=kn.route._routerState.snapshot.url)}const{animationBuilder:sn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Le,Object.assign(Object.assign({},fe.savedExtras),{animation:sn})).then(()=>!0)})}startBackTransition(){const P=this.activeView;if(P){const b=this.getStack(P.stackId),E=b[b.length-2],I=E.animationBuilder;return this.wait(()=>this.transition(E,P,"back",this.canGoBack(2),!0,I))}return Promise.resolve()}endBackTransition(P){P?(this.skipTransition=!0,this.pop(1)):this.activeView&&Rs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(P){const b=this.getStack(P);return b.length>0?b[b.length-1]:void 0}getRootUrl(P){const b=this.getStack(P);return b.length>0?b[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(wr),this.activeView=void 0,this.views=[]}getStack(P){return this.views.filter(b=>b.stackId===P)}insertView(P,b){return this.activeView=P,this.views=((v,P,b)=>"root"===b?bs(v,P):"forward"===b?((v,P)=>(v.indexOf(P)>=0?v=v.filter(E=>E.stackId!==P.stackId||E.id<=P.id):v.push(P),v))(v,P):((v,P)=>v.indexOf(P)>=0?v.filter(E=>E.stackId!==P.stackId||E.id<=P.id):bs(v,P))(v,P))(this.views,P,b),this.views.slice()}transition(P,b,E,I,q,fe){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(b===P)return Promise.resolve(!1);const Le=P?P.element:void 0,It=b?b.element:void 0,sn=this.containerEl;return Le&&Le!==It&&(Le.classList.add("ion-page"),Le.classList.add("ion-page-invisible"),Le.parentElement!==sn&&sn.appendChild(Le),sn.commit)?sn.commit(Le,It,{deepWait:!0,duration:void 0===E?0:void 0,direction:E,showGoBack:I,progressAnimation:q,animationBuilder:fe}):Promise.resolve(!1)}wait(P){return(0,Z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const b=this.runningTask=P();return b.finally(()=>this.runningTask=void 0),b})}}const Qr=(v,P,b,E,I)=>"function"==typeof requestAnimationFrame?new Promise(q=>{requestAnimationFrame(()=>{Rs(v,P,b,E,I),q()})}):Promise.resolve(),Rs=(v,P,b,E,I)=>{I.run(()=>b.filter(q=>!P.includes(q)).forEach(wr)),P.forEach(q=>{const Le=E.path().split("?")[0].split("#")[0];if(q!==v&&q.url!==Le){const It=q.element;It.setAttribute("aria-hidden","true"),It.classList.add("ion-page-hidden"),q.ref.changeDetectorRef.detach()}})};let vo=(()=>{class v{get(b,E){const I=ws();return I?I.get(b,E):null}getBoolean(b,E){const I=ws();return!!I&&I.getBoolean(b,E)}getNumber(b,E){const I=ws();return I?I.getNumber(b,E):0}}return v.\u0275fac=function(b){return new(b||v)},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const is=new a.OlP("USERCONFIG"),ws=()=>{if("undefined"!=typeof window){const v=window.Ionic;if(null==v?void 0:v.config)return v.config}return null};let Kr=(()=>{class v{constructor(b,E){this.doc=b,this.backButton=new Xe.xQ,this.keyboardDidShow=new Xe.xQ,this.keyboardDidHide=new Xe.xQ,this.pause=new Xe.xQ,this.resume=new Xe.xQ,this.resize=new Xe.xQ,E.run(()=>{var I;let q;this.win=b.defaultView,this.backButton.subscribeWithPriority=function(fe,Le){return this.subscribe(It=>It.register(fe,sn=>E.run(()=>Le(sn))))},ui(this.pause,b,"pause"),ui(this.resume,b,"resume"),ui(this.backButton,b,"ionBackButton"),ui(this.resize,this.win,"resize"),ui(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ui(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(fe=>{q=fe}),(null===(I=this.win)||void 0===I?void 0:I.cordova)?b.addEventListener("deviceready",()=>{q("cordova")},{once:!0}):q("dom")})}is(b){return(0,ve.a)(this.win,b)}platforms(){return(0,ve.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(b){return jr(this.win.location.href,b)}isLandscape(){return!this.isPortrait()}isPortrait(){var b,E;return null===(E=(b=this.win).matchMedia)||void 0===E?void 0:E.call(b,"(orientation: portrait)").matches}testUserAgent(b){const E=this.win.navigator;return!!((null==E?void 0:E.userAgent)&&E.userAgent.indexOf(b)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return v.\u0275fac=function(b){return new(b||v)(a.LFG(vt.K0),a.LFG(a.R0b))},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const jr=(v,P)=>{P=P.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const E=new RegExp("[\\?&]"+P+"=([^&#]*)").exec(v);return E?decodeURIComponent(E[1].replace(/\+/g," ")):null},ui=(v,P,b)=>{P&&P.addEventListener(b,E=>{v.next(null!=E?E.detail:void 0)})};let mi=(()=>{class v{constructor(b,E,I,q){this.location=E,this.serializer=I,this.router=q,this.direction=Pi,this.animated=so,this.guessDirection="forward",this.lastNavId=-1,q&&q.events.subscribe(fe=>{if(fe instanceof _e.OD){const Le=fe.restoredState?fe.restoredState.navigationId:fe.id;this.guessDirection=Le<this.lastNavId?"back":"forward",this.guessAnimation=fe.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?fe.id:Le}}),b.backButton.subscribeWithPriority(0,fe=>{this.pop(),fe()})}navigateForward(b,E={}){return this.setDirection("forward",E.animated,E.animationDirection,E.animation),this.navigate(b,E)}navigateBack(b,E={}){return this.setDirection("back",E.animated,E.animationDirection,E.animation),this.navigate(b,E)}navigateRoot(b,E={}){return this.setDirection("root",E.animated,E.animationDirection,E.animation),this.navigate(b,E)}back(b={animated:!0,animationDirection:"back"}){return this.setDirection("back",b.animated,b.animationDirection,b.animation),this.location.back()}pop(){return(0,Z.mG)(this,void 0,void 0,function*(){let b=this.topOutlet;for(;b&&!(yield b.pop());)b=b.parentOutlet})}setDirection(b,E,I,q){this.direction=b,this.animated=wi(b,E,I),this.animationBuilder=q}setTopOutlet(b){this.topOutlet=b}consumeTransition(){let E,b="root";const I=this.animationBuilder;return"auto"===this.direction?(b=this.guessDirection,E=this.guessAnimation):(E=this.animated,b=this.direction),this.direction=Pi,this.animated=so,this.animationBuilder=void 0,{direction:b,animation:E,animationBuilder:I}}navigate(b,E){if(Array.isArray(b))return this.router.navigate(b,E);{const I=this.serializer.parse(b.toString());return void 0!==E.queryParams&&(I.queryParams=Object.assign({},E.queryParams)),void 0!==E.fragment&&(I.fragment=E.fragment),this.router.navigateByUrl(I,E)}}}return v.\u0275fac=function(b){return new(b||v)(a.LFG(Kr),a.LFG(vt.Ye),a.LFG(_e.Hx),a.LFG(_e.F0,8))},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const wi=(v,P,b)=>{if(!1!==P){if(void 0!==b)return b;if("forward"===v||"back"===v)return v;if("root"===v&&!0===P)return"forward"}},Pi="auto",so=void 0;let ss=(()=>{class v{constructor(b,E,I,q,fe,Le,It,sn,kn,An,pr,Mn,zr){this.parentContexts=b,this.location=E,this.resolver=I,this.config=Le,this.navCtrl=It,this.parentOutlet=zr,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ne.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=kn.nativeElement,this.name=q||_e.eC,this.tabsPrefix="true"===fe?As(An,Mn):void 0,this.stackCtrl=new zi(this.tabsPrefix,this.nativeEl,An,It,pr,sn),b.onChildOutletCreated(this.name,this)}set animation(b){this.nativeEl.animation=b}set animated(b){this.nativeEl.animated=b}set swipeGesture(b){this._swipeGesture=b,this.nativeEl.swipeHandler=b?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:E=>this.stackCtrl.endBackTransition(E)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const b=this.getContext();(null==b?void 0:b.route)&&this.activateWith(b.route,b.resolver||null)}new Promise(b=>(0,pt.c)(this.nativeEl,b)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(b,E){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const E=this.getContext();this.activatedView.savedData=new Map(E.children.contexts);const I=this.activatedView.savedData.get("primary");if(I&&E.route&&(I.route=Object.assign({},E.route)),this.activatedView.savedExtras={},E.route){const q=E.route.snapshot;this.activatedView.savedExtras.queryParams=q.queryParams,this.activatedView.savedExtras.fragment=q.fragment}}const b=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,E){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;let I,q=this.stackCtrl.getExistingView(b);if(q){I=this.activated=q.ref;const fe=q.savedData;fe&&(this.getContext().children.contexts=fe),this.updateActivatedRouteProxy(I.instance,b)}else{const It=(E=E||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),sn=this.parentContexts.getOrCreateContext(this.name).children,kn=new Ne.X(null),An=this.createActivatedRouteProxy(kn,b),pr=new Ms(An,sn,this.location.injector);I=this.activated=this.location.createComponent(It,this.location.length,pr),kn.next(I.instance),q=this.stackCtrl.createView(this.activated,b),this.proxyMap.set(I.instance,An),this.currentActivatedRoute$.next({component:I.instance,activatedRoute:b})}this.activatedView=q,this.stackCtrl.setActive(q).then(fe=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(I.instance),this.stackEvents.emit(fe)})}canGoBack(b=1,E){return this.stackCtrl.canGoBack(b,E)}pop(b=1,E){return this.stackCtrl.pop(b,E)}getLastUrl(b){const E=this.stackCtrl.getLastUrl(b);return E?E.url:void 0}getLastRouteView(b){return this.stackCtrl.getLastUrl(b)}getRootView(b){return this.stackCtrl.getRootUrl(b)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(b,E){const I=new _e.gz;return I._futureSnapshot=E._futureSnapshot,I._routerState=E._routerState,I.snapshot=E.snapshot,I.outlet=E.outlet,I.component=E.component,I._paramMap=this.proxyObservable(b,"paramMap"),I._queryParamMap=this.proxyObservable(b,"queryParamMap"),I.url=this.proxyObservable(b,"url"),I.params=this.proxyObservable(b,"params"),I.queryParams=this.proxyObservable(b,"queryParams"),I.fragment=this.proxyObservable(b,"fragment"),I.data=this.proxyObservable(b,"data"),I}proxyObservable(b,E){return b.pipe((0,ut.h)(I=>!!I),(0,Lt.w)(I=>this.currentActivatedRoute$.pipe((0,ut.h)(q=>null!==q&&q.component===I),(0,Lt.w)(q=>q&&q.activatedRoute[E]),(0,un.x)())))}updateActivatedRouteProxy(b,E){const I=this.proxyMap.get(b);if(!I)throw new Error("Could not find activated route proxy for view");I._futureSnapshot=E._futureSnapshot,I._routerState=E._routerState,I.snapshot=E.snapshot,I.outlet=E.outlet,I.component=E.component,this.currentActivatedRoute$.next({component:b,activatedRoute:E})}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(_e.y6),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.$8M("tabs"),a.Y36(vo),a.Y36(mi),a.Y36(vt.Ye),a.Y36(a.SBq),a.Y36(_e.F0),a.Y36(a.R0b),a.Y36(_e.gz),a.Y36(v,12))},v.\u0275dir=a.lG2({type:v,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),v})();class Ms{constructor(P,b,E){this.route=P,this.childContexts=b,this.parent=E}get(P,b){return P===_e.gz?this.route:P===_e.y6?this.childContexts:this.parent.get(P,b)}}let Ei=(()=>{class v{constructor(b,E,I){this.routerOutlet=b,this.navCtrl=E,this.config=I}onClick(b){var E;const I=this.defaultHref||this.config.get("backButtonDefaultHref");(null===(E=this.routerOutlet)||void 0===E?void 0:E.canGoBack())?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),b.preventDefault()):null!=I&&(this.navCtrl.navigateBack(I,{animation:this.routerAnimation}),b.preventDefault())}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(ss,8),a.Y36(mi),a.Y36(vo))},v.\u0275dir=a.lG2({type:v,selectors:[["ion-back-button"]],hostBindings:function(b,E){1&b&&a.NdJ("click",function(q){return E.onClick(q)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),v})(),Gs=(()=>{class v{constructor(b,E,I,q,fe){this.locationStrategy=b,this.navCtrl=E,this.elementRef=I,this.router=q,this.routerLink=fe,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var b;if(null===(b=this.routerLink)||void 0===b?void 0:b.urlTree){const E=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=E}}onClick(b){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),b.preventDefault()}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(vt.S$),a.Y36(mi),a.Y36(a.SBq),a.Y36(_e.F0),a.Y36(_e.rH,8))},v.\u0275dir=a.lG2({type:v,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,E){1&b&&a.NdJ("click",function(q){return E.onClick(q)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),v})(),ti=(()=>{class v{constructor(b,E,I,q,fe){this.locationStrategy=b,this.navCtrl=E,this.elementRef=I,this.router=q,this.routerLink=fe,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var b;if(null===(b=this.routerLink)||void 0===b?void 0:b.urlTree){const E=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=E}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return v.\u0275fac=function(b){return new(b||v)(a.Y36(vt.S$),a.Y36(mi),a.Y36(a.SBq),a.Y36(_e.F0),a.Y36(_e.rH,8))},v.\u0275dir=a.lG2({type:v,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(b,E){1&b&&a.NdJ("click",function(){return E.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[a.TTD]}),v})();class Zt{constructor(P){this.ctrl=P}create(P){return this.ctrl.create(P||{})}dismiss(P,b,E){return this.ctrl.dismiss(P,b,E)}getTop(){return this.ctrl.getTop()}}let Hr=(()=>{class v extends Zt{constructor(){super(mt.a)}}return v.\u0275fac=function(b){return new(b||v)},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),Nr=(()=>{class v extends Zt{constructor(){super(mt.l)}}return v.\u0275fac=function(b){return new(b||v)},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),ni=(()=>{class v extends Zt{constructor(b,E,I){super(mt.m),this.angularDelegate=b,this.resolver=E,this.injector=I}create(b){return super.create(Object.assign(Object.assign({},b),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(b){return new(b||v)(a.LFG(Tt),a.LFG(a._Vd),a.LFG(a.zs3))},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac}),v})(),bi=(()=>{class v extends Zt{constructor(b,E,I){super(mt.c),this.angularDelegate=b,this.resolver=E,this.injector=I}create(b){return super.create(Object.assign(Object.assign({},b),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(b){return new(b||v)(a.LFG(Tt),a.LFG(a._Vd),a.LFG(a.zs3))},v.\u0275prov=a.Yz7({token:v,factory:v.\u0275fac}),v})();class B{shouldDetach(P){return!1}shouldAttach(P){return!1}store(P,b){}retrieve(P){return null}shouldReuseRoute(P,b){if(P.routeConfig!==b.routeConfig)return!1;const E=P.params,I=b.params,q=Object.keys(E),fe=Object.keys(I);if(q.length!==fe.length)return!1;for(const Le of q)if(I[Le]!==E[Le])return!1;return!0}}const N=(v,P,b)=>()=>{if(P.defaultView&&"undefined"!=typeof window){(v=>{const P=window,b=P.Ionic;b&&b.config&&"Object"!==b.config.constructor.name||(P.Ionic=P.Ionic||{},P.Ionic.config=Object.assign(Object.assign({},P.Ionic.config),v))})(Object.assign(Object.assign({},v),{_zoneGate:q=>b.run(q)}));const I="__zone_symbol__addEventListener"in P.body?"__zone_symbol__addEventListener":"addEventListener";return function At(){var v=[];if("undefined"!=typeof window){var P=window;(!P.customElements||P.Element&&(!P.Element.prototype.closest||!P.Element.prototype.matches||!P.Element.prototype.remove||!P.Element.prototype.getRootNode))&&v.push(L.e(6748).then(L.t.bind(L,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||P.NodeList&&!P.NodeList.prototype.forEach||!P.fetch||!function(){try{var E=new URL("b","http://a");return E.pathname="c%20d","http://a/c%20d"===E.href&&E.searchParams}catch(I){return!1}}()||"undefined"==typeof WeakMap)&&v.push(L.e(2214).then(L.t.bind(L,4144,23)))}return Promise.all(v)}().then(()=>((v,P)=>"undefined"==typeof window?Promise.resolve():(0,Ye.p)().then(()=>(ze(),(0,Ye.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),P))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:jn,jmp:q=>b.runOutsideAngular(q),ael(q,fe,Le,It){q[I](fe,Le,It)},rel(q,fe,Le,It){q.removeEventListener(fe,Le,It)}}))}};let jt=(()=>{class v{static forRoot(b){return{ngModule:v,providers:[{provide:is,useValue:b},{provide:a.ip1,useFactory:N,multi:!0,deps:[is,vt.K0,a.R0b]}]}}}return v.\u0275fac=function(b){return new(b||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({providers:[Tt,ni,bi],imports:[[vt.ez]]}),v})()},8015:(On,Ct,L)=>{"use strict";L.d(Ct,{c:()=>Ne});var a=L(1643);let J;const Ve=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Me=_e=>{if(void 0===J){const $e=void 0!==_e.style.webkitAnimationName;J=void 0===_e.style.animationName&&$e?"-webkit-":""}return J},ae=(_e,ke,$e)=>{const Dt=ke.startsWith("animation")?Me(_e):"";_e.style.setProperty(Dt+ke,$e)},we=(_e,ke)=>{const $e=ke.startsWith("animation")?Me(_e):"";_e.style.removeProperty($e+ke)},oe=[],Xe=(_e=[],ke)=>{if(void 0!==ke){const $e=Array.isArray(ke)?ke:[ke];return[..._e,...$e]}return _e},Ne=_e=>{let ke,$e,Dt,ve,pt,He,st,vt,At,ze,at,rn,St,dt=[],mt=[],Ft=[],Ye=!1,Fe={},me=[],Se=[],Ke={},ut=0,Lt=!1,un=!1,Et=!0,U=!1,Qe=!0,hn=!1;const mn=_e,jn=[],Fn=[],Dn=[],er=[],Br=[],rr=[],lr=[],pn=[],Ar=[],vr=[],Ir="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,ur="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Ir,gt=()=>vr,nn=(be,Oe)=>(((null==Oe?void 0:Oe.oneTimeCallback)?Fn:jn).push({c:be,o:Oe}),St),Xn=()=>{if(ur)vr.forEach(be=>{be.cancel()}),vr.length=0;else{const be=Dn.slice();(0,a.r)(()=>{be.forEach(Oe=>{we(Oe,"animation-name"),we(Oe,"animation-duration"),we(Oe,"animation-timing-function"),we(Oe,"animation-iteration-count"),we(Oe,"animation-delay"),we(Oe,"animation-play-state"),we(Oe,"animation-fill-mode"),we(Oe,"animation-direction")})})}},Zn=()=>{Br.forEach(be=>{(null==be?void 0:be.parentNode)&&be.parentNode.removeChild(be)}),Br.length=0},Vn=()=>void 0!==pt?pt:st?st.getFill():"both",We=()=>void 0!==At?At:void 0!==He?He:st?st.getDirection():"normal",De=()=>Lt?"linear":void 0!==Dt?Dt:st?st.getEasing():"linear",Ze=()=>un?0:void 0!==ze?ze:void 0!==$e?$e:st?st.getDuration():0,Rt=()=>void 0!==ve?ve:st?st.getIterations():1,_t=()=>void 0!==at?at:void 0!==ke?ke:st?st.getDelay():0,an=()=>{0!==ut&&(ut--,0===ut&&((()=>{Ni(),pn.forEach(Jt=>Jt()),Ar.forEach(Jt=>Jt());const be=Et?1:0,Oe=me,yt=Se,Gt=Ke;Dn.forEach(Jt=>{const kt=Jt.classList;Oe.forEach(Nn=>kt.add(Nn)),yt.forEach(Nn=>kt.remove(Nn));for(const Nn in Gt)Gt.hasOwnProperty(Nn)&&ae(Jt,Nn,Gt[Nn])}),jn.forEach(Jt=>Jt.c(be,St)),Fn.forEach(Jt=>Jt.c(be,St)),Fn.length=0,Qe=!0,Et&&(U=!0),Et=!0})(),st&&st.animationFinish()))},En=(be=!0)=>{Zn();const Oe=(_e=>(_e.forEach(ke=>{for(const $e in ke)if(ke.hasOwnProperty($e)){const Dt=ke[$e];if("easing"===$e)ke["animation-timing-function"]=Dt,delete ke[$e];else{const ve=Ve($e);ve!==$e&&(ke[ve]=Dt,delete ke[$e])}}}),_e))(dt);Dn.forEach(yt=>{if(Oe.length>0){const Gt=((_e=[])=>_e.map(ke=>{const $e=ke.offset,Dt=[];for(const ve in ke)ke.hasOwnProperty(ve)&&"offset"!==ve&&Dt.push(`${ve}: ${ke[ve]};`);return`${100*$e}% { ${Dt.join(" ")} }`}).join(" "))(Oe);rn=void 0!==_e?_e:(_e=>{let ke=oe.indexOf(_e);return ke<0&&(ke=oe.push(_e)-1),`ion-animation-${ke}`})(Gt);const Jt=((_e,ke,$e)=>{const Dt=(_e=>{const ke=_e.getRootNode();return ke.head||ke})($e),ve=Me($e),pt=Dt.querySelector("#"+_e);if(pt)return pt;const He=($e.ownerDocument||document).createElement("style");return He.id=_e,He.textContent=`@${ve}keyframes ${_e} { ${ke} } @${ve}keyframes ${_e}-alt { ${ke} }`,Dt.appendChild(He),He})(rn,Gt,yt);Br.push(Jt),ae(yt,"animation-duration",`${Ze()}ms`),ae(yt,"animation-timing-function",De()),ae(yt,"animation-delay",`${_t()}ms`),ae(yt,"animation-fill-mode",Vn()),ae(yt,"animation-direction",We());const kt=Rt()===1/0?"infinite":Rt().toString();ae(yt,"animation-iteration-count",kt),ae(yt,"animation-play-state","paused"),be&&ae(yt,"animation-name",`${Jt.id}-alt`),(0,a.r)(()=>{ae(yt,"animation-name",Jt.id||null)})}})},cn=(be=!0)=>{(()=>{rr.forEach(Gt=>Gt()),lr.forEach(Gt=>Gt());const be=mt,Oe=Ft,yt=Fe;Dn.forEach(Gt=>{const Jt=Gt.classList;be.forEach(kt=>Jt.add(kt)),Oe.forEach(kt=>Jt.remove(kt));for(const kt in yt)yt.hasOwnProperty(kt)&&ae(Gt,kt,yt[kt])})})(),dt.length>0&&(ur?(Dn.forEach(be=>{const Oe=be.animate(dt,{id:mn,delay:_t(),duration:Ze(),easing:De(),iterations:Rt(),fill:Vn(),direction:We()});Oe.pause(),vr.push(Oe)}),vr.length>0&&(vr[0].onfinish=()=>{an()})):En(be)),Ye=!0},Pn=be=>{if(be=Math.min(Math.max(be,0),.9999),ur)vr.forEach(Oe=>{Oe.currentTime=Oe.effect.getComputedTiming().delay+Ze()*be,Oe.pause()});else{const Oe=`-${Ze()*be}ms`;Dn.forEach(yt=>{dt.length>0&&(ae(yt,"animation-delay",Oe),ae(yt,"animation-play-state","paused"))})}},hr=be=>{vr.forEach(Oe=>{Oe.effect.updateTiming({delay:_t(),duration:Ze(),easing:De(),iterations:Rt(),fill:Vn(),direction:We()})}),void 0!==be&&Pn(be)},Xr=(be=!0,Oe)=>{(0,a.r)(()=>{Dn.forEach(yt=>{ae(yt,"animation-name",rn||null),ae(yt,"animation-duration",`${Ze()}ms`),ae(yt,"animation-timing-function",De()),ae(yt,"animation-delay",void 0!==Oe?`-${Oe*Ze()}ms`:`${_t()}ms`),ae(yt,"animation-fill-mode",Vn()||null),ae(yt,"animation-direction",We()||null);const Gt=Rt()===1/0?"infinite":Rt().toString();ae(yt,"animation-iteration-count",Gt),be&&ae(yt,"animation-name",`${rn}-alt`),(0,a.r)(()=>{ae(yt,"animation-name",rn||null)})})})},Mr=(be=!1,Oe=!0,yt)=>(be&&er.forEach(Gt=>{Gt.update(be,Oe,yt)}),ur?hr(yt):Xr(Oe,yt),St),pi=()=>{Ye&&(ur?vr.forEach(be=>{be.pause()}):Dn.forEach(be=>{ae(be,"animation-play-state","paused")}),hn=!0)},Hi=()=>{vt=void 0,an()},Ni=()=>{vt&&clearTimeout(vt)},Ai=be=>new Promise(Oe=>{(null==be?void 0:be.sync)&&(un=!0,nn(()=>un=!1,{oneTimeCallback:!0})),Ye||cn(),U&&(ur?(Pn(0),hr()):Xr(),U=!1),Qe&&(ut=er.length+1,Qe=!1),nn(()=>Oe(),{oneTimeCallback:!0}),er.forEach(yt=>{yt.play()}),ur?(vr.forEach(be=>{be.play()}),(0===dt.length||0===Dn.length)&&an()):(()=>{if(Ni(),(0,a.r)(()=>{Dn.forEach(be=>{dt.length>0&&ae(be,"animation-play-state","running")})}),0===dt.length||0===Dn.length)an();else{const be=_t()||0,Oe=Ze()||0,yt=Rt()||1;isFinite(yt)&&(vt=setTimeout(Hi,be+Oe*yt+100)),((_e,ke)=>{let $e;const Dt={passive:!0},pt=He=>{_e===He.target&&($e&&$e(),Ni(),(0,a.r)(()=>{Dn.forEach(be=>{we(be,"animation-duration"),we(be,"animation-delay"),we(be,"animation-play-state")}),(0,a.r)(an)}))};_e&&(_e.addEventListener("webkitAnimationEnd",pt,Dt),_e.addEventListener("animationend",pt,Dt),$e=()=>{_e.removeEventListener("webkitAnimationEnd",pt,Dt),_e.removeEventListener("animationend",pt,Dt)})})(Dn[0])}})(),hn=!1}),ye=(be,Oe)=>{const yt=dt[0];return void 0===yt||void 0!==yt.offset&&0!==yt.offset?dt=[{offset:0,[be]:Oe},...dt]:yt[be]=Oe,St};return St={parentAnimation:st,elements:Dn,childAnimations:er,id:mn,animationFinish:an,from:ye,to:(be,Oe)=>{const yt=dt[dt.length-1];return void 0===yt||void 0!==yt.offset&&1!==yt.offset?dt=[...dt,{offset:1,[be]:Oe}]:yt[be]=Oe,St},fromTo:(be,Oe,yt)=>ye(be,Oe).to(be,yt),parent:be=>(st=be,St),play:Ai,pause:()=>(er.forEach(be=>{be.pause()}),pi(),St),stop:()=>{er.forEach(be=>{be.stop()}),Ye&&(Xn(),Ye=!1),Lt=!1,un=!1,Qe=!0,At=void 0,ze=void 0,at=void 0,ut=0,U=!1,Et=!0,hn=!1},destroy:be=>(er.forEach(Oe=>{Oe.destroy(be)}),(be=>{Xn(),be&&Zn()})(be),Dn.length=0,er.length=0,dt.length=0,jn.length=0,Fn.length=0,Ye=!1,Qe=!0,St),keyframes:be=>{const Oe=dt!==be;return dt=be,Oe&&(be=>{ur?gt().forEach(Oe=>{if(Oe.effect.setKeyframes)Oe.effect.setKeyframes(be);else{const yt=new KeyframeEffect(Oe.effect.target,be,Oe.effect.getTiming());Oe.effect=yt}}):En()})(dt),St},addAnimation:be=>{if(null!=be)if(Array.isArray(be))for(const Oe of be)Oe.parent(St),er.push(Oe);else be.parent(St),er.push(be);return St},addElement:be=>{if(null!=be)if(1===be.nodeType)Dn.push(be);else if(be.length>=0)for(let Oe=0;Oe<be.length;Oe++)Dn.push(be[Oe]);else console.error("Invalid addElement value");return St},update:Mr,fill:be=>(pt=be,Mr(!0),St),direction:be=>(He=be,Mr(!0),St),iterations:be=>(ve=be,Mr(!0),St),duration:be=>(!ur&&0===be&&(be=1),$e=be,Mr(!0),St),easing:be=>(Dt=be,Mr(!0),St),delay:be=>(ke=be,Mr(!0),St),getWebAnimations:gt,getKeyframes:()=>dt,getFill:Vn,getDirection:We,getDelay:_t,getIterations:Rt,getEasing:De,getDuration:Ze,afterAddRead:be=>(pn.push(be),St),afterAddWrite:be=>(Ar.push(be),St),afterClearStyles:(be=[])=>{for(const Oe of be)Ke[Oe]="";return St},afterStyles:(be={})=>(Ke=be,St),afterRemoveClass:be=>(Se=Xe(Se,be),St),afterAddClass:be=>(me=Xe(me,be),St),beforeAddRead:be=>(rr.push(be),St),beforeAddWrite:be=>(lr.push(be),St),beforeClearStyles:(be=[])=>{for(const Oe of be)Fe[Oe]="";return St},beforeStyles:(be={})=>(Fe=be,St),beforeRemoveClass:be=>(Ft=Xe(Ft,be),St),beforeAddClass:be=>(mt=Xe(mt,be),St),onFinish:nn,isRunning:()=>0!==ut&&!hn,progressStart:(be=!1,Oe)=>(er.forEach(yt=>{yt.progressStart(be,Oe)}),pi(),Lt=be,Ye||cn(),Mr(!1,!0,Oe),St),progressStep:be=>(er.forEach(Oe=>{Oe.progressStep(be)}),Pn(be),St),progressEnd:(be,Oe,yt)=>(Lt=!1,er.forEach(Gt=>{Gt.progressEnd(be,Oe,yt)}),void 0!==yt&&(ze=yt),U=!1,Et=!0,0===be?(At="reverse"===We()?"normal":"reverse","reverse"===At&&(Et=!1),ur?(Mr(),Pn(1-Oe)):(at=(1-Oe)*Ze()*-1,Mr(!1,!1))):1===be&&(ur?(Mr(),Pn(Oe)):(at=Oe*Ze()*-1,Mr(!1,!1))),void 0!==be&&(nn(()=>{ze=void 0,At=void 0,at=void 0},{oneTimeCallback:!0}),st||Ai()),St)}}},3509:(On,Ct,L)=>{"use strict";L.d(Ct,{G:()=>Me});class J{constructor(we,Ce,Ee,oe,pe){this.id=Ce,this.name=Ee,this.disableScroll=pe,this.priority=1e6*oe+Ce,this.ctrl=we}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const we=this.ctrl.capture(this.name,this.id,this.priority);return we&&this.disableScroll&&this.ctrl.disableScroll(this.id),we}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(we,Ce,Ee,oe){this.id=Ce,this.disable=Ee,this.disableScroll=oe,this.ctrl=we}block(){if(this.ctrl){if(this.disable)for(const we of this.disable)this.ctrl.disableGesture(we,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const we of this.disable)this.ctrl.enableGesture(we,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Ve="backdrop-no-scroll",Me=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(we){return new J(this,this.newID(),we.name,we.priority||0,!!we.disableScroll)}createBlocker(we={}){return new Z(this,this.newID(),we.disable,!!we.disableScroll)}start(we,Ce,Ee){return this.canStart(we)?(this.requestedStart.set(Ce,Ee),!0):(this.requestedStart.delete(Ce),!1)}capture(we,Ce,Ee){if(!this.start(we,Ce,Ee))return!1;const oe=this.requestedStart;let pe=-1e4;if(oe.forEach(ee=>{pe=Math.max(pe,ee)}),pe===Ee){this.capturedId=Ce,oe.clear();const ee=new CustomEvent("ionGestureCaptured",{detail:{gestureName:we}});return document.dispatchEvent(ee),!0}return oe.delete(Ce),!1}release(we){this.requestedStart.delete(we),this.capturedId===we&&(this.capturedId=void 0)}disableGesture(we,Ce){let Ee=this.disabledGestures.get(we);void 0===Ee&&(Ee=new Set,this.disabledGestures.set(we,Ee)),Ee.add(Ce)}enableGesture(we,Ce){const Ee=this.disabledGestures.get(we);void 0!==Ee&&Ee.delete(Ce)}disableScroll(we){this.disabledScroll.add(we),1===this.disabledScroll.size&&document.body.classList.add(Ve)}enableScroll(we){this.disabledScroll.delete(we),0===this.disabledScroll.size&&document.body.classList.remove(Ve)}canStart(we){return!(void 0!==this.capturedId||this.isDisabled(we))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(we){const Ce=this.disabledGestures.get(we);return!!(Ce&&Ce.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(On,Ct,L)=>{"use strict";L.r(Ct),L.d(Ct,{MENU_BACK_BUTTON_PRIORITY:()=>Me,OVERLAY_BACK_BUTTON_PRIORITY:()=>Ve,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>Z});var a=L(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const ae=document;let we=!1;ae.addEventListener("backbutton",()=>{if(we)return;let Ce=0,Ee=[];const oe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ce,Xe){Ee.push({priority:ce,handler:Xe,id:Ce++})}}});ae.dispatchEvent(oe);const pe=function(){var ce=(0,a.Z)(function*(Xe){try{if(null==Xe?void 0:Xe.handler){const Ne=Xe.handler(ee);null!=Ne&&(yield Ne)}}catch(Ne){console.error(Ne)}});return function(Ne){return ce.apply(this,arguments)}}(),ee=()=>{if(Ee.length>0){let ce={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ee.forEach(Xe=>{Xe.priority>=ce.priority&&(ce=Xe)}),we=!0,Ee=Ee.filter(Xe=>Xe.id!==ce.id),pe(ce).then(()=>we=!1)}};ee()})},Ve=100,Me=99},1643:(On,Ct,L)=>{"use strict";L.d(Ct,{a:()=>Me,b:()=>ae,c:()=>Z,d:()=>ee,e:()=>ce,f:()=>pe,g:()=>we,h:()=>Dt,i:()=>Ve,j:()=>oe,k:()=>Xe,l:()=>Ee,m:()=>Ne,n:()=>$e,o:()=>ve,p:()=>ke,q:()=>_e,r:()=>Ce,s:()=>pt,t:()=>a});const a=(He,dt=0)=>new Promise(mt=>{J(He,dt,mt)}),J=(He,dt=0,mt)=>{let Ft,Ye;const st={passive:!0},me=()=>{Ft&&Ft()},Se=Ke=>{(void 0===Ke||He===Ke.target)&&(me(),mt(Ke))};return He&&(He.addEventListener("webkitTransitionEnd",Se,st),He.addEventListener("transitionend",Se,st),Ye=setTimeout(Se,dt+500),Ft=()=>{Ye&&(clearTimeout(Ye),Ye=void 0),He.removeEventListener("webkitTransitionEnd",Se,st),He.removeEventListener("transitionend",Se,st)}),me},Z=(He,dt)=>{He.componentOnReady?He.componentOnReady().then(mt=>dt(mt)):Ce(()=>dt(He))},Ve=(He,dt=[])=>{const mt={};return dt.forEach(Ft=>{He.hasAttribute(Ft)&&(null!==He.getAttribute(Ft)&&(mt[Ft]=He.getAttribute(Ft)),He.removeAttribute(Ft))}),mt},Me=(He,dt,mt,Ft)=>{var Ye;if("undefined"!=typeof window){const st=window,Fe=null===(Ye=null==st?void 0:st.Ionic)||void 0===Ye?void 0:Ye.config;if(Fe){const me=Fe.get("_ael");if(me)return me(He,dt,mt,Ft);if(Fe._ael)return Fe._ael(He,dt,mt,Ft)}}return He.addEventListener(dt,mt,Ft)},ae=(He,dt,mt,Ft)=>{var Ye;if("undefined"!=typeof window){const st=window,Fe=null===(Ye=null==st?void 0:st.Ionic)||void 0===Ye?void 0:Ye.config;if(Fe){const me=Fe.get("_rel");if(me)return me(He,dt,mt,Ft);if(Fe._rel)return Fe._rel(He,dt,mt,Ft)}}return He.removeEventListener(dt,mt,Ft)},we=(He,dt=He)=>He.shadowRoot||dt,Ce=He=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(He):"function"==typeof requestAnimationFrame?requestAnimationFrame(He):setTimeout(He),Ee=He=>!!He.shadowRoot&&!!He.attachShadow,oe=He=>{const dt=He.closest("ion-item");return dt?dt.querySelector("ion-label"):null},pe=He=>{if(He.focus(),He.classList.contains("ion-focusable")){const dt=He.closest("ion-app");dt&&dt.setFocus([He])}},ee=(He,dt)=>{let mt;const Ft=He.getAttribute("aria-labelledby"),Ye=He.id;let st=null!==Ft&&""!==Ft.trim()?Ft:dt+"-lbl",Fe=null!==Ft&&""!==Ft.trim()?document.getElementById(Ft):oe(He);return Fe?(null===Ft&&(Fe.id=st),mt=Fe.textContent,Fe.setAttribute("aria-hidden","true")):""!==Ye.trim()&&(Fe=document.querySelector(`label[for="${Ye}"]`),Fe&&(""!==Fe.id?st=Fe.id:Fe.id=st=`${Ye}-lbl`,mt=Fe.textContent)),{label:Fe,labelId:st,labelText:mt}},ce=(He,dt,mt,Ft,Ye)=>{if(He||Ee(dt)){let st=dt.querySelector("input.aux-input");st||(st=dt.ownerDocument.createElement("input"),st.type="hidden",st.classList.add("aux-input"),dt.appendChild(st)),st.disabled=Ye,st.name=mt,st.value=Ft||""}},Xe=(He,dt,mt)=>Math.max(He,Math.min(dt,mt)),Ne=(He,dt)=>{if(!He){const mt="ASSERT: "+dt;throw console.error(mt),new Error(mt)}},_e=He=>He.timeStamp||Date.now(),ke=He=>{if(He){const dt=He.changedTouches;if(dt&&dt.length>0){const mt=dt[0];return{x:mt.clientX,y:mt.clientY}}if(void 0!==He.pageX)return{x:He.pageX,y:He.pageY}}return{x:0,y:0}},$e=He=>{const dt="rtl"===document.dir;switch(He){case"start":return dt;case"end":return!dt;default:throw new Error(`"${He}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Dt=(He,dt)=>{const mt=He._original||He;return{_original:He,emit:ve(mt.emit.bind(mt),dt)}},ve=(He,dt=0)=>{let mt;return(...Ft)=>{clearTimeout(mt),mt=setTimeout(He,dt,...Ft)}},pt=(He,dt)=>{if(null!=He||(He={}),null!=dt||(dt={}),He===dt)return!0;const mt=Object.keys(He);if(mt.length!==Object.keys(dt).length)return!1;for(const Ft of mt)if(!(Ft in dt)||He[Ft]!==dt[Ft])return!1;return!0}},3139:(On,Ct,L)=>{"use strict";L.r(Ct),L.d(Ct,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>Ee});var a=L(3509);const J=(ce,Xe,Ne,_e)=>{const ke=Z(ce)?{capture:!!_e.capture,passive:!!_e.passive}:!!_e.capture;let $e,Dt;return ce.__zone_symbol__addEventListener?($e="__zone_symbol__addEventListener",Dt="__zone_symbol__removeEventListener"):($e="addEventListener",Dt="removeEventListener"),ce[$e](Xe,Ne,ke),()=>{ce[Dt](Xe,Ne,ke)}},Z=ce=>{if(void 0===Ve)try{const Xe=Object.defineProperty({},"passive",{get:()=>{Ve=!0}});ce.addEventListener("optsTest",()=>{},Xe)}catch(Xe){Ve=!1}return!!Ve};let Ve;const we=ce=>ce instanceof Document?ce:ce.ownerDocument,Ee=ce=>{let Xe=!1,Ne=!1,_e=!0,ke=!1;const $e=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ce),Dt=$e.canStart,ve=$e.onWillStart,pt=$e.onStart,He=$e.onEnd,dt=$e.notCaptured,mt=$e.onMove,Ft=$e.threshold,Ye=$e.passive,st=$e.blurOnStart,Fe={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},me=((ce,Xe,Ne)=>{const _e=Ne*(Math.PI/180),ke="x"===ce,$e=Math.cos(_e),Dt=Xe*Xe;let ve=0,pt=0,He=!1,dt=0;return{start(mt,Ft){ve=mt,pt=Ft,dt=0,He=!0},detect(mt,Ft){if(!He)return!1;const Ye=mt-ve,st=Ft-pt,Fe=Ye*Ye+st*st;if(Fe<Dt)return!1;const me=Math.sqrt(Fe),Se=(ke?Ye:st)/me;return dt=Se>$e?1:Se<-$e?-1:0,He=!1,!0},isGesture:()=>0!==dt,getDirection:()=>dt}})($e.direction,$e.threshold,$e.maxAngle),Se=a.G.createGesture({name:ce.gestureName,priority:ce.gesturePriority,disableScroll:ce.disableScroll}),Lt=()=>{!Xe||(ke=!1,mt&&mt(Fe))},un=()=>!(Se&&!Se.capture()||(Xe=!0,_e=!1,Fe.startX=Fe.currentX,Fe.startY=Fe.currentY,Fe.startTime=Fe.currentTime,ve?ve(Fe).then(At):At(),0)),At=()=>{st&&(()=>{if("undefined"!=typeof document){const Qe=document.activeElement;(null==Qe?void 0:Qe.blur)&&Qe.blur()}})(),pt&&pt(Fe),_e=!0},ze=()=>{Xe=!1,Ne=!1,ke=!1,_e=!0,Se.release()},at=Qe=>{const rn=Xe,St=_e;if(ze(),St){if(oe(Fe,Qe),rn)return void(He&&He(Fe));dt&&dt(Fe)}},Et=((ce,Xe,Ne,_e,ke)=>{let $e,Dt,ve,pt,He,dt,mt,Ft=0;const Ye=vt=>{Ft=Date.now()+2e3,Xe(vt)&&(!Dt&&Ne&&(Dt=J(ce,"touchmove",Ne,ke)),ve||(ve=J(vt.target,"touchend",Fe,ke)),pt||(pt=J(vt.target,"touchcancel",Fe,ke)))},st=vt=>{Ft>Date.now()||!Xe(vt)||(!dt&&Ne&&(dt=J(we(ce),"mousemove",Ne,ke)),mt||(mt=J(we(ce),"mouseup",me,ke)))},Fe=vt=>{Se(),_e&&_e(vt)},me=vt=>{Ke(),_e&&_e(vt)},Se=()=>{Dt&&Dt(),ve&&ve(),pt&&pt(),Dt=ve=pt=void 0},Ke=()=>{dt&&dt(),mt&&mt(),dt=mt=void 0},ut=()=>{Se(),Ke()},Lt=(vt=!0)=>{vt?($e||($e=J(ce,"touchstart",Ye,ke)),He||(He=J(ce,"mousedown",st,ke))):($e&&$e(),He&&He(),$e=He=void 0,ut())};return{enable:Lt,stop:ut,destroy:()=>{Lt(!1),_e=Ne=Xe=void 0}}})($e.el,Qe=>{const rn=ee(Qe);return!(Ne||!_e||(pe(Qe,Fe),Fe.startX=Fe.currentX,Fe.startY=Fe.currentY,Fe.startTime=Fe.currentTime=rn,Fe.velocityX=Fe.velocityY=Fe.deltaX=Fe.deltaY=0,Fe.event=Qe,Dt&&!1===Dt(Fe))||(Se.release(),!Se.start()))&&(Ne=!0,0===Ft?un():(me.start(Fe.startX,Fe.startY),!0))},Qe=>{Xe?!ke&&_e&&(ke=!0,oe(Fe,Qe),requestAnimationFrame(Lt)):(oe(Fe,Qe),me.detect(Fe.currentX,Fe.currentY)&&(!me.isGesture()||!un())&&U())},at,{capture:!1,passive:Ye}),U=()=>{ze(),Et.stop(),dt&&dt(Fe)};return{enable(Qe=!0){Qe||(Xe&&at(void 0),ze()),Et.enable(Qe)},destroy(){Se.destroy(),Et.destroy()}}},oe=(ce,Xe)=>{if(!Xe)return;const Ne=ce.currentX,_e=ce.currentY,ke=ce.currentTime;pe(Xe,ce);const $e=ce.currentX,Dt=ce.currentY,pt=(ce.currentTime=ee(Xe))-ke;if(pt>0&&pt<100){const dt=(Dt-_e)/pt;ce.velocityX=($e-Ne)/pt*.7+.3*ce.velocityX,ce.velocityY=.7*dt+.3*ce.velocityY}ce.deltaX=$e-ce.startX,ce.deltaY=Dt-ce.startY,ce.event=Xe},pe=(ce,Xe)=>{let Ne=0,_e=0;if(ce){const ke=ce.changedTouches;if(ke&&ke.length>0){const $e=ke[0];Ne=$e.clientX,_e=$e.clientY}else void 0!==ce.pageX&&(Ne=ce.pageX,_e=ce.pageY)}Xe.currentX=Ne,Xe.currentY=_e},ee=ce=>ce.timeStamp||Date.now()},6708:(On,Ct,L)=>{"use strict";L.d(Ct,{m:()=>pe});var a=L(5861),J=L(7593),Z=L(1643),Ve=L(6254),Me=L(8015);const ae=ee=>(0,Me.c)().duration(ee?400:300),we=ee=>{let ce,Xe;const Ne=ee.width+8,_e=(0,Me.c)(),ke=(0,Me.c)();ee.isEndSide?(ce=Ne+"px",Xe="0px"):(ce=-Ne+"px",Xe="0px"),_e.addElement(ee.menuInnerEl).fromTo("transform",`translateX(${ce})`,`translateX(${Xe})`);const Dt="ios"===(0,Ve.b)(ee),ve=Dt?.2:.25;return ke.addElement(ee.backdropEl).fromTo("opacity",.01,ve),ae(Dt).addAnimation([_e,ke])},Ce=ee=>{let ce,Xe;const Ne=(0,Ve.b)(ee),_e=ee.width;ee.isEndSide?(ce=-_e+"px",Xe=_e+"px"):(ce=_e+"px",Xe=-_e+"px");const ke=(0,Me.c)().addElement(ee.menuInnerEl).fromTo("transform",`translateX(${Xe})`,"translateX(0px)"),$e=(0,Me.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${ce})`),Dt=(0,Me.c)().addElement(ee.backdropEl).fromTo("opacity",.01,.32);return ae("ios"===Ne).addAnimation([ke,$e,Dt])},Ee=ee=>{const ce=(0,Ve.b)(ee),Xe=ee.width*(ee.isEndSide?-1:1)+"px",Ne=(0,Me.c)().addElement(ee.contentEl).fromTo("transform","translateX(0px)",`translateX(${Xe})`);return ae("ios"===ce).addAnimation(Ne)},pe=(()=>{const ee=new Map,ce=[],Xe=function(){var At=(0,a.Z)(function*(ze){const at=yield pt(ze);return!!at&&at.open()});return function(at){return At.apply(this,arguments)}}(),Ne=function(){var At=(0,a.Z)(function*(ze){const at=yield void 0!==ze?pt(ze):He();return void 0!==at&&at.close()});return function(at){return At.apply(this,arguments)}}(),_e=function(){var At=(0,a.Z)(function*(ze){const at=yield pt(ze);return!!at&&at.toggle()});return function(at){return At.apply(this,arguments)}}(),ke=function(){var At=(0,a.Z)(function*(ze,at){const Et=yield pt(at);return Et&&(Et.disabled=!ze),Et});return function(at,Et){return At.apply(this,arguments)}}(),$e=function(){var At=(0,a.Z)(function*(ze,at){const Et=yield pt(at);return Et&&(Et.swipeGesture=ze),Et});return function(at,Et){return At.apply(this,arguments)}}(),Dt=function(){var At=(0,a.Z)(function*(ze){if(null!=ze){const at=yield pt(ze);return void 0!==at&&at.isOpen()}return void 0!==(yield He())});return function(at){return At.apply(this,arguments)}}(),ve=function(){var At=(0,a.Z)(function*(ze){const at=yield pt(ze);return!!at&&!at.disabled});return function(at){return At.apply(this,arguments)}}(),pt=function(){var At=(0,a.Z)(function*(ze){return yield vt(),"start"===ze||"end"===ze?un(U=>U.side===ze&&!U.disabled)||un(U=>U.side===ze):null!=ze?un(Et=>Et.menuId===ze):un(Et=>!Et.disabled)||(ce.length>0?ce[0].el:void 0)});return function(at){return At.apply(this,arguments)}}(),He=function(){var At=(0,a.Z)(function*(){return yield vt(),Ke()});return function(){return At.apply(this,arguments)}}(),dt=function(){var At=(0,a.Z)(function*(){return yield vt(),ut()});return function(){return At.apply(this,arguments)}}(),mt=function(){var At=(0,a.Z)(function*(){return yield vt(),Lt()});return function(){return At.apply(this,arguments)}}(),Ft=(At,ze)=>{ee.set(At,ze)},Fe=At=>{const ze=At.side;ce.filter(at=>at.side===ze&&at!==At).forEach(at=>at.disabled=!0)},me=function(){var At=(0,a.Z)(function*(ze,at,Et){if(Lt())return!1;if(at){const U=yield He();U&&ze.el!==U&&(yield U.setOpen(!1,!1))}return ze._setOpen(at,Et)});return function(at,Et,U){return At.apply(this,arguments)}}(),Ke=()=>un(At=>At._isOpen),ut=()=>ce.map(At=>At.el),Lt=()=>ce.some(At=>At.isAnimating),un=At=>{const ze=ce.find(At);if(void 0!==ze)return ze.el},vt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(At=>new Promise(ze=>(0,Z.c)(At,ze))));return Ft("reveal",Ee),Ft("push",Ce),Ft("overlay",we),"undefined"!=typeof document&&document.addEventListener("ionBackButton",At=>{const ze=Ke();ze&&At.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>ze.close())}),{registerAnimation:Ft,get:pt,getMenus:dt,getOpen:He,isEnabled:ve,swipeGesture:$e,isAnimating:mt,isOpen:Dt,enable:ke,toggle:_e,close:Ne,open:Xe,_getOpenSync:Ke,_createAnimation:(At,ze)=>{const at=ee.get(At);if(!at)throw new Error("animation not registered");return at(ze)},_register:At=>{ce.indexOf(At)<0&&(At.disabled||Fe(At),ce.push(At))},_unregister:At=>{const ze=ce.indexOf(At);ze>-1&&ce.splice(ze,1)},_setOpen:me,_setActiveMenu:Fe}})()},2361:(On,Ct,L)=>{"use strict";L.d(Ct,{B:()=>Ai,H:()=>er,a:()=>U,b:()=>Qt,c:()=>Mi,e:()=>cr,f:()=>gi,g:()=>Qe,h:()=>Fn,i:()=>Wn,j:()=>De,k:()=>an,p:()=>_e,r:()=>cn,s:()=>Xe});var a=L(5861);let Z,Ve,Me,ae=!1,we=!1,Ce=!1,Ee=!1,oe=!1;const pe="undefined"!=typeof window?window:{},ee=pe.document||{head:{}},ce={$flags$:0,$resourcesUrl$:"",jmp:te=>te(),raf:te=>requestAnimationFrame(te),ael:(te,ye,Je,bt)=>te.addEventListener(ye,Je,bt),rel:(te,ye,Je,bt)=>te.removeEventListener(ye,Je,bt),ce:(te,ye)=>new CustomEvent(te,ye)},Xe=te=>{Object.assign(ce,te)},_e=te=>Promise.resolve(te),ke=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(te){}return!1})(),$e=(te,ye,Je,bt)=>{Je&&Je.map(([be,Oe,yt])=>{const Gt=ve(te,be),Jt=Dt(ye,yt),kt=pt(be);ce.ael(Gt,Oe,Jt,kt),(ye.$rmListeners$=ye.$rmListeners$||[]).push(()=>ce.rel(Gt,Oe,Jt,kt))})},Dt=(te,ye)=>Je=>{try{256&te.$flags$?te.$lazyInstance$[ye](Je):(te.$queuedListeners$=te.$queuedListeners$||[]).push([ye,Je])}catch(bt){Xr(bt)}},ve=(te,ye)=>4&ye?ee:8&ye?pe:16&ye?ee.body:te,pt=te=>0!=(2&te),Ye="s-id",st="sty-id",Se="http://www.w3.org/1999/xlink",Lt=new WeakMap,un=(te,ye,Je)=>{let bt=Or.get(te);ke&&Je?(bt=bt||new CSSStyleSheet,bt.replace(ye)):bt=ye,Or.set(te,bt)},vt=(te,ye,Je,bt)=>{let be=ze(ye,Je),Oe=Or.get(be);if(te=11===te.nodeType?te:ee,Oe)if("string"==typeof Oe){let Gt,yt=Lt.get(te=te.head||te);yt||Lt.set(te,yt=new Set),yt.has(be)||(te.host&&(Gt=te.querySelector(`[${st}="${be}"]`))?Gt.innerHTML=Oe:(Gt=ee.createElement("style"),Gt.innerHTML=Oe,te.insertBefore(Gt,te.querySelector("link"))),yt&&yt.add(be))}else te.adoptedStyleSheets.includes(Oe)||(te.adoptedStyleSheets=[...te.adoptedStyleSheets,Oe]);return be},ze=(te,ye)=>"sc-"+(ye&&32&te.$flags$?te.$tagName$+"-"+ye:te.$tagName$),at=te=>te.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),U=te=>si.push(te),Qe=te=>ft(te).$modeName$,rn={},jn=te=>"object"==(te=typeof te)||"function"===te,Fn=(te,ye,...Je)=>{let bt=null,be=null,Oe=null,yt=!1,Gt=!1,Jt=[];const kt=nr=>{for(let fr=0;fr<nr.length;fr++)bt=nr[fr],Array.isArray(bt)?kt(bt):null!=bt&&"boolean"!=typeof bt&&((yt="function"!=typeof te&&!jn(bt))&&(bt=String(bt)),yt&&Gt?Jt[Jt.length-1].$text$+=bt:Jt.push(yt?Dn(null,bt):bt),Gt=yt)};if(kt(Je),ye){ye.key&&(be=ye.key),ye.name&&(Oe=ye.name);{const nr=ye.className||ye.class;nr&&(ye.class="object"!=typeof nr?nr:Object.keys(nr).filter(fr=>nr[fr]).join(" "))}}if("function"==typeof te)return te(null===ye?{}:ye,Jt,rr);const Nn=Dn(te,null);return Nn.$attrs$=ye,Jt.length>0&&(Nn.$children$=Jt),Nn.$key$=be,Nn.$name$=Oe,Nn},Dn=(te,ye)=>({$flags$:0,$tag$:te,$text$:ye,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),er={},rr={forEach:(te,ye)=>te.map(lr).forEach(ye),map:(te,ye)=>te.map(lr).map(ye).map(pn)},lr=te=>({vattrs:te.$attrs$,vchildren:te.$children$,vkey:te.$key$,vname:te.$name$,vtag:te.$tag$,vtext:te.$text$}),pn=te=>{if("function"==typeof te.vtag){const Je=Object.assign({},te.vattrs);return te.vkey&&(Je.key=te.vkey),te.vname&&(Je.name=te.vname),Fn(te.vtag,Je,...te.vchildren||[])}const ye=Dn(te.vtag,te.vtext);return ye.$attrs$=te.vattrs,ye.$children$=te.vchildren,ye.$key$=te.vkey,ye.$name$=te.vname,ye},Ar=(te,ye,Je,bt,be,Oe)=>{if(Je!==bt){let yt=hr(te,ye),Gt=ye.toLowerCase();if("class"===ye){const Jt=te.classList,kt=Ir(Je),Nn=Ir(bt);Jt.remove(...kt.filter(nr=>nr&&!Nn.includes(nr))),Jt.add(...Nn.filter(nr=>nr&&!kt.includes(nr)))}else if("style"===ye){for(const Jt in Je)(!bt||null==bt[Jt])&&(Jt.includes("-")?te.style.removeProperty(Jt):te.style[Jt]="");for(const Jt in bt)(!Je||bt[Jt]!==Je[Jt])&&(Jt.includes("-")?te.style.setProperty(Jt,bt[Jt]):te.style[Jt]=bt[Jt])}else if("key"!==ye)if("ref"===ye)bt&&bt(te);else if(yt||"o"!==ye[0]||"n"!==ye[1]){const Jt=jn(bt);if((yt||Jt&&null!==bt)&&!be)try{if(te.tagName.includes("-"))te[ye]=bt;else{let Nn=null==bt?"":bt;"list"===ye?yt=!1:(null==Je||te[ye]!=Nn)&&(te[ye]=Nn)}}catch(Nn){}let kt=!1;Gt!==(Gt=Gt.replace(/^xlink\:?/,""))&&(ye=Gt,kt=!0),null==bt||!1===bt?(!1!==bt||""===te.getAttribute(ye))&&(kt?te.removeAttributeNS(Se,ye):te.removeAttribute(ye)):(!yt||4&Oe||be)&&!Jt&&(bt=!0===bt?"":bt,kt?te.setAttributeNS(Se,ye,bt):te.setAttribute(ye,bt))}else ye="-"===ye[2]?ye.slice(3):hr(pe,Gt)?Gt.slice(2):Gt[2]+ye.slice(3),Je&&ce.rel(te,ye,Je,!1),bt&&ce.ael(te,ye,bt,!1)}},vr=/\s/,Ir=te=>te?te.split(vr):[],ur=(te,ye,Je,bt)=>{const be=11===ye.$elm$.nodeType&&ye.$elm$.host?ye.$elm$.host:ye.$elm$,Oe=te&&te.$attrs$||rn,yt=ye.$attrs$||rn;for(bt in Oe)bt in yt||Ar(be,bt,Oe[bt],void 0,Je,ye.$flags$);for(bt in yt)Ar(be,bt,Oe[bt],yt[bt],Je,ye.$flags$)},ar=(te,ye,Je,bt)=>{let yt,Gt,Jt,be=ye.$children$[Je],Oe=0;if(ae||(Ce=!0,"slot"===be.$tag$&&(Z&&bt.classList.add(Z+"-s"),be.$flags$|=be.$children$?2:1)),null!==be.$text$)yt=be.$elm$=ee.createTextNode(be.$text$);else if(1&be.$flags$)yt=be.$elm$=ee.createTextNode("");else{if(Ee||(Ee="svg"===be.$tag$),yt=be.$elm$=ee.createElementNS(Ee?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&be.$flags$?"slot-fb":be.$tag$),Ee&&"foreignObject"===be.$tag$&&(Ee=!1),ur(null,be,Ee),(te=>null!=te)(Z)&&yt["s-si"]!==Z&&yt.classList.add(yt["s-si"]=Z),be.$children$)for(Oe=0;Oe<be.$children$.length;++Oe)Gt=ar(te,be,Oe,yt),Gt&&yt.appendChild(Gt);"svg"===be.$tag$?Ee=!1:"foreignObject"===yt.tagName&&(Ee=!0)}return yt["s-hn"]=Me,3&be.$flags$&&(yt["s-sr"]=!0,yt["s-cr"]=Ve,yt["s-sn"]=be.$name$||"",Jt=te&&te.$children$&&te.$children$[Je],Jt&&Jt.$tag$===be.$tag$&&te.$elm$&&gt(te.$elm$,!1)),yt},gt=(te,ye)=>{ce.$flags$|=1;const Je=te.childNodes;for(let bt=Je.length-1;bt>=0;bt--){const be=Je[bt];be["s-hn"]!==Me&&be["s-ol"]&&(Tn(be).insertBefore(be,nn(be)),be["s-ol"].remove(),be["s-ol"]=void 0,Ce=!0),ye&&gt(be,ye)}ce.$flags$&=-2},qe=(te,ye,Je,bt,be,Oe)=>{let Gt,yt=te["s-cr"]&&te["s-cr"].parentNode||te;for(yt.shadowRoot&&yt.tagName===Me&&(yt=yt.shadowRoot);be<=Oe;++be)bt[be]&&(Gt=ar(null,Je,be,te),Gt&&(bt[be].$elm$=Gt,yt.insertBefore(Gt,nn(ye))))},Ie=(te,ye,Je,bt,be)=>{for(;ye<=Je;++ye)(bt=te[ye])&&(be=bt.$elm$,Cr(bt),we=!0,be["s-ol"]?be["s-ol"].remove():gt(be,!0),be.remove())},Nt=(te,ye)=>te.$tag$===ye.$tag$&&("slot"===te.$tag$?te.$name$===ye.$name$:te.$key$===ye.$key$),nn=te=>te&&te["s-ol"]||te,Tn=te=>(te["s-ol"]?te["s-ol"]:te).parentNode,Xn=(te,ye)=>{const Je=ye.$elm$=te.$elm$,bt=te.$children$,be=ye.$children$,Oe=ye.$tag$,yt=ye.$text$;let Gt;null===yt?(Ee="svg"===Oe||"foreignObject"!==Oe&&Ee,"slot"===Oe||ur(te,ye,Ee),null!==bt&&null!==be?((te,ye,Je,bt)=>{let xi,Oi,be=0,Oe=0,yt=0,Gt=0,Jt=ye.length-1,kt=ye[0],Nn=ye[Jt],nr=bt.length-1,fr=bt[0],xr=bt[nr];for(;be<=Jt&&Oe<=nr;)if(null==kt)kt=ye[++be];else if(null==Nn)Nn=ye[--Jt];else if(null==fr)fr=bt[++Oe];else if(null==xr)xr=bt[--nr];else if(Nt(kt,fr))Xn(kt,fr),kt=ye[++be],fr=bt[++Oe];else if(Nt(Nn,xr))Xn(Nn,xr),Nn=ye[--Jt],xr=bt[--nr];else if(Nt(kt,xr))("slot"===kt.$tag$||"slot"===xr.$tag$)&&gt(kt.$elm$.parentNode,!1),Xn(kt,xr),te.insertBefore(kt.$elm$,Nn.$elm$.nextSibling),kt=ye[++be],xr=bt[--nr];else if(Nt(Nn,fr))("slot"===kt.$tag$||"slot"===xr.$tag$)&&gt(Nn.$elm$.parentNode,!1),Xn(Nn,fr),te.insertBefore(Nn.$elm$,kt.$elm$),Nn=ye[--Jt],fr=bt[++Oe];else{for(yt=-1,Gt=be;Gt<=Jt;++Gt)if(ye[Gt]&&null!==ye[Gt].$key$&&ye[Gt].$key$===fr.$key$){yt=Gt;break}yt>=0?(Oi=ye[yt],Oi.$tag$!==fr.$tag$?xi=ar(ye&&ye[Oe],Je,yt,te):(Xn(Oi,fr),ye[yt]=void 0,xi=Oi.$elm$),fr=bt[++Oe]):(xi=ar(ye&&ye[Oe],Je,Oe,te),fr=bt[++Oe]),xi&&Tn(kt.$elm$).insertBefore(xi,nn(kt.$elm$))}be>Jt?qe(te,null==bt[nr+1]?null:bt[nr+1].$elm$,Je,bt,Oe,nr):Oe>nr&&Ie(ye,be,Jt)})(Je,bt,ye,be):null!==be?(null!==te.$text$&&(Je.textContent=""),qe(Je,null,ye,be,0,be.length-1)):null!==bt&&Ie(bt,0,bt.length-1),Ee&&"svg"===Oe&&(Ee=!1)):(Gt=Je["s-cr"])?Gt.parentNode.textContent=yt:te.$text$!==yt&&(Je.data=yt)},Zn=te=>{let Je,bt,be,Oe,yt,Gt,ye=te.childNodes;for(bt=0,be=ye.length;bt<be;bt++)if(Je=ye[bt],1===Je.nodeType){if(Je["s-sr"])for(yt=Je["s-sn"],Je.hidden=!1,Oe=0;Oe<be;Oe++)if(Gt=ye[Oe].nodeType,ye[Oe]["s-hn"]!==Je["s-hn"]||""!==yt){if(1===Gt&&yt===ye[Oe].getAttribute("slot")){Je.hidden=!0;break}}else if(1===Gt||3===Gt&&""!==ye[Oe].textContent.trim()){Je.hidden=!0;break}Zn(Je)}},Ln=[],Hn=te=>{let ye,Je,bt,be,Oe,yt,Gt=0,Jt=te.childNodes,kt=Jt.length;for(;Gt<kt;Gt++){if(ye=Jt[Gt],ye["s-sr"]&&(Je=ye["s-cr"])&&Je.parentNode)for(bt=Je.parentNode.childNodes,be=ye["s-sn"],yt=bt.length-1;yt>=0;yt--)Je=bt[yt],!Je["s-cn"]&&!Je["s-nr"]&&Je["s-hn"]!==ye["s-hn"]&&(Er(Je,be)?(Oe=Ln.find(Nn=>Nn.$nodeToRelocate$===Je),we=!0,Je["s-sn"]=Je["s-sn"]||be,Oe?Oe.$slotRefNode$=ye:Ln.push({$slotRefNode$:ye,$nodeToRelocate$:Je}),Je["s-sr"]&&Ln.map(Nn=>{Er(Nn.$nodeToRelocate$,Je["s-sn"])&&(Oe=Ln.find(nr=>nr.$nodeToRelocate$===Je),Oe&&!Nn.$slotRefNode$&&(Nn.$slotRefNode$=Oe.$slotRefNode$))})):Ln.some(Nn=>Nn.$nodeToRelocate$===Je)||Ln.push({$nodeToRelocate$:Je}));1===ye.nodeType&&Hn(ye)}},Er=(te,ye)=>1===te.nodeType?null===te.getAttribute("slot")&&""===ye||te.getAttribute("slot")===ye:te["s-sn"]===ye||""===ye,Cr=te=>{te.$attrs$&&te.$attrs$.ref&&te.$attrs$.ref(null),te.$children$&&te.$children$.map(Cr)},Wn=te=>ft(te).$hostElement$,cr=(te,ye,Je)=>{const bt=Wn(te);return{emit:be=>Rn(bt,ye,{bubbles:!!(4&Je),composed:!!(2&Je),cancelable:!!(1&Je),detail:be})}},Rn=(te,ye,Je)=>{const bt=ce.ce(ye,Je);return te.dispatchEvent(bt),bt},Vt=(te,ye)=>{ye&&!te.$onRenderResolve$&&ye["s-p"]&&ye["s-p"].push(new Promise(Je=>te.$onRenderResolve$=Je))},wn=(te,ye)=>{if(te.$flags$|=16,!(4&te.$flags$))return Vt(te,te.$ancestorComponent$),Mi(()=>Yn(te,ye));te.$flags$|=512},Yn=(te,ye)=>{const bt=te.$lazyInstance$;let be;return ye&&(te.$flags$|=256,te.$queuedListeners$&&(te.$queuedListeners$.map(([Oe,yt])=>Rt(bt,Oe,yt)),te.$queuedListeners$=null),be=Rt(bt,"componentWillLoad")),be=_t(be,()=>Rt(bt,"componentWillRender")),_t(be,()=>Kn(te,bt,ye))},Kn=function(){var te=(0,a.Z)(function*(ye,Je,bt){const be=ye.$hostElement$,yt=be["s-rc"];bt&&(te=>{const ye=te.$cmpMeta$,Je=te.$hostElement$,bt=ye.$flags$,Oe=vt(Je.shadowRoot?Je.shadowRoot:Je.getRootNode(),ye,te.$modeName$);10&bt&&(Je["s-sc"]=Oe,Je.classList.add(Oe+"-h"),2&bt&&Je.classList.add(Oe+"-s"))})(ye);Vn(ye,Je),yt&&(yt.map(Jt=>Jt()),be["s-rc"]=void 0);{const Jt=be["s-p"],kt=()=>We(ye);0===Jt.length?kt():(Promise.all(Jt).then(kt),ye.$flags$|=4,Jt.length=0)}});return function(Je,bt,be){return te.apply(this,arguments)}}(),Vn=(te,ye,Je)=>{try{ye=ye.render&&ye.render(),te.$flags$&=-17,te.$flags$|=2,((te,ye)=>{const Je=te.$hostElement$,bt=te.$cmpMeta$,be=te.$vnode$||Dn(null,null),Oe=(te=>te&&te.$tag$===er)(ye)?ye:Fn(null,null,ye);if(Me=Je.tagName,bt.$attrsToReflect$&&(Oe.$attrs$=Oe.$attrs$||{},bt.$attrsToReflect$.map(([yt,Gt])=>Oe.$attrs$[Gt]=Je[yt])),Oe.$tag$=null,Oe.$flags$|=4,te.$vnode$=Oe,Oe.$elm$=be.$elm$=Je.shadowRoot||Je,Z=Je["s-sc"],Ve=Je["s-cr"],ae=0!=(1&bt.$flags$),we=!1,Xn(be,Oe),ce.$flags$|=1,Ce){Hn(Oe.$elm$);let yt,Gt,Jt,kt,Nn,nr,fr=0;for(;fr<Ln.length;fr++)yt=Ln[fr],Gt=yt.$nodeToRelocate$,Gt["s-ol"]||(Jt=ee.createTextNode(""),Jt["s-nr"]=Gt,Gt.parentNode.insertBefore(Gt["s-ol"]=Jt,Gt));for(fr=0;fr<Ln.length;fr++)if(yt=Ln[fr],Gt=yt.$nodeToRelocate$,yt.$slotRefNode$){for(kt=yt.$slotRefNode$.parentNode,Nn=yt.$slotRefNode$.nextSibling,Jt=Gt["s-ol"];Jt=Jt.previousSibling;)if(nr=Jt["s-nr"],nr&&nr["s-sn"]===Gt["s-sn"]&&kt===nr.parentNode&&(nr=nr.nextSibling,!nr||!nr["s-nr"])){Nn=nr;break}(!Nn&&kt!==Gt.parentNode||Gt.nextSibling!==Nn)&&Gt!==Nn&&(!Gt["s-hn"]&&Gt["s-ol"]&&(Gt["s-hn"]=Gt["s-ol"].parentNode.nodeName),kt.insertBefore(Gt,Nn))}else 1===Gt.nodeType&&(Gt.hidden=!0)}we&&Zn(Oe.$elm$),ce.$flags$&=-2,Ln.length=0})(te,ye)}catch(bt){Xr(bt,te.$hostElement$)}return null},We=te=>{const Je=te.$hostElement$,be=te.$lazyInstance$,Oe=te.$ancestorComponent$;Rt(be,"componentDidRender"),64&te.$flags$?Rt(be,"componentDidUpdate"):(te.$flags$|=64,dn(Je),Rt(be,"componentDidLoad"),te.$onReadyResolve$(Je),Oe||Ze()),te.$onInstanceResolve$(Je),te.$onRenderResolve$&&(te.$onRenderResolve$(),te.$onRenderResolve$=void 0),512&te.$flags$&&Ci(()=>wn(te,!1)),te.$flags$&=-517},De=te=>{{const ye=ft(te),Je=ye.$hostElement$.isConnected;return Je&&2==(18&ye.$flags$)&&wn(ye,!1),Je}},Ze=te=>{dn(ee.documentElement),Ci(()=>Rn(pe,"appload",{detail:{namespace:"ionic"}}))},Rt=(te,ye,Je)=>{if(te&&te[ye])try{return te[ye](Je)}catch(bt){Xr(bt)}},_t=(te,ye)=>te&&te.then?te.then(ye):ye(),dn=te=>te.classList.add("hydrated"),je=(te,ye,Je,bt,be,Oe,yt)=>{let Gt,Jt,kt,Nn;if(1===Oe.nodeType){for(Gt=Oe.getAttribute("c-id"),Gt&&(Jt=Gt.split("."),(Jt[0]===yt||"0"===Jt[0])&&(kt={$flags$:0,$hostId$:Jt[0],$nodeId$:Jt[1],$depth$:Jt[2],$index$:Jt[3],$tag$:Oe.tagName.toLowerCase(),$elm$:Oe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ye.push(kt),Oe.removeAttribute("c-id"),te.$children$||(te.$children$=[]),te.$children$[kt.$index$]=kt,te=kt,bt&&"0"===kt.$depth$&&(bt[kt.$index$]=kt.$elm$))),Nn=Oe.childNodes.length-1;Nn>=0;Nn--)je(te,ye,Je,bt,be,Oe.childNodes[Nn],yt);if(Oe.shadowRoot)for(Nn=Oe.shadowRoot.childNodes.length-1;Nn>=0;Nn--)je(te,ye,Je,bt,be,Oe.shadowRoot.childNodes[Nn],yt)}else if(8===Oe.nodeType)Jt=Oe.nodeValue.split("."),(Jt[1]===yt||"0"===Jt[1])&&(Gt=Jt[0],kt={$flags$:0,$hostId$:Jt[1],$nodeId$:Jt[2],$depth$:Jt[3],$index$:Jt[4],$elm$:Oe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Gt?(kt.$elm$=Oe.nextSibling,kt.$elm$&&3===kt.$elm$.nodeType&&(kt.$text$=kt.$elm$.textContent,ye.push(kt),Oe.remove(),te.$children$||(te.$children$=[]),te.$children$[kt.$index$]=kt,bt&&"0"===kt.$depth$&&(bt[kt.$index$]=kt.$elm$))):kt.$hostId$===yt&&("s"===Gt?(kt.$tag$="slot",Oe["s-sn"]=Jt[5]?kt.$name$=Jt[5]:"",Oe["s-sr"]=!0,bt&&(kt.$elm$=ee.createElement(kt.$tag$),kt.$name$&&kt.$elm$.setAttribute("name",kt.$name$),Oe.parentNode.insertBefore(kt.$elm$,Oe),Oe.remove(),"0"===kt.$depth$&&(bt[kt.$index$]=kt.$elm$)),Je.push(kt),te.$children$||(te.$children$=[]),te.$children$[kt.$index$]=kt):"r"===Gt&&(bt?Oe.remove():(be["s-cr"]=Oe,Oe["s-cn"]=!0))));else if(te&&"style"===te.$tag$){const nr=Dn(null,Oe.textContent);nr.$elm$=Oe,nr.$index$="0",te.$children$=[nr]}},Ae=(te,ye)=>{if(1===te.nodeType){let Je=0;for(;Je<te.childNodes.length;Je++)Ae(te.childNodes[Je],ye);if(te.shadowRoot)for(Je=0;Je<te.shadowRoot.childNodes.length;Je++)Ae(te.shadowRoot.childNodes[Je],ye)}else if(8===te.nodeType){const Je=te.nodeValue.split(".");"o"===Je[0]&&(ye.set(Je[1]+"."+Je[2],te),te.nodeValue="",te["s-en"]=Je[3])}},Un=(te,ye,Je)=>{if(ye.$members$){te.watchers&&(ye.$watchers$=te.watchers);const bt=Object.entries(ye.$members$),be=te.prototype;if(bt.map(([Oe,[yt]])=>{31&yt||2&Je&&32&yt?Object.defineProperty(be,Oe,{get(){return((te,ye)=>ft(this).$instanceValues$.get(ye))(0,Oe)},set(Gt){((te,ye,Je,bt)=>{const be=ft(te),Oe=be.$hostElement$,yt=be.$instanceValues$.get(ye),Gt=be.$flags$,Jt=be.$lazyInstance$;Je=((te,ye)=>null==te||jn(te)?te:4&ye?"false"!==te&&(""===te||!!te):2&ye?parseFloat(te):1&ye?String(te):te)(Je,bt.$members$[ye][0]);const kt=Number.isNaN(yt)&&Number.isNaN(Je);if((!(8&Gt)||void 0===yt)&&Je!==yt&&!kt&&(be.$instanceValues$.set(ye,Je),Jt)){if(bt.$watchers$&&128&Gt){const nr=bt.$watchers$[ye];nr&&nr.map(fr=>{try{Jt[fr](Je,yt,ye)}catch(xr){Xr(xr,Oe)}})}2==(18&Gt)&&wn(be,!1)}})(this,Oe,Gt,ye)},configurable:!0,enumerable:!0}):1&Je&&64&yt&&Object.defineProperty(be,Oe,{value(...Gt){const Jt=ft(this);return Jt.$onInstancePromise$.then(()=>Jt.$lazyInstance$[Oe](...Gt))}})}),1&Je){const Oe=new Map;be.attributeChangedCallback=function(yt,Gt,Jt){ce.jmp(()=>{const kt=Oe.get(yt);if(this.hasOwnProperty(kt))Jt=this[kt],delete this[kt];else if(be.hasOwnProperty(kt)&&"number"==typeof this[kt]&&this[kt]==Jt)return;this[kt]=(null!==Jt||"boolean"!=typeof this[kt])&&Jt})},te.observedAttributes=bt.filter(([yt,Gt])=>15&Gt[0]).map(([yt,Gt])=>{const Jt=Gt[1]||yt;return Oe.set(Jt,yt),512&Gt[0]&&ye.$attrsToReflect$.push([yt,Jt]),Jt})}}return te},xe=function(){var te=(0,a.Z)(function*(ye,Je,bt,be,Oe){if(0==(32&Je.$flags$)){{if(Je.$flags$|=32,(Oe=ei(bt)).then){const kt=()=>{};Oe=yield Oe,kt()}Oe.isProxied||(bt.$watchers$=Oe.watchers,Un(Oe,bt,2),Oe.isProxied=!0);const Jt=()=>{};Je.$flags$|=8;try{new Oe(Je)}catch(kt){Xr(kt)}Je.$flags$&=-9,Je.$flags$|=128,Jt(),Te(Je.$lazyInstance$)}if(Oe.style){let Jt=Oe.style;"string"!=typeof Jt&&(Jt=Jt[Je.$modeName$=(te=>si.map(ye=>ye(te)).find(ye=>!!ye))(ye)]);const kt=ze(bt,Je.$modeName$);if(!Or.has(kt)){const Nn=()=>{};un(kt,Jt,!!(1&bt.$flags$)),Nn()}}}const yt=Je.$ancestorComponent$,Gt=()=>wn(Je,!0);yt&&yt["s-rc"]?yt["s-rc"].push(Gt):Gt()});return function(Je,bt,be,Oe,yt){return te.apply(this,arguments)}}(),Te=te=>{Rt(te,"connectedCallback")},Ot=te=>{const ye=te["s-cr"]=ee.createComment("");ye["s-cn"]=!0,te.insertBefore(ye,te.firstChild)},Qt=(te,ye={})=>{const bt=[],be=ye.exclude||[],Oe=pe.customElements,yt=ee.head,Gt=yt.querySelector("meta[charset]"),Jt=ee.createElement("style"),kt=[],Nn=ee.querySelectorAll(`[${st}]`);let nr,fr=!0,xr=0;for(Object.assign(ce,ye),ce.$resourcesUrl$=new URL(ye.resourcesUrl||"./",ee.baseURI).href,ce.$flags$|=2;xr<Nn.length;xr++)un(Nn[xr].getAttribute(st),at(Nn[xr].innerHTML),!0);te.map(xi=>{xi[1].map(Oi=>{const rt={$flags$:Oi[0],$tagName$:Oi[1],$members$:Oi[2],$listeners$:Oi[3]};rt.$members$=Oi[2],rt.$listeners$=Oi[3],rt.$attrsToReflect$=[],rt.$watchers$={};const ot=rt.$tagName$,Tt=class extends HTMLElement{constructor(on){super(on),Pn(on=this,rt),1&rt.$flags$&&on.attachShadow({mode:"open",delegatesFocus:!!(16&rt.$flags$)})}connectedCallback(){nr&&(clearTimeout(nr),nr=null),fr?kt.push(this):ce.jmp(()=>(te=>{if(0==(1&ce.$flags$)){const ye=ft(te),Je=ye.$cmpMeta$,bt=()=>{};if(1&ye.$flags$)$e(te,ye,Je.$listeners$),Te(ye.$lazyInstance$);else{let be;if(ye.$flags$|=1,be=te.getAttribute(Ye),be){if(1&Je.$flags$){const Oe=vt(te.shadowRoot,Je,te.getAttribute("s-mode"));te.classList.remove(Oe+"-h",Oe+"-s")}((te,ye,Je,bt)=>{const Oe=te.shadowRoot,yt=[],Jt=Oe?[]:null,kt=bt.$vnode$=Dn(ye,null);ce.$orgLocNodes$||Ae(ee.body,ce.$orgLocNodes$=new Map),te[Ye]=Je,te.removeAttribute(Ye),je(kt,yt,[],Jt,te,te,Je),yt.map(Nn=>{const nr=Nn.$hostId$+"."+Nn.$nodeId$,fr=ce.$orgLocNodes$.get(nr),xr=Nn.$elm$;fr&&""===fr["s-en"]&&fr.parentNode.insertBefore(xr,fr.nextSibling),Oe||(xr["s-hn"]=ye,fr&&(xr["s-ol"]=fr,xr["s-ol"]["s-nr"]=xr)),ce.$orgLocNodes$.delete(nr)}),Oe&&Jt.map(Nn=>{Nn&&Oe.appendChild(Nn)})})(te,Je.$tagName$,be,ye)}be||12&Je.$flags$&&Ot(te);{let Oe=te;for(;Oe=Oe.parentNode||Oe.host;)if(1===Oe.nodeType&&Oe.hasAttribute("s-id")&&Oe["s-p"]||Oe["s-p"]){Vt(ye,ye.$ancestorComponent$=Oe);break}}Je.$members$&&Object.entries(Je.$members$).map(([Oe,[yt]])=>{if(31&yt&&te.hasOwnProperty(Oe)){const Gt=te[Oe];delete te[Oe],te[Oe]=Gt}}),Ci(()=>xe(te,ye,Je))}bt()}})(this))}disconnectedCallback(){ce.jmp(()=>(te=>{if(0==(1&ce.$flags$)){const ye=ft(this),Je=ye.$lazyInstance$;ye.$rmListeners$&&(ye.$rmListeners$.map(bt=>bt()),ye.$rmListeners$=void 0),Rt(Je,"disconnectedCallback")}})())}componentOnReady(){return ft(this).$onReadyPromise$}};rt.$lazyBundleId$=xi[0],!be.includes(ot)&&!Oe.get(ot)&&(bt.push(ot),Oe.define(ot,Un(Tt,rt,1)))})}),Jt.innerHTML=bt+"{visibility:hidden}.hydrated{visibility:inherit}",Jt.setAttribute("data-styles",""),yt.insertBefore(Jt,Gt?Gt.nextSibling:yt.firstChild),fr=!1,kt.length?kt.map(xi=>xi.connectedCallback()):ce.jmp(()=>nr=setTimeout(Ze,30))},an=te=>{const ye=new URL(te,ce.$resourcesUrl$);return ye.origin!==pe.location.origin?ye.href:ye.pathname},En=new WeakMap,ft=te=>En.get(te),cn=(te,ye)=>En.set(ye.$lazyInstance$=te,ye),Pn=(te,ye)=>{const Je={$flags$:0,$hostElement$:te,$cmpMeta$:ye,$instanceValues$:new Map};return Je.$onInstancePromise$=new Promise(bt=>Je.$onInstanceResolve$=bt),Je.$onReadyPromise$=new Promise(bt=>Je.$onReadyResolve$=bt),te["s-p"]=[],te["s-rc"]=[],$e(te,Je,ye.$listeners$),En.set(te,Je)},hr=(te,ye)=>ye in te,Xr=(te,ye)=>(0,console.error)(te,ye),Mr=new Map,ei=(te,ye,Je)=>{const bt=te.$tagName$.replace(/-/g,"_"),be=te.$lazyBundleId$,Oe=Mr.get(be);return Oe?Oe[bt]:L(863)(`./${be}.entry.js`).then(yt=>(Mr.set(be,yt),yt[bt]),Xr)},Or=new Map,si=[],pi=[],br=[],Hi=(te,ye)=>Je=>{te.push(Je),oe||(oe=!0,ye&&4&ce.$flags$?Ci(Si):ce.raf(Si))},Ni=te=>{for(let ye=0;ye<te.length;ye++)try{te[ye](performance.now())}catch(Je){Xr(Je)}te.length=0},Si=()=>{Ni(pi),Ni(br),(oe=pi.length>0)&&ce.raf(Si)},Ci=te=>_e().then(te),gi=Hi(pi,!1),Mi=Hi(br,!0),Ai={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},7249:(On,Ct,L)=>{"use strict";L.d(Ct,{L:()=>Ve,a:()=>Me,b:()=>ae,c:()=>we,d:()=>Ce,e:()=>Ft,g:()=>Fe,l:()=>dt,s:()=>Ye,t:()=>pe});var a=L(5861),J=L(2361),Z=L(1643);const Ve="ionViewWillEnter",Me="ionViewDidEnter",ae="ionViewWillLeave",we="ionViewDidLeave",Ce="ionViewWillUnload",pe=me=>new Promise((Se,Ke)=>{(0,J.c)(()=>{ee(me),ce(me).then(ut=>{ut.animation&&ut.animation.destroy(),Xe(me),Se(ut)},ut=>{Xe(me),Ke(ut)})})}),ee=me=>{const Se=me.enteringEl,Ke=me.leavingEl;st(Se,Ke,me.direction),me.showGoBack?Se.classList.add("can-go-back"):Se.classList.remove("can-go-back"),Ye(Se,!1),Se.style.setProperty("pointer-events","none"),Ke&&(Ye(Ke,!1),Ke.style.setProperty("pointer-events","none"))},ce=function(){var me=(0,a.Z)(function*(Se){const Ke=yield Ne(Se);return Ke&&J.B.isBrowser?_e(Ke,Se):ke(Se)});return function(Ke){return me.apply(this,arguments)}}(),Xe=me=>{const Se=me.enteringEl,Ke=me.leavingEl;Se.classList.remove("ion-page-invisible"),Se.style.removeProperty("pointer-events"),void 0!==Ke&&(Ke.classList.remove("ion-page-invisible"),Ke.style.removeProperty("pointer-events"))},Ne=function(){var me=(0,a.Z)(function*(Se){return Se.leavingEl&&Se.animated&&0!==Se.duration?Se.animationBuilder?Se.animationBuilder:"ios"===Se.mode?(yield Promise.resolve().then(L.bind(L,936))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,8447))).mdTransitionAnimation:void 0});return function(Ke){return me.apply(this,arguments)}}(),_e=function(){var me=(0,a.Z)(function*(Se,Ke){yield $e(Ke,!0);const ut=Se(Ke.baseEl,Ke);pt(Ke.enteringEl,Ke.leavingEl);const Lt=yield ve(ut,Ke);return Ke.progressCallback&&Ke.progressCallback(void 0),Lt&&He(Ke.enteringEl,Ke.leavingEl),{hasCompleted:Lt,animation:ut}});return function(Ke,ut){return me.apply(this,arguments)}}(),ke=function(){var me=(0,a.Z)(function*(Se){const Ke=Se.enteringEl,ut=Se.leavingEl;return yield $e(Se,!1),pt(Ke,ut),He(Ke,ut),{hasCompleted:!0}});return function(Ke){return me.apply(this,arguments)}}(),$e=function(){var me=(0,a.Z)(function*(Se,Ke){const Lt=(void 0!==Se.deepWait?Se.deepWait:Ke)?[Ft(Se.enteringEl),Ft(Se.leavingEl)]:[mt(Se.enteringEl),mt(Se.leavingEl)];yield Promise.all(Lt),yield Dt(Se.viewIsReady,Se.enteringEl)});return function(Ke,ut){return me.apply(this,arguments)}}(),Dt=function(){var me=(0,a.Z)(function*(Se,Ke){Se&&(yield Se(Ke))});return function(Ke,ut){return me.apply(this,arguments)}}(),ve=(me,Se)=>{const Ke=Se.progressCallback,ut=new Promise(Lt=>{me.onFinish(un=>Lt(1===un))});return Ke?(me.progressStart(!0),Ke(me)):me.play(),ut},pt=(me,Se)=>{dt(Se,ae),dt(me,Ve)},He=(me,Se)=>{dt(me,Me),dt(Se,we)},dt=(me,Se)=>{if(me){const Ke=new CustomEvent(Se,{bubbles:!1,cancelable:!1});me.dispatchEvent(Ke)}},mt=me=>me?new Promise(Se=>(0,Z.c)(me,Se)):Promise.resolve(),Ft=function(){var me=(0,a.Z)(function*(Se){const Ke=Se;if(Ke){if(null!=Ke.componentOnReady){if(null!=(yield Ke.componentOnReady()))return}else if(null!=Ke.__registerHost)return void(yield new Promise(Lt=>(0,Z.r)(Lt)));yield Promise.all(Array.from(Ke.children).map(Ft))}});return function(Ke){return me.apply(this,arguments)}}(),Ye=(me,Se)=>{Se?(me.setAttribute("aria-hidden","true"),me.classList.add("ion-page-hidden")):(me.hidden=!1,me.removeAttribute("aria-hidden"),me.classList.remove("ion-page-hidden"))},st=(me,Se,Ke)=>{void 0!==me&&(me.style.zIndex="back"===Ke?"99":"101"),void 0!==Se&&(Se.style.zIndex="100")},Fe=me=>me.classList.contains("ion-page")?me:me.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||me},6254:(On,Ct,L)=>{"use strict";L.d(Ct,{a:()=>pe,b:()=>Lt,c:()=>Z,g:()=>oe,i:()=>un});var a=L(2361);class J{constructor(){this.m=new Map}reset(At){this.m=new Map(Object.entries(At))}get(At,ze){const at=this.m.get(At);return void 0!==at?at:ze}getBoolean(At,ze=!1){const at=this.m.get(At);return void 0===at?ze:"string"==typeof at?"true"===at:!!at}getNumber(At,ze){const at=parseFloat(this.m.get(At));return isNaN(at)?void 0!==ze?ze:NaN:at}set(At,ze){this.m.set(At,ze)}}const Z=new J,Ee="ionic-persist-config",oe=vt=>ee(vt),pe=(vt,At)=>("string"==typeof vt&&(At=vt,vt=void 0),oe(vt).includes(At)),ee=(vt=window)=>{if(void 0===vt)return[];vt.Ionic=vt.Ionic||{};let At=vt.Ionic.platforms;return null==At&&(At=vt.Ionic.platforms=ce(vt),At.forEach(ze=>vt.document.documentElement.classList.add(`plt-${ze}`))),At},ce=vt=>{const At=Z.get("platform");return Object.keys(Ke).filter(ze=>{const at=null==At?void 0:At[ze];return"function"==typeof at?at(vt):Ke[ze](vt)})},Ne=vt=>!!(me(vt,/iPad/i)||me(vt,/Macintosh/i)&&He(vt)),$e=vt=>me(vt,/android|sink/i),He=vt=>Se(vt,"(any-pointer:coarse)"),mt=vt=>Ft(vt)||Ye(vt),Ft=vt=>!!(vt.cordova||vt.phonegap||vt.PhoneGap),Ye=vt=>{const At=vt.Capacitor;return!!(null==At?void 0:At.isNative)},me=(vt,At)=>At.test(vt.navigator.userAgent),Se=(vt,At)=>{var ze;return null===(ze=vt.matchMedia)||void 0===ze?void 0:ze.call(vt,At).matches},Ke={ipad:Ne,iphone:vt=>me(vt,/iPhone/i),ios:vt=>me(vt,/iPhone|iPod/i)||Ne(vt),android:$e,phablet:vt=>{const At=vt.innerWidth,ze=vt.innerHeight,at=Math.min(At,ze),Et=Math.max(At,ze);return at>390&&at<520&&Et>620&&Et<800},tablet:vt=>{const At=vt.innerWidth,ze=vt.innerHeight,at=Math.min(At,ze),Et=Math.max(At,ze);return Ne(vt)||(vt=>$e(vt)&&!me(vt,/mobile/i))(vt)||at>460&&at<820&&Et>780&&Et<1400},cordova:Ft,capacitor:Ye,electron:vt=>me(vt,/electron/i),pwa:vt=>{var At;return!(!(null===(At=vt.matchMedia)||void 0===At?void 0:At.call(vt,"(display-mode: standalone)").matches)&&!vt.navigator.standalone)},mobile:He,mobileweb:vt=>He(vt)&&!mt(vt),desktop:vt=>!He(vt),hybrid:mt};let ut;const Lt=vt=>vt&&(0,a.g)(vt)||ut,un=(vt={})=>{if("undefined"==typeof window)return;const At=window.document,ze=window,at=ze.Ionic=ze.Ionic||{},Et={};vt._ael&&(Et.ael=vt._ael),vt._rel&&(Et.rel=vt._rel),vt._ce&&(Et.ce=vt._ce),(0,a.s)(Et);const U=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(vt=>{try{const At=vt.sessionStorage.getItem(Ee);return null!==At?JSON.parse(At):{}}catch(At){return{}}})(ze)),{persistConfig:!1}),at.config),(vt=>{const At={};return vt.location.search.slice(1).split("&").map(ze=>ze.split("=")).map(([ze,at])=>[decodeURIComponent(ze),decodeURIComponent(at)]).filter(([ze])=>((vt,At)=>vt.substr(0,At.length)===At)(ze,"ionic:")).map(([ze,at])=>[ze.slice("ionic:".length),at]).forEach(([ze,at])=>{At[ze]=at}),At})(ze)),vt);Z.reset(U),Z.getBoolean("persistConfig")&&((vt,At)=>{try{vt.sessionStorage.setItem(Ee,JSON.stringify(At))}catch(ze){return}})(ze,U),ee(ze),at.config=Z,at.mode=ut=Z.get("mode",At.documentElement.getAttribute("mode")||(pe(ze,"ios")?"ios":"md")),Z.set("mode",ut),At.documentElement.setAttribute("mode",ut),At.documentElement.classList.add(ut),Z.getBoolean("_testing")&&Z.set("animated",!1);const Qe=St=>{var hn;return null===(hn=St.tagName)||void 0===hn?void 0:hn.startsWith("ION-")},rn=St=>["ios","md"].includes(St);(0,a.a)(St=>{for(;St;){const hn=St.mode||St.getAttribute("mode");if(hn){if(rn(hn))return hn;Qe(St)&&console.warn('Invalid ionic mode: "'+hn+'", expected: "ios" or "md"')}St=St.parentElement}return ut})}},936:(On,Ct,L)=>{"use strict";L.r(Ct),L.d(Ct,{iosTransitionAnimation:()=>ee,shadow:()=>ae});var a=L(8015),J=L(7249);L(2361);const Me=ce=>document.querySelector(`${ce}.ion-cloned-element`),ae=ce=>ce.shadowRoot||ce,we=ce=>{const Xe="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs"),Ne="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Xe){const _e=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=_e?_e.querySelector(Ne):null}return ce.querySelector(Ne)},Ce=(ce,Xe)=>{const Ne="ION-TABS"===ce.tagName?ce:ce.querySelector("ion-tabs");let _e=[];if(null!=Ne){const ke=Ne.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ke&&(_e=ke.querySelectorAll("ion-buttons"))}else _e=ce.querySelectorAll("ion-buttons");for(const ke of _e){const $e=ke.closest("ion-header"),Dt=$e&&!$e.classList.contains("header-collapse-condense-inactive"),ve=ke.querySelector("ion-back-button"),pt=ke.classList.contains("buttons-collapse"),He="start"===ke.slot||""===ke.slot;if(null!==ve&&He&&(pt&&Dt&&Xe||!pt))return ve}return null},oe=(ce,Xe,Ne,_e,ke,$e)=>{const Dt=Xe?`calc(100% - ${$e.right+4}px)`:$e.left-4+"px",ve=Xe?"7px":"-7px",pt=Xe?"-4px":"4px",He=Xe?"-4px":"4px",dt=Xe?"right":"left",mt=Xe?"left":"right",st=Ne?[{offset:0,opacity:1,transform:`translate3d(${pt}, ${$e.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ve}, ${ke.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ve}, ${ke.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${pt}, ${$e.top-46}px, 0) scale(1)`}],Se=Ne?[{offset:0,opacity:1,transform:`translate3d(${He}, ${$e.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${He}, ${$e.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${He}, ${$e.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${He}, ${$e.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${He}, ${$e.top-46}px, 0) scale(1)`}],Ke=(0,a.c)(),ut=(0,a.c)(),Lt=Me("ion-back-button"),un=ae(Lt).querySelector(".button-text"),vt=ae(Lt).querySelector("ion-icon");Lt.text=_e.text,Lt.mode=_e.mode,Lt.icon=_e.icon,Lt.color=_e.color,Lt.disabled=_e.disabled,Lt.style.setProperty("display","block"),Lt.style.setProperty("position","fixed"),ut.addElement(vt),Ke.addElement(un),Ke.beforeStyles({"transform-origin":`${dt} center`}).beforeAddWrite(()=>{_e.style.setProperty("display","none"),Lt.style.setProperty(dt,Dt)}).afterAddWrite(()=>{_e.style.setProperty("display",""),Lt.style.setProperty("display","none"),Lt.style.removeProperty(dt)}).keyframes(st),ut.beforeStyles({"transform-origin":`${mt} center`}).keyframes(Se),ce.addAnimation([Ke,ut])},pe=(ce,Xe,Ne,_e,ke,$e)=>{const Dt=Xe?`calc(100% - ${ke.right}px)`:`${ke.left}px`,ve=Xe?"-18px":"18px",pt=Xe?"right":"left",mt=Ne?[{offset:0,opacity:0,transform:`translate3d(${ve}, ${$e.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ke.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ke.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ve}, ${$e.top-4}px, 0) scale(0.5)`}],Ft=Me("ion-title"),Ye=(0,a.c)();Ft.innerText=_e.innerText,Ft.size=_e.size,Ft.color=_e.color,Ye.addElement(Ft),Ye.beforeStyles({"transform-origin":`${pt} center`,height:"46px",display:"",position:"relative",[pt]:Dt}).beforeAddWrite(()=>{_e.style.setProperty("display","none")}).afterAddWrite(()=>{_e.style.setProperty("display",""),Ft.style.setProperty("display","none")}).keyframes(mt),ce.addAnimation(Ye)},ee=(ce,Xe)=>{try{const Ne="cubic-bezier(0.32,0.72,0,1)",_e="opacity",ke="transform",$e="0%",ve="rtl"===ce.ownerDocument.dir,pt=ve?"-99.5%":"99.5%",He=ve?"33%":"-33%",dt=Xe.enteringEl,mt=Xe.leavingEl,Ft="back"===Xe.direction,Ye=dt.querySelector(":scope > ion-content"),st=dt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Fe=dt.querySelectorAll(":scope > ion-header > ion-toolbar"),me=(0,a.c)(),Se=(0,a.c)();if(me.addElement(dt).duration(Xe.duration||540).easing(Xe.easing||Ne).fill("both").beforeRemoveClass("ion-page-invisible"),mt&&ce){const un=(0,a.c)();un.addElement(ce),me.addAnimation(un)}if(Ye||0!==Fe.length||0!==st.length?(Se.addElement(Ye),Se.addElement(st)):Se.addElement(dt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),me.addAnimation(Se),Ft?Se.beforeClearStyles([_e]).fromTo("transform",`translateX(${He})`,`translateX(${$e})`).fromTo(_e,.8,1):Se.beforeClearStyles([_e]).fromTo("transform",`translateX(${pt})`,`translateX(${$e})`),Ye){const un=ae(Ye).querySelector(".transition-effect");if(un){const vt=un.querySelector(".transition-cover"),At=un.querySelector(".transition-shadow"),ze=(0,a.c)(),at=(0,a.c)(),Et=(0,a.c)();ze.addElement(un).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),at.addElement(vt).beforeClearStyles([_e]).fromTo(_e,0,.1),Et.addElement(At).beforeClearStyles([_e]).fromTo(_e,.03,.7),ze.addAnimation([at,Et]),Se.addAnimation([ze])}}const Ke=dt.querySelector("ion-header.header-collapse-condense"),{forward:ut,backward:Lt}=((ce,Xe,Ne,_e,ke)=>{const $e=Ce(_e,Ne),Dt=we(ke),ve=we(_e),pt=Ce(ke,Ne),He=null!==$e&&null!==Dt&&!Ne,dt=null!==ve&&null!==pt&&Ne;if(He){const mt=Dt.getBoundingClientRect(),Ft=$e.getBoundingClientRect();pe(ce,Xe,Ne,Dt,mt,Ft),oe(ce,Xe,Ne,$e,mt,Ft)}else if(dt){const mt=ve.getBoundingClientRect(),Ft=pt.getBoundingClientRect();pe(ce,Xe,Ne,ve,mt,Ft),oe(ce,Xe,Ne,pt,mt,Ft)}return{forward:He,backward:dt}})(me,ve,Ft,dt,mt);if(Fe.forEach(un=>{const vt=(0,a.c)();vt.addElement(un),me.addAnimation(vt);const At=(0,a.c)();At.addElement(un.querySelector("ion-title"));const ze=(0,a.c)(),at=Array.from(un.querySelectorAll("ion-buttons,[menuToggle]")),Et=un.closest("ion-header"),U=null==Et?void 0:Et.classList.contains("header-collapse-condense-inactive");let Qe;Qe=at.filter(Ft?jn=>{const Fn=jn.classList.contains("buttons-collapse");return Fn&&!U||!Fn}:jn=>!jn.classList.contains("buttons-collapse")),ze.addElement(Qe);const rn=(0,a.c)();rn.addElement(un.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const St=(0,a.c)();St.addElement(ae(un).querySelector(".toolbar-background"));const hn=(0,a.c)(),mn=un.querySelector("ion-back-button");if(mn&&hn.addElement(mn),vt.addAnimation([At,ze,rn,St,hn]),ze.fromTo(_e,.01,1),rn.fromTo(_e,.01,1),Ft)U||At.fromTo("transform",`translateX(${He})`,`translateX(${$e})`).fromTo(_e,.01,1),rn.fromTo("transform",`translateX(${He})`,`translateX(${$e})`),hn.fromTo(_e,.01,1);else if(Ke||At.fromTo("transform",`translateX(${pt})`,`translateX(${$e})`).fromTo(_e,.01,1),rn.fromTo("transform",`translateX(${pt})`,`translateX(${$e})`),St.beforeClearStyles([_e,"transform"]),(null==Et?void 0:Et.translucent)?St.fromTo("transform",ve?"translateX(-100%)":"translateX(100%)","translateX(0px)"):St.fromTo(_e,.01,"var(--opacity)"),ut||hn.fromTo(_e,.01,1),mn&&!ut){const Fn=(0,a.c)();Fn.addElement(ae(mn).querySelector(".button-text")).fromTo("transform",ve?"translateX(-100px)":"translateX(100px)","translateX(0px)"),vt.addAnimation(Fn)}}),mt){const un=(0,a.c)(),vt=mt.querySelector(":scope > ion-content"),At=mt.querySelectorAll(":scope > ion-header > ion-toolbar"),ze=mt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(vt||0!==At.length||0!==ze.length?(un.addElement(vt),un.addElement(ze)):un.addElement(mt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),me.addAnimation(un),Ft){un.beforeClearStyles([_e]).fromTo("transform",`translateX(${$e})`,ve?"translateX(-100%)":"translateX(100%)");const at=(0,J.g)(mt);me.afterAddWrite(()=>{"normal"===me.getDirection()&&at.style.setProperty("display","none")})}else un.fromTo("transform",`translateX(${$e})`,`translateX(${He})`).fromTo(_e,1,.8);if(vt){const at=ae(vt).querySelector(".transition-effect");if(at){const Et=at.querySelector(".transition-cover"),U=at.querySelector(".transition-shadow"),Qe=(0,a.c)(),rn=(0,a.c)(),St=(0,a.c)();Qe.addElement(at).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),rn.addElement(Et).beforeClearStyles([_e]).fromTo(_e,.1,0),St.addElement(U).beforeClearStyles([_e]).fromTo(_e,.7,.03),Qe.addAnimation([rn,St]),un.addAnimation([Qe])}}At.forEach(at=>{const Et=(0,a.c)();Et.addElement(at);const U=(0,a.c)();U.addElement(at.querySelector("ion-title"));const Qe=(0,a.c)(),rn=at.querySelectorAll("ion-buttons,[menuToggle]"),St=at.closest("ion-header"),hn=null==St?void 0:St.classList.contains("header-collapse-condense-inactive"),mn=Array.from(rn).filter(rr=>{const lr=rr.classList.contains("buttons-collapse");return lr&&!hn||!lr});Qe.addElement(mn);const jn=(0,a.c)(),Fn=at.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Fn.length>0&&jn.addElement(Fn);const Dn=(0,a.c)();Dn.addElement(ae(at).querySelector(".toolbar-background"));const er=(0,a.c)(),Br=at.querySelector("ion-back-button");if(Br&&er.addElement(Br),Et.addAnimation([U,Qe,jn,er,Dn]),me.addAnimation(Et),er.fromTo(_e,.99,0),Qe.fromTo(_e,.99,0),jn.fromTo(_e,.99,0),Ft){if(hn||U.fromTo("transform",`translateX(${$e})`,ve?"translateX(-100%)":"translateX(100%)").fromTo(_e,.99,0),jn.fromTo("transform",`translateX(${$e})`,ve?"translateX(-100%)":"translateX(100%)"),Dn.beforeClearStyles([_e,"transform"]),(null==St?void 0:St.translucent)?Dn.fromTo("transform","translateX(0px)",ve?"translateX(-100%)":"translateX(100%)"):Dn.fromTo(_e,"var(--opacity)",0),Br&&!Lt){const lr=(0,a.c)();lr.addElement(ae(Br).querySelector(".button-text")).fromTo("transform",`translateX(${$e})`,`translateX(${(ve?-124:124)+"px"})`),Et.addAnimation(lr)}}else hn||U.fromTo("transform",`translateX(${$e})`,`translateX(${He})`).fromTo(_e,.99,0).afterClearStyles([ke,_e]),jn.fromTo("transform",`translateX(${$e})`,`translateX(${He})`).afterClearStyles([ke,_e]),er.afterClearStyles([_e]),U.afterClearStyles([_e]),Qe.afterClearStyles([_e])})}return me}catch(Ne){throw Ne}}},8447:(On,Ct,L)=>{"use strict";L.r(Ct),L.d(Ct,{mdTransitionAnimation:()=>Ve});var a=L(8015),J=L(7249);L(2361);const Ve=(Me,ae)=>{const Ee="back"===ae.direction,pe=ae.leavingEl,ee=(0,J.g)(ae.enteringEl),ce=ee.querySelector("ion-toolbar"),Xe=(0,a.c)();if(Xe.addElement(ee).fill("both").beforeRemoveClass("ion-page-invisible"),Ee?Xe.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Xe.duration(ae.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ce){const Ne=(0,a.c)();Ne.addElement(ce),Xe.addAnimation(Ne)}if(pe&&Ee){Xe.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Ne=(0,a.c)();Ne.addElement((0,J.g)(pe)).onFinish(_e=>{1===_e&&Ne.elements.length>0&&Ne.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Xe.addAnimation(Ne)}return Xe}},1450:(On,Ct,L)=>{"use strict";L.d(Ct,{B:()=>at,a:()=>Ce,b:()=>Ee,c:()=>ce,d:()=>Fe,e:()=>Ne,f:()=>Se,g:()=>Lt,h:()=>ae,i:()=>vt,j:()=>Dt,k:()=>Ye,l:()=>oe,m:()=>pe,s:()=>ze});var a=L(5861),J=L(6254),Z=L(7593),Ve=L(1643);let Me=0;const ae=new WeakMap,we=Et=>({create:U=>_e(Et,U),dismiss:(U,Qe,rn)=>mt(document,U,Qe,Et,rn),getTop:()=>(0,a.Z)(function*(){return Ye(document,Et)})()}),Ce=we("ion-alert"),Ee=we("ion-action-sheet"),oe=we("ion-loading"),pe=we("ion-modal"),ce=we("ion-popover"),Ne=Et=>{"undefined"!=typeof document&&dt(document);const U=Me++;Et.overlayIndex=U,Et.hasAttribute("id")||(Et.id=`ion-overlay-${U}`)},_e=(Et,U)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(Et).then(()=>{const Qe=document.createElement(Et);return Qe.classList.add("overlay-hidden"),Object.assign(Qe,Object.assign(Object.assign({},U),{hasController:!0})),Ke(document).appendChild(Qe),new Promise(rn=>(0,Ve.c)(Qe,rn))}):Promise.resolve(),ke='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',$e="input:not([type=hidden]), textarea, button, select",Dt=(Et,U)=>{let Qe=Et.querySelector(ke);const rn=null==Qe?void 0:Qe.shadowRoot;rn&&(Qe=rn.querySelector($e)||Qe),Qe?(0,Ve.f)(Qe):U.focus()},pt=(Et,U)=>{const Qe=Array.from(Et.querySelectorAll(ke));let rn=Qe.length>0?Qe[Qe.length-1]:null;const St=null==rn?void 0:rn.shadowRoot;St&&(rn=St.querySelector($e)||rn),rn?rn.focus():U.focus()},dt=Et=>{0===Me&&(Me=1,Et.addEventListener("focus",U=>{((Et,U)=>{const Qe=Ye(U,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),rn=Et.target;Qe&&rn&&!Qe.classList.contains("ion-disable-focus-trap")&&(Qe.shadowRoot?(()=>{if(Qe.contains(rn))Qe.lastFocus=rn;else{const mn=Qe.lastFocus;Dt(Qe,Qe),mn===U.activeElement&&pt(Qe,Qe),Qe.lastFocus=U.activeElement}})():(()=>{if(Qe===rn)Qe.lastFocus=void 0;else{const mn=(0,Ve.g)(Qe);if(!mn.contains(rn))return;const jn=mn.querySelector(".ion-overlay-wrapper");if(!jn)return;if(jn.contains(rn))Qe.lastFocus=rn;else{const Fn=Qe.lastFocus;Dt(jn,Qe),Fn===U.activeElement&&pt(jn,Qe),Qe.lastFocus=U.activeElement}}})())})(U,Et)},!0),Et.addEventListener("ionBackButton",U=>{const Qe=Ye(Et);(null==Qe?void 0:Qe.backdropDismiss)&&U.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>Qe.dismiss(void 0,at))}),Et.addEventListener("keyup",U=>{if("Escape"===U.key){const Qe=Ye(Et);(null==Qe?void 0:Qe.backdropDismiss)&&Qe.dismiss(void 0,at)}}))},mt=(Et,U,Qe,rn,St)=>{const hn=Ye(Et,rn,St);return hn?hn.dismiss(U,Qe):Promise.reject("overlay does not exist")},Ye=(Et,U,Qe)=>{const rn=((Et,U)=>(void 0===U&&(U="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Et.querySelectorAll(U)).filter(Qe=>Qe.overlayIndex>0)))(Et,U).filter(St=>!(Et=>Et.classList.contains("overlay-hidden"))(St));return void 0===Qe?rn[rn.length-1]:rn.find(St=>St.id===Qe)},st=(Et=!1)=>{const Qe=Ke(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Qe||(Et?Qe.setAttribute("aria-hidden","true"):Qe.removeAttribute("aria-hidden"))},Fe=function(){var Et=(0,a.Z)(function*(U,Qe,rn,St,hn){var mn,jn;if(U.presented)return;st(!0),U.presented=!0,U.willPresent.emit(),null===(mn=U.willPresentShorthand)||void 0===mn||mn.emit();const Fn=(0,J.b)(U),Dn=U.enterAnimation?U.enterAnimation:J.c.get(Qe,"ios"===Fn?rn:St);(yield ut(U,Dn,U.el,hn))&&(U.didPresent.emit(),null===(jn=U.didPresentShorthand)||void 0===jn||jn.emit()),"ION-TOAST"!==U.el.tagName&&me(U.el),U.keyboardClose&&U.el.focus()});return function(Qe,rn,St,hn,mn){return Et.apply(this,arguments)}}(),me=function(){var Et=(0,a.Z)(function*(U){let Qe=document.activeElement;if(!Qe)return;const rn=null==Qe?void 0:Qe.shadowRoot;rn&&(Qe=rn.querySelector($e)||Qe),yield U.onDidDismiss(),Qe.focus()});return function(Qe){return Et.apply(this,arguments)}}(),Se=function(){var Et=(0,a.Z)(function*(U,Qe,rn,St,hn,mn,jn){var Fn,Dn;if(!U.presented)return!1;st(!1),U.presented=!1;try{U.el.style.setProperty("pointer-events","none"),U.willDismiss.emit({data:Qe,role:rn}),null===(Fn=U.willDismissShorthand)||void 0===Fn||Fn.emit({data:Qe,role:rn});const er=(0,J.b)(U),Br=U.leaveAnimation?U.leaveAnimation:J.c.get(St,"ios"===er?hn:mn);"gesture"!==rn&&(yield ut(U,Br,U.el,jn)),U.didDismiss.emit({data:Qe,role:rn}),null===(Dn=U.didDismissShorthand)||void 0===Dn||Dn.emit({data:Qe,role:rn}),ae.delete(U),U.el.classList.add("overlay-hidden"),U.el.style.removeProperty("pointer-events")}catch(er){console.error(er)}return U.el.remove(),!0});return function(Qe,rn,St,hn,mn,jn,Fn){return Et.apply(this,arguments)}}(),Ke=Et=>Et.querySelector("ion-app")||Et.body,ut=function(){var Et=(0,a.Z)(function*(U,Qe,rn,St){rn.classList.remove("overlay-hidden");const mn=Qe(U.el,St);(!U.animated||!J.c.getBoolean("animated",!0))&&mn.duration(0),U.keyboardClose&&mn.beforeAddWrite(()=>{const Fn=rn.ownerDocument.activeElement;(null==Fn?void 0:Fn.matches("input,ion-input, ion-textarea"))&&Fn.blur()});const jn=ae.get(U)||[];return ae.set(U,[...jn,mn]),yield mn.play(),!0});return function(Qe,rn,St,hn){return Et.apply(this,arguments)}}(),Lt=(Et,U)=>{let Qe;const rn=new Promise(St=>Qe=St);return un(Et,U,St=>{Qe(St.detail)}),rn},un=(Et,U,Qe)=>{const rn=St=>{(0,Ve.b)(Et,U,rn),Qe(St)};(0,Ve.a)(Et,U,rn)},vt=Et=>"cancel"===Et||Et===at,At=Et=>Et(),ze=(Et,U)=>{if("function"==typeof Et)return J.c.get("_zoneGate",At)(()=>{try{return Et(U)}catch(rn){throw rn}})},at="backdrop"},6738:(On,Ct,L)=>{"use strict";L.d(Ct,{H:()=>Ar,a:()=>Qe,b:()=>Ae,c:()=>lt,d:()=>_n,g:()=>Un,h:()=>lr,r:()=>$e});var a=L(5861);let Me,ae,Z=0,Ve=!1,we=!1;const Ce="undefined"!=typeof window?window:{},Ee=Ce.CSS,oe=Ce.document||{head:{}},pe={$flags$:0,$resourcesUrl$:"",jmp:xe=>xe(),raf:xe=>requestAnimationFrame(xe),ael:(xe,Te,$t,Ot)=>xe.addEventListener(Te,$t,Ot),rel:(xe,Te,$t,Ot)=>xe.removeEventListener(Te,$t,Ot)},ee=(()=>(oe.head.attachShadow+"").indexOf("[native")>-1)(),ce=xe=>Promise.resolve(xe),Xe=(()=>{try{return new CSSStyleSheet,!0}catch(xe){}return!1})(),Ne={},_e=new WeakMap,ke=xe=>_e.get(xe),$e=(xe,Te)=>_e.set(Te.$lazyInstance$=xe,Te),ve=(xe,Te)=>Te in xe,pt=xe=>console.error(xe),He=new Map,mt=new Map,Ft=[],Ye=[],st=[],Fe=(xe,Te)=>$t=>{xe.push($t),Ve||(Ve=!0,Te&&4&pe.$flags$?ut(Ke):pe.raf(Ke))},Se=(xe,Te)=>{let $t=0,Ot=0;for(;$t<xe.length&&(Ot=performance.now())<Te;)try{xe[$t++](Ot)}catch(Yt){pt(Yt)}$t===xe.length?xe.length=0:0!==$t&&xe.splice(0,$t)},Ke=()=>{Z++,(xe=>{for(let Te=0;Te<xe.length;Te++)try{xe[Te](performance.now())}catch($t){pt($t)}xe.length=0})(Ft);const xe=2==(6&pe.$flags$)?performance.now()+10*Math.ceil(Z*(1/22)):1/0;Se(Ye,xe),Se(st,xe),Ye.length>0&&(st.push(...Ye),Ye.length=0),(Ve=Ft.length+Ye.length+st.length>0)?pe.raf(Ke):Z=0},ut=xe=>ce().then(xe),Lt=Fe(Ft,!1),un=Fe(Ye,!0),vt={},Et=xe=>"object"==(xe=typeof xe)||"function"===xe,Qe=()=>Ee&&Ee.supports&&Ee.supports("color","var(--c)")?ce():L.e(4952).then(L.t.bind(L,9723,23)).then(()=>(pe.$cssShim$=Ce.__cssshim)?pe.$cssShim$.i():0),Fn=new WeakMap,rr=(xe,Te)=>"sc-"+xe,lr=(xe,Te,...$t)=>{let Ot=null,Yt=!1,Qt=!1,an=[];const En=cn=>{for(let Pn=0;Pn<cn.length;Pn++)Ot=cn[Pn],Array.isArray(Ot)?En(Ot):null!=Ot&&"boolean"!=typeof Ot&&((Yt="function"!=typeof xe&&!Et(Ot))&&(Ot=String(Ot)),Yt&&Qt?an[an.length-1].$text$+=Ot:an.push(Yt?pn(null,Ot):Ot),Qt=Yt)};if(En($t),Te){const cn=Te.className||Te.class;cn&&(Te.class="object"!=typeof cn?cn:Object.keys(cn).filter(Pn=>cn[Pn]).join(" "))}const ft=pn(xe,null);return ft.$attrs$=Te,an.length>0&&(ft.$children$=an),ft},pn=(xe,Te)=>({$flags$:0,$tag$:xe,$text$:Te,$elm$:null,$children$:null,$attrs$:null}),Ar={},Ir=(xe,Te,$t,Ot,Yt,Qt)=>{if($t!==Ot){let an=ve(xe,Te),En=Te.toLowerCase();if("class"===Te){const ft=xe.classList,cn=ar($t),Pn=ar(Ot);ft.remove(...cn.filter(hr=>hr&&!Pn.includes(hr))),ft.add(...Pn.filter(hr=>hr&&!cn.includes(hr)))}else if("style"===Te){for(const ft in $t)(!Ot||null==Ot[ft])&&(ft.includes("-")?xe.style.removeProperty(ft):xe.style[ft]="");for(const ft in Ot)(!$t||Ot[ft]!==$t[ft])&&(ft.includes("-")?xe.style.setProperty(ft,Ot[ft]):xe.style[ft]=Ot[ft])}else if("ref"===Te)Ot&&Ot(xe);else if(an||"o"!==Te[0]||"n"!==Te[1]){const ft=Et(Ot);if((an||ft&&null!==Ot)&&!Yt)try{if(xe.tagName.includes("-"))xe[Te]=Ot;else{let cn=null==Ot?"":Ot;"list"===Te?an=!1:(null==$t||xe[Te]!=cn)&&(xe[Te]=cn)}}catch(cn){}null==Ot||!1===Ot?xe.removeAttribute(Te):(!an||4&Qt||Yt)&&!ft&&xe.setAttribute(Te,Ot=!0===Ot?"":Ot)}else Te="-"===Te[2]?Te.slice(3):ve(Ce,En)?En.slice(2):En[2]+Te.slice(3),$t&&pe.rel(xe,Te,$t,!1),Ot&&pe.ael(xe,Te,Ot,!1)}},ur=/\s/,ar=xe=>xe?xe.split(ur):[],gt=(xe,Te,$t,Ot)=>{const Yt=11===Te.$elm$.nodeType&&Te.$elm$.host?Te.$elm$.host:Te.$elm$,Qt=xe&&xe.$attrs$||vt,an=Te.$attrs$||vt;for(Ot in Qt)Ot in an||Ir(Yt,Ot,Qt[Ot],void 0,$t,Te.$flags$);for(Ot in an)Ir(Yt,Ot,Qt[Ot],an[Ot],$t,Te.$flags$)},qe=(xe,Te,$t,Ot)=>{let an,En,Yt=Te.$children$[$t],Qt=0;if(null!==Yt.$text$)an=Yt.$elm$=oe.createTextNode(Yt.$text$);else{if(we||(we="svg"===Yt.$tag$),an=Yt.$elm$=oe.createElementNS(we?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Yt.$tag$),we&&"foreignObject"===Yt.$tag$&&(we=!1),gt(null,Yt,we),(xe=>null!=xe)(Me)&&an["s-si"]!==Me&&an.classList.add(an["s-si"]=Me),Yt.$children$)for(Qt=0;Qt<Yt.$children$.length;++Qt)En=qe(xe,Yt,Qt),En&&an.appendChild(En);"svg"===Yt.$tag$?we=!1:"foreignObject"===an.tagName&&(we=!0)}return an},Ie=(xe,Te,$t,Ot,Yt,Qt)=>{let En,an=xe;for(an.shadowRoot&&an.tagName===ae&&(an=an.shadowRoot);Yt<=Qt;++Yt)Ot[Yt]&&(En=qe(null,$t,Yt),En&&(Ot[Yt].$elm$=En,an.insertBefore(En,Te)))},Kt=(xe,Te,$t,Ot,Yt)=>{for(;Te<=$t;++Te)(Ot=xe[Te])&&(Yt=Ot.$elm$,Xn(Ot),Yt.remove())},nn=(xe,Te)=>xe.$tag$===Te.$tag$,Tn=(xe,Te)=>{const $t=Te.$elm$=xe.$elm$,Ot=xe.$children$,Yt=Te.$children$,Qt=Te.$tag$,an=Te.$text$;null===an?(we="svg"===Qt||"foreignObject"!==Qt&&we,gt(xe,Te,we),null!==Ot&&null!==Yt?((xe,Te,$t,Ot)=>{let Xr,Yt=0,Qt=0,an=Te.length-1,En=Te[0],ft=Te[an],cn=Ot.length-1,Pn=Ot[0],hr=Ot[cn];for(;Yt<=an&&Qt<=cn;)null==En?En=Te[++Yt]:null==ft?ft=Te[--an]:null==Pn?Pn=Ot[++Qt]:null==hr?hr=Ot[--cn]:nn(En,Pn)?(Tn(En,Pn),En=Te[++Yt],Pn=Ot[++Qt]):nn(ft,hr)?(Tn(ft,hr),ft=Te[--an],hr=Ot[--cn]):nn(En,hr)?(Tn(En,hr),xe.insertBefore(En.$elm$,ft.$elm$.nextSibling),En=Te[++Yt],hr=Ot[--cn]):nn(ft,Pn)?(Tn(ft,Pn),xe.insertBefore(ft.$elm$,En.$elm$),ft=Te[--an],Pn=Ot[++Qt]):(Xr=qe(Te&&Te[Qt],$t,Qt),Pn=Ot[++Qt],Xr&&En.$elm$.parentNode.insertBefore(Xr,En.$elm$));Yt>an?Ie(xe,null==Ot[cn+1]?null:Ot[cn+1].$elm$,$t,Ot,Qt,cn):Qt>cn&&Kt(Te,Yt,an)})($t,Ot,Te,Yt):null!==Yt?(null!==xe.$text$&&($t.textContent=""),Ie($t,null,Te,Yt,0,Yt.length-1)):null!==Ot&&Kt(Ot,0,Ot.length-1),we&&"svg"===Qt&&(we=!1)):xe.$text$!==an&&($t.data=an)},Xn=xe=>{xe.$attrs$&&xe.$attrs$.ref&&xe.$attrs$.ref(null),xe.$children$&&xe.$children$.forEach(Xn)},Ln=(xe,Te)=>{Te&&!xe.$onRenderResolve$&&Te["s-p"].push(new Promise($t=>xe.$onRenderResolve$=$t))},Hn=(xe,Te,$t,Ot)=>{if(Te.$flags$|=16,4&Te.$flags$)return void(Te.$flags$|=512);const an=Te.$lazyInstance$,En=()=>Er(xe,Te,$t,an,Ot);return Ln(Te,Te.$ancestorComponent$),Ot&&(Te.$flags$|=256,Te.$queuedListeners$&&(Te.$queuedListeners$.forEach(([cn,Pn])=>Rn(an,cn,Pn)),Te.$queuedListeners$=null)),Vt(void 0,()=>un(En))},Er=(xe,Te,$t,Ot,Yt)=>{const an=xe["s-rc"];Yt&&((xe,Te,$t)=>{const Yt=((xe,Te,$t,Ot)=>{let Yt=rr(Te.$tagName$),Qt=mt.get(Yt);if(xe=11===xe.nodeType?xe:oe,Qt)if("string"==typeof Qt){let En,an=Fn.get(xe=xe.head||xe);if(an||Fn.set(xe,an=new Set),!an.has(Yt)){if(pe.$cssShim$){En=pe.$cssShim$.createHostStyle(Ot,Yt,Qt,!!(10&Te.$flags$));const ft=En["s-sc"];ft&&(Yt=ft,an=null)}else En=oe.createElement("style"),En.innerHTML=Qt;xe.insertBefore(En,xe.querySelector("link")),an&&an.add(Yt)}}else xe.adoptedStyleSheets.includes(Qt)||(xe.adoptedStyleSheets=[...xe.adoptedStyleSheets,Qt]);return Yt})(ee&&xe.shadowRoot?xe.shadowRoot:xe.getRootNode(),Te,0,xe);10&Te.$flags$&&(xe["s-sc"]=Yt,xe.classList.add(Yt+"-h"))})(xe,$t);((xe,Te,$t,Ot)=>{ae=xe.tagName;const Yt=Te.$vnode$||pn(null,null),Qt=(xe=>xe&&xe.$tag$===Ar)(Ot)?Ot:lr(null,null,Ot);Qt.$tag$=null,Qt.$flags$|=4,Te.$vnode$=Qt,Qt.$elm$=Yt.$elm$=xe.shadowRoot||xe,Me=xe["s-sc"],Tn(Yt,Qt)})(xe,Te,0,Cr(Ot)),pe.$cssShim$&&pe.$cssShim$.updateHost(xe),Te.$flags$&=-17,Te.$flags$|=2,an&&(an.forEach(ft=>ft()),xe["s-rc"]=void 0);{const ft=xe["s-p"],cn=()=>yn(xe,Te,$t);0===ft.length?cn():(Promise.all(ft).then(cn),Te.$flags$|=4,ft.length=0)}},Cr=(xe,Te)=>{try{xe=xe.render()}catch($t){pt($t)}return xe},yn=(xe,Te,$t)=>{const Yt=Te.$lazyInstance$,Qt=Te.$ancestorComponent$;64&Te.$flags$||(Te.$flags$|=64,wn(xe),Rn(Yt,"componentDidLoad"),Te.$onReadyResolve$(xe),Qt||cr()),Te.$onInstanceResolve$(xe),Te.$onRenderResolve$&&(Te.$onRenderResolve$(),Te.$onRenderResolve$=void 0),512&Te.$flags$&&ut(()=>Hn(xe,Te,$t,!1)),Te.$flags$&=-517},cr=xe=>{wn(oe.documentElement),pe.$flags$|=2},Rn=(xe,Te,$t)=>{if(xe&&xe[Te])try{return xe[Te]($t)}catch(Ot){pt(Ot)}},Vt=(xe,Te)=>xe&&xe.then?xe.then(Te):Te(),wn=xe=>xe.classList.add("hydrated"),_t=(xe,Te,$t)=>{if(Te.$members$){const Ot=Object.entries(Te.$members$),Yt=xe.prototype;if(Ot.forEach(([Qt,[an]])=>{31&an||2&$t&&32&an?Object.defineProperty(Yt,Qt,{get(){return((xe,Te)=>ke(this).$instanceValues$.get(Te))(0,Qt)},set(En){((xe,Te,$t,Ot)=>{const Yt=ke(xe),Qt=Yt.$hostElement$,an=Yt.$instanceValues$.get(Te),En=Yt.$flags$,ft=Yt.$lazyInstance$;$t=((xe,Te)=>null==xe||Et(xe)?xe:4&Te?"false"!==xe&&(""===xe||!!xe):2&Te?parseFloat(xe):1&Te?String(xe):xe)($t,Ot.$members$[Te][0]),$t!==an&&(!(8&En)||void 0===an)&&(Yt.$instanceValues$.set(Te,$t),ft&&2==(18&En)&&Hn(Qt,Yt,Ot,!1))})(this,Qt,En,Te)},configurable:!0,enumerable:!0}):1&$t&&64&an&&Object.defineProperty(Yt,Qt,{value(...En){const ft=ke(this);return ft.$onInstancePromise$.then(()=>ft.$lazyInstance$[Qt](...En))}})}),1&$t){const Qt=new Map;Yt.attributeChangedCallback=function(an,En,ft){pe.jmp(()=>{const cn=Qt.get(an);this[cn]=(null!==ft||"boolean"!=typeof this[cn])&&ft})},xe.observedAttributes=Ot.filter(([an,En])=>15&En[0]).map(([an,En])=>{const ft=En[1]||an;return Qt.set(ft,an),ft})}}return xe},dn=function(){var xe=(0,a.Z)(function*(Te,$t,Ot,Yt,Qt){if(0==(32&$t.$flags$)){$t.$flags$|=32;{if(Qt=((xe,Te,$t)=>{const Ot=xe.$tagName$.replace(/-/g,"_"),Yt=xe.$lazyBundleIds$,Qt=He.get(Yt);return Qt?Qt[Ot]:L(5899)(`./${Yt}.entry.js`).then(an=>(He.set(Yt,an),an[Ot]),pt)})(Ot),Qt.then){const Pn=()=>{};Qt=yield Qt,Pn()}Qt.isProxied||(_t(Qt,Ot,2),Qt.isProxied=!0);const cn=()=>{};$t.$flags$|=8;try{new Qt($t)}catch(Pn){pt(Pn)}$t.$flags$&=-9,cn()}const ft=rr(Ot.$tagName$);if(!mt.has(ft)&&Qt.style){const cn=()=>{};let Pn=Qt.style;8&Ot.$flags$&&(Pn=yield L.e(5487).then(L.bind(L,5487)).then(hr=>hr.scopeCss(Pn,ft,!1))),((xe,Te,$t)=>{let Ot=mt.get(xe);Xe&&$t?(Ot=Ot||new CSSStyleSheet,Ot.replace(Te)):Ot=Te,mt.set(xe,Ot)})(ft,Pn,!!(1&Ot.$flags$)),cn()}}const an=$t.$ancestorComponent$,En=()=>Hn(Te,$t,Ot,!0);an&&an["s-rc"]?an["s-rc"].push(En):En()});return function($t,Ot,Yt,Qt,an){return xe.apply(this,arguments)}}(),tt=(xe,Te)=>{if(0==(1&pe.$flags$)){const $t=()=>{},Ot=ke(xe);if(Te.$listeners$&&(Ot.$rmListeners$=((xe,Te,$t)=>{Te.$queuedListeners$=Te.$queuedListeners$||[];const Ot=$t.map(([Yt,Qt,an])=>{const En=((xe,Te)=>32&Te?oe.body:xe)(xe,Yt),ft=((xe,Te)=>$t=>{256&xe.$flags$?xe.$lazyInstance$[Te]($t):xe.$queuedListeners$.push([Te,$t])})(Te,an),cn=(xe=>0!=(2&xe))(Yt);return pe.ael(En,Qt,ft,cn),()=>pe.rel(En,Qt,ft,cn)});return()=>Ot.forEach(Yt=>Yt())})(xe,Ot,Te.$listeners$)),!(1&Ot.$flags$)){Ot.$flags$|=1;{let Yt=xe;for(;Yt=Yt.parentNode||Yt.host;)if(Yt["s-p"]){Ln(Ot,Ot.$ancestorComponent$=Yt);break}}Te.$members$&&Object.entries(Te.$members$).forEach(([Yt,[Qt]])=>{if(31&Qt&&xe.hasOwnProperty(Yt)){const an=xe[Yt];delete xe[Yt],xe[Yt]=an}}),ut(()=>dn(xe,Ot,Te))}$t()}},Ae=(xe,Te={})=>{const Ot=[],Yt=Te.exclude||[],Qt=Ce.customElements,an=oe.head,En=an.querySelector("meta[charset]"),ft=oe.createElement("style"),cn=[];let Pn,hr=!0;Object.assign(pe,Te),pe.$resourcesUrl$=new URL(Te.resourcesUrl||"./",oe.baseURI).href,Te.syncQueue&&(pe.$flags$|=4),xe.forEach(Xr=>Xr[1].forEach(Mr=>{const ei={$flags$:Mr[0],$tagName$:Mr[1],$members$:Mr[2],$listeners$:Mr[3]};ei.$members$=Mr[2],ei.$listeners$=Mr[3],!ee&&1&ei.$flags$&&(ei.$flags$|=8);const Or=ei.$tagName$,si=class extends HTMLElement{constructor(pi){super(pi),(xe=>{const Te={$flags$:0,$hostElement$:xe,$instanceValues$:new Map};Te.$onInstancePromise$=new Promise($t=>Te.$onInstanceResolve$=$t),Te.$onReadyPromise$=new Promise($t=>Te.$onReadyResolve$=$t),xe["s-p"]=[],xe["s-rc"]=[],_e.set(xe,Te)})(pi=this),1&ei.$flags$&&(ee?pi.attachShadow({mode:"open"}):"shadowRoot"in pi||(pi.shadowRoot=pi))}connectedCallback(){Pn&&(clearTimeout(Pn),Pn=null),hr?cn.push(this):pe.jmp(()=>tt(this,ei))}disconnectedCallback(){pe.jmp(()=>(xe=>{if(0==(1&pe.$flags$)){const Te=ke(xe),$t=Te.$lazyInstance$;Te.$rmListeners$&&(Te.$rmListeners$(),Te.$rmListeners$=void 0),pe.$cssShim$&&pe.$cssShim$.removeHost(xe),Rn($t,"componentDidUnload")}})(this))}forceUpdate(){((xe,Te)=>{{const $t=ke(xe);$t.$hostElement$.isConnected&&2==(18&$t.$flags$)&&Hn(xe,$t,Te,!1)}})(this,ei)}componentOnReady(){return ke(this).$onReadyPromise$}};ei.$lazyBundleIds$=Xr[0],!Yt.includes(Or)&&!Qt.get(Or)&&(Ot.push(Or),Qt.define(Or,_t(si,ei,1)))})),ft.innerHTML=Ot+"{visibility:hidden}.hydrated{visibility:inherit}",ft.setAttribute("data-styles",""),an.insertBefore(ft,En?En.nextSibling:an.firstChild),hr=!1,cn.length>0?cn.forEach(Xr=>Xr.connectedCallback()):pe.jmp(()=>Pn=setTimeout(cr,30))},lt=(xe,Te,$t)=>{const Ot=Un(xe);return{emit:Yt=>{const Qt=new CustomEvent(Te,{bubbles:!!(4&$t),composed:!!(2&$t),cancelable:!!(1&$t),detail:Yt});return Ot.dispatchEvent(Qt),Qt}}},_n=(xe,Te)=>Te in Ne?Ne[Te]:"window"===Te?Ce:"document"===Te?oe:"isServer"!==Te&&"isPrerender"!==Te&&("isClient"===Te||("resourcesUrl"===Te||"publicPath"===Te?(xe=>{const Te=new URL(".",pe.$resourcesUrl$);return Te.origin!==Ce.location.origin?Te.href:Te.pathname})():"queue"===Te?{write:un,read:Lt,tick:{then:$t=>ut($t)}}:void 0)),Un=xe=>ke(xe).$hostElement$},539:(On,Ct,L)=>{"use strict";var a=L(2313),J=L(5e3),Z=L(6738),Me=L(3442),ae=L(4586),we=L(4433);let Ce=(()=>{class h{constructor(){}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275cmp=J.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(c,g){1&c&&(J.TgZ(0,"ion-app"),J._UZ(1,"ion-router-outlet"),J.qZA())},directives:[we.dr,we.jP],styles:[""]}),h})();const Ee=[{path:"home",loadChildren:()=>L.e(4851).then(L.bind(L,4851)).then(h=>h.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([L.e(8592),L.e(4987)]).then(L.bind(L,4987)).then(h=>h.LoginPageModule)},{path:"movielist",loadChildren:()=>Promise.all([L.e(8592),L.e(4581)]).then(L.bind(L,4581)).then(h=>h.MovielistPageModule)},{path:"moviedetails",loadChildren:()=>L.e(8592).then(L.bind(L,3447)).then(h=>h.MoviedetailsPageModule)},{path:"moviedetails/:id",loadChildren:()=>L.e(8592).then(L.bind(L,3447)).then(h=>h.MoviedetailsPageModule)},{path:"movie",loadChildren:()=>Promise.all([L.e(8592),L.e(3893)]).then(L.bind(L,3893)).then(h=>h.MoviePageModule)},{path:"addmovie",loadChildren:()=>Promise.all([L.e(8592),L.e(2693)]).then(L.bind(L,2693)).then(h=>h.AddmoviePageModule)},{path:"register",loadChildren:()=>Promise.all([L.e(8592),L.e(7826)]).then(L.bind(L,7826)).then(h=>h.RegisterPageModule)}];let oe=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h}),h.\u0275inj=J.cJS({imports:[[Me.Bz.forRoot(Ee,{preloadingStrategy:Me.wm})],Me.Bz]}),h})();var pe=L(4182),ee=L(2011);const ce_firebaseConfig={apiKey:"AIzaSyBwxBW0dv7SoiyVFY9PiQvurrnIv9_47v4",authDomain:"pelicula-5fbae.firebaseapp.com",projectId:"pelicula-5fbae",storageBucket:"pelicula-5fbae.appspot.com",messagingSenderId:"722497334561",appId:"1:722497334561:web:9e8817668e053fa9016260",measurementId:"G-R8RFF6PC1Y"};var Xe=L(2796),Ne=L(4941),_e=L(353),ke=L(2916),$e=L(1086),Dt=L(6787),ve=L(4850),pt=L(2474),He=L(7545),dt=L(2014),mt=L(5778),Ft=L(826),Ye=L(448);class Fe{constructor(u,c){this.observables=u,this.project=c}call(u,c){return c.subscribe(new me(u,this.observables,this.project))}}class me extends Ft.L{constructor(u,c,g){super(u),this.observables=c,this.project=g,this.toRespond=[];const T=c.length;this.values=new Array(T);for(let O=0;O<T;O++)this.toRespond.push(O);for(let O=0;O<T;O++)this.add((0,Ye.D)(this,c[O],void 0,O))}notifyNext(u,c,g){this.values[g]=c;const T=this.toRespond;if(T.length>0){const O=T.indexOf(g);-1!==O&&T.splice(O,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const c=[u,...this.values];this.project?this._tryProject(c):this.destination.next(c)}}_tryProject(u){let c;try{c=this.project.apply(this,u)}catch(g){return void this.destination.error(g)}this.destination.next(c)}}var Se=L(3489);class ut{constructor(u){this.predicate=u}call(u,c){return c.subscribe(new Lt(u,this.predicate))}}class Lt extends Se.L{constructor(u,c){super(u),this.predicate=c,this.skipping=!0,this.index=0}_next(u){const c=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||c.next(u)}tryCallPredicate(u){try{const c=this.predicate(u,this.index++);this.skipping=Boolean(c)}catch(c){this.destination.error(c)}}}var un=L(6351),At=(L(820),L(3942)),ze=L(4859),at=L(5861),Et=L(9681),U=L(2090),Qe=L(1877);const rn="@firebase/database";let hn="";function mn(h){hn=h}class jn{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,U.Pz)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,U.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Fn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,U.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Dn=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new jn(u)}}catch(u){}return new Fn},er=Dn("localStorage"),Br=Dn("sessionStorage"),rr=new Qe.Yd("@firebase/database"),lr=function(){let h=1;return function(){return h++}}(),pn=function(h){const u=(0,U.dS)(h),c=new U.gQ;c.update(u);const g=c.digest();return U.US.encodeByteArray(g)},Ar=function(...h){let u="";for(let c=0;c<h.length;c++){const g=h[c];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?u+=Ar.apply(null,g):u+="object"==typeof g?(0,U.Pz)(g):g,u+=" "}return u};let vr=null,Ir=!0;const ur=function(h,u){(0,U.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(rr.logLevel=Qe.in.VERBOSE,vr=rr.log.bind(rr),u&&Br.set("logging_enabled",!0)):"function"==typeof h?vr=h:(vr=null,Br.remove("logging_enabled"))},ar=function(...h){if(!0===Ir&&(Ir=!1,null===vr&&!0===Br.get("logging_enabled")&&ur(!0)),vr){const u=Ar.apply(null,h);vr(u)}},gt=function(h){return function(...u){ar(h,...u)}},qe=function(...h){const u="FIREBASE INTERNAL ERROR: "+Ar(...h);rr.error(u)},Ie=function(...h){const u=`FIREBASE FATAL ERROR: ${Ar(...h)}`;throw rr.error(u),new Error(u)},Kt=function(...h){const u="FIREBASE WARNING: "+Ar(...h);rr.warn(u)},nn=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Xn="[MIN_NAME]",Zn="[MAX_NAME]",Ln=function(h,u){if(h===u)return 0;if(h===Xn||u===Zn)return-1;if(u===Xn||h===Zn)return 1;{const c=We(h),g=We(u);return null!==c?null!==g?c-g==0?h.length-u.length:c-g:-1:null!==g?1:h<u?-1:1}},Hn=function(h,u){return h===u?0:h<u?-1:1},Er=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,U.Pz)(u))},Cr=function(h){if("object"!=typeof h||null===h)return(0,U.Pz)(h);const u=[];for(const g in h)u.push(g);u.sort();let c="{";for(let g=0;g<u.length;g++)0!==g&&(c+=","),c+=(0,U.Pz)(u[g]),c+=":",c+=Cr(h[u[g]]);return c+="}",c},yn=function(h,u){const c=h.length;if(c<=u)return[h];const g=[];for(let T=0;T<c;T+=u)g.push(h.substring(T,T+u>c?c:T+u));return g};function Wn(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const cr=function(h){(0,U.hu)(!nn(h),"Invalid JSON number");const g=1023;let T,O,z,he,Re;0===h?(O=0,z=0,T=1/h==-1/0?1:0):(T=h<0,(h=Math.abs(h))>=Math.pow(2,1-g)?(he=Math.min(Math.floor(Math.log(h)/Math.LN2),g),O=he+g,z=Math.round(h*Math.pow(2,52-he)-Math.pow(2,52))):(O=0,z=Math.round(h/Math.pow(2,-1074))));const et=[];for(Re=52;Re;Re-=1)et.push(z%2?1:0),z=Math.floor(z/2);for(Re=11;Re;Re-=1)et.push(O%2?1:0),O=Math.floor(O/2);et.push(T?1:0),et.reverse();const Wt=et.join("");let Bt="";for(Re=0;Re<64;Re+=8){let gn=parseInt(Wt.substr(Re,8),2).toString(16);1===gn.length&&(gn="0"+gn),Bt+=gn}return Bt.toLowerCase()},Yn=new RegExp("^-?(0*)\\d{1,10}$"),Kn=-2147483648,Vn=2147483647,We=function(h){if(Yn.test(h)){const u=Number(h);if(u>=Kn&&u<=Vn)return u}return null},De=function(h){try{h()}catch(u){setTimeout(()=>{throw Kt("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Rt=function(h,u){const c=setTimeout(h,u);return"object"==typeof c&&c.unref&&c.unref(),c};class _t{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(g=>this.appCheck=g)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,g)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,g):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(g=>g.addTokenListener(u))}notifyForInvalidToken(){Kt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dn{constructor(u,c,g){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(T=>this.auth_=T)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(ar("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,g)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,g):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kt(u)}}let tt=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Un=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ot="websocket",Yt="long_polling";class Qt{constructor(u,c,g,T,O=!1,z="",he=!1){this.secure=c,this.namespace=g,this.webSocketOnly=T,this.nodeAdmin=O,this.persistenceKey=z,this.includeNamespaceInQueryParams=he,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=er.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&er.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function En(h,u,c){let g;if((0,U.hu)("string"==typeof u,"typeof type must == string"),(0,U.hu)("object"==typeof c,"typeof params must == object"),u===Ot)g=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==Yt)throw new Error("Unknown connection type: "+u);g=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function an(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const T=[];return Wn(c,(O,z)=>{T.push(O+"="+z)}),g+T.join("&")}class ft{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,U.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,U.p$)(this.counters_)}}const cn={},Pn={};function hr(h){const u=h.toString();return cn[u]||(cn[u]=new ft),cn[u]}class Mr{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let T=0;T<g.length;++T)g[T]&&De(()=>{this.onMessage_(g[T])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Oe{constructor(u,c,g,T,O,z,he){this.connId=u,this.repoInfo=c,this.applicationId=g,this.appCheckToken=T,this.authToken=O,this.transportSessionId=z,this.lastSessionId=he,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gt(u),this.stats_=hr(c),this.urlFn=Re=>(this.appCheckToken&&(Re.ac=this.appCheckToken),En(c,Yt,Re))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Mr(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,U.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yt((...O)=>{const[z,he,Re,et,Wt]=O;if(this.incrementIncomingBytes_(O),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===z)this.id=he,this.password=Re;else{if("close"!==z)throw new Error("Unrecognized command received: "+z);he?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(he,()=>{this.onClosed_()})):this.onClosed_()}},(...O)=>{const[z,he]=O;this.incrementIncomingBytes_(O),this.myPacketOrderer.handleResponse(z,he)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(g.r="f");const T=this.urlFn(g);this.log_("Connecting via long-poll to "+T),this.scriptTagHolder.addTag(T,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oe.forceAllow_=!0}static forceDisallow(){Oe.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!Oe.forceAllow_&&(Oe.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,U.Pz)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const g=(0,U.h$)(c),T=yn(g,1840);for(let O=0;O<T.length;O++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,T.length,T[O]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=u,g.pw=c,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,U.Pz)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class yt{constructor(u,c,g,T){if(this.onDisconnect=g,this.urlFn=T,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=lr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=yt.createIFrame_();let O="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(O='<script>document.domain="'+document.domain+'";<\/script>');const z="<html><body>"+O+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(z),this.myIFrame.doc.close()}catch(he){ar("frame writing exception"),he.stack&&ar(he.stack),ar(he)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||ar("No IE domain setting required")}catch(c){const g=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),g="",T=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const z=this.pendingSegs.shift();g=g+"&seg"+T+"="+z.seg+"&ts"+T+"="+z.ts+"&d"+T+"="+z.d,T++}return c+=g,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,g){this.pendingSegs.push({seg:u,ts:c,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const g=()=>{this.outstandingRequests.delete(c),this.newRequest_()},T=setTimeout(g,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(T),g()})}addTag(u,c){(0,U.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=u,g.onload=g.onreadystatechange=function(){const T=g.readyState;(!T||"loaded"===T||"complete"===T)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),c())},g.onerror=()=>{ar("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch(g){}},Math.floor(1))}}let kt=null;"undefined"!=typeof MozWebSocket?kt=MozWebSocket:"undefined"!=typeof WebSocket&&(kt=WebSocket);let Nn=(()=>{class h{constructor(c,g,T,O,z,he,Re){this.connId=c,this.applicationId=T,this.appCheckToken=O,this.authToken=z,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gt(this.connId),this.stats_=hr(g),this.connURL=h.connectionURL_(g,he,Re,O),this.nodeAdmin=g.nodeAdmin}static connectionURL_(c,g,T,O){const z={v:"5"};return!(0,U.Yr)()&&"undefined"!=typeof location&&location.hostname&&Un.test(location.hostname)&&(z.r="f"),g&&(z.s=g),T&&(z.ls=T),O&&(z.ac=O),En(c,Ot,z)}open(c,g){this.onDisconnect=g,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,er.set("previous_websocket_failure",!0);try{if((0,U.Yr)()){const O={headers:{"User-Agent":`Firebase/5/${hn}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(O.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(O.headers["X-Firebase-AppCheck"]=this.appCheckToken);const z=process.env,he=0===this.connURL.indexOf("wss://")?z.HTTPS_PROXY||z.https_proxy:z.HTTP_PROXY||z.http_proxy;he&&(O.proxy={origin:he}),this.mySock=new kt(this.connURL,[],O)}else this.mySock=new kt(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(T){this.log_("Error instantiating WebSocket.");const O=T.message||T.data;return O&&this.log_(O),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=T=>{this.handleIncomingFrame(T)},this.mySock.onerror=T=>{this.log_("WebSocket error.  Closing connection.");const O=T.message||T.data;O&&this.log_(O),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const T=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);T&&T.length>1&&parseFloat(T[1])<4.4&&(c=!0)}return!c&&null!==kt&&!h.forceDisallow_}static previouslyFailed(){return er.isInMemoryStorage||!0===er.get("previous_websocket_failure")}markConnectionHealthy(){er.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const T=(0,U.cI)(g);this.onMessage(T)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const g=Number(c);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const g=c.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const T=this.extractFrameCount_(g);null!==T&&this.appendFrame_(T)}}send(c){this.resetKeepAlive();const g=(0,U.Pz)(c);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const T=yn(g,16384);T.length>1&&this.sendString_(String(T.length));for(let O=0;O<T.length;O++)this.sendString_(T[O])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})();class nr{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[Oe,Nn]}initTransports_(u){const c=Nn&&Nn.isAvailable();let g=c&&!Nn.previouslyFailed();if(u.webSocketOnly&&(c||Kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[Nn];else{const T=this.transports_=[];for(const O of nr.ALL_TRANSPORTS)O&&O.isAvailable()&&T.push(O)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Gi{constructor(u,c,g,T,O,z,he,Re,et,Wt){this.id=u,this.repoInfo_=c,this.applicationId_=g,this.appCheckToken_=T,this.authToken_=O,this.onMessage_=z,this.onReady_=he,this.onDisconnect_=Re,this.onKill_=et,this.lastSessionId=Wt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gt("c:"+this.id+":"),this.transportManager_=new nr(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,g)},Math.floor(0));const T=u.healthyTimeout||0;T>0&&(this.healthyTimeout_=Rt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(T)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Er("t",u),g=Er("d",u);if("c"===c)this.onSecondaryControl_(g);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Er("t",u),g=Er("d",u);"c"===c?this.onControl_(g):"d"===c&&this.onDataMessage_(g)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Er("t",u);if("d"in u){const g=u.d;if("h"===c)this.onHandshake_(g);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let T=0;T<this.pendingDataMessages.length;++T)this.onDataMessage_(this.pendingDataMessages[T]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(g):"r"===c?this.onReset_(g):"e"===c?qe("Server Error: "+g):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qe("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,g=u.v,T=u.h;this.sessionId=u.s,this.repoInfo_.host=T,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==g&&Kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,g),Rt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(er.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bs{put(u,c,g,T){}merge(u,c,g,T){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,g){}onDisconnectMerge(u,c,g){}onDisconnectCancel(u,c){}reportStats(u){}}class Ss{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,U.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const g=[...this.listeners_[u]];for(let T=0;T<g.length;T++)g[T].callback.apply(g[T].context,c)}}on(u,c,g){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:g});const T=this.getInitialEvent(u);T&&c.apply(g,T)}off(u,c,g){this.validateEventType_(u);const T=this.listeners_[u]||[];for(let O=0;O<T.length;O++)if(T[O].callback===c&&(!g||g===T[O].context))return void T.splice(O,1)}validateEventType_(u){(0,U.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Qi extends Ss{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qi}getInitialEvent(u){return(0,U.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class qr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let g=0;for(let T=0;T<this.pieces_.length;T++)this.pieces_[T].length>0&&(this.pieces_[g]=this.pieces_[T],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Tr(){return new qr("")}function wr(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function zi(h){return h.pieces_.length-h.pieceNum_}function Qr(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new qr(h.pieces_,u)}function Rs(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function is(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function ws(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new qr(u,0)}function Kr(h,u){const c=[];for(let g=h.pieceNum_;g<h.pieces_.length;g++)c.push(h.pieces_[g]);if(u instanceof qr)for(let g=u.pieceNum_;g<u.pieces_.length;g++)c.push(u.pieces_[g]);else{const g=u.split("/");for(let T=0;T<g.length;T++)g[T].length>0&&c.push(g[T])}return new qr(c,0)}function jr(h){return h.pieceNum_>=h.pieces_.length}function ui(h,u){const c=wr(h),g=wr(u);if(null===c)return u;if(c===g)return ui(Qr(h),Qr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function mi(h,u){const c=is(h,0),g=is(u,0);for(let T=0;T<c.length&&T<g.length;T++){const O=Ln(c[T],g[T]);if(0!==O)return O}return c.length===g.length?0:c.length<g.length?-1:1}function wi(h,u){if(zi(h)!==zi(u))return!1;for(let c=h.pieceNum_,g=u.pieceNum_;c<=h.pieces_.length;c++,g++)if(h.pieces_[c]!==u.pieces_[g])return!1;return!0}function Pi(h,u){let c=h.pieceNum_,g=u.pieceNum_;if(zi(h)>zi(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[g])return!1;++c,++g}return!0}class so{constructor(u,c){this.errorPrefix_=c,this.parts_=is(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,U.ug)(this.parts_[g]);Os(this)}}function Os(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ei(h))}function Ei(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class ys extends Ss{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const g=!document[u];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new ys}getInitialEvent(u){return(0,U.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Gs=1e3;let Hr,en=(()=>{class h extends bs{constructor(c,g,T,O,z,he,Re,et){if(super(),this.repoInfo_=c,this.applicationId_=g,this.onDataUpdate_=T,this.onConnectStatus_=O,this.onServerInfoUpdate_=z,this.authTokenProvider_=he,this.appCheckTokenProvider_=Re,this.authOverride_=et,this.id=h.nextPersistentConnectionId_++,this.log_=gt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,et&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ys.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Qi.getInstance().on("online",this.onOnline_,this)}sendRequest(c,g,T){const O=++this.requestNumber_,z={r:O,a:c,b:g};this.log_((0,U.Pz)(z)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(z),T&&(this.requestCBHash_[O]=T)}get(c){this.initConnection_();const g=new U.BH,T={p:c._path.toString(),q:c._queryObject},O={action:"g",request:T,onComplete:he=>{const Re=he.d;"ok"===he.s?(this.onDataUpdate_(T.p,Re,!1,null),g.resolve(Re)):g.reject(Re)}};this.outstandingGets_.push(O),this.outstandingGetCount_++;const z=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const he=this.outstandingGets_[z];void 0===he||O!==he||(delete this.outstandingGets_[z],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+z+" timed out on connection"),g.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(z),g.promise}listen(c,g,T,O){this.initConnection_();const z=c._queryIdentifier,he=c._path.toString();this.log_("Listen called for "+he+" "+z),this.listens.has(he)||this.listens.set(he,new Map),(0,U.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(he).has(z),"listen() called twice for same path/queryId.");const Re={onComplete:O,hashFn:g,query:c,tag:T};this.listens.get(he).set(z,Re),this.connected_&&this.sendListen_(Re)}sendGet_(c){const g=this.outstandingGets_[c];this.sendRequest("g",g.request,T=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(T)})}sendListen_(c){const g=c.query,T=g._path.toString(),O=g._queryIdentifier;this.log_("Listen on "+T+" for "+O);const z={p:T};c.tag&&(z.q=g._queryObject,z.t=c.tag),z.h=c.hashFn(),this.sendRequest("q",z,Re=>{const et=Re.d,Wt=Re.s;h.warnOnListenWarnings_(et,g),(this.listens.get(T)&&this.listens.get(T).get(O))===c&&(this.log_("listen response",Re),"ok"!==Wt&&this.removeListen_(T,O),c.onComplete&&c.onComplete(Wt,et))})}static warnOnListenWarnings_(c,g){if(c&&"object"==typeof c&&(0,U.r3)(c,"w")){const T=(0,U.DV)(c,"w");if(Array.isArray(T)&&~T.indexOf("no_index")){const O='".indexOn": "'+g._queryParams.getIndex().toString()+'"',z=g._path.toString();Kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${O} at ${z} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,U.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,g=(0,U.w9)(c)?"auth":"gauth",T={cred:c};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(g,T,O=>{const z=O.s,he=O.d||"error";this.authToken_===c&&("ok"===z?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(z,he))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const g=c.s,T=c.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,T)})}unlisten(c,g){const T=c._path.toString(),O=c._queryIdentifier;this.log_("Unlisten called for "+T+" "+O),(0,U.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(T,O)&&this.connected_&&this.sendUnlisten_(T,O,c._queryObject,g)}sendUnlisten_(c,g,T,O){this.log_("Unlisten on "+c+" for "+g);const z={p:c};O&&(z.q=T,z.t=O),this.sendRequest("n",z)}onDisconnectPut(c,g,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,g,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:g,onComplete:T})}onDisconnectMerge(c,g,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,g,T):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:g,onComplete:T})}onDisconnectCancel(c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,g):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(c,g,T,O){const z={p:g,d:T};this.log_("onDisconnect "+c,z),this.sendRequest(c,z,he=>{O&&setTimeout(()=>{O(he.s,he.d)},Math.floor(0))})}put(c,g,T,O){this.putInternal("p",c,g,T,O)}merge(c,g,T,O){this.putInternal("m",c,g,T,O)}putInternal(c,g,T,O,z){this.initConnection_();const he={p:g,d:T};void 0!==z&&(he.h=z),this.outstandingPuts_.push({action:c,request:he,onComplete:O}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(c){const g=this.outstandingPuts_[c].action,T=this.outstandingPuts_[c].request,O=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(g,T,z=>{this.log_(g+" response",z),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),O&&O(z.s,z.d)})}reportStats(c){if(this.connected_){const g={c};this.log_("reportStats",g),this.sendRequest("s",g,T=>{"ok"!==T.s&&this.log_("reportStats","Error sending stats: "+T.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,U.Pz)(c));const g=c.r,T=this.requestCBHash_[g];T&&(delete this.requestCBHash_[g],T(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,g){this.log_("handleServerMessage",c,g),"d"===c?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===c?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===c?this.onListenRevoked_(g.p,g.q):"ac"===c?this.onAuthRevoked_(g.s,g.d):"apc"===c?this.onAppCheckRevoked_(g.s,g.d):"sd"===c?this.onSecurityDebugPacket_(g):qe("Unrecognized action received from server: "+(0,U.Pz)(c)+"\nAre you using the latest client?")}onReady_(c,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-c);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,at.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const g=c.onDataMessage_.bind(c),T=c.onReady_.bind(c),O=c.onRealtimeDisconnect_.bind(c),z=c.id+":"+h.nextConnectionId_++,he=c.lastSessionId;let Re=!1,et=null;const Wt=function(){et?et.close():(Re=!0,O())};c.realtime_={close:Wt,sendRequest:function(_r){(0,U.hu)(et,"sendRequest call when we're not connected not allowed."),et.sendRequest(_r)}};const gn=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[_r,Gr]=yield Promise.all([c.authTokenProvider_.getToken(gn),c.appCheckTokenProvider_.getToken(gn)]);Re?ar("getToken() completed but was canceled"):(ar("getToken() completed. Creating connection."),c.authToken_=_r&&_r.accessToken,c.appCheckToken_=Gr&&Gr.token,et=new Gi(z,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,g,T,O,rs=>{Kt(rs+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},he))}catch(_r){c.log_("Failed to get token: "+_r),Re||(c.repoInfo_.nodeAdmin&&Kt(_r),Wt())}}})()}interrupt(c){ar("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){ar("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const g=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const g=this.outstandingPuts_[c];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,g){let T;T=g?g.map(z=>Cr(z)).join("$"):"default";const O=this.removeListen_(c,T);O&&O.onComplete&&O.onComplete("permission_denied")}removeListen_(c,g){const T=new qr(c).toString();let O;if(this.listens.has(T)){const z=this.listens.get(T);O=z.get(g),z.delete(g),0===z.size&&this.listens.delete(T)}else O=void 0;return O}onAuthRevoked_(c,g){ar("Auth token revoked: "+c+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,g){ar("App check token revoked: "+c+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const g of c.values())this.sendListen_(g);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let g="js";(0,U.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+g+"."+hn.replace(/\./g,"-")]=1,(0,U.uI)()?c["framework.cordova"]=1:(0,U.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Qi.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class Zt{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new Zt(u,c)}}class oi{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const g=new Zt(Xn,u),T=new Zt(Xn,c);return 0!==this.compare(g,T)}minPost(){return Zt.MIN}}class Nr extends oi{static get __EMPTY_NODE(){return Hr}static set __EMPTY_NODE(u){Hr=u}compare(u,c){return Ln(u.name,c.name)}isDefinedOn(u){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Zn,Hr)}makePost(u,c){return(0,U.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Zt(u,Hr)}toString(){return".key"}}const Pr=new Nr;class Di{constructor(u,c,g,T,O=null){this.isReverse_=T,this.resultGenerator_=O,this.nodeStack_=[];let z=1;for(;!u.isEmpty();)if(u=u,z=c?g(u.key,c):1,T&&(z*=-1),z<0)u=this.isReverse_?u.left:u.right;else{if(0===z){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let Wi,ni=(()=>{class h{constructor(c,g,T,O,z){this.key=c,this.value=g,this.color=null!=T?T:h.RED,this.left=null!=O?O:ki.EMPTY_NODE,this.right=null!=z?z:ki.EMPTY_NODE}copy(c,g,T,O,z){return new h(null!=c?c:this.key,null!=g?g:this.value,null!=T?T:this.color,null!=O?O:this.left,null!=z?z:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,g,T){let O=this;const z=T(c,O.key);return O=z<0?O.copy(null,null,null,O.left.insert(c,g,T),null):0===z?O.copy(null,g,null,null,null):O.copy(null,null,null,null,O.right.insert(c,g,T)),O.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,g){let T,O;if(T=this,g(c,T.key)<0)!T.left.isEmpty()&&!T.left.isRed_()&&!T.left.left.isRed_()&&(T=T.moveRedLeft_()),T=T.copy(null,null,null,T.left.remove(c,g),null);else{if(T.left.isRed_()&&(T=T.rotateRight_()),!T.right.isEmpty()&&!T.right.isRed_()&&!T.right.left.isRed_()&&(T=T.moveRedRight_()),0===g(c,T.key)){if(T.right.isEmpty())return ki.EMPTY_NODE;O=T.right.min_(),T=T.copy(O.key,O.value,null,null,T.right.removeMin_())}T=T.copy(null,null,null,null,T.right.remove(c,g))}return T.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,g)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class ki{constructor(u,c=ki.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new ki(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,ni.BLACK,null,null))}remove(u){return new ki(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,ni.BLACK,null,null))}get(u){let c,g=this.root_;for(;!g.isEmpty();){if(c=this.comparator_(u,g.key),0===c)return g.value;c<0?g=g.left:c>0&&(g=g.right)}return null}getPredecessorKey(u){let c,g=this.root_,T=null;for(;!g.isEmpty();){if(c=this.comparator_(u,g.key),0===c){if(g.left.isEmpty())return T?T.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}c<0?g=g.left:c>0&&(T=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Di(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Di(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Di(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Di(this.root_,null,this.comparator_,!0,u)}}function Ji(h,u){return Ln(h.name,u.name)}function ir(h,u){return Ln(h,u)}ki.EMPTY_NODE=new class bi{copy(u,c,g,T,O){return this}insert(u,c,g){return new ni(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const B=function(h){return"number"==typeof h?"number:"+cr(h):"string:"+h},N=function(h){if(h.isLeafNode()){const u=h.val();(0,U.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,U.r3)(u,".sv"),"Priority must be a string or number.")}else(0,U.hu)(h===Wi||h.isEmpty(),"priority of unexpected type.");(0,U.hu)(h===Wi||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let se,v,P,jt=(()=>{class h{constructor(c,g=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=g,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),N(this.priorityNode_)}static set __childrenNodeConstructor(c){se=c}static get __childrenNodeConstructor(){return se}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return jr(c)?this:".priority"===wr(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,g){return null}updateImmediateChild(c,g){return".priority"===c?this.updatePriority(g):g.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,g).updatePriority(this.priorityNode_)}updateChild(c,g){const T=wr(c);return null===T?g:g.isEmpty()&&".priority"!==T?this:((0,U.hu)(".priority"!==T||1===zi(c),".priority must be the last token in a path"),this.updateImmediateChild(T,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qr(c),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,g){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+B(this.priorityNode_.val())+":");const g=typeof this.value_;c+=g+":",c+="number"===g?cr(this.value_):this.value_,this.lazyHash_=pn(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,U.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const g=typeof c.value_,T=typeof this.value_,O=h.VALUE_TYPE_ORDER.indexOf(g),z=h.VALUE_TYPE_ORDER.indexOf(T);return(0,U.hu)(O>=0,"Unknown leaf type: "+g),(0,U.hu)(z>=0,"Unknown leaf type: "+T),O===z?"object"===T?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:z-O}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const g=c;return this.value_===g.value_&&this.priorityNode_.equals(g.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const q=new class I extends oi{compare(u,c){const g=u.node.getPriority(),T=c.node.getPriority(),O=g.compareTo(T);return 0===O?Ln(u.name,c.name):O}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Zn,new jt("[PRIORITY-POST]",P))}makePost(u,c){const g=v(u);return new Zt(c,new jt("[PRIORITY-POST]",g))}toString(){return".priority"}},fe=Math.log(2);class Le{constructor(u){this.count=parseInt(Math.log(u+1)/fe,10),this.current_=this.count-1;const T=(O=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&T}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const It=function(h,u,c,g){h.sort(u);const T=function(Re,et){const Wt=et-Re;let Bt,gn;if(0===Wt)return null;if(1===Wt)return Bt=h[Re],gn=c?c(Bt):Bt,new ni(gn,Bt.node,ni.BLACK,null,null);{const _r=parseInt(Wt/2,10)+Re,Gr=T(Re,_r),rs=T(_r+1,et);return Bt=h[_r],gn=c?c(Bt):Bt,new ni(gn,Bt.node,ni.BLACK,Gr,rs)}},he=function(Re){let et=null,Wt=null,Bt=h.length;const gn=function(Gr,rs){const To=Bt-Gr,xu=Bt;Bt-=Gr;const kl=T(To+1,xu),$o=h[To],Oc=c?c($o):$o;_r(new ni(Oc,$o.node,rs,null,kl))},_r=function(Gr){et?(et.left=Gr,et=Gr):(Wt=Gr,et=Gr)};for(let Gr=0;Gr<Re.count;++Gr){const rs=Re.nextBitIsOne(),To=Math.pow(2,Re.count-(Gr+1));rs?gn(To,ni.BLACK):(gn(To,ni.BLACK),gn(To,ni.RED))}return Wt}(new Le(h.length));return new ki(g||u,he)};let sn;const kn={};class An{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,U.hu)(kn&&q,"ChildrenNode.ts has not been loaded"),sn=sn||new An({".priority":kn},{".priority":q}),sn}get(u){const c=(0,U.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof ki?c:null}hasIndex(u){return(0,U.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,U.hu)(u!==Pr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let T=!1;const O=c.getIterator(Zt.Wrap);let he,z=O.getNext();for(;z;)T=T||u.isDefinedOn(z.node),g.push(z),z=O.getNext();he=T?It(g,u.getCompare()):kn;const Re=u.toString(),et=Object.assign({},this.indexSet_);et[Re]=u;const Wt=Object.assign({},this.indexes_);return Wt[Re]=he,new An(Wt,et)}addToIndexes(u,c){const g=(0,U.UI)(this.indexes_,(T,O)=>{const z=(0,U.DV)(this.indexSet_,O);if((0,U.hu)(z,"Missing index implementation for "+O),T===kn){if(z.isDefinedOn(u.node)){const he=[],Re=c.getIterator(Zt.Wrap);let et=Re.getNext();for(;et;)et.name!==u.name&&he.push(et),et=Re.getNext();return he.push(u),It(he,z.getCompare())}return kn}{const he=c.get(u.name);let Re=T;return he&&(Re=Re.remove(new Zt(u.name,he))),Re.insert(u,u.node)}});return new An(g,this.indexSet_)}removeFromIndexes(u,c){const g=(0,U.UI)(this.indexes_,T=>{if(T===kn)return T;{const O=c.get(u.name);return O?T.remove(new Zt(u.name,O)):T}});return new An(g,this.indexSet_)}}let pr,Mn=(()=>{class h{constructor(c,g,T){this.children_=c,this.priorityNode_=g,this.indexMap_=T,this.lazyHash_=null,this.priorityNode_&&N(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pr||(pr=new h(new ki(ir),null,An.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pr}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const g=this.children_.get(c);return null===g?pr:g}}getChild(c){const g=wr(c);return null===g?this:this.getImmediateChild(g).getChild(Qr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,g){if((0,U.hu)(g,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(g);{const T=new Zt(c,g);let O,z;g.isEmpty()?(O=this.children_.remove(c),z=this.indexMap_.removeFromIndexes(T,this.children_)):(O=this.children_.insert(c,g),z=this.indexMap_.addToIndexes(T,this.children_));const he=O.isEmpty()?pr:this.priorityNode_;return new h(O,he,z)}}updateChild(c,g){const T=wr(c);if(null===T)return g;{(0,U.hu)(".priority"!==wr(c)||1===zi(c),".priority must be the last token in a path");const O=this.getImmediateChild(T).updateChild(Qr(c),g);return this.updateImmediateChild(T,O)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const g={};let T=0,O=0,z=!0;if(this.forEachChild(q,(he,Re)=>{g[he]=Re.val(c),T++,z&&h.INTEGER_REGEXP_.test(he)?O=Math.max(O,Number(he)):z=!1}),!c&&z&&O<2*T){const he=[];for(const Re in g)he[Re]=g[Re];return he}return c&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+B(this.getPriority().val())+":"),this.forEachChild(q,(g,T)=>{const O=T.hash();""!==O&&(c+=":"+g+":"+O)}),this.lazyHash_=""===c?"":pn(c)}return this.lazyHash_}getPredecessorChildName(c,g,T){const O=this.resolveIndex_(T);if(O){const z=O.getPredecessorKey(new Zt(c,g));return z?z.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const g=this.resolveIndex_(c);if(g){const T=g.minKey();return T&&T.name}return this.children_.minKey()}getFirstChild(c){const g=this.getFirstChildName(c);return g?new Zt(g,this.children_.get(g)):null}getLastChildName(c){const g=this.resolveIndex_(c);if(g){const T=g.maxKey();return T&&T.name}return this.children_.maxKey()}getLastChild(c){const g=this.getLastChildName(c);return g?new Zt(g,this.children_.get(g)):null}forEachChild(c,g){const T=this.resolveIndex_(c);return T?T.inorderTraversal(O=>g(O.name,O.node)):this.children_.inorderTraversal(g)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,g){const T=this.resolveIndex_(g);if(T)return T.getIteratorFrom(c,O=>O);{const O=this.children_.getIteratorFrom(c.name,Zt.Wrap);let z=O.peek();for(;null!=z&&g.compare(z,c)<0;)O.getNext(),z=O.peek();return O}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,g){const T=this.resolveIndex_(g);if(T)return T.getReverseIteratorFrom(c,O=>O);{const O=this.children_.getReverseIteratorFrom(c.name,Zt.Wrap);let z=O.peek();for(;null!=z&&g.compare(z,c)>0;)O.getNext(),z=O.peek();return O}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===Dr?-1:0}withIndex(c){if(c===Pr||this.indexMap_.hasIndex(c))return this;{const g=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,g)}}isIndexed(c){return c===Pr||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const g=c;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const T=this.getIterator(q),O=g.getIterator(q);let z=T.getNext(),he=O.getNext();for(;z&&he;){if(z.name!==he.name||!z.node.equals(he.node))return!1;z=T.getNext(),he=O.getNext()}return null===z&&null===he}return!1}return!1}}resolveIndex_(c){return c===Pr?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const Dr=new class zr extends Mn{constructor(){super(new ki(ir),Mn.EMPTY_NODE,An.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Mn.EMPTY_NODE}isEmpty(){return!1}};function Fr(h,u=null){if(null===h)return Mn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,U.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new jt(h,Fr(u));if(h instanceof Array){let c=Mn.EMPTY_NODE;return Wn(h,(g,T)=>{if((0,U.r3)(h,g)&&"."!==g.substring(0,1)){const O=Fr(T);(O.isLeafNode()||!O.isEmpty())&&(c=c.updateImmediateChild(g,O))}}),c.updatePriority(Fr(u))}{const c=[];let g=!1;if(Wn(h,(z,he)=>{if("."!==z.substring(0,1)){const Re=Fr(he);Re.isEmpty()||(g=g||!Re.getPriority().isEmpty(),c.push(new Zt(z,Re)))}}),0===c.length)return Mn.EMPTY_NODE;const O=It(c,Ji,z=>z.name,ir);if(g){const z=It(c,q.getCompare());return new Mn(O,Fr(u),new An({".priority":z},{".priority":q}))}return new Mn(O,Fr(u),An.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(Xn,Mn.EMPTY_NODE)},MAX:{value:new Zt(Zn,Dr)}}),Nr.__EMPTY_NODE=Mn.EMPTY_NODE,jt.__childrenNodeConstructor=Mn,function G(h){Wi=h}(Dr),function E(h){P=h}(Dr),function b(h){v=h}(Fr);class Ri extends oi{constructor(u){super(),this.indexPath_=u,(0,U.hu)(!jr(u)&&".priority"!==wr(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const g=this.extractChild(u.node),T=this.extractChild(c.node),O=g.compareTo(T);return 0===O?Ln(u.name,c.name):O}makePost(u,c){const g=Fr(u),T=Mn.EMPTY_NODE.updateChild(this.indexPath_,g);return new Zt(c,T)}maxPost(){const u=Mn.EMPTY_NODE.updateChild(this.indexPath_,Dr);return new Zt(Zn,u)}toString(){return is(this.indexPath_,0).join("/")}}const zs=new class Li extends oi{compare(u,c){const g=u.node.compareTo(c.node);return 0===g?Ln(u.name,c.name):g}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(u,c){const g=Fr(u);return new Zt(c,g)}toString(){return".value"}},ci="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Eo=function(){let h=0;const u=[];return function(c){const g=c===h;let T;h=c;const O=new Array(8);for(T=7;T>=0;T--)O[T]=ci.charAt(c%64),c=Math.floor(c/64);(0,U.hu)(0===c,"Cannot push at time == 0");let z=O.join("");if(g){for(T=11;T>=0&&63===u[T];T--)u[T]=0;u[T]++}else for(T=0;T<12;T++)u[T]=Math.floor(64*Math.random());for(T=0;T<12;T++)z+=ci.charAt(u[T]);return(0,U.hu)(20===z.length,"nextPushId: Length should be 20."),z}}(),da=function(h){if(h===""+Vn)return"-";const u=We(h);if(null!=u)return""+(u+1);const c=new Array(h.length);for(let z=0;z<c.length;z++)c[z]=h.charAt(z);if(c.length<786)return c.push("-"),c.join("");let g=c.length-1;for(;g>=0&&"z"===c[g];)g--;if(-1===g)return Zn;const O=ci.charAt(ci.indexOf(c[g])+1);return c[g]=O,c.slice(0,g+1).join("")},Ro=function(h){if(h===""+Kn)return Xn;const u=We(h);if(null!=u)return""+(u-1);const c=new Array(h.length);for(let g=0;g<c.length;g++)c[g]=h.charAt(g);return"-"===c[c.length-1]?1===c.length?""+Vn:(delete c[c.length-1],c.join("")):(c[c.length-1]=ci.charAt(ci.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function Bo(h){return{type:"value",snapshotNode:h}}function ho(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Wo(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function fo(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Ta{constructor(u){this.index_=u}updateChild(u,c,g,T,O,z){(0,U.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const he=u.getImmediateChild(c);return he.getChild(T).equals(g.getChild(T))&&he.isEmpty()===g.isEmpty()||(null!=z&&(g.isEmpty()?u.hasChild(c)?z.trackChildChange(Wo(c,he)):(0,U.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):he.isEmpty()?z.trackChildChange(ho(c,g)):z.trackChildChange(fo(c,g,he))),u.isLeafNode()&&g.isEmpty())?u:u.updateImmediateChild(c,g).withIndex(this.index_)}updateFullNode(u,c,g){return null!=g&&(u.isLeafNode()||u.forEachChild(q,(T,O)=>{c.hasChild(T)||g.trackChildChange(Wo(T,O))}),c.isLeafNode()||c.forEachChild(q,(T,O)=>{if(u.hasChild(T)){const z=u.getImmediateChild(T);z.equals(O)||g.trackChildChange(fo(T,O,z))}else g.trackChildChange(ho(T,O))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?Mn.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Mo{constructor(u){this.indexedFilter_=new Ta(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Mo.getStartPost_(u),this.endPost_=Mo.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,g,T,O,z){return this.matches(new Zt(c,g))||(g=Mn.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,g,T,O,z)}updateFullNode(u,c,g){c.isLeafNode()&&(c=Mn.EMPTY_NODE);let T=c.withIndex(this.index_);T=T.updatePriority(Mn.EMPTY_NODE);const O=this;return c.forEachChild(q,(z,he)=>{O.matches(new Zt(z,he))||(T=T.updateImmediateChild(z,Mn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,T,g)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class wl{constructor(u){this.rangedFilter_=new Mo(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,g,T,O,z){return this.rangedFilter_.matches(new Zt(c,g))||(g=Mn.EMPTY_NODE),u.getImmediateChild(c).equals(g)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,g,T,O,z):this.fullLimitUpdateChild_(u,c,g,O,z)}updateFullNode(u,c,g){let T;if(c.isLeafNode()||c.isEmpty())T=Mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let O;T=Mn.EMPTY_NODE.withIndex(this.index_),O=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let z=0;for(;O.hasNext()&&z<this.limit_;){const he=O.getNext();let Re;if(Re=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),he)<=0:this.index_.compare(he,this.rangedFilter_.getEndPost())<=0,!Re)break;T=T.updateImmediateChild(he.name,he.node),z++}}else{let O,z,he,Re;if(T=c.withIndex(this.index_),T=T.updatePriority(Mn.EMPTY_NODE),this.reverse_){Re=T.getReverseIterator(this.index_),O=this.rangedFilter_.getEndPost(),z=this.rangedFilter_.getStartPost();const Bt=this.index_.getCompare();he=(gn,_r)=>Bt(_r,gn)}else Re=T.getIterator(this.index_),O=this.rangedFilter_.getStartPost(),z=this.rangedFilter_.getEndPost(),he=this.index_.getCompare();let et=0,Wt=!1;for(;Re.hasNext();){const Bt=Re.getNext();!Wt&&he(O,Bt)<=0&&(Wt=!0),Wt&&et<this.limit_&&he(Bt,z)<=0?et++:T=T.updateImmediateChild(Bt.name,Mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,T,g)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,g,T,O){let z;if(this.reverse_){const Bt=this.index_.getCompare();z=(gn,_r)=>Bt(_r,gn)}else z=this.index_.getCompare();const he=u;(0,U.hu)(he.numChildren()===this.limit_,"");const Re=new Zt(c,g),et=this.reverse_?he.getFirstChild(this.index_):he.getLastChild(this.index_),Wt=this.rangedFilter_.matches(Re);if(he.hasChild(c)){const Bt=he.getImmediateChild(c);let gn=T.getChildAfterChild(this.index_,et,this.reverse_);for(;null!=gn&&(gn.name===c||he.hasChild(gn.name));)gn=T.getChildAfterChild(this.index_,gn,this.reverse_);const _r=null==gn?1:z(gn,Re);if(Wt&&!g.isEmpty()&&_r>=0)return null!=O&&O.trackChildChange(fo(c,g,Bt)),he.updateImmediateChild(c,g);{null!=O&&O.trackChildChange(Wo(c,Bt));const rs=he.updateImmediateChild(c,Mn.EMPTY_NODE);return null!=gn&&this.rangedFilter_.matches(gn)?(null!=O&&O.trackChildChange(ho(gn.name,gn.node)),rs.updateImmediateChild(gn.name,gn.node)):rs}}return g.isEmpty()?u:Wt&&z(et,Re)>=0?(null!=O&&(O.trackChildChange(Wo(et.name,et.node)),O.trackChildChange(ho(c,g))),he.updateImmediateChild(c,g).updateImmediateChild(et.name,Mn.EMPTY_NODE)):u}}class Oo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=q}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===q}copy(){const u=new Oo;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function el(h,u,c){const g=h.copy();return g.startSet_=!0,void 0===u&&(u=null),g.indexStartValue_=u,null!=c?(g.startNameSet_=!0,g.indexStartName_=c):(g.startNameSet_=!1,g.indexStartName_=""),g}function Il(h,u,c){const g=h.copy();return g.endSet_=!0,void 0===u&&(u=null),g.indexEndValue_=u,void 0!==c?(g.endNameSet_=!0,g.indexEndName_=c):(g.endNameSet_=!1,g.indexEndName_=""),g}function nl(h,u){const c=h.copy();return c.index_=u,c}function fa(h){const u={};if(h.isDefault())return u;let c;return h.index_===q?c="$priority":h.index_===zs?c="$value":h.index_===Pr?c="$key":((0,U.hu)(h.index_ instanceof Ri,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,U.Pz)(c),h.startSet_&&(u.startAt=(0,U.Pz)(h.indexStartValue_),h.startNameSet_&&(u.startAt+=","+(0,U.Pz)(h.indexStartName_))),h.endSet_&&(u.endAt=(0,U.Pz)(h.indexEndValue_),h.endNameSet_&&(u.endAt+=","+(0,U.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function bo(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_)),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_)),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==q&&(u.i=h.index_.toString()),u}class wo extends bs{constructor(u,c,g,T){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=T,this.log_=gt("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,U.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,g,T){const O=u._path.toString();this.log_("Listen called for "+O+" "+u._queryIdentifier);const z=wo.getListenId_(u,g),he={};this.listens_[z]=he;const Re=fa(u._queryParams);this.restRequest_(O+".json",Re,(et,Wt)=>{let Bt=Wt;if(404===et&&(Bt=null,et=null),null===et&&this.onDataUpdate_(O,Bt,!1,g),(0,U.DV)(this.listens_,z)===he){let gn;gn=et?401===et?"permission_denied":"rest_error:"+et:"ok",T(gn,null)}})}unlisten(u,c){const g=wo.getListenId_(u,c);delete this.listens_[g]}get(u){const c=fa(u._queryParams),g=u._path.toString(),T=new U.BH;return this.restRequest_(g+".json",c,(O,z)=>{let he=z;404===O&&(he=null,O=null),null===O?(this.onDataUpdate_(g,he,!1,null),T.resolve(he)):T.reject(new Error(he))}),T.promise}refreshAuthToken(u){}restRequest_(u,c={},g){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([T,O])=>{T&&T.accessToken&&(c.auth=T.accessToken),O&&O.token&&(c.ac=O.token);const z=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,U.xO)(c);this.log_("Sending REST request for "+z);const he=new XMLHttpRequest;he.onreadystatechange=()=>{if(g&&4===he.readyState){this.log_("REST Response for "+z+" received. status:",he.status,"response:",he.responseText);let Re=null;if(he.status>=200&&he.status<300){try{Re=(0,U.cI)(he.responseText)}catch(et){Kt("Failed to parse JSON response for "+z+": "+he.responseText)}g(null,Re)}else 401!==he.status&&404!==he.status&&Kt("Got unsuccessful REST response for "+z+" Status: "+he.status),g(he.status);g=null}},he.open("GET",z,!0),he.send()})}}class pa{constructor(){this.rootNode_=Mn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function Zi(){return{value:null,children:new Map}}function qo(h,u,c){if(jr(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const g=wr(u);h.children.has(g)||h.children.set(g,Zi()),qo(h.children.get(g),u=Qr(u),c)}}function $a(h,u){if(jr(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(q,(g,T)=>{qo(h,new qr(g),T)}),$a(h,u)}}if(h.children.size>0){const c=wr(u);return u=Qr(u),h.children.has(c)&&$a(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function po(h,u,c){null!==h.value?c(u,h.value):function Yo(h,u){h.children.forEach((c,g)=>{u(g,c)})}(h,(g,T)=>{po(T,new qr(u.toString()+"/"+g),c)})}class Ko{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Wn(this.last_,(g,T)=>{c[g]=c[g]-T}),this.last_=u,c}}class Ll{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new Ko(u);const g=1e4+2e4*Math.random();Rt(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const u=this.statsListener_.get(),c={};let g=!1;Wn(u,(T,O)=>{O>0&&(0,U.r3)(this.statsToReport_,T)&&(c[T]=O,g=!0)}),g&&this.server_.reportStats(c),Rt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Cs=(()=>{return(h=Cs||(Cs={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Cs;var h})();function Va(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Ps{constructor(u,c,g){this.path=u,this.affectedTree=c,this.revert=g,this.type=Cs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(jr(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new qr(u));return new Ps(Tr(),c,this.revert)}}return(0,U.hu)(wr(this.path)===u,"operationForChild called for unrelated child."),new Ps(Qr(this.path),this.affectedTree,this.revert)}}class ga{constructor(u,c){this.source=u,this.path=c,this.type=Cs.LISTEN_COMPLETE}operationForChild(u){return jr(this.path)?new ga(this.source,Tr()):new ga(this.source,Qr(this.path))}}class Io{constructor(u,c,g){this.source=u,this.path=c,this.snap=g,this.type=Cs.OVERWRITE}operationForChild(u){return jr(this.path)?new Io(this.source,Tr(),this.snap.getImmediateChild(u)):new Io(this.source,Qr(this.path),this.snap)}}class oo{constructor(u,c,g){this.source=u,this.path=c,this.children=g,this.type=Cs.MERGE}operationForChild(u){if(jr(this.path)){const c=this.children.subtree(new qr(u));return c.isEmpty()?null:c.value?new Io(this.source,Tr(),c.value):new oo(this.source,Tr(),c)}return(0,U.hu)(wr(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new oo(this.source,Qr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Uo{constructor(u,c,g){this.node_=u,this.fullyInitialized_=c,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(jr(u))return this.isFullyInitialized()&&!this.filtered_;const c=wr(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class $i{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function _s(h,u,c,g,T,O){const z=g.filter(he=>he.type===c);z.sort((he,Re)=>function ya(h,u,c){if(null==u.childName||null==c.childName)throw(0,U.g5)("Should only compare child_ events.");const g=new Zt(u.childName,u.snapshotNode),T=new Zt(c.childName,c.snapshotNode);return h.index_.compare(g,T)}(h,he,Re)),z.forEach(he=>{const Re=function ma(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,he,O);T.forEach(et=>{et.respondsTo(he.type)&&u.push(et.createEvent(Re,h.query_))})})}function Dl(h,u){return{eventCache:h,serverCache:u}}function as(h,u,c,g){return Dl(new Uo(u,c,g),h.serverCache)}function Zo(h,u,c,g){return Dl(h.eventCache,new Uo(u,c,g))}function Po(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function ao(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Xo;class Ur{constructor(u,c=(()=>(Xo||(Xo=new ki(Hn)),Xo))()){this.value=u,this.children=c}static fromObject(u){let c=new Ur(null);return Wn(u,(g,T)=>{c=c.set(new qr(g),T)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Tr(),value:this.value};if(jr(u))return null;{const g=wr(u),T=this.children.get(g);if(null!==T){const O=T.findRootMostMatchingPathAndValue(Qr(u),c);return null!=O?{path:Kr(new qr(g),O.path),value:O.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(jr(u))return this;{const c=wr(u),g=this.children.get(c);return null!==g?g.subtree(Qr(u)):new Ur(null)}}set(u,c){if(jr(u))return new Ur(c,this.children);{const g=wr(u),O=(this.children.get(g)||new Ur(null)).set(Qr(u),c),z=this.children.insert(g,O);return new Ur(this.value,z)}}remove(u){if(jr(u))return this.children.isEmpty()?new Ur(null):new Ur(null,this.children);{const c=wr(u),g=this.children.get(c);if(g){const T=g.remove(Qr(u));let O;return O=T.isEmpty()?this.children.remove(c):this.children.insert(c,T),null===this.value&&O.isEmpty()?new Ur(null):new Ur(this.value,O)}return this}}get(u){if(jr(u))return this.value;{const c=wr(u),g=this.children.get(c);return g?g.get(Qr(u)):null}}setTree(u,c){if(jr(u))return c;{const g=wr(u),O=(this.children.get(g)||new Ur(null)).setTree(Qr(u),c);let z;return z=O.isEmpty()?this.children.remove(g):this.children.insert(g,O),new Ur(this.value,z)}}fold(u){return this.fold_(Tr(),u)}fold_(u,c){const g={};return this.children.inorderTraversal((T,O)=>{g[T]=O.fold_(Kr(u,T),c)}),c(u,this.value,g)}findOnPath(u,c){return this.findOnPath_(u,Tr(),c)}findOnPath_(u,c,g){const T=!!this.value&&g(c,this.value);if(T)return T;if(jr(u))return null;{const O=wr(u),z=this.children.get(O);return z?z.findOnPath_(Qr(u),Kr(c,O),g):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Tr(),c)}foreachOnPath_(u,c,g){if(jr(u))return this;{this.value&&g(c,this.value);const T=wr(u),O=this.children.get(T);return O?O.foreachOnPath_(Qr(u),Kr(c,T),g):new Ur(null)}}foreach(u){this.foreach_(Tr(),u)}foreach_(u,c){this.children.inorderTraversal((g,T)=>{T.foreach_(Kr(u,g),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,g)=>{g.value&&u(c,g.value)})}}class qi{constructor(u){this.writeTree_=u}static empty(){return new qi(new Ur(null))}}function eo(h,u,c){if(jr(u))return new qi(new Ur(c));{const g=h.writeTree_.findRootMostValueAndPath(u);if(null!=g){const T=g.path;let O=g.value;const z=ui(T,u);return O=O.updateChild(z,c),new qi(h.writeTree_.set(T,O))}{const T=new Ur(c),O=h.writeTree_.setTree(u,T);return new qi(O)}}}function sr(h,u,c){let g=h;return Wn(c,(T,O)=>{g=eo(g,Kr(u,T),O)}),g}function kr(h,u){if(jr(u))return qi.empty();{const c=h.writeTree_.setTree(u,new Ur(null));return new qi(c)}}function Ua(h,u){return null!=$n(h,u)}function $n(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(ui(c.path,u)):null}function Ht(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(q,(g,T)=>{u.push(new Zt(g,T))}):h.writeTree_.children.inorderTraversal((g,T)=>{null!=T.value&&u.push(new Zt(g,T.value))}),u}function R(h,u){if(jr(u))return h;{const c=$n(h,u);return new qi(null!=c?new Ur(c):h.writeTree_.subtree(u))}}function A(h){return h.writeTree_.isEmpty()}function S(h,u){return V(Tr(),h.writeTree_,u)}function V(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let g=null;return u.children.inorderTraversal((T,O)=>{".priority"===T?((0,U.hu)(null!==O.value,"Priority writes must always be leaf nodes"),g=O.value):c=V(Kr(h,T),O,c)}),!c.getChild(h).isEmpty()&&null!==g&&(c=c.updateChild(Kr(h,".priority"),g)),c}}function Y(h,u){return ja(u,h)}function Jn(h,u){if(h.snap)return Pi(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&Pi(Kr(h.path,c),u))return!0;return!1}function qn(h){return h.visible}function vi(h,u,c){let g=qi.empty();for(let T=0;T<h.length;++T){const O=h[T];if(u(O)){const z=O.path;let he;if(O.snap)Pi(c,z)?(he=ui(c,z),g=eo(g,he,O.snap)):Pi(z,c)&&(he=ui(z,c),g=eo(g,Tr(),O.snap.getChild(he)));else{if(!O.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(Pi(c,z))he=ui(c,z),g=sr(g,he,O.children);else if(Pi(z,c))if(he=ui(z,c),jr(he))g=sr(g,Tr(),O.children);else{const Re=(0,U.DV)(O.children,wr(he));if(Re){const et=Re.getChild(Qr(he));g=eo(g,Tr(),et)}}}}}return g}function ii(h,u,c,g,T){if(g||T){const O=R(h.visibleWrites,u);return!T&&A(O)?c:T||null!=c||Ua(O,Tr())?S(vi(h.allWrites,function(et){return(et.visible||T)&&(!g||!~g.indexOf(et.writeId))&&(Pi(et.path,u)||Pi(u,et.path))},u),c||Mn.EMPTY_NODE):null}{const O=$n(h.visibleWrites,u);if(null!=O)return O;{const z=R(h.visibleWrites,u);return A(z)?c:null!=c||Ua(z,Tr())?S(z,c||Mn.EMPTY_NODE):null}}}function Sa(h,u,c,g){return ii(h.writeTree,h.treePath,u,c,g)}function pc(h,u){return function Vr(h,u,c){let g=Mn.EMPTY_NODE;const T=$n(h.visibleWrites,u);if(T)return T.isLeafNode()||T.forEachChild(q,(O,z)=>{g=g.updateImmediateChild(O,z)}),g;if(c){const O=R(h.visibleWrites,u);return c.forEachChild(q,(z,he)=>{const Re=S(R(O,new qr(z)),he);g=g.updateImmediateChild(z,Re)}),Ht(O).forEach(z=>{g=g.updateImmediateChild(z.name,z.node)}),g}return Ht(R(h.visibleWrites,u)).forEach(z=>{g=g.updateImmediateChild(z.name,z.node)}),g}(h.writeTree,h.treePath,u)}function $l(h,u,c,g){return function lo(h,u,c,g,T){(0,U.hu)(g||T,"Either existingEventSnap or existingServerSnap must exist");const O=Kr(u,c);if(Ua(h.visibleWrites,O))return null;{const z=R(h.visibleWrites,O);return A(z)?T.getChild(c):S(z,T.getChild(c))}}(h.writeTree,h.treePath,u,c,g)}function yi(h,u){return function Yi(h,u){return $n(h.visibleWrites,u)}(h.writeTree,Kr(h.treePath,u))}function ks(h,u,c){return function Qo(h,u,c,g){const T=Kr(u,c),O=$n(h.visibleWrites,T);return null!=O?O:g.isCompleteForChild(c)?S(R(h.visibleWrites,T),g.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function Tl(h,u){return ja(Kr(h.treePath,u),h.writeTree)}function ja(h,u){return{treePath:h,writeTree:u}}class Ys{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,g=u.childName;(0,U.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const T=this.changeMap.get(g);if(T){const O=T.type;if("child_added"===c&&"child_removed"===O)this.changeMap.set(g,fo(g,u.snapshotNode,T.snapshotNode));else if("child_removed"===c&&"child_added"===O)this.changeMap.delete(g);else if("child_removed"===c&&"child_changed"===O)this.changeMap.set(g,Wo(g,T.oldSnap));else if("child_changed"===c&&"child_added"===O)this.changeMap.set(g,ho(g,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==O)throw(0,U.g5)("Illegal combination of changes: "+u+" occurred after "+T);this.changeMap.set(g,fo(g,u.snapshotNode,T.oldSnap))}}else this.changeMap.set(g,u)}getChanges(){return Array.from(this.changeMap.values())}}const Jo=new class vs{getCompleteChild(u){return null}getChildAfterChild(u,c,g){return null}};class Bi{constructor(u,c,g=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=g}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const g=null!=this.optCompleteServerCache_?new Uo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ks(this.writes_,u,g)}}getChildAfterChild(u,c,g){const T=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ao(this.viewCache_),O=function Wc(h,u,c,g,T,O){return function Lr(h,u,c,g,T,O,z){let he;const Re=R(h.visibleWrites,u),et=$n(Re,Tr());if(null!=et)he=et;else{if(null==c)return[];he=S(Re,c)}if(he=he.withIndex(z),he.isEmpty()||he.isLeafNode())return[];{const Wt=[],Bt=z.getCompare(),gn=O?he.getReverseIteratorFrom(g,z):he.getIteratorFrom(g,z);let _r=gn.getNext();for(;_r&&Wt.length<T;)0!==Bt(_r,g)&&Wt.push(_r),_r=gn.getNext();return Wt}}(h.writeTree,h.treePath,u,c,g,T,O)}(this.writes_,T,c,1,g,u);return 0===O.length?null:O[0]}}function Bl(h,u,c,g,T,O){const z=u.eventCache;if(null!=yi(g,c))return u;{let he,Re;if(jr(c))if((0,U.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const et=ao(u),Bt=pc(g,et instanceof Mn?et:Mn.EMPTY_NODE);he=h.filter.updateFullNode(u.eventCache.getNode(),Bt,O)}else{const et=Sa(g,ao(u));he=h.filter.updateFullNode(u.eventCache.getNode(),et,O)}else{const et=wr(c);if(".priority"===et){(0,U.hu)(1===zi(c),"Can't have a priority with additional path components");const Wt=z.getNode();Re=u.serverCache.getNode();const Bt=$l(g,c,Wt,Re);he=null!=Bt?h.filter.updatePriority(Wt,Bt):z.getNode()}else{const Wt=Qr(c);let Bt;if(z.isCompleteForChild(et)){Re=u.serverCache.getNode();const gn=$l(g,c,z.getNode(),Re);Bt=null!=gn?z.getNode().getImmediateChild(et).updateChild(Wt,gn):z.getNode().getImmediateChild(et)}else Bt=ks(g,et,u.serverCache);he=null!=Bt?h.filter.updateChild(z.getNode(),et,Bt,Wt,T,O):z.getNode()}}return as(u,he,z.isFullyInitialized()||jr(c),h.filter.filtersNodes())}}function Ns(h,u,c,g,T,O,z,he){const Re=u.serverCache;let et;const Wt=z?h.filter:h.filter.getIndexedFilter();if(jr(c))et=Wt.updateFullNode(Re.getNode(),g,null);else if(Wt.filtersNodes()&&!Re.isFiltered()){const _r=Re.getNode().updateChild(c,g);et=Wt.updateFullNode(Re.getNode(),_r,null)}else{const _r=wr(c);if(!Re.isCompleteForPath(c)&&zi(c)>1)return u;const Gr=Qr(c),To=Re.getNode().getImmediateChild(_r).updateChild(Gr,g);et=".priority"===_r?Wt.updatePriority(Re.getNode(),To):Wt.updateChild(Re.getNode(),_r,To,Gr,Jo,null)}const Bt=Zo(u,et,Re.isFullyInitialized()||jr(c),Wt.filtersNodes());return Bl(h,Bt,c,T,new Bi(T,Bt,O),he)}function Fs(h,u,c,g,T,O,z){const he=u.eventCache;let Re,et;const Wt=new Bi(T,u,O);if(jr(c))et=h.filter.updateFullNode(u.eventCache.getNode(),g,z),Re=as(u,et,!0,h.filter.filtersNodes());else{const Bt=wr(c);if(".priority"===Bt)et=h.filter.updatePriority(u.eventCache.getNode(),g),Re=as(u,et,he.isFullyInitialized(),he.isFiltered());else{const gn=Qr(c),_r=he.getNode().getImmediateChild(Bt);let Gr;if(jr(gn))Gr=g;else{const rs=Wt.getCompleteChild(Bt);Gr=null!=rs?".priority"===Rs(gn)&&rs.getChild(ws(gn)).isEmpty()?rs:rs.updateChild(gn,g):Mn.EMPTY_NODE}Re=_r.equals(Gr)?u:as(u,h.filter.updateChild(he.getNode(),Bt,Gr,gn,Wt,z),he.isFullyInitialized(),h.filter.filtersNodes())}}return Re}function jo(h,u){return h.eventCache.isCompleteForChild(u)}function Gn(h,u,c){return c.foreach((g,T)=>{u=u.updateChild(g,T)}),u}function Hu(h,u,c,g,T,O,z,he){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let et,Re=u;et=jr(c)?g:new Ur(null).setTree(c,g);const Wt=u.serverCache.getNode();return et.children.inorderTraversal((Bt,gn)=>{if(Wt.hasChild(Bt)){const Gr=Gn(0,u.serverCache.getNode().getImmediateChild(Bt),gn);Re=Ns(h,Re,new qr(Bt),Gr,T,O,z,he)}}),et.children.inorderTraversal((Bt,gn)=>{const _r=!u.serverCache.isCompleteForChild(Bt)&&void 0===gn.value;if(!Wt.hasChild(Bt)&&!_r){const rs=Gn(0,u.serverCache.getNode().getImmediateChild(Bt),gn);Re=Ns(h,Re,new qr(Bt),rs,T,O,z,he)}}),Re}class il{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const g=this.query_._queryParams,T=new Ta(g.getIndex()),O=function Ws(h){return h.loadsAllData()?new Ta(h.getIndex()):h.hasLimit()?new wl(h):new Mo(h)}(g);this.processor_=function Ha(h){return{filter:h}}(O);const z=c.serverCache,he=c.eventCache,Re=T.updateFullNode(Mn.EMPTY_NODE,z.getNode(),null),et=O.updateFullNode(Mn.EMPTY_NODE,he.getNode(),null),Wt=new Uo(Re,z.isFullyInitialized(),T.filtersNodes()),Bt=new Uo(et,he.isFullyInitialized(),O.filtersNodes());this.viewCache_=Dl(Bt,Wt),this.eventGenerator_=new $i(this.query_)}get query(){return this.query_}}function sl(h,u){const c=ao(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!jr(u)&&!c.getImmediateChild(wr(u)).isEmpty())?c.getChild(u):null}function Ho(h){return 0===h.eventRegistrations_.length}function Vl(h,u,c){const g=[];if(c){(0,U.hu)(null==u,"A cancel should cancel all event registrations.");const T=h.query._path;h.eventRegistrations_.forEach(O=>{const z=O.createCancelEvent(c,T);z&&g.push(z)})}if(u){let T=[];for(let O=0;O<h.eventRegistrations_.length;++O){const z=h.eventRegistrations_[O];if(z.matches(u)){if(u.hasAnyCallback()){T=T.concat(h.eventRegistrations_.slice(O+1));break}}else T.push(z)}h.eventRegistrations_=T}else h.eventRegistrations_=[];return g}function xa(h,u,c,g){u.type===Cs.MERGE&&null!==u.source.queryId&&((0,U.hu)(ao(h.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(Po(h.viewCache_),"Missing event cache, even though we have a server cache"));const T=h.viewCache_,O=function Ks(h,u,c,g,T){const O=new Ys;let z,he;if(c.type===Cs.OVERWRITE){const et=c;et.source.fromUser?z=Fs(h,u,et.path,et.snap,g,T,O):((0,U.hu)(et.source.fromServer,"Unknown source."),he=et.source.tagged||u.serverCache.isFiltered()&&!jr(et.path),z=Ns(h,u,et.path,et.snap,g,T,he,O))}else if(c.type===Cs.MERGE){const et=c;et.source.fromUser?z=function ju(h,u,c,g,T,O,z){let he=u;return g.foreach((Re,et)=>{const Wt=Kr(c,Re);jo(u,wr(Wt))&&(he=Fs(h,he,Wt,et,T,O,z))}),g.foreach((Re,et)=>{const Wt=Kr(c,Re);jo(u,wr(Wt))||(he=Fs(h,he,Wt,et,T,O,z))}),he}(h,u,et.path,et.children,g,T,O):((0,U.hu)(et.source.fromServer,"Unknown source."),he=et.source.tagged||u.serverCache.isFiltered(),z=Hu(h,u,et.path,et.children,g,T,he,O))}else if(c.type===Cs.ACK_USER_WRITE){const et=c;z=et.revert?function ls(h,u,c,g,T,O){let z;if(null!=yi(g,c))return u;{const he=new Bi(g,u,T),Re=u.eventCache.getNode();let et;if(jr(c)||".priority"===wr(c)){let Wt;if(u.serverCache.isFullyInitialized())Wt=Sa(g,ao(u));else{const Bt=u.serverCache.getNode();(0,U.hu)(Bt instanceof Mn,"serverChildren would be complete if leaf node"),Wt=pc(g,Bt)}Wt=Wt,et=h.filter.updateFullNode(Re,Wt,O)}else{const Wt=wr(c);let Bt=ks(g,Wt,u.serverCache);null==Bt&&u.serverCache.isCompleteForChild(Wt)&&(Bt=Re.getImmediateChild(Wt)),et=null!=Bt?h.filter.updateChild(Re,Wt,Bt,Qr(c),he,O):u.eventCache.getNode().hasChild(Wt)?h.filter.updateChild(Re,Wt,Mn.EMPTY_NODE,Qr(c),he,O):Re,et.isEmpty()&&u.serverCache.isFullyInitialized()&&(z=Sa(g,ao(u)),z.isLeafNode()&&(et=h.filter.updateFullNode(et,z,O)))}return z=u.serverCache.isFullyInitialized()||null!=yi(g,Tr()),as(u,et,z,h.filter.filtersNodes())}}(h,u,et.path,g,T,O):function qc(h,u,c,g,T,O,z){if(null!=yi(T,c))return u;const he=u.serverCache.isFiltered(),Re=u.serverCache;if(null!=g.value){if(jr(c)&&Re.isFullyInitialized()||Re.isCompleteForPath(c))return Ns(h,u,c,Re.getNode().getChild(c),T,O,he,z);if(jr(c)){let et=new Ur(null);return Re.getNode().forEachChild(Pr,(Wt,Bt)=>{et=et.set(new qr(Wt),Bt)}),Hu(h,u,c,et,T,O,he,z)}return u}{let et=new Ur(null);return g.foreach((Wt,Bt)=>{const gn=Kr(c,Wt);Re.isCompleteForPath(gn)&&(et=et.set(Wt,Re.getNode().getChild(gn)))}),Hu(h,u,c,et,T,O,he,z)}}(h,u,et.path,et.affectedTree,g,T,O)}else{if(c.type!==Cs.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+c.type);z=function go(h,u,c,g,T){const O=u.serverCache;return Bl(h,Zo(u,O.getNode(),O.isFullyInitialized()||jr(c),O.isFiltered()),c,g,Jo,T)}(h,u,c.path,g,O)}const Re=O.getChanges();return function Zs(h,u,c){const g=u.eventCache;if(g.isFullyInitialized()){const T=g.getNode().isLeafNode()||g.getNode().isEmpty(),O=Po(h);(c.length>0||!h.eventCache.isFullyInitialized()||T&&!g.getNode().equals(O)||!g.getNode().getPriority().equals(O.getPriority()))&&c.push(Bo(Po(u)))}}(u,z,Re),{viewCache:z,changes:Re}}(h.processor_,T,u,c,g);return function rl(h,u){(0,U.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,O.viewCache),(0,U.hu)(O.viewCache.serverCache.isFullyInitialized()||!T.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=O.viewCache,al(h,O.changes,O.viewCache.eventCache.getNode(),null)}function al(h,u,c,g){return function Uu(h,u,c,g){const T=[],O=[];return u.forEach(z=>{"child_changed"===z.type&&h.index_.indexedValueChanged(z.oldSnap,z.snapshotNode)&&O.push(function Vo(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(z.childName,z.snapshotNode))}),_s(h,T,"child_removed",u,g,c),_s(h,T,"child_added",u,g,c),_s(h,T,"child_moved",O,g,c),_s(h,T,"child_changed",u,g,c),_s(h,T,"value",u,g,c),T}(h.eventGenerator_,u,c,g?[g]:h.eventRegistrations_)}let Ga,Ra;class ${constructor(){this.views=new Map}}function xt(h,u,c,g){const T=u.source.queryId;if(null!==T){const O=h.views.get(T);return(0,U.hu)(null!=O,"SyncTree gave us an op for an invalid query."),xa(O,u,c,g)}{let O=[];for(const z of h.views.values())O=O.concat(xa(z,u,c,g));return O}}function Ut(h,u,c,g,T){const z=h.views.get(u._queryIdentifier);if(!z){let he=Sa(c,T?g:null),Re=!1;he?Re=!0:g instanceof Mn?(he=pc(c,g),Re=!1):(he=Mn.EMPTY_NODE,Re=!1);const et=Dl(new Uo(he,Re,!1),new Uo(g,T,!1));return new il(u,et)}return z}function or(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function Rr(h,u){let c=null;for(const g of h.views.values())c=c||sl(g,u);return c}function fi(h,u){return u._queryParams.loadsAllData()?li(h):h.views.get(u._queryIdentifier)}function Wr(h,u){return null!=fi(h,u)}function us(h){return null!=li(h)}function li(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let No=1;class _a{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Ur(null),this.pendingWriteTree_=function hs(){return{visibleWrites:qi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ll(h,u,c,g,T){return function le(h,u,c,g,T){(0,U.hu)(g>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===T&&(T=!0),h.allWrites.push({path:u,snap:c,writeId:g,visible:T}),T&&(h.visibleWrites=eo(h.visibleWrites,u,c)),h.lastWriteId=g}(h.pendingWriteTree_,u,c,g,T),T?na(h,new Io({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function ea(h,u,c=!1){const g=function it(h,u){for(let c=0;c<h.allWrites.length;c++){const g=h.allWrites[c];if(g.writeId===u)return g}return null}(h.pendingWriteTree_,u);if(function ln(h,u){const c=h.allWrites.findIndex(he=>he.writeId===u);(0,U.hu)(c>=0,"removeWrite called with nonexistent writeId.");const g=h.allWrites[c];h.allWrites.splice(c,1);let T=g.visible,O=!1,z=h.allWrites.length-1;for(;T&&z>=0;){const he=h.allWrites[z];he.visible&&(z>=c&&Jn(he,g.path)?T=!1:Pi(g.path,he.path)&&(O=!0)),z--}return!!T&&(O?(function di(h){h.visibleWrites=vi(h.allWrites,qn,Tr()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(g.snap?h.visibleWrites=kr(h.visibleWrites,g.path):Wn(g.children,Re=>{h.visibleWrites=kr(h.visibleWrites,Kr(g.path,Re))}),!0))}(h.pendingWriteTree_,u)){let O=new Ur(null);return null!=g.snap?O=O.set(Tr(),!0):Wn(g.children,z=>{O=O.set(new qr(z),!0)}),na(h,new Ps(g.path,O,c))}return[]}function ta(h,u,c){return na(h,new Io({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function Gu(h,u,c,g){const T=u._path,O=h.syncPointTree_.get(T);let z=[];if(O&&("default"===u._queryIdentifier||Wr(O,u))){const he=function gr(h,u,c,g){const T=u._queryIdentifier,O=[];let z=[];const he=us(h);if("default"===T)for(const[Re,et]of h.views.entries())z=z.concat(Vl(et,c,g)),Ho(et)&&(h.views.delete(Re),et.query._queryParams.loadsAllData()||O.push(et.query));else{const Re=h.views.get(T);Re&&(z=z.concat(Vl(Re,c,g)),Ho(Re)&&(h.views.delete(T),Re.query._queryParams.loadsAllData()||O.push(Re.query)))}return he&&!us(h)&&O.push(new(function ue(){return(0,U.hu)(Ga,"Reference.ts has not been loaded"),Ga}())(u._repo,u._path)),{removed:O,events:z}}(O,u,c,g);(function Ge(h){return 0===h.views.size})(O)&&(h.syncPointTree_=h.syncPointTree_.remove(T));const Re=he.removed;z=he.events;const et=-1!==Re.findIndex(Bt=>Bt._queryParams.loadsAllData()),Wt=h.syncPointTree_.findOnPath(T,(Bt,gn)=>us(gn));if(et&&!Wt){const Bt=h.syncPointTree_.subtree(T);if(!Bt.isEmpty()){const gn=function cl(h){return h.fold((u,c,g)=>{if(c&&us(c))return[li(c)];{let T=[];return c&&(T=or(c)),Wn(g,(O,z)=>{T=T.concat(z)}),T}})}(Bt);for(let _r=0;_r<gn.length;++_r){const Gr=gn[_r],rs=Gr.query,To=Od(h,Gr);h.listenProvider_.startListening(dl(rs),va(h,rs),To.hashFn,To.onComplete)}}}!Wt&&Re.length>0&&!g&&(et?h.listenProvider_.stopListening(dl(u),null):Re.forEach(Bt=>{const gn=h.queryToTagMap.get(Ea(Bt));h.listenProvider_.stopListening(dl(Bt),gn)})),function Al(h,u){for(let c=0;c<u.length;++c){const g=u[c];if(!g._queryParams.loadsAllData()){const T=Ea(g),O=h.queryToTagMap.get(T);h.queryToTagMap.delete(T),h.tagToQueryMap.delete(O)}}}(h,Re)}return z}function Kc(h,u,c){const g=u._path;let T=null,O=!1;h.syncPointTree_.foreachOnPath(g,(Bt,gn)=>{const _r=ui(Bt,g);T=T||Rr(gn,_r),O=O||us(gn)});let he,z=h.syncPointTree_.get(g);z?(O=O||us(z),T=T||Rr(z,Tr())):(z=new $,h.syncPointTree_=h.syncPointTree_.set(g,z)),null!=T?he=!0:(he=!1,T=Mn.EMPTY_NODE,h.syncPointTree_.subtree(g).foreachChild((gn,_r)=>{const Gr=Rr(_r,Tr());Gr&&(T=T.updateImmediateChild(gn,Gr))}));const Re=Wr(z,u);if(!Re&&!u._queryParams.loadsAllData()){const Bt=Ea(u);(0,U.hu)(!h.queryToTagMap.has(Bt),"View does not exist, but we have a tag");const gn=function hl(){return No++}();h.queryToTagMap.set(Bt,gn),h.tagToQueryMap.set(gn,Bt)}let Wt=function vn(h,u,c,g,T,O){const z=Ut(h,u,g,T,O);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,z),function ol(h,u){h.eventRegistrations_.push(u)}(z,c),function gc(h,u){const c=h.viewCache_.eventCache,g=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(q,(O,z)=>{g.push(ho(O,z))}),c.isFullyInitialized()&&g.push(Bo(c.getNode())),al(h,g,c.getNode(),u)}(z,c)}(z,u,c,Y(h.pendingWriteTree_,g),T,he);if(!Re&&!O){const Bt=fi(z,u);Wt=Wt.concat(function vc(h,u,c){const g=u._path,T=va(h,u),O=Od(h,c),z=h.listenProvider_.startListening(dl(u),T,O.hashFn,O.onComplete),he=h.syncPointTree_.subtree(g);if(T)(0,U.hu)(!us(he.value),"If we're adding a query, it shouldn't be shadowed");else{const Re=he.fold((et,Wt,Bt)=>{if(!jr(et)&&Wt&&us(Wt))return[li(Wt).query];{let gn=[];return Wt&&(gn=gn.concat(or(Wt).map(_r=>_r.query))),Wn(Bt,(_r,Gr)=>{gn=gn.concat(Gr)}),gn}});for(let et=0;et<Re.length;++et){const Wt=Re[et];h.listenProvider_.stopListening(dl(Wt),va(h,Wt))}}return z}(h,u,Bt))}return Wt}function mc(h,u,c){const T=h.pendingWriteTree_,O=h.syncPointTree_.findOnPath(u,(z,he)=>{const et=Rr(he,ui(z,u));if(et)return et});return ii(T,u,O,c,!0)}function na(h,u){return du(u,h.syncPointTree_,null,Y(h.pendingWriteTree_,Tr()))}function du(h,u,c,g){if(jr(h.path))return Md(h,u,c,g);{const T=u.get(Tr());null==c&&null!=T&&(c=Rr(T,Tr()));let O=[];const z=wr(h.path),he=h.operationForChild(z),Re=u.children.get(z);if(Re&&he){const et=c?c.getImmediateChild(z):null,Wt=Tl(g,z);O=O.concat(du(he,Re,et,Wt))}return T&&(O=O.concat(xt(T,h,g,c))),O}}function Md(h,u,c,g){const T=u.get(Tr());null==c&&null!=T&&(c=Rr(T,Tr()));let O=[];return u.children.inorderTraversal((z,he)=>{const Re=c?c.getImmediateChild(z):null,et=Tl(g,z),Wt=h.operationForChild(z);Wt&&(O=O.concat(Md(Wt,he,Re,et)))}),T&&(O=O.concat(xt(T,h,g,c))),O}function Od(h,u){const c=u.query,g=va(h,c);return{hashFn:()=>(function ko(h){return h.viewCache_.serverCache.getNode()}(u)||Mn.EMPTY_NODE).hash(),onComplete:T=>{if("ok"===T)return g?function Yc(h,u,c){const g=Pd(h,c);if(g){const T=yc(g),O=T.path,z=T.queryId,he=ui(O,u);return _c(h,O,new ga(Va(z),he))}return[]}(h,c._path,g):function ul(h,u){return na(h,new ga({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const O=function wn(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const g=new Error(h+" at "+u._path.toString()+": "+c);return g.code=h.toUpperCase(),g}(T,c);return Gu(h,c,null,O)}}}}function va(h,u){const c=Ea(u);return h.queryToTagMap.get(c)}function Ea(h){return h._path.toString()+"$"+h._queryIdentifier}function Pd(h,u){return h.tagToQueryMap.get(u)}function yc(h){const u=h.indexOf("$");return(0,U.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new qr(h.substr(0,u))}}function _c(h,u,c){const g=h.syncPointTree_.get(u);return(0,U.hu)(g,"Missing sync point for query tag that we're tracking"),xt(g,c,Y(h.pendingWriteTree_,u),null)}function dl(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function mo(){return(0,U.hu)(Ra,"Reference.ts has not been loaded"),Ra}())(h._repo,h._path):h}class jl{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new jl(c)}node(){return this.node_}}class Ec{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Kr(this.path_,u);return new Ec(this.syncTree_,c)}node(){return mc(this.syncTree_,this.path_)}}const fl=function(h,u,c){return h&&"object"==typeof h?((0,U.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?ra(h[".sv"],u,c):"object"==typeof h[".sv"]?Zc(h[".sv"],u):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},ra=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,U.hu)(!1,"Unexpected server value: "+h)},Zc=function(h,u,c){h.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const g=h.increment;"number"!=typeof g&&(0,U.hu)(!1,"Unexpected increment value: "+g);const T=u.node();if((0,U.hu)(null!=T,"Expected ChildrenNode.EMPTY_NODE for nulls"),!T.isLeafNode())return g;const z=T.getValue();return"number"!=typeof z?g:z+g},xl=function(h,u,c,g){return zu(u,new Ec(c,h),g)},za=function(h,u,c){return zu(h,new jl(u),c)};function zu(h,u,c){const g=h.getPriority().val(),T=fl(g,u.getImmediateChild(".priority"),c);let O;if(h.isLeafNode()){const z=h,he=fl(z.getValue(),u,c);return he!==z.getValue()||T!==z.getPriority().val()?new jt(he,Fr(T)):h}{const z=h;return O=z,T!==z.getPriority().val()&&(O=O.updatePriority(new jt(T))),z.forEachChild(q,(he,Re)=>{const et=zu(Re,u.getImmediateChild(he),c);et!==Re&&(O=O.updateImmediateChild(he,et))}),O}}class Wu{constructor(u="",c=null,g={children:{},childCount:0}){this.name=u,this.parent=c,this.node=g}}function qu(h,u){let c=u instanceof qr?u:new qr(u),g=h,T=wr(c);for(;null!==T;){const O=(0,U.DV)(g.node.children,T)||{children:{},childCount:0};g=new Wu(T,g,O),c=Qr(c),T=wr(c)}return g}function Wa(h){return h.node.value}function Xc(h,u){h.node.value=u,Zu(h)}function ia(h){return h.node.childCount>0}function Gl(h,u){Wn(h.node.children,(c,g)=>{u(new Wu(c,h,g))})}function Yu(h,u,c,g){c&&!g&&u(h),Gl(h,T=>{Yu(T,u,!0,g)}),c&&g&&u(h)}function Ku(h){return new qr(null===h.parent?h.name:Ku(h.parent)+"/"+h.name)}function Zu(h){null!==h.parent&&function zl(h,u,c){const g=function Hl(h){return void 0===Wa(h)&&!ia(h)}(c),T=(0,U.r3)(h.node.children,u);g&&T?(delete h.node.children[u],h.node.childCount--,Zu(h)):!g&&!T&&(h.node.children[u]=c.node,h.node.childCount++,Zu(h))}(h.parent,h.name,h)}const Rl=/[\[\].#$\/\u0000-\u001F\u007F]/,kd=/[\[\].#$\u0000-\u001F\u007F]/,pl=10485760,bc=function(h){return"string"==typeof h&&0!==h.length&&!Rl.test(h)},sa=function(h){return"string"==typeof h&&0!==h.length&&!kd.test(h)},fu=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!nn(h)||h&&"object"==typeof h&&(0,U.r3)(h,".sv")},Qs=function(h,u,c,g){g&&void 0===u||pu((0,U.gK)(h,"value"),u,c)},pu=function(h,u,c){const g=c instanceof qr?new so(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+Ei(g));if("function"==typeof u)throw new Error(h+"contains a function "+Ei(g)+" with contents = "+u.toString());if(nn(u))throw new Error(h+"contains "+u.toString()+" "+Ei(g));if("string"==typeof u&&u.length>pl/3&&(0,U.ug)(u)>pl)throw new Error(h+"contains a string greater than "+pl+" utf8 bytes "+Ei(g)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let T=!1,O=!1;if(Wn(u,(z,he)=>{if(".value"===z)T=!0;else if(".priority"!==z&&".sv"!==z&&(O=!0,!bc(z)))throw new Error(h+" contains an invalid key ("+z+") "+Ei(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ss(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,U.ug)(u),Os(h)})(g,z),pu(h,he,g),function Ms(h){const u=h.parts_.pop();h.byteLength_-=(0,U.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(g)}),T&&O)throw new Error(h+' contains ".value" child '+Ei(g)+" in addition to actual children.")}},fs=function(h,u,c,g){if(g&&void 0===u)return;const T=(0,U.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(T+" must be an object containing the children to replace.");const O=[];Wn(u,(z,he)=>{const Re=new qr(z);if(pu(T,he,Kr(c,Re)),".priority"===Rs(Re)&&!fu(he))throw new Error(T+"contains an invalid value for '"+Re.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");O.push(Re)}),function(h,u){let c,g;for(c=0;c<u.length;c++){g=u[c];const O=is(g);for(let z=0;z<O.length;z++)if((".priority"!==O[z]||z!==O.length-1)&&!bc(O[z]))throw new Error(h+"contains an invalid key ("+O[z]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(mi);let T=null;for(c=0;c<u.length;c++){if(g=u[c],null!==T&&Pi(T,g))throw new Error(h+"contains a path "+T.toString()+" that is ancestor of another path "+g.toString());T=g}}(T,O)},Wl=function(h,u,c){if(!c||void 0!==u){if(nn(u))throw new Error((0,U.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fu(u))throw new Error((0,U.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ma=function(h,u,c,g){if(!(g&&void 0===c||bc(c)))throw new Error((0,U.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gu=function(h,u,c,g){if(!(g&&void 0===c||sa(c)))throw new Error((0,U.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oa=function(h,u){if(".info"===wr(u))throw new Error(h+" failed = Can't modify data under /.info/")},Fd=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!bc(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),sa(h)}(c))throw new Error((0,U.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qa(h,u){let c=null;for(let g=0;g<u.length;g++){const T=u[g],O=T.getPath();null!==c&&!wi(O,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:O}),c.events.push(T)}c&&h.eventLists_.push(c)}function Oa(h,u,c){qa(h,c),Jc(h,g=>wi(g,u))}function wa(h,u,c){qa(h,c),Jc(h,g=>Pi(g,u)||Pi(u,g))}function Jc(h,u){h.recursionDepth_++;let c=!0;for(let g=0;g<h.eventLists_.length;g++){const T=h.eventLists_[g];T&&(u(T.path)?(Xu(h.eventLists_[g]),h.eventLists_[g]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Xu(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const g=c.getEventRunner();vr&&ar("event: "+c.toString()),De(g)}}}const mu="repo_interrupt";class td{constructor(u,c,g,T){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=g,this.appCheckProvider_=T,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zi(),this.transactionQueueTree_=new Wu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ii(h){const c=h.infoData_.getNode(new qr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function gl(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Ii(h)})}function ql(h,u,c,g,T){h.dataUpdateCount++;const O=new qr(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let z=[];if(T)if(g){const Re=(0,U.UI)(c,et=>Fr(et));z=function cu(h,u,c,g){const T=Pd(h,g);if(T){const O=yc(T),z=O.path,he=O.queryId,Re=ui(z,u),et=Ur.fromObject(c);return _c(h,z,new oo(Va(he),Re,et))}return[]}(h.serverSyncTree_,O,Re,T)}else{const Re=Fr(c);z=function Xs(h,u,c,g){const T=Pd(h,g);if(null!=T){const O=yc(T),z=O.path,he=O.queryId,Re=ui(z,u);return _c(h,z,new Io(Va(he),Re,c))}return[]}(h.serverSyncTree_,O,Re,T)}else if(g){const Re=(0,U.UI)(c,et=>Fr(et));z=function uu(h,u,c){const g=Ur.fromObject(c);return na(h,new oo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,g))}(h.serverSyncTree_,O,Re)}else{const Re=Fr(c);z=ta(h.serverSyncTree_,O,Re)}let he=O;z.length>0&&(he=to(h,O)),wa(h.eventQueue_,he,z)}function Pa(h,u){cs(h,"connected",u),!1===u&&function Sh(h){aa(h,"onDisconnectEvents");const u=gl(h),c=Zi();po(h.onDisconnect_,Tr(),(T,O)=>{const z=xl(T,O,h.serverSyncTree_,u);qo(c,T,z)});let g=[];po(c,Tr(),(T,O)=>{g=g.concat(ta(h.serverSyncTree_,T,O));const z=Dc(h,T);to(h,z)}),h.onDisconnect_=Zi(),wa(h.eventQueue_,Tr(),g)}(h)}function cs(h,u,c){const g=new qr("/.info/"+u),T=Fr(c);h.infoData_.updateSnapshot(g,T);const O=ta(h.infoSyncTree_,g,T);wa(h.eventQueue_,g,O)}function $s(h){return h.nextWriteId_++}function yu(h,u,c,g,T){aa(h,"set",{path:u.toString(),value:c,priority:g});const O=gl(h),z=Fr(c,g),he=mc(h.serverSyncTree_,u),Re=za(z,he,O),et=$s(h),Wt=ll(h.serverSyncTree_,u,Re,et,!0);qa(h.eventQueue_,Wt),h.server_.put(u.toString(),z.val(!0),(gn,_r)=>{const Gr="ok"===gn;Gr||Kt("set at "+u+" failed: "+gn);const rs=ea(h.serverSyncTree_,et,!Gr);wa(h.eventQueue_,u,rs),Lo(0,T,gn,_r)});const Bt=Dc(h,u);to(h,Bt),wa(h.eventQueue_,Bt,[])}function Fo(h,u,c){h.server_.onDisconnectCancel(u.toString(),(g,T)=>{"ok"===g&&$a(h.onDisconnect_,u),Lo(0,c,g,T)})}function Ld(h,u,c,g){const T=Fr(c);h.server_.onDisconnectPut(u.toString(),T.val(!0),(O,z)=>{"ok"===O&&qo(h.onDisconnect_,u,T),Lo(0,g,O,z)})}function $d(h,u,c){let g;g=".info"===wr(u._path)?Gu(h.infoSyncTree_,u,c):Gu(h.serverSyncTree_,u,c),Oa(h.eventQueue_,u._path,g)}function Ti(h){h.persistentConnection_&&h.persistentConnection_.interrupt(mu)}function aa(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),ar(c,...u)}function Lo(h,u,c,g){u&&De(()=>{if("ok"===c)u(null);else{const T=(c||"error").toUpperCase();let O=T;g&&(O+=": "+g);const z=new Error(O);z.code=T,u(z)}})}function Bs(h,u,c){return mc(h.serverSyncTree_,u,c)||Mn.EMPTY_NODE}function ka(h,u=h.transactionQueueTree_){if(u||_u(h,u),Wa(u)){const c=nd(h,u);(0,U.hu)(c.length>0,"Sending zero length transaction queue"),c.every(T=>0===T.status)&&function Cc(h,u,c){const g=c.map(et=>et.currentWriteId),T=Bs(h,u,g);let O=T;const z=T.hash();for(let et=0;et<c.length;et++){const Wt=c[et];(0,U.hu)(0===Wt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Wt.status=1,Wt.retryCount++;const Bt=ui(u,Wt.path);O=O.updateChild(Bt,Wt.currentOutputSnapshotRaw)}const he=O.val(!0),Re=u;h.server_.put(Re.toString(),he,et=>{aa(h,"transaction put response",{path:Re.toString(),status:et});let Wt=[];if("ok"===et){const Bt=[];for(let gn=0;gn<c.length;gn++)c[gn].status=2,Wt=Wt.concat(ea(h.serverSyncTree_,c[gn].currentWriteId)),c[gn].onComplete&&Bt.push(()=>c[gn].onComplete(null,!0,c[gn].currentOutputSnapshotResolved)),c[gn].unwatcher();_u(h,qu(h.transactionQueueTree_,u)),ka(h,h.transactionQueueTree_),wa(h.eventQueue_,u,Wt);for(let gn=0;gn<Bt.length;gn++)De(Bt[gn])}else{if("datastale"===et)for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=3===c[Bt].status?4:0;else{Kt("transaction at "+Re.toString()+" failed: "+et);for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=4,c[Bt].abortReason=et}to(h,u)}},z)}(h,Ku(u),c)}else ia(u)&&Gl(u,c=>{ka(h,c)})}function to(h,u){const c=ec(h,u),g=Ku(c);return function Ju(h,u,c){if(0===u.length)return;const g=[];let T=[];const z=u.filter(he=>0===he.status).map(he=>he.currentWriteId);for(let he=0;he<u.length;he++){const Re=u[he],et=ui(c,Re.path);let Bt,Wt=!1;if((0,U.hu)(null!==et,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Re.status)Wt=!0,Bt=Re.abortReason,T=T.concat(ea(h.serverSyncTree_,Re.currentWriteId,!0));else if(0===Re.status)if(Re.retryCount>=25)Wt=!0,Bt="maxretry",T=T.concat(ea(h.serverSyncTree_,Re.currentWriteId,!0));else{const gn=Bs(h,Re.path,z);Re.currentInputSnapshot=gn;const _r=u[he].update(gn.val());if(void 0!==_r){pu("transaction failed: Data returned ",_r,Re.path);let Gr=Fr(_r);"object"==typeof _r&&null!=_r&&(0,U.r3)(_r,".priority")||(Gr=Gr.updatePriority(gn.getPriority()));const To=Re.currentWriteId,xu=gl(h),kl=za(Gr,gn,xu);Re.currentOutputSnapshotRaw=Gr,Re.currentOutputSnapshotResolved=kl,Re.currentWriteId=$s(h),z.splice(z.indexOf(To),1),T=T.concat(ll(h.serverSyncTree_,Re.path,kl,Re.currentWriteId,Re.applyLocally)),T=T.concat(ea(h.serverSyncTree_,To,!0))}else Wt=!0,Bt="nodata",T=T.concat(ea(h.serverSyncTree_,Re.currentWriteId,!0))}wa(h.eventQueue_,c,T),T=[],Wt&&(u[he].status=2,setTimeout(u[he].unwatcher,Math.floor(0)),u[he].onComplete&&g.push("nodata"===Bt?()=>u[he].onComplete(null,!1,u[he].currentInputSnapshot):()=>u[he].onComplete(new Error(Bt),!1,null)))}_u(h,h.transactionQueueTree_);for(let he=0;he<g.length;he++)De(g[he]);ka(h,h.transactionQueueTree_)}(h,nd(h,c),g),g}function ec(h,u){let c,g=h.transactionQueueTree_;for(c=wr(u);null!==c&&void 0===Wa(g);)g=qu(g,c),c=wr(u=Qr(u));return g}function nd(h,u){const c=[];return tc(h,u,c),c.sort((g,T)=>g.order-T.order),c}function tc(h,u,c){const g=Wa(u);if(g)for(let T=0;T<g.length;T++)c.push(g[T]);Gl(u,T=>{tc(h,T,c)})}function _u(h,u){const c=Wa(u);if(c){let g=0;for(let T=0;T<c.length;T++)2!==c[T].status&&(c[g]=c[T],g++);c.length=g,Xc(u,c.length>0?c:void 0)}Gl(u,g=>{_u(h,g)})}function Dc(h,u){const c=Ku(ec(h,u)),g=qu(h.transactionQueueTree_,u);return function Qc(h,u,c){let g=c?h:h.parent;for(;null!==g;){if(u(g))return!0;g=g.parent}}(g,T=>{Ml(h,T)}),Ml(h,g),Yu(g,T=>{Ml(h,T)}),c}function Ml(h,u){const c=Wa(u);if(c){const g=[];let T=[],O=-1;for(let z=0;z<c.length;z++)3===c[z].status||(1===c[z].status?((0,U.hu)(O===z-1,"All SENT items should be at beginning of queue."),O=z,c[z].status=3,c[z].abortReason="set"):((0,U.hu)(0===c[z].status,"Unexpected transaction status in abort"),c[z].unwatcher(),T=T.concat(ea(h.serverSyncTree_,c[z].currentWriteId,!0)),c[z].onComplete&&g.push(c[z].onComplete.bind(null,new Error("set"),!1,null))));-1===O?Xc(u,void 0):c.length=O+1,wa(h.eventQueue_,Ku(u),T);for(let z=0;z<g.length;z++)De(g[z])}}const Vs=function(h,u){const c=rd(h),g=c.namespace;return"firebase.com"===c.domain&&Ie(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==c.domain&&Ie("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Qt(c.host,c.secure,g,"ws"===c.scheme||"wss"===c.scheme,u,"",g!==c.subdomain),path:new qr(c.pathString)}},rd=function(h){let u="",c="",g="",T="",O="",z=!0,he="https",Re=443;if("string"==typeof h){let et=h.indexOf("//");et>=0&&(he=h.substring(0,et-1),h=h.substring(et+2));let Wt=h.indexOf("/");-1===Wt&&(Wt=h.length);let Bt=h.indexOf("?");-1===Bt&&(Bt=h.length),u=h.substring(0,Math.min(Wt,Bt)),Wt<Bt&&(T=function Bd(h){let u="";const c=h.split("/");for(let g=0;g<c.length;g++)if(c[g].length>0){let T=c[g];try{T=decodeURIComponent(T.replace(/\+/g," "))}catch(O){}u+="/"+T}return u}(h.substring(Wt,Bt)));const gn=function Ya(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const g=c.split("=");2===g.length?u[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):Kt(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,Bt)));et=u.indexOf(":"),et>=0?(z="https"===he||"wss"===he,Re=parseInt(u.substring(et+1),10)):et=u.length;const _r=u.slice(0,et);if("localhost"===_r.toLowerCase())c="localhost";else if(_r.split(".").length<=2)c=_r;else{const Gr=u.indexOf(".");g=u.substring(0,Gr).toLowerCase(),c=u.substring(Gr+1),O=g}"ns"in gn&&(O=gn.ns)}return{host:u,port:Re,domain:c,subdomain:g,secure:z,scheme:he,pathString:T,namespace:O}};class nc{constructor(u,c,g,T){this.eventType=u,this.eventRegistration=c,this.snapshot=g,this.prevName=T}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Pz)(this.snapshot.exportVal())}}class vu{constructor(u,c,g){this.eventRegistration=u,this.error=c,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ia{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Js{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new U.BH;return Fo(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){oa("OnDisconnect.remove",this._path);const u=new U.BH;return Ld(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){oa("OnDisconnect.set",this._path),Qs("OnDisconnect.set",u,this._path,!1);const c=new U.BH;return Ld(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){oa("OnDisconnect.setWithPriority",this._path),Qs("OnDisconnect.setWithPriority",u,this._path,!1),Wl("OnDisconnect.setWithPriority",c,!1);const g=new U.BH;return function Ic(h,u,c,g,T){const O=Fr(c,g);h.server_.onDisconnectPut(u.toString(),O.val(!0),(z,he)=>{"ok"===z&&qo(h.onDisconnect_,u,O),Lo(0,T,z,he)})}(this._repo,this._path,u,c,g.wrapCallback(()=>{})),g.promise}update(u){oa("OnDisconnect.update",this._path),fs("OnDisconnect.update",u,this._path,!1);const c=new U.BH;return function Qu(h,u,c,g){if((0,U.xb)(c))return ar("onDisconnect().update() called with empty data.  Don't do anything."),void Lo(0,g,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(T,O)=>{"ok"===T&&Wn(c,(z,he)=>{const Re=Fr(he);qo(h.onDisconnect_,Kr(u,z),Re)}),Lo(0,g,T,O)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class yo{constructor(u,c,g,T){this._repo=u,this._path=c,this._queryParams=g,this._orderByCalled=T}get key(){return jr(this._path)?null:Rs(this._path)}get ref(){return new _o(this._repo,this._path)}get _queryIdentifier(){const u=bo(this._queryParams),c=Cr(u);return"{}"===c?"default":c}get _queryObject(){return bo(this._queryParams)}isEqual(u){if(!((u=(0,U.m9)(u))instanceof yo))return!1;const c=this._repo===u._repo,g=wi(this._path,u._path);return c&&g&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vo(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function Ka(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function ml(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===Pr){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",T="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Xn)throw new Error(g);if("string"!=typeof u)throw new Error(T)}if(h.hasEnd()){if(h.getIndexEndName()!==Zn)throw new Error(g);if("string"!=typeof c)throw new Error(T)}}else if(h.getIndex()===q){if(null!=u&&!fu(u)||null!=c&&!fu(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(h.getIndex()instanceof Ri||h.getIndex()===zs,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function la(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _o extends yo{constructor(u,c){super(u,c,new Oo,!1)}get parent(){const u=ws(this._path);return null===u?null:new _o(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class yl{constructor(u,c,g){this._node=u,this.ref=c,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new qr(u),g=Na(this.ref,u);return new yl(this._node.getChild(c),g,q)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,T)=>u(new yl(T,Na(this.ref,g),q)))}hasChild(u){const c=new qr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function id(h,u){return(h=(0,U.m9)(h))._checkNotDeleted("ref"),void 0!==u?Na(h._root,u):h._root}function Eu(h,u){(h=(0,U.m9)(h))._checkNotDeleted("refFromURL");const c=Vs(u,h._repo.repoInfo_.nodeAdmin);Fd("refFromURL",c);const g=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&g.host!==h._repo.repoInfo_.host&&Ie("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+h._repo.repoInfo_.host+")"),id(h,c.path.toString())}function Na(h,u){return null===wr((h=(0,U.m9)(h))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),gu("child","path",c,!1)):gu("child","path",u,!1),new _o(h._repo,Kr(h._path,u));var c}function Tc(h,u){h=(0,U.m9)(h),oa("set",h._path),Qs("set",u,h._path,!1);const c=new U.BH;return yu(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function _(h,u){fs("update",u,h._path,!1);const c=new U.BH;return function Yl(h,u,c,g){aa(h,"update",{path:u.toString(),value:c});let T=!0;const O=gl(h),z={};if(Wn(c,(he,Re)=>{T=!1,z[he]=xl(Kr(u,he),Fr(Re),h.serverSyncTree_,O)}),T)ar("update() called with empty data.  Don't do anything."),Lo(0,g,"ok",void 0);else{const he=$s(h),Re=function Sl(h,u,c,g){!function Be(h,u,c,g){(0,U.hu)(g>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:g,visible:!0}),h.visibleWrites=sr(h.visibleWrites,u,c),h.lastWriteId=g}(h.pendingWriteTree_,u,c,g);const T=Ur.fromObject(c);return na(h,new oo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,T))}(h.serverSyncTree_,u,z,he);qa(h.eventQueue_,Re),h.server_.merge(u.toString(),c,(et,Wt)=>{const Bt="ok"===et;Bt||Kt("update at "+u+" failed: "+et);const gn=ea(h.serverSyncTree_,he,!Bt),_r=gn.length>0?to(h,u):u;wa(h.eventQueue_,_r,gn),Lo(0,g,et,Wt)}),Wn(c,et=>{const Wt=Dc(h,Kr(u,et));to(h,Wt)}),wa(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function x(h){return function ps(h,u){const c=function Rd(h,u){const c=u._path;let g=null;h.syncPointTree_.foreachOnPath(c,(et,Wt)=>{const Bt=ui(et,c);g=g||Rr(Wt,Bt)});let T=h.syncPointTree_.get(c);T?g=g||Rr(T,Tr()):(T=new $,h.syncPointTree_=h.syncPointTree_.set(c,T));const O=null!=g,z=O?new Uo(g,!0,!1):null;return function Aa(h){return Po(h.viewCache_)}(Ut(T,u,Y(h.pendingWriteTree_,u._path),O?z.getNode():Mn.EMPTY_NODE,O))}(h.serverSyncTree_,u);return null!=c?Promise.resolve(c):h.server_.get(u).then(g=>{const T=Fr(g).withIndex(u._queryParams.getIndex()),O=ta(h.serverSyncTree_,u._path,T);return Oa(h.eventQueue_,u._path,O),Promise.resolve(T)},g=>(aa(h,"get for query "+(0,U.Pz)(u)+" failed: "+g),Promise.reject(new Error(g))))}((h=(0,U.m9)(h))._repo,h).then(u=>new yl(u,new _o(h._repo,h._path),h._queryParams.getIndex()))}class K{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const g=c._queryParams.getIndex();return new nc("value",this,new yl(u.snapshotNode,new _o(c._repo,c._path),g))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new vu(this,u,c):null}matches(u){return u instanceof K&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ge{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new vu(this,u,c):null}createEvent(u,c){(0,U.hu)(null!=u.childName,"Child events should have a childName.");const g=Na(new _o(c._repo,c._path),u.childName),T=c._queryParams.getIndex();return new nc(u.type,this,new yl(u.snapshotNode,g,T),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof ge&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wt(h,u,c,g,T){let O;if("object"==typeof g&&(O=void 0,T=g),"function"==typeof g&&(O=g),T&&T.onlyOnce){const Re=c,et=(Wt,Bt)=>{$d(h._repo,h,he),Re(Wt,Bt)};et.userCallback=c.userCallback,et.context=c.context,c=et}const z=new Ia(c,O||void 0),he="value"===u?new K(z):new ge(u,z);return function Cf(h,u,c){let g;g=".info"===wr(u._path)?Kc(h.infoSyncTree_,u,c):Kc(h.serverSyncTree_,u,c),Oa(h.eventQueue_,u._path,g)}(h._repo,h,he),()=>$d(h._repo,h,he)}function Xt(h,u,c,g){return wt(h,"value",u,c,g)}function zn(h,u,c,g){return wt(h,"child_added",u,c,g)}function mr(h,u,c,g){return wt(h,"child_changed",u,c,g)}function yr(h,u,c,g){return wt(h,"child_moved",u,c,g)}function $r(h,u,c,g){return wt(h,"child_removed",u,c,g)}function gs(h,u,c){let g=null;const T=c?new Ia(c):null;"value"===u?g=new K(T):u&&(g=new ge(u,T)),$d(h._repo,h,g)}class Ui{}class Zl extends Ui{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Qs("endAt",this._value,u._path,!0);const c=Il(u._queryParams,this._value,this._key);if(la(c),ml(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(u._repo,u._path,c,u._orderByCalled)}}class bu extends Ui{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Qs("endBefore",this._value,u._path,!1);const c=function tl(h,u,c){let g,T;return h.index_===Pr?("string"==typeof u&&(u=Ro(u)),T=Il(h,u,c)):(g=null==c?Xn:Ro(c),T=Il(h,u,g)),T.endBeforeSet_=!0,T}(u._queryParams,this._value,this._key);if(la(c),ml(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yo(u._repo,u._path,c,u._orderByCalled)}}class jd extends Ui{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Qs("startAt",this._value,u._path,!0);const c=el(u._queryParams,this._value,this._key);if(la(c),ml(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yo(u._repo,u._path,c,u._orderByCalled)}}class Sc extends Ui{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Qs("startAfter",this._value,u._path,!1);const c=function lu(h,u,c){let g;if(h.index_===Pr)"string"==typeof u&&(u=da(u)),g=el(h,u,c);else{let T;T=null==c?Zn:da(c),g=el(h,u,T)}return g.startAfterSet_=!0,g}(u._queryParams,this._value,this._key);if(la(c),ml(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yo(u._repo,u._path,c,u._orderByCalled)}}class ad extends Ui{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(u._repo,u._path,function ha(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class Ah extends Ui{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yo(u._repo,u._path,function ts(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class xh extends Ui{constructor(u){super(),this._path=u}_apply(u){Ka(u,"orderByChild");const c=new qr(this._path);if(jr(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new Ri(c),T=nl(u._queryParams,g);return ml(T),new yo(u._repo,u._path,T,!0)}}class Rp extends Ui{_apply(u){Ka(u,"orderByKey");const c=nl(u._queryParams,Pr);return ml(c),new yo(u._repo,u._path,c,!0)}}class Tf extends Ui{_apply(u){Ka(u,"orderByPriority");const c=nl(u._queryParams,q);return ml(c),new yo(u._repo,u._path,c,!0)}}class Mh extends Ui{_apply(u){Ka(u,"orderByValue");const c=nl(u._queryParams,zs);return ml(c),new yo(u._repo,u._path,c,!0)}}class Sf extends Ui{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(Qs("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Zl(this._value,this._key)._apply(new jd(this._value,this._key)._apply(u))}}function Fa(h,...u){let c=(0,U.m9)(h);for(const g of u)c=g._apply(c);return c}(function W(h){(0,U.hu)(!Ga,"__referenceConstructor has already been defined"),Ga=h})(_o),function Ul(h){(0,U.hu)(!Ra,"__referenceConstructor has already been defined"),Ra=h}(_o);const tn={};function Af(h,u,c,g,T){let O=g||h.options.databaseURL;void 0===O&&(h.options.projectId||Ie("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ar("Using default host for project ",h.options.projectId),O=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Re,et,z=Vs(O,T),he=z.repoInfo;"undefined"!=typeof process&&process.env&&(et=process.env.FIREBASE_DATABASE_EMULATOR_HOST),et?(Re=!0,O=`http://${et}?ns=${he.namespace}`,z=Vs(O,T),he=z.repoInfo):Re=!z.repoInfo.secure;const Wt=T&&Re?new tt(tt.OWNER):new dn(h.name,h.options,u);Fd("Invalid Firebase Database URL",z),jr(z.path)||Ie("Database URL must point to the root of a Firebase Database (not including a child path).");const Bt=function rc(h,u,c,g){let T=tn[u.name];T||(T={},tn[u.name]=T);let O=T[h.toURLString()];return O&&Ie("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),O=new td(h,false,c,g),T[h.toURLString()]=O,O}(he,h,Wt,new _t(h.name,c));return new Iu(Bt,h)}class Iu{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ds(h,u,c){if(h.stats_=hr(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new wo(h.repoInfo_,(g,T,O,z)=>{ql(h,g,T,O,z)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Pa(h,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Pz)(c)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}h.persistentConnection_=new en(h.repoInfo_,u,(g,T,O,z)=>{ql(h,g,T,O,z)},g=>{Pa(h,g)},g=>{!function Ls(h,u){Wn(u,(c,g)=>{cs(h,c,g)})}(h,g)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(g=>{h.server_.refreshAuthToken(g)}),h.appCheckProvider_.addTokenChangeListener(g=>{h.server_.refreshAppCheckToken(g.token)}),h.statsReporter_=function Xr(h,u){const c=h.toString();return Pn[c]||(Pn[c]=u()),Pn[c]}(h.repoInfo_,()=>new Ll(h.stats_,h.server_)),h.infoData_=new pa,h.infoSyncTree_=new _a({startListening:(g,T,O,z)=>{let he=[];const Re=h.infoData_.getNode(g._path);return Re.isEmpty()||(he=ta(h.infoSyncTree_,g._path,Re),setTimeout(()=>{z("ok")},0)),he},stopListening:()=>{}}),cs(h,"connected",!1),h.serverSyncTree_=new _a({startListening:(g,T,O,z)=>(h.server_.listen(g,O,T,(he,Re)=>{const et=z(he,Re);wa(h.eventQueue_,g._path,et)}),[]),stopListening:(g,T)=>{h.server_.unlisten(g,T)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _o(this._repo,Tr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wu(h,u){const c=tn[u];(!c||c[h.key]!==h)&&Ie(`Database ${u}(${h.repoInfo_}) has already been deleted.`),Ti(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Ie("Cannot call "+u+" on a deleted database.")}}function Rc(h,u){ur(h,u)}const cd={".sv":"timestamp"};class dd{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}en.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},en.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Hd(h){mn(Et.SDK_VERSION),(0,Et._registerComponent)(new ze.wA("database",(u,{instanceIdentifier:c})=>Af(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,Et.registerVersion)(rn,"0.12.8",h),(0,Et.registerVersion)(rn,"0.12.8","esm2017")}();const oc=new Qe.Yd("@firebase/database-compat"),Wd=function(h){oc.warn("FIREBASE WARNING: "+h)};class Pf{constructor(u){this._delegate=u}cancel(u){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),g=>u(g)),c}remove(u){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),g=>u(g)),c}set(u,c){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",c,!0);const g=this._delegate.set(u);return c&&g.then(()=>c(null),T=>c(T)),g}setWithPriority(u,c,g){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const T=this._delegate.setWithPriority(u,c);return g&&T.then(()=>g(null),O=>g(O)),T}update(u,c){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const T={};for(let O=0;O<u.length;++O)T[""+O]=u[O];u=T,Wd("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",c,!0);const g=this._delegate.update(u);return c&&g.then(()=>c(null),T=>c(T)),g}}class kf{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Jl{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),gu("DataSnapshot.child","path",u,!1),new Jl(this._database,this._delegate.child(u))}hasChild(u){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gu("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new Jl(this._database,c)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Is(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Do{constructor(u,c){this.database=u,this._delegate=c}on(u,c,g,T){var O;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",c,!1);const z=Do.getCancelAndContextArgs_("Query.on",g,T),he=(et,Wt)=>{c.call(z.context,new Jl(this.database,et),Wt)};he.userCallback=c,he.context=z.context;const Re=null===(O=z.cancel)||void 0===O?void 0:O.bind(z.context);switch(u){case"value":return Xt(this._delegate,he,Re),c;case"child_added":return zn(this._delegate,he,Re),c;case"child_removed":return $r(this._delegate,he,Re),c;case"child_changed":return mr(this._delegate,he,Re),c;case"child_moved":return yr(this._delegate,he,Re),c;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,g){if((0,U.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,U.Wj)("Query.off","callback",c,!0),(0,U.lb)("Query.off","context",g,!0),c){const T=()=>{};T.userCallback=c,T.context=g,gs(this._delegate,u,T)}else gs(this._delegate,u)}get(){return x(this._delegate).then(u=>new Jl(this.database,u))}once(u,c,g,T){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",c,!0);const O=Do.getCancelAndContextArgs_("Query.once",g,T),z=new U.BH,he=(et,Wt)=>{const Bt=new Jl(this.database,et);c&&c.call(O.context,Bt,Wt),z.resolve(Bt)};he.userCallback=c,he.context=O.context;const Re=et=>{O.cancel&&O.cancel.call(O.context,et),z.reject(et)};switch(u){case"value":Xt(this._delegate,he,Re,{onlyOnce:!0});break;case"child_added":zn(this._delegate,he,Re,{onlyOnce:!0});break;case"child_removed":$r(this._delegate,he,Re,{onlyOnce:!0});break;case"child_changed":mr(this._delegate,he,Re,{onlyOnce:!0});break;case"child_moved":yr(this._delegate,he,Re,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return z.promise}limitToFirst(u){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new Do(this.database,Fa(this._delegate,function Ac(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ad(h)}(u)))}limitToLast(u){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new Do(this.database,Fa(this._delegate,function ld(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ah(h)}(u)))}orderByChild(u){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new Do(this.database,Fa(this._delegate,function xp(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gu("orderByChild","path",h,!1),new xh(h)}(u)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new Do(this.database,Fa(this._delegate,function Mp(){return new Rp}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new Do(this.database,Fa(this._delegate,function Rh(){return new Tf}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new Do(this.database,Fa(this._delegate,function Oh(){return new Mh}()))}startAt(u=null,c){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new Do(this.database,Fa(this._delegate,function Ol(h=null,u){return Ma("startAt","key",u,!0),new jd(h,u)}(u,c)))}startAfter(u=null,c){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new Do(this.database,Fa(this._delegate,function od(h,u){return Ma("startAfter","key",u,!0),new Sc(h,u)}(u,c)))}endAt(u=null,c){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new Do(this.database,Fa(this._delegate,function Xl(h,u){return Ma("endAt","key",u,!0),new Zl(h,u)}(u,c)))}endBefore(u=null,c){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new Do(this.database,Fa(this._delegate,function sd(h,u){return Ma("endBefore","key",u,!0),new bu(h,u)}(u,c)))}equalTo(u,c){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new Do(this.database,Fa(this._delegate,function Op(h,u){return Ma("equalTo","key",u,!0),new Sf(h,u)}(u,c)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Do))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,g){const T={cancel:void 0,context:void 0};if(c&&g)T.cancel=c,(0,U.Wj)(u,"cancel",T.cancel,!0),T.context=g,(0,U.lb)(u,"context",T.context,!0);else if(c)if("object"==typeof c&&null!==c)T.context=c;else{if("function"!=typeof c)throw new Error((0,U.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");T.cancel=c}return T}get ref(){return new Is(this.database,new _o(this._delegate._repo,this._delegate._path))}}class Is extends Do{constructor(u,c){super(u,new yo(c._repo,c._path,new Oo,!1)),this.database=u,this._delegate=c}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new Is(this.database,Na(this._delegate,u))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new Is(this.database,u):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Is(this.database,this._delegate.root)}set(u,c){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",c,!0);const g=Tc(this._delegate,u);return c&&g.then(()=>c(null),T=>c(T)),g}update(u,c){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const T={};for(let O=0;O<u.length;++O)T[""+O]=u[O];u=T,Wd("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oa("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",c,!0);const g=_(this._delegate,u);return c&&g.then(()=>c(null),T=>c(T)),g}setWithPriority(u,c,g){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",g,!0);const T=function p(h,u,c){if(oa("setWithPriority",h._path),Qs("setWithPriority",u,h._path,!1),Wl("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const g=new U.BH;return yu(h._repo,h._path,u,c,g.wrapCallback(()=>{})),g.promise}(this._delegate,u,c);return g&&T.then(()=>g(null),O=>g(O)),T}remove(u){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",u,!0);const c=function Ud(h){return oa("remove",h._path),Tc(h,null)}(this._delegate);return u&&c.then(()=>u(null),g=>u(g)),c}transaction(u,c,g){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,U.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,g){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const T=function Mf(h,u,c){var g;if(h=(0,U.m9)(h),oa("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const T=null===(g=null==c?void 0:c.applyLocally)||void 0===g||g,O=new U.BH,he=Xt(h,()=>{});return function Kl(h,u,c,g,T,O){aa(h,"transaction on "+u);const z={path:u,update:c,onComplete:g,status:null,order:lr(),applyLocally:O,retryCount:0,unwatcher:T,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},he=Bs(h,u,void 0);z.currentInputSnapshot=he;const Re=z.update(he.val());if(void 0===Re)z.unwatcher(),z.currentOutputSnapshotRaw=null,z.currentOutputSnapshotResolved=null,z.onComplete&&z.onComplete(null,!1,z.currentInputSnapshot);else{pu("transaction failed: Data returned ",Re,z.path),z.status=0;const et=qu(h.transactionQueueTree_,u),Wt=Wa(et)||[];let Bt;Wt.push(z),Xc(et,Wt),"object"==typeof Re&&null!==Re&&(0,U.r3)(Re,".priority")?(Bt=(0,U.DV)(Re,".priority"),(0,U.hu)(fu(Bt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Bt=(mc(h.serverSyncTree_,u)||Mn.EMPTY_NODE).getPriority().val();const gn=gl(h),_r=Fr(Re,Bt),Gr=za(_r,he,gn);z.currentOutputSnapshotRaw=_r,z.currentOutputSnapshotResolved=Gr,z.currentWriteId=$s(h);const rs=ll(h.serverSyncTree_,u,Gr,z.currentWriteId,z.applyLocally);wa(h.eventQueue_,u,rs),ka(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(Re,et,Wt)=>{let Bt=null;Re?O.reject(Re):(Bt=new yl(Wt,new _o(h._repo,h._path),q),O.resolve(new dd(et,Bt)))},he,T),O.promise}(this._delegate,u,{applyLocally:g}).then(O=>new kf(O.committed,new Jl(this.database,O.snapshot)));return c&&T.then(O=>c(null,O.committed,O.snapshot),O=>c(O,!1,null)),T}setPriority(u,c){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",c,!0);const g=function w(h,u){h=(0,U.m9)(h),oa("setPriority",h._path),Wl("setPriority",u,!1);const c=new U.BH;return yu(h._repo,Kr(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&g.then(()=>c(null),T=>c(T)),g}push(u,c){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",c,!0);const g=function Vd(h,u){h=(0,U.m9)(h),oa("push",h._path),Qs("push",u,h._path,!0);const c=Ii(h._repo),g=Eo(c),T=Na(h,g),O=Na(h,g);let z;return z=null!=u?Tc(O,u).then(()=>O):Promise.resolve(O),T.then=z.then.bind(z),T.catch=z.then.bind(z,void 0),T}(this._delegate,u),T=g.then(z=>new Is(this.database,z));c&&T.then(()=>c(null),z=>c(z));const O=new Is(this.database,g);return O.then=T.then.bind(T),O.catch=T.catch.bind(T,void 0),O}onDisconnect(){return oa("Reference.onDisconnect",this._delegate._path),new Pf(new Js(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class eu{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(u,c,g={}){!function ud(h,u,c,g={}){(h=(0,U.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Ie("Cannot call useEmulator() after instance has already been initialized.");const T=h._repoInternal;let O;if(T.repoInfo_.nodeAdmin)g.mockUserToken&&Ie('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),O=new tt(tt.OWNER);else if(g.mockUserToken){const z="string"==typeof g.mockUserToken?g.mockUserToken:(0,U.Sg)(g.mockUserToken,h.app.options.projectId);O=new tt(z)}!function Za(h,u,c,g){h.repoInfo_=new Qt(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),g&&(h.authTokenProvider_=g)}(T,u,c,O)}(this._delegate,u,c,g)}ref(u){if((0,U.Dv)("database.ref",0,1,arguments.length),u instanceof Is){const c=Eu(this._delegate,u.toString());return new Is(this,c)}{const c=id(this._delegate,u);return new Is(this,c)}}refFromURL(u){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const g=Eu(this._delegate,u);return new Is(this,g)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function kh(h){(h=(0,U.m9)(h))._checkNotDeleted("goOffline"),Ti(h._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function no(h){(h=(0,U.m9)(h))._checkNotDeleted("goOnline"),function Co(h){h.persistentConnection_&&h.persistentConnection_.resume(mu)}(h._repo)}(this._delegate)}}eu.ServerValue={TIMESTAMP:function Ql(){return cd}(),increment:h=>function Gd(h){return{".sv":{increment:h}}}(h)};var Pp=Object.freeze({__proto__:null,initStandalone:function Cu({app:h,url:u,version:c,customAuthImpl:g,namespace:T,nodeAdmin:O=!1}){mn(c);const z=new ze.zt("auth-internal",new ze.H0("database-standalone"));return z.setComponent(new ze.wA("auth-internal",()=>g,"PRIVATE")),{instance:new eu(Af(h,z,void 0,u,O),h),namespace:T}}});const Nf=eu.ServerValue;!function kp(h){h.INTERNAL.registerComponent(new ze.wA("database-compat",(u,{instanceIdentifier:c})=>{const g=u.getProvider("app-compat").getImmediate(),T=u.getProvider("database").getImmediate({identifier:c});return new eu(T,g)},"PUBLIC").setServiceProps({Reference:Is,Query:Do,Database:eu,DataSnapshot:Jl,enableLogging:Rc,INTERNAL:Pp,ServerValue:Nf}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.1.8")}(At.Z);var Np=L(440),Ff=L(127);function Tu(h){return null==h}function ai(h){return"function"==typeof h.set}function Nh(h,u){return ai(u)?u:h.ref(u)}function Fh(h,u){if(function hd(h){return"string"==typeof h}(h))return u.stringCase();if(ai(h))return u.firebaseCase();if(function Du(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Su(h,u,c="on",g=_e.z){return new ke.y(T=>{let O=null;return O=h[c](u,(z,he)=>{g.schedule(()=>{T.next({snapshot:z,prevKey:he})}),"once"===c&&g.schedule(()=>T.complete())},z=>{g.schedule(()=>T.error(z))}),"on"===c?{unsubscribe(){null!=O&&h.off(u,O)}}:{unsubscribe(){}}}).pipe((0,ve.U)(T=>{const{snapshot:O,prevKey:z}=T;let he=null;return O.exists()&&(he=O.key),{type:u,payload:O,prevKey:z,key:he}}),(0,pt.B)())}function Xa(h,u){const c=h.length;for(let g=0;g<c;g++)if(h[g].payload.key===u)return g;return-1}function fd(h,u){const{payload:c,prevKey:g,key:T}=u,O=Xa(h,T),z=function Lh(h,u){if(Tu(u))return 0;{const c=Xa(h,u);return-1===c?h.length:c+1}}(h,g);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let he=null;u.payload.forEach(Re=>{const et={payload:Re,type:"value",prevKey:he,key:Re.key};return he=Re.key,h=[...h,et],!1})}return h;case"child_added":if(O>-1){const he=h[O-1];(he&&he.key||null)!==g&&(h=h.filter(Re=>Re.payload.key!==c.key)).splice(z,0,u)}else{if(null==g)return[u,...h];(h=h.slice()).splice(z,0,u)}return h;case"child_removed":return h.filter(he=>he.payload.key!==c.key);case"child_changed":return h.map(he=>he.payload.key===T?u:he);case"child_moved":if(O>-1){const he=h.splice(O,1)[0];return(h=h.slice()).splice(z,0,he),h}return h;default:return h}}function ac(h){return(Tu(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function La(h,u,c){return function tu(h,u,c){return Su(h,"value","once",c).pipe((0,He.w)(g=>{const T=[(0,$e.of)(g)];return u.forEach(O=>T.push(Su(h,O,"on",c))),(0,Dt.T)(...T).pipe((0,dt.R)(fd,[]))}),(0,mt.x)())}(h,u=ac(u),c)}function pd(h,u,c){const g=(u=ac(u)).map(T=>Su(h,T,"on",c));return(0,Dt.T)(...g)}function gd(h,u){return function(g,T){return Fh(g,{stringCase:()=>h.child(g)[u](T),firebaseCase:()=>g[u](T),snapshotCase:()=>g.ref[u](T)})}}function Fp(h){return function(c){return c?Fh(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Pl(h,u){return function(){return Su(h,"value","on",u)}}const nu=new J.OlP("angularfire2.realtimeDatabaseURL"),Bh=new J.OlP("angularfire2.database.use-emulator");let md=(()=>{class h{constructor(c,g,T,O,z,he,Re,et,Wt,Bt,gn,_r,Gr,rs,To){this.schedulers=he;const xu=Re,kl=(0,ee.on)(c,z,g);et&&(0,Ne.nw)(kl,z,Wt,gn,_r,Gr,Bt,rs),this.database=(0,ee.cc)(`${kl.name}.database.${T}`,"AngularFireDatabase",kl.name,()=>{const $o=z.runOutsideAngular(()=>kl.database(T||void 0));return xu&&$o.useEmulator(...xu),$o},[xu])}list(c,g){const T=this.schedulers.ngZone.runOutsideAngular(()=>Nh(this.database,c));let O=T;return g&&(O=g(T)),function _l(h,u){const c=u.schedulers.outsideAngular,g=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:gd(g,"update"),set:gd(g,"set"),push:T=>g.push(T),remove:Fp(g),snapshotChanges:T=>La(h,T,c).pipe(un.iC),stateChanges:T=>pd(h,T,c).pipe(un.iC),auditTrail:T=>function ua(h,u,c){return function $h(h,u,c){return function Yd(h,u){return Su(h,"value","on",u).pipe((0,ve.U)(c=>{let g;return c.payload.forEach(T=>(g=T.key,!1)),{data:c,lastKeyToLoad:g}}))}(h,c).pipe(function st(...h){return u=>{let c;return"function"==typeof h[h.length-1]&&(c=h.pop()),u.lift(new Fe(h,c))}}(u),(0,ve.U)(([T,O])=>{const z=T.lastKeyToLoad,he=O.map(Re=>Re.key);return{actions:O,lastKeyToLoad:z,loadedKeys:he}}),function Ke(h){return u=>u.lift(new ut(h))}(T=>-1===T.loadedKeys.indexOf(T.lastKeyToLoad)),(0,ve.U)(T=>T.actions))}(h,pd(h,u).pipe((0,dt.R)((T,O)=>[...T,O],[])),c)}(h,T,c).pipe(un.iC),valueChanges:(T,O)=>La(h,T,c).pipe((0,ve.U)(he=>he.map(Re=>O&&O.idField?Object.assign(Object.assign({},Re.payload.val()),{[O.idField]:Re.key}):Re.payload.val())),un.iC)}}(O,this)}object(c){return function Kd(h,u){return{query:h,snapshotChanges:()=>Pl(h,u.schedulers.outsideAngular)().pipe(un.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Pl(h,u.schedulers.outsideAngular)().pipe(un.iC,(0,ve.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Nh(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(J.LFG(ee.Dh),J.LFG(ee.xv,8),J.LFG(nu,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(un.HU),J.LFG(Bh,8),J.LFG(Ne.zQ,8),J.LFG(Ne.Qv,8),J.LFG(Ne.L6,8),J.LFG(Ne._Q,8),J.LFG(Ne.rT,8),J.LFG(Ne.lh,8),J.LFG(Ne.f7,8),J.LFG(Np.nm,8))},h.\u0275prov=J.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Lf=(()=>{class h{constructor(){Ff.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h}),h.\u0275inj=J.cJS({providers:[md]}),h})();var Au=L(520);let lc=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=J.oAB({type:h,bootstrap:[Ce]}),h.\u0275inj=J.cJS({providers:[{provide:Me.wN,useClass:we.r4}],imports:[[a.b2,Au.JF,we.Pc.forRoot(),oe,pe.u5,pe.UX,Xe.yb,Ne.ww,ae.TE,Lf,ee.hO.initializeApp(ce_firebaseConfig)]]}),h})();(0,J.G48)(),a.q6().bootstrapModule(lc).catch(h=>console.log(h)),window,(0,Z.a)().then(()=>{(0,Z.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[32,"keyup","handleBackdropKeyUp"]]]]]],undefined)})},5867:(On,Ct,L)=>{"use strict";L.d(Ct,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=L(9681);(0,a.registerVersion)("firebase","9.6.11","app")},127:(On,Ct,L)=>{"use strict";L.d(Ct,{Z:()=>a.Z});var a=L(3942);a.Z.registerVersion("firebase","9.6.11","app-compat")},820:(On,Ct,L)=>{"use strict";L.r(Ct);var a=L(5861),J=L(3942),Z=L(2090),Ve=L(9681),Me=L(655),ae=L(1877),we=L(4859);const Ne=function ce(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_e=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dt=new ae.Yd("@firebase/auth");function ve(w,...p){Dt.logLevel<=ae.in.ERROR&&Dt.error(`Auth (${Ve.SDK_VERSION}): ${w}`,...p)}function pt(w,...p){throw Ft(w,...p)}function He(w,...p){return Ft(w,...p)}function dt(w,p,_){const x=Object.assign(Object.assign({},_e()),{[p]:_});return new Z.LL("auth","Firebase",x).create(p,{appName:w.name})}function mt(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&pt(w,"argument-error"),dt(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ft(w,...p){if("string"!=typeof w){const _=p[0],x=[...p.slice(1)];return x[0]&&(x[0].appName=w.name),w._errorFactory.create(_,...x)}return ke.create(w,...p)}function Ye(w,p,..._){if(!w)throw Ft(p,..._)}function st(w){const p="INTERNAL ASSERTION FAILED: "+w;throw ve(p),new Error(p)}function Fe(w,p){w||st(p)}const me=new Map;function Se(w){Fe(w instanceof Function,"Expected a class definition");let p=me.get(w);return p?(Fe(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,me.set(w,p),p)}function Lt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function un(){return"http:"===vt()||"https:"===vt()}function vt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class at{constructor(p,_){this.shortDelay=p,this.longDelay=_,Fe(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function At(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Et(w,p){Fe(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class U{static initialize(p,_,x){this.fetchImpl=p,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new at(3e4,6e4);function St(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function hn(w,p,_,x){return mn.apply(this,arguments)}function mn(){return(mn=(0,a.Z)(function*(w,p,_,x,K={}){return jn(w,K,(0,a.Z)(function*(){let ge={},wt={};x&&("GET"===p?wt=x:ge={body:JSON.stringify(x)});const Xt=(0,Z.xO)(Object.assign({key:w.config.apiKey},wt)).slice(1),zn=yield w._getAdditionalHeaders();return zn["Content-Type"]="application/json",w.languageCode&&(zn["X-Firebase-Locale"]=w.languageCode),U.fetch()(Br(w,w.config.apiHost,_,Xt),Object.assign({method:p,headers:zn,referrerPolicy:"no-referrer"},ge))}))})).apply(this,arguments)}function jn(w,p,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(function*(w,p,_){w._canInitEmulator=!1;const x=Object.assign(Object.assign({},Qe),p);try{const K=new rr(w),ge=yield Promise.race([_(),K.promise]);K.clearNetworkTimeout();const wt=yield ge.json();if("needConfirmation"in wt)throw lr(w,"account-exists-with-different-credential",wt);if(ge.ok&&!("errorMessage"in wt))return wt;{const Xt=ge.ok?wt.errorMessage:wt.error.message,[zn,mr]=Xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zn)throw lr(w,"credential-already-in-use",wt);if("EMAIL_EXISTS"===zn)throw lr(w,"email-already-in-use",wt);const yr=x[zn]||zn.toLowerCase().replace(/[_\s]+/g,"-");if(mr)throw dt(w,yr,mr);pt(w,yr)}}catch(K){if(K instanceof Z.ZR)throw K;pt(w,"network-request-failed")}})).apply(this,arguments)}function Dn(w,p,_,x){return er.apply(this,arguments)}function er(){return(er=(0,a.Z)(function*(w,p,_,x,K={}){const ge=yield hn(w,p,_,x,K);return"mfaPendingCredential"in ge&&pt(w,"multi-factor-auth-required",{_serverResponse:ge}),ge})).apply(this,arguments)}function Br(w,p,_,x){const K=`${p}${_}?${x}`;return w.config.emulator?Et(w.config,K):`${w.config.apiScheme}://${K}`}class rr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(He(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(w,p,_){const x={appName:w.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const K=He(w,p,x);return K.customData._tokenResponse=_,K}function Ar(){return(Ar=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function vr(w,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ur(w,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function gt(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Kt(){return(Kt=(0,a.Z)(function*(w,p=!1){const _=(0,Z.m9)(w),x=yield _.getIdToken(p),K=nn(x);Ye(K&&K.exp&&K.auth_time&&K.iat,_.auth,"internal-error");const ge="object"==typeof K.firebase?K.firebase:void 0,wt=null==ge?void 0:ge.sign_in_provider;return{claims:K,token:x,authTime:gt(Nt(K.auth_time)),issuedAtTime:gt(Nt(K.iat)),expirationTime:gt(Nt(K.exp)),signInProvider:wt||null,signInSecondFactor:(null==ge?void 0:ge.sign_in_second_factor)||null}})).apply(this,arguments)}function Nt(w){return 1e3*Number(w)}function nn(w){const[p,_,x]=w.split(".");if(void 0===p||void 0===_||void 0===x)return ve("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,Z.tV)(_);return K?JSON.parse(K):(ve("Failed to decode base64 JWT payload"),null)}catch(K){return ve("Caught error parsing JWT payload as JSON",K),null}}function Xn(w,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(x){throw x instanceof Z.ZR&&Ln(x)&&w.auth.currentUser===w&&(yield w.auth.signOut()),x}})).apply(this,arguments)}function Ln({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Hn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const K=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),x)}iteration(){var p=this;return(0,a.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Er{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gt(this.lastLoginAt),this.creationTime=gt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(w){return yn.apply(this,arguments)}function yn(){return(yn=(0,a.Z)(function*(w){var p;const _=w.auth,x=yield w.getIdToken(),K=yield Xn(w,ur(_,{idToken:x}));Ye(null==K?void 0:K.users.length,_,"internal-error");const ge=K.users[0];w._notifyReloadListener(ge);const wt=(null===(p=ge.providerUserInfo)||void 0===p?void 0:p.length)?Vt(ge.providerUserInfo):[],Xt=Rn(w.providerData,wt),yr=!!w.isAnonymous&&!(w.email&&ge.passwordHash||(null==Xt?void 0:Xt.length)),$r={uid:ge.localId,displayName:ge.displayName||null,photoURL:ge.photoUrl||null,email:ge.email||null,emailVerified:ge.emailVerified||!1,phoneNumber:ge.phoneNumber||null,tenantId:ge.tenantId||null,providerData:Xt,metadata:new Er(ge.createdAt,ge.lastLoginAt),isAnonymous:yr};Object.assign(w,$r)})).apply(this,arguments)}function cr(){return(cr=(0,a.Z)(function*(w){const p=(0,Z.m9)(w);yield Cr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Rn(w,p){return[...w.filter(x=>!p.some(K=>K.providerId===x.providerId)),...p]}function Vt(w){return w.map(p=>{var{providerId:_}=p,x=(0,Me._T)(p,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}function Yn(){return(Yn=(0,a.Z)(function*(w,p){const _=yield jn(w,{},(0,a.Z)(function*(){const x=(0,Z.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:K,apiKey:ge}=w.config,wt=Br(w,K,"/v1/token",`key=${ge}`),Xt=yield w._getAdditionalHeaders();return Xt["Content-Type"]="application/x-www-form-urlencoded",U.fetch()(wt,{method:"POST",headers:Xt,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Ye(p.idToken,"internal-error"),Ye(void 0!==p.idToken,"internal-error"),Ye(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Tn(w){const p=nn(w);return Ye(p,"internal-error"),Ye(void 0!==p.exp,"internal-error"),Ye(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var x=this;return(0,a.Z)(function*(){return Ye(!x.accessToken||x.refreshToken,p,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(p,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var x=this;return(0,a.Z)(function*(){const{accessToken:K,refreshToken:ge,expiresIn:wt}=yield function wn(w,p){return Yn.apply(this,arguments)}(p,_);x.updateTokensAndExpiration(K,ge,Number(wt))})()}updateTokensAndExpiration(p,_,x){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(p,_){const{refreshToken:x,accessToken:K,expirationTime:ge}=_,wt=new Kn;return x&&(Ye("string"==typeof x,"internal-error",{appName:p}),wt.refreshToken=x),K&&(Ye("string"==typeof K,"internal-error",{appName:p}),wt.accessToken=K),ge&&(Ye("number"==typeof ge,"internal-error",{appName:p}),wt.expirationTime=ge),wt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return st("not implemented")}}function Vn(w,p){Ye("string"==typeof w||void 0===w,"internal-error",{appName:p})}class We{constructor(p){var{uid:_,auth:x,stsTokenManager:K}=p,ge=(0,Me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ge.displayName||null,this.email=ge.email||null,this.emailVerified=ge.emailVerified||!1,this.phoneNumber=ge.phoneNumber||null,this.photoURL=ge.photoURL||null,this.isAnonymous=ge.isAnonymous||!1,this.tenantId=ge.tenantId||null,this.providerData=ge.providerData?[...ge.providerData]:[],this.metadata=new Er(ge.createdAt||void 0,ge.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,a.Z)(function*(){const x=yield Xn(_,_.stsTokenManager.getToken(_.auth,p));return Ye(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(p){return function Ie(w){return Kt.apply(this,arguments)}(this,p)}reload(){return function Wn(w){return cr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Ye(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new We(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var x=this;return(0,a.Z)(function*(){let K=!1;p.idToken&&p.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(p),K=!0),_&&(yield Cr(x)),yield x.auth._persistUserIfCurrent(x),K&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var p=this;return(0,a.Z)(function*(){const _=yield p.getIdToken();return yield Xn(p,function pn(w,p){return Ar.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var x,K,ge,wt,Xt,zn,mr,yr;const $r=null!==(x=_.displayName)&&void 0!==x?x:void 0,gs=null!==(K=_.email)&&void 0!==K?K:void 0,Ui=null!==(ge=_.phoneNumber)&&void 0!==ge?ge:void 0,Zl=null!==(wt=_.photoURL)&&void 0!==wt?wt:void 0,Xl=null!==(Xt=_.tenantId)&&void 0!==Xt?Xt:void 0,bu=null!==(zn=_._redirectEventId)&&void 0!==zn?zn:void 0,sd=null!==(mr=_.createdAt)&&void 0!==mr?mr:void 0,jd=null!==(yr=_.lastLoginAt)&&void 0!==yr?yr:void 0,{uid:Ol,emailVerified:Sc,isAnonymous:od,providerData:ad,stsTokenManager:Ac}=_;Ye(Ol&&Ac,p,"internal-error");const Ah=Kn.fromJSON(this.name,Ac);Ye("string"==typeof Ol,p,"internal-error"),Vn($r,p.name),Vn(gs,p.name),Ye("boolean"==typeof Sc,p,"internal-error"),Ye("boolean"==typeof od,p,"internal-error"),Vn(Ui,p.name),Vn(Zl,p.name),Vn(Xl,p.name),Vn(bu,p.name),Vn(sd,p.name),Vn(jd,p.name);const ld=new We({uid:Ol,auth:p,email:gs,emailVerified:Sc,displayName:$r,isAnonymous:od,photoURL:Zl,phoneNumber:Ui,tenantId:Xl,stsTokenManager:Ah,createdAt:sd,lastLoginAt:jd});return ad&&Array.isArray(ad)&&(ld.providerData=ad.map(xh=>Object.assign({},xh))),bu&&(ld._redirectEventId=bu),ld}static _fromIdTokenResponse(p,_,x=!1){return(0,a.Z)(function*(){const K=new Kn;K.updateFromServerResponse(_);const ge=new We({uid:_.localId,auth:p,stsTokenManager:K,isAnonymous:x});return yield Cr(ge),ge})()}}const Ze=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,x){var K=this;return(0,a.Z)(function*(){K.storage[_]=x})()}_get(_){var x=this;return(0,a.Z)(function*(){const K=x.storage[_];return void 0===K?null:K})()}_remove(_){var x=this;return(0,a.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return w.type="NONE",w})();function Rt(w,p,_){return`firebase:${w}:${p}:${_}`}class _t{constructor(p,_,x){this.persistence=p,this.auth=_,this.userKey=x;const{config:K,name:ge}=this.auth;this.fullUserKey=Rt(this.userKey,K.apiKey,ge),this.fullPersistenceKey=Rt("persistence",K.apiKey,ge),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?We._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,a.Z)(function*(){if(_.persistence===p)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,x="authUser"){return(0,a.Z)(function*(){if(!_.length)return new _t(Se(Ze),p,x);const K=(yield Promise.all(_.map(function(){var mr=(0,a.Z)(function*(yr){if(yield yr._isAvailable())return yr});return function(yr){return mr.apply(this,arguments)}}()))).filter(mr=>mr);let ge=K[0]||Se(Ze);const wt=Rt(x,p.config.apiKey,p.name);let Xt=null;for(const mr of _)try{const yr=yield mr._get(wt);if(yr){const $r=We._fromJSON(p,yr);mr!==ge&&(Xt=$r),ge=mr;break}}catch(yr){}const zn=K.filter(mr=>mr._shouldAllowMigration);return ge._shouldAllowMigration&&zn.length?(ge=zn[0],Xt&&(yield ge._set(wt,Xt.toJSON())),yield Promise.all(_.map(function(){var mr=(0,a.Z)(function*(yr){if(yr!==ge)try{yield yr._remove(wt)}catch($r){}});return function(yr){return mr.apply(this,arguments)}}())),new _t(ge,p,x)):new _t(ge,p,x)})()}}function dn(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(lt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(tt(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(_n(p))return"Blackberry";if(Un(p))return"Webos";if(je(p))return"Safari";if((p.includes("chrome/")||Ae(p))&&!p.includes("edge/"))return"Chrome";if(qt(p))return"Android";{const x=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function tt(w=(0,Z.z$)()){return/firefox\//i.test(w)}function je(w=(0,Z.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ae(w=(0,Z.z$)()){return/crios\//i.test(w)}function lt(w=(0,Z.z$)()){return/iemobile/i.test(w)}function qt(w=(0,Z.z$)()){return/android/i.test(w)}function _n(w=(0,Z.z$)()){return/blackberry/i.test(w)}function Un(w=(0,Z.z$)()){return/webos/i.test(w)}function xe(w=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(w)}function Yt(w=(0,Z.z$)()){return xe(w)||qt(w)||Un(w)||_n(w)||/windows phone/i.test(w)||lt(w)}function an(w,p=[]){let _;switch(w){case"Browser":_=dn((0,Z.z$)());break;case"Worker":_=`${dn((0,Z.z$)())}-${w}`;break;default:_=w}const x=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${Ve.SDK_VERSION}/${x}`}class En{constructor(p,_,x){this.app=p,this.heartbeatServiceProvider=_,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cn(this),this.idTokenSubscription=new cn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(p,_){var x=this;return _&&(this._popupRedirectResolver=Se(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var K,ge;if(!x._deleted&&(x.persistenceManager=yield _t.create(x,p),!x._deleted)){if(null===(K=x._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch(wt){}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(ge=x.currentUser)||void 0===ge?void 0:ge.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_)}})()}initializeCurrentUser(p){var _=this;return(0,a.Z)(function*(){var x;let K=yield _.assertedPersistence.getCurrentUser();if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ge=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,wt=null==K?void 0:K._redirectEventId,Xt=yield _.tryRedirectSignIn(p);(!ge||ge===wt)&&(null==Xt?void 0:Xt.user)&&(K=Xt.user)}return K?K._redirectEventId?(Ye(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===K._redirectEventId?_.directlySetCurrentUser(K):_.reloadAndSetCurrentUserOrClear(K)):_.reloadAndSetCurrentUserOrClear(K):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var _=this;return(0,a.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(K){yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,a.Z)(function*(){try{yield Cr(p)}catch(x){if("auth/network-request-failed"!==x.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ze(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){const x=p?(0,Z.m9)(p):null;return x&&Ye(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){if(!_._deleted)return p&&Ye(_.tenantId===p.tenantId,_,"tenant-id-mismatch"),_.queue((0,a.Z)(function*(){yield _.directlySetCurrentUser(p),_.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(Se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new Z.LL("auth","Firebase",p())}onAuthStateChanged(p,_,x){return this.registerStateListener(this.authStateSubscription,p,_,x)}onIdTokenChanged(p,_,x){return this.registerStateListener(this.idTokenSubscription,p,_,x)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var x=this;return(0,a.Z)(function*(){const K=yield x.getOrInitRedirectPersistenceManager(_);return null===p?K.removeCurrentUser():K.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const x=p&&Se(p)||_._popupRedirectResolver;Ye(x,_,"argument-error"),_.redirectPersistenceManager=yield _t.create(_,[Se(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,a.Z)(function*(){var x,K;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===p?_._currentUser:(null===(K=_.redirectUser)||void 0===K?void 0:K._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,a.Z)(function*(){if(p===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,x,K){if(this._deleted)return()=>{};const ge="function"==typeof _?_:_.next.bind(_),wt=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye(wt,this,"internal-error"),wt.then(()=>ge(this.currentUser)),"function"==typeof _?p.addObserver(_,x,K):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=an(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var _;const x={"X-Client-Version":p.clientVersion};p.app.options.appId&&(x["X-Firebase-gmpid"]=p.app.options.appId);const K=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return K&&(x["X-Firebase-Client"]=K),x})()}}function ft(w){return(0,Z.m9)(w)}class cn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Z.ne)(_=>this.observer=_)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hr(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Mr(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Or{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return st("not implemented")}_getIdTokenResponse(p){return st("not implemented")}_linkToIdToken(p,_){return st("not implemented")}_getReauthenticationResolver(p){return st("not implemented")}}function si(w,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:resetPassword",St(w,p))})).apply(this,arguments)}function br(w,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ni(w,p){return Si.apply(this,arguments)}function Si(){return(Si=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:update",St(w,p))})).apply(this,arguments)}function gi(){return(gi=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithPassword",St(w,p))})).apply(this,arguments)}function Mi(w,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:sendOobCode",St(w,p))})).apply(this,arguments)}function te(w,p){return ye.apply(this,arguments)}function ye(){return(ye=(0,a.Z)(function*(w,p){return Mi(w,p)})).apply(this,arguments)}function Je(w,p){return bt.apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*(w,p){return Mi(w,p)})).apply(this,arguments)}function be(w,p){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,a.Z)(function*(w,p){return Mi(w,p)})).apply(this,arguments)}function yt(w,p){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(w,p){return Mi(w,p)})).apply(this,arguments)}function kt(){return(kt=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithEmailLink",St(w,p))})).apply(this,arguments)}function nr(){return(nr=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithEmailLink",St(w,p))})).apply(this,arguments)}class fr extends Or{constructor(p,_,x,K=null){super("password",x),this._email=p,this._password=_,this._tenantId=K}static _fromEmailAndPassword(p,_){return new fr(p,_,"password")}static _fromEmailAndCode(p,_,x=null){return new fr(p,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function Ci(w,p){return gi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Jt(w,p){return kt.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:pt(p,"internal-error")}})()}_linkToIdToken(p,_){var x=this;return(0,a.Z)(function*(){switch(x.signInMethod){case"password":return br(p,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Nn(w,p){return nr.apply(this,arguments)}(p,{idToken:_,email:x._email,oobCode:x._password});default:pt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function xr(w,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithIdp",St(w,p))})).apply(this,arguments)}class rt extends Or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new rt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):pt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:K}=_,ge=(0,Me._T)(_,["providerId","signInMethod"]);if(!x||!K)return null;const wt=new rt(x,K);return wt.idToken=ge.idToken||void 0,wt.accessToken=ge.accessToken||void 0,wt.secret=ge.secret,wt.nonce=ge.nonce,wt.pendingToken=ge.pendingToken||null,wt}_getIdTokenResponse(p){return xr(p,this.buildRequest())}_linkToIdToken(p,_){const x=this.buildRequest();return x.idToken=_,xr(p,x)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,xr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,Z.xO)(_)}return p}}function ot(w,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:sendVerificationCode",St(w,p))})).apply(this,arguments)}function In(){return(In=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithPhoneNumber",St(w,p))})).apply(this,arguments)}function ri(){return(ri=(0,a.Z)(function*(w,p){const _=yield Dn(w,"POST","/v1/accounts:signInWithPhoneNumber",St(w,p));if(_.temporaryProof)throw lr(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const _i={USER_NOT_FOUND:"user-not-found"};function ds(){return(ds=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithPhoneNumber",St(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),_i)})).apply(this,arguments)}class Gi extends Or{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Gi({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Gi({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function on(w,p){return In.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Qn(w,p){return ri.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Yr(w,p){return ds.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:x,verificationCode:K}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:x,code:K}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:x,phoneNumber:K,temporaryProof:ge}=p;return x||_||K||ge?new Gi({verificationId:_,verificationCode:x,phoneNumber:K,temporaryProof:ge}):null}}class Qi{constructor(p){var _,x,K,ge,wt,Xt;const zn=(0,Z.zd)((0,Z.pd)(p)),mr=null!==(_=zn.apiKey)&&void 0!==_?_:null,yr=null!==(x=zn.oobCode)&&void 0!==x?x:null,$r=function bs(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=zn.mode)&&void 0!==K?K:null);Ye(mr&&yr&&$r,"argument-error"),this.apiKey=mr,this.operation=$r,this.code=yr,this.continueUrl=null!==(ge=zn.continueUrl)&&void 0!==ge?ge:null,this.languageCode=null!==(wt=zn.languageCode)&&void 0!==wt?wt:null,this.tenantId=null!==(Xt=zn.tenantId)&&void 0!==Xt?Xt:null}static parseLink(p){const _=function Ss(w){const p=(0,Z.zd)((0,Z.pd)(w)).link,_=p?(0,Z.zd)((0,Z.pd)(p)).deep_link_id:null,x=(0,Z.zd)((0,Z.pd)(w)).deep_link_id;return(x?(0,Z.zd)((0,Z.pd)(x)).link:null)||x||_||p||w}(p);try{return new Qi(_)}catch(x){return null}}}let xs=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,x){return fr._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const K=Qi.parseLink(x);return Ye(K,"argument-error"),fr._fromEmailAndCode(_,K.code,K.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class qr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Tr extends qr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class wr extends Tr{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Ye("providerId"in _&&"signInMethod"in _,"argument-error"),rt._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Ye(p.idToken||p.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return wr.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return wr.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:K,pendingToken:ge,nonce:wt,providerId:Xt}=p;if(!x&&!K&&!_&&!ge||!Xt)return null;try{return new wr(Xt)._credential({idToken:_,accessToken:x,nonce:wt,pendingToken:ge})}catch(zn){return null}}}let zi=(()=>{class w extends Tr{constructor(){super("facebook.com")}static credential(_){return rt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(x){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Qr=(()=>{class w extends Tr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return rt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:K}=_;if(!x&&!K)return null;try{return w.credential(x,K)}catch(ge){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Rs=(()=>{class w extends Tr{constructor(){super("github.com")}static credential(_){return rt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(x){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class is extends Or{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return xr(p,this.buildRequest())}_linkToIdToken(p,_){const x=this.buildRequest();return x.idToken=_,xr(p,x)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,xr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:K,pendingToken:ge}=_;return x&&K&&ge&&x===K?new is(x,ge):null}static _create(p,_){return new is(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends qr{constructor(p){Ye(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Kr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Kr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=is.fromJSON(p);return Ye(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:x}=p;if(!_||!x)return null;try{return is._create(x,_)}catch(K){return null}}}let jr=(()=>{class w extends Tr{constructor(){super("twitter.com")}static credential(_,x){return rt._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:K}=_;if(!x||!K)return null;try{return w.credential(x,K)}catch(ge){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ui(w,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signUp",St(w,p))})).apply(this,arguments)}class wi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,x,K=!1){return(0,a.Z)(function*(){const ge=yield We._fromIdTokenResponse(p,x,K),wt=Pi(x);return new wi({user:ge,providerId:wt,_tokenResponse:x,operationType:_})})()}static _forOperation(p,_,x){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(x,!0);const K=Pi(x);return new wi({user:p,providerId:K,_tokenResponse:x,operationType:_})})()}}function Pi(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ss(){return(ss=(0,a.Z)(function*(w){var p;const _=ft(w);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new wi({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield ui(_,{returnSecureToken:!0}),K=yield wi._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class Ms extends Z.ZR{constructor(p,_,x,K){var ge;super(_.code,_.message),this.operationType=x,this.user=K,Object.setPrototypeOf(this,Ms.prototype),this.customData={appName:p.name,tenantId:null!==(ge=p.tenantId)&&void 0!==ge?ge:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(p,_,x,K){return new Ms(p,_,x,K)}}function Os(w,p,_,x){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(ge=>{throw"auth/multi-factor-auth-required"===ge.code?Ms._fromErrorAndOperation(w,ge,p,x):ge})}function Ei(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function Gs(){return(Gs=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w);yield ie(!0,_,p);const{providerUserInfo:x}=yield vr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),K=Ei(x||[]);return _.providerData=_.providerData.filter(ge=>K.has(ge.providerId)),K.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ti(w,p){return H.apply(this,arguments)}function H(){return(H=(0,a.Z)(function*(w,p,_=!1){const x=yield Xn(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return wi._forOperation(w,"link",x)})).apply(this,arguments)}function ie(w,p,_){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(function*(w,p,_){yield Cr(p);const K=!1===w?"provider-already-linked":"no-such-provider";Ye(Ei(p.providerData).has(_)===w,p.auth,K)})).apply(this,arguments)}function de(w,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,a.Z)(function*(w,p,_=!1){const{auth:x}=w,K="reauthenticate";try{const ge=yield Xn(w,Os(x,K,p,w),_);Ye(ge.idToken,x,"internal-error");const wt=nn(ge.idToken);Ye(wt,x,"internal-error");const{sub:Xt}=wt;return Ye(w.uid===Xt,x,"user-mismatch"),wi._forOperation(w,K,ge)}catch(ge){throw"auth/user-not-found"===(null==ge?void 0:ge.code)&&pt(x,"user-mismatch"),ge}})).apply(this,arguments)}function Mt(w,p){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(w,p,_=!1){const x="signIn",K=yield Os(w,x,p),ge=yield wi._fromIdTokenResponse(w,x,K);return _||(yield w._updateCurrentUser(ge.user)),ge})).apply(this,arguments)}function Zt(w,p){return oi.apply(this,arguments)}function oi(){return(oi=(0,a.Z)(function*(w,p){return Mt(ft(w),p)})).apply(this,arguments)}function Hr(w,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w);return yield ie(!1,_,p.providerId),ti(_,p)})).apply(this,arguments)}function Pr(w,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,a.Z)(function*(w,p){return de((0,Z.m9)(w),p)})).apply(this,arguments)}function ni(w,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,a.Z)(function*(w,p){return Dn(w,"POST","/v1/accounts:signInWithCustomToken",St(w,p))})).apply(this,arguments)}function Ji(){return(Ji=(0,a.Z)(function*(w,p){const _=ft(w),x=yield ni(_,{token:p,returnSecureToken:!0}),K=yield wi._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class ir{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Wi._fromServerResponse(p,_):pt(p,"internal-error")}}class Wi extends ir{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Wi(_)}}function G(w,p,_){var x;Ye((null===(x=_.url)||void 0===x?void 0:x.length)>0,w,"invalid-continue-uri"),Ye(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Ye(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Ye(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function N(){return(N=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w),K={requestType:"PASSWORD_RESET",email:p};_&&G(x,K,_),yield Je(x,K)})).apply(this,arguments)}function jt(){return(jt=(0,a.Z)(function*(w,p,_){yield si((0,Z.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function P(){return(P=(0,a.Z)(function*(w,p){yield Ni((0,Z.m9)(w),{oobCode:p})})).apply(this,arguments)}function b(w,p){return E.apply(this,arguments)}function E(){return(E=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w),x=yield si(_,{oobCode:p}),K=x.requestType;switch(Ye(K,_,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ye(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ye(x.mfaInfo,_,"internal-error");default:Ye(x.email,_,"internal-error")}let ge=null;return x.mfaInfo&&(ge=ir._fromServerResponse(ft(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:ge},operation:K}})).apply(this,arguments)}function q(){return(q=(0,a.Z)(function*(w,p){const{data:_}=yield b((0,Z.m9)(w),p);return _.email})).apply(this,arguments)}function Le(){return(Le=(0,a.Z)(function*(w,p,_){const x=ft(w),K=yield ui(x,{returnSecureToken:!0,email:p,password:_}),ge=yield wi._fromIdTokenResponse(x,"signIn",K);return yield x._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function kn(){return(kn=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w),K={requestType:"EMAIL_SIGNIN",email:p};Ye(_.handleCodeInApp,x,"argument-error"),_&&G(x,K,_),yield be(x,K)})).apply(this,arguments)}function Mn(){return(Mn=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w),K=xs.credentialWithLink(p,_||Lt());return Ye(K._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Zt(x,K)})).apply(this,arguments)}function zr(w,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:createAuthUri",St(w,p))})).apply(this,arguments)}function Fr(){return(Fr=(0,a.Z)(function*(w,p){const x={identifier:p,continueUri:un()?Lt():"http://localhost"},{signinMethods:K}=yield zr((0,Z.m9)(w),x);return K||[]})).apply(this,arguments)}function Li(){return(Li=(0,a.Z)(function*(w,p){const _=(0,Z.m9)(w),K={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&G(_.auth,K,p);const{email:ge}=yield te(_.auth,K);ge!==w.email&&(yield w.reload())})).apply(this,arguments)}function ci(){return(ci=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w),ge={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&G(x.auth,ge,_);const{email:wt}=yield yt(x.auth,ge);wt!==w.email&&(yield w.reload())})).apply(this,arguments)}function es(w,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,a.Z)(function*(w,p){return hn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const x=(0,Z.m9)(w),ge={idToken:yield x.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},wt=yield Xn(x,es(x.auth,ge));x.displayName=wt.displayName||null,x.photoURL=wt.photoUrl||null;const Xt=x.providerData.find(({providerId:zn})=>"password"===zn);Xt&&(Xt.displayName=x.displayName,Xt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(wt)})).apply(this,arguments)}function Bo(w,p,_){return ho.apply(this,arguments)}function ho(){return(ho=(0,a.Z)(function*(w,p,_){const{auth:x}=w,ge={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(ge.email=p),_&&(ge.password=_);const wt=yield Xn(w,br(x,ge));yield w._updateTokensIfNecessary(wt,!0)})).apply(this,arguments)}class fo{constructor(p,_,x={}){this.isNewUser=p,this.providerId=_,this.profile=x}}class Vo extends fo{constructor(p,_,x,K){super(p,_,x),this.username=K}}class Ta extends fo{constructor(p,_){super(p,"facebook.com",_)}}class Mo extends Vo{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class wl extends fo{constructor(p,_){super(p,"google.com",_)}}class Oo extends Vo{constructor(p,_,x){super(p,"twitter.com",_,x)}}function Ws(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Wo(w){var p,_;if(!w)return null;const{providerId:x}=w,K=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},ge=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!x&&(null==w?void 0:w.idToken)){const wt=null===(_=null===(p=nn(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(wt)return new fo(ge,"anonymous"!==wt&&"custom"!==wt?wt:null)}if(!x)return null;switch(x){case"facebook.com":return new Ta(ge,K);case"github.com":return new Mo(ge,K);case"google.com":return new wl(ge,K);case"twitter.com":return new Oo(ge,K,w.screenName||null);case"custom":case"anonymous":return new fo(ge,null);default:return new fo(ge,x,K)}}(_)}class bo{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new bo("enroll",p)}static _fromMfaPendingCredential(p){return new bo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,x;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return bo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(x=p.multiFactorSession)||void 0===x?void 0:x.idToken)return bo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class wo{constructor(p,_,x){this.session=p,this.hints=_,this.signInResolver=x}static _fromError(p,_){const x=ft(p),K=_.customData._serverResponse,ge=(K.mfaInfo||[]).map(Xt=>ir._fromServerResponse(x,Xt));Ye(K.mfaPendingCredential,x,"internal-error");const wt=bo._fromMfaPendingCredential(K.mfaPendingCredential);return new wo(wt,ge,function(){var Xt=(0,a.Z)(function*(zn){const mr=yield zn._process(x,wt);delete K.mfaInfo,delete K.mfaPendingCredential;const yr=Object.assign(Object.assign({},K),{idToken:mr.idToken,refreshToken:mr.refreshToken});switch(_.operationType){case"signIn":const $r=yield wi._fromIdTokenResponse(x,_.operationType,yr);return yield x._updateCurrentUser($r.user),$r;case"reauthenticate":return Ye(_.user,x,"internal-error"),wi._forOperation(_.user,_.operationType,yr);default:pt(x,"internal-error")}});return function(zn){return Xt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,a.Z)(function*(){return _.signInResolver(p)})()}}function Zi(w,p){return hn(w,"POST","/v2/accounts/mfaEnrollment:start",St(w,p))}class po{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>ir._fromServerResponse(p.auth,x)))})}static _fromUser(p){return new po(p)}getSession(){var p=this;return(0,a.Z)(function*(){return bo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var x=this;return(0,a.Z)(function*(){const K=p,ge=yield x.getSession(),wt=yield Xn(x.user,K._process(x.user.auth,ge,_));return yield x.user._updateTokensIfNecessary(wt),x.user.reload()})()}unenroll(p){var _=this;return(0,a.Z)(function*(){const x="string"==typeof p?p:p.uid,K=yield _.user.getIdToken(),ge=yield Xn(_.user,function $a(w,p){return hn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",St(w,p))}(_.user.auth,{idToken:K,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:wt})=>wt!==x),yield _.user._updateTokensIfNecessary(ge);try{yield _.user.reload()}catch(wt){if("auth/user-token-expired"!==wt.code)throw wt}})()}}const Yo=new WeakMap,Ba="__sak";class os{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ba,"1"),this.storage.removeItem(Ba),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ns=(()=>{class w extends os{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cl(){const w=(0,Z.z$)();return je(w)||xe(w)}()&&function Qt(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const K=this.storage.getItem(x),ge=this.localCache[x];K!==ge&&_(x,ge,K)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((Xt,zn,mr)=>{this.notifyListeners(Xt,mr)});const K=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xt=this.storage.getItem(K);if(_.newValue!==Xt)null!==_.newValue?this.storage.setItem(K,_.newValue):this.storage.removeItem(K);else if(this.localCache[K]===_.newValue&&!x)return}const ge=()=>{const Xt=this.storage.getItem(K);!x&&this.localCache[K]===Xt||this.notifyListeners(K,Xt)},wt=this.storage.getItem(K);!function Ot(){return(0,Z.w1)()&&10===document.documentMode}()||wt===_.newValue||_.newValue===_.oldValue?ge():setTimeout(ge,10)}notifyListeners(_,x){this.localCache[_]=x;const K=this.listeners[_];if(K)for(const ge of Array.from(K))ge(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var K=()=>super._set,ge=this;return(0,a.Z)(function*(){yield K().call(ge,_,x),ge.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,K=this;return(0,a.Z)(function*(){const ge=yield x().call(K,_);return K.localCache[_]=JSON.stringify(ge),ge})()}_remove(_){var x=()=>super._remove,K=this;return(0,a.Z)(function*(){yield x().call(K,_),delete K.localCache[_]})()}}return w.type="LOCAL",w})(),Ps=(()=>{class w extends os{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return w.type="SESSION",w})();let Io=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(ge=>ge.isListeningto(_));if(x)return x;const K=new w(_);return this.receivers.push(K),K}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,a.Z)(function*(){const K=_,{eventId:ge,eventType:wt,data:Xt}=K.data,zn=x.handlersMap[wt];if(!(null==zn?void 0:zn.size))return;K.ports[0].postMessage({status:"ack",eventId:ge,eventType:wt});const mr=Array.from(zn).map(function(){var $r=(0,a.Z)(function*(gs){return gs(K.origin,Xt)});return function(gs){return $r.apply(this,arguments)}}()),yr=yield function ga(w){return Promise.all(w.map(function(){var p=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return p.apply(this,arguments)}}()))}(mr);K.ports[0].postMessage({status:"done",eventId:ge,eventType:wt,response:yr})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function oo(w="",p=10){let _="";for(let x=0;x<p;x++)_+=Math.floor(10*Math.random());return w+_}class Uo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,x=50){var K=this;return(0,a.Z)(function*(){const ge="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ge)throw new Error("connection_unavailable");let wt,Xt;return new Promise((zn,mr)=>{const yr=oo("",20);ge.port1.start();const $r=setTimeout(()=>{mr(new Error("unsupported_event"))},x);Xt={messageChannel:ge,onMessage(gs){const Ui=gs;if(Ui.data.eventId===yr)switch(Ui.data.status){case"ack":clearTimeout($r),wt=setTimeout(()=>{mr(new Error("timeout"))},3e3);break;case"done":clearTimeout(wt),zn(Ui.data.response);break;default:clearTimeout($r),clearTimeout(wt),mr(new Error("invalid_response"))}}},K.handlers.add(Xt),ge.port1.addEventListener("message",Xt.onMessage),K.target.postMessage({eventType:p,eventId:yr,data:_},[ge.port2])}).finally(()=>{Xt&&K.removeMessageHandler(Xt)})})()}}function $i(){return window}function _s(){return void 0!==$i().WorkerGlobalScope&&"function"==typeof $i().importScripts}function ya(){return(ya=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Zo="firebaseLocalStorageDb",ao="firebaseLocalStorage",Xo="fbase_key";class xn{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ur(w,p){return w.transaction([ao],p?"readwrite":"readonly").objectStore(ao)}function eo(){const w=indexedDB.open(Zo,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const x=w.result;try{x.createObjectStore(ao,{keyPath:Xo})}catch(K){_(K)}}),w.addEventListener("success",(0,a.Z)(function*(){const x=w.result;x.objectStoreNames.contains(ao)?p(x):(x.close(),yield function qi(){const w=indexedDB.deleteDatabase(Zo);return new xn(w).toPromise()}(),p(yield eo()))}))})}function sr(w,p,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,a.Z)(function*(w,p,_){const x=Ur(w,!0).put({[Xo]:p,value:_});return new xn(x).toPromise()})).apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(w,p){const _=Ur(w,!1).get(p),x=yield new xn(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Ht(w,p){const _=Ur(w,!0).delete(p);return new xn(_).toPromise()}const V=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield eo()),_.db})()}_withRetries(_){var x=this;return(0,a.Z)(function*(){let K=0;for(;;)try{const ge=yield x._openDb();return yield _(ge)}catch(ge){if(K++>3)throw ge;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return _s()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=Io._getInstance(function as(){return _s()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,a.Z)(function*(K,ge){return{keyProcessed:(yield _._poll()).includes(ge.key)}});return function(K,ge){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,a.Z)(function*(K,ge){return["keyChanged"]});return function(K,ge){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var x,K;if(_.activeServiceWorker=yield function ma(){return ya.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Uo(_.activeServiceWorker);const ge=yield _.sender._send("ping",{},800);!ge||(null===(x=ge[0])||void 0===x?void 0:x.fulfilled)&&(null===(K=ge[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,a.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Dl(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield eo();return yield sr(_,Ba,"1"),yield Ht(_,Ba),!0}catch(_){}return!1})()}_withPendingWrite(_){var x=this;return(0,a.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var K=this;return(0,a.Z)(function*(){return K._withPendingWrite((0,a.Z)(function*(){return yield K._withRetries(ge=>sr(ge,_,x)),K.localCache[_]=x,K.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,a.Z)(function*(){const K=yield x._withRetries(ge=>function Ua(w,p){return $n.apply(this,arguments)}(ge,_));return x.localCache[_]=K,K})()}_remove(_){var x=this;return(0,a.Z)(function*(){return x._withPendingWrite((0,a.Z)(function*(){return yield x._withRetries(K=>Ht(K,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const x=yield _._withRetries(wt=>{const Xt=Ur(wt,!1).getAll();return new xn(Xt).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const K=[],ge=new Set;for(const{fbase_key:wt,value:Xt}of x)ge.add(wt),JSON.stringify(_.localCache[wt])!==JSON.stringify(Xt)&&(_.notifyListeners(wt,Xt),K.push(wt));for(const wt of Object.keys(_.localCache))_.localCache[wt]&&!ge.has(wt)&&(_.notifyListeners(wt,null),K.push(wt));return K})()}notifyListeners(_,x){this.localCache[_]=x;const K=this.listeners[_];if(K)for(const ge of Array.from(K))ge(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Y(w,p){return hn(w,"POST","/v2/accounts/mfaSignIn:start",St(w,p))}function it(){return(it=(0,a.Z)(function*(w){return(yield hn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jn(w){return new Promise((p,_)=>{const x=document.createElement("script");x.setAttribute("src",w),x.onload=p,x.onerror=K=>{const ge=He("internal-error");ge.customData=K,_(ge)},x.type="text/javascript",x.charset="UTF-8",function ln(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(x)})}function di(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ii=1e12;class Vr{constructor(p){this.auth=p,this.counter=ii,this._widgets=new Map}render(p,_){const x=this.counter;return this._widgets.set(x,new lo(p,this.auth.name,_||{})),this.counter++,x}reset(p){var _;const x=p||ii;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(p){var _;return(null===(_=this._widgets.get(p||ii))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,a.Z)(function*(){var x;return null===(x=_._widgets.get(p||ii))||void 0===x||x.execute(),""})()}}class lo{constructor(p,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof p?document.getElementById(p):p;Ye(K,"argument-error",{appName:_}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qo(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<w;x++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(x){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(x){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yi=di("rcb"),Lr=new at(3e4,6e4);class Sa{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$i().grecaptcha}load(p,_=""){return Ye(function pc(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($i().grecaptcha):new Promise((x,K)=>{const ge=$i().setTimeout(()=>{K(He(p,"network-request-failed"))},Lr.get());$i()[Yi]=()=>{$i().clearTimeout(ge),delete $i()[Yi];const Xt=$i().grecaptcha;if(!Xt)return void K(He(p,"internal-error"));const zn=Xt.render;Xt.render=(mr,yr)=>{const $r=zn(mr,yr);return this.counter++,$r},this.hostLanguage=_,x(Xt)},Jn(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Yi,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ge),K(He(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!$i().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $l{load(p){return(0,a.Z)(function*(){return new Vr(p)})()}clearedOneInstance(){}}const yi="recaptcha",Wc={theme:"light",type:"image"};class ks{constructor(p,_=Object.assign({},Wc),x){this.parameters=_,this.type=yi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(x),this.isInvisible="invisible"===this.parameters.size,Ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof p?document.getElementById(p):p;Ye(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $l:new Sa,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),x=p.getAssertedRecaptcha();return x.getResponse(_)||new Promise(ge=>{const wt=Xt=>{!Xt||(p.tokenChangeListeners.delete(wt),ge(Xt))};p.tokenChangeListeners.add(wt),p.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Ye(!this.parameters.sitekey,this.auth,"argument-error"),Ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof p)p(_);else if("string"==typeof p){const x=$i()[p];"function"==typeof x&&x(_)}}}assertNotDestroyed(){Ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){Ye(un()&&!_s(),p.auth,"internal-error"),yield function Tl(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Be(w){return it.apply(this,arguments)}(p.auth);Ye(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ja{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Gi._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function vs(){return(vs=(0,a.Z)(function*(w,p,_){const x=ft(w),K=yield Ks(x,p,(0,Z.m9)(_));return new ja(K,ge=>Zt(x,ge))})).apply(this,arguments)}function Bi(){return(Bi=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w);yield ie(!1,x,"phone");const K=yield Ks(x.auth,p,(0,Z.m9)(_));return new ja(K,ge=>Hr(x,ge))})).apply(this,arguments)}function rl(){return(rl=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w),K=yield Ks(x.auth,p,(0,Z.m9)(_));return new ja(K,ge=>Pr(x,ge))})).apply(this,arguments)}function Ks(w,p,_){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,a.Z)(function*(w,p,_){var x;const K=yield _.verify();try{let ge;if(Ye("string"==typeof K,w,"argument-error"),Ye(_.type===yi,w,"argument-error"),ge="string"==typeof p?{phoneNumber:p}:p,"session"in ge){const wt=ge.session;if("phoneNumber"in ge)return Ye("enroll"===wt.type,w,"internal-error"),(yield Zi(w,{idToken:wt.credential,phoneEnrollmentInfo:{phoneNumber:ge.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{Ye("signin"===wt.type,w,"internal-error");const Xt=(null===(x=ge.multiFactorHint)||void 0===x?void 0:x.uid)||ge.multiFactorUid;return Ye(Xt,w,"missing-multi-factor-info"),(yield Y(w,{mfaPendingCredential:wt.credential,mfaEnrollmentId:Xt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:wt}=yield ot(w,{phoneNumber:ge.phoneNumber,recaptchaToken:K});return wt}}finally{_._reset()}})).apply(this,arguments)}function Ns(){return(Ns=(0,a.Z)(function*(w,p){yield ti((0,Z.m9)(w),p)})).apply(this,arguments)}let Fs=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=ft(_)}verifyPhoneNumber(_,x){return Ks(this.auth,_,(0,Z.m9)(x))}static credential(_,x){return Gi._fromVerification(_,x)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:K}=_;return x&&K?Gi._fromTokenResponse(x,K):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function jo(w,p){return p?Se(p):(Ye(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ju extends Or{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return xr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return xr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return xr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Gn(w){return Mt(w.auth,new ju(w),w.bypassAuthState)}function Hu(w){const{auth:p,user:_}=w;return Ye(_,p,"internal-error"),de(_,new ju(w),w.bypassAuthState)}function qc(w){return go.apply(this,arguments)}function go(){return(go=(0,a.Z)(function*(w){const{auth:p,user:_}=w;return Ye(_,p,"internal-error"),ti(_,new ju(w),w.bypassAuthState)})).apply(this,arguments)}class ls{constructor(p,_,x,K,ge=!1){this.auth=p,this.resolver=x,this.user=K,this.bypassAuthState=ge,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,a.Z)(function*(x,K){p.pendingPromise={resolve:x,reject:K};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ge){p.reject(ge)}});return function(x,K){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,a.Z)(function*(){const{urlResponse:x,sessionId:K,postBody:ge,tenantId:wt,error:Xt,type:zn}=p;if(Xt)return void _.reject(Xt);const mr={auth:_.auth,requestUri:x,sessionId:K,tenantId:wt||void 0,postBody:ge||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(zn)(mr))}catch(yr){_.reject(yr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Gn;case"linkViaPopup":case"linkViaRedirect":return qc;case"reauthViaPopup":case"reauthViaRedirect":return Hu;default:pt(this.auth,"internal-error")}}resolve(p){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const il=new at(2e3,1e4);function Aa(){return(Aa=(0,a.Z)(function*(w,p,_){const x=ft(w);mt(w,p,qr);const K=jo(x,_);return new xa(x,"signInViaPopup",p,K).executeNotNull()})).apply(this,arguments)}function Ho(){return(Ho=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w);mt(x.auth,p,qr);const K=jo(x.auth,_);return new xa(x.auth,"reauthViaPopup",p,K,x).executeNotNull()})).apply(this,arguments)}function Vl(){return(Vl=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w);mt(x.auth,p,qr);const K=jo(x.auth,_);return new xa(x.auth,"linkViaPopup",p,K,x).executeNotNull()})).apply(this,arguments)}let xa=(()=>{class w extends ls{constructor(_,x,K,ge,wt){super(_,x,ge,wt),this.provider=K,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const x=yield _.execute();return Ye(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,a.Z)(function*(){Fe(1===_.filter.length,"Popup operations only handle one event");const x=oo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(K=>{_.reject(K)}),_.resolver._isIframeWebStorageSupported(_.auth,K=>{K||_.reject(He(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,K;this.pollId=(null===(K=null===(x=this.authWindow)||void 0===x?void 0:x.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,il.get())};_()}}return w.currentPopupAction=null,w})();const al=new Map;class Ga extends ls{constructor(p,_,x=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,a.Z)(function*(){let x=al.get(_.auth._key());if(!x){try{const ge=(yield function $(w,p){return W.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;x=()=>Promise.resolve(ge)}catch(K){x=()=>Promise.reject(K)}al.set(_.auth._key(),x)}return _.bypassAuthState||al.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,x=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(x,p);if("unknown"!==p.type){if(p.eventId){const K=yield x.auth._redirectUserForId(p.eventId);if(K)return x.user=K,_().call(x,p);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function W(){return(W=(0,a.Z)(function*(w,p){const _=vn(p),x=Ut(w);if(!(yield x._isAvailable()))return!1;const K="true"===(yield x._get(_));return yield x._remove(_),K})).apply(this,arguments)}function ue(w,p){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,a.Z)(function*(w,p){return Ut(w)._set(vn(p),"true")})).apply(this,arguments)}function Ut(w){return Se(w._redirectPersistence)}function vn(w){return Rt("pendingRedirect",w.config.apiKey,w.name)}function Rr(){return(Rr=(0,a.Z)(function*(w,p,_){const x=ft(w);mt(w,p,qr);const K=jo(x,_);return yield ue(K,x),K._openRedirect(x,p,"signInViaRedirect")})).apply(this,arguments)}function us(){return(us=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w);mt(x.auth,p,qr);const K=jo(x.auth,_);yield ue(K,x.auth);const ge=yield Sl(x);return K._openRedirect(x.auth,p,"reauthViaRedirect",ge)})).apply(this,arguments)}function Ul(){return(Ul=(0,a.Z)(function*(w,p,_){const x=(0,Z.m9)(w);mt(x.auth,p,qr);const K=jo(x.auth,_);yield ie(!1,x,p.providerId),yield ue(K,x.auth);const ge=yield Sl(x);return K._openRedirect(x.auth,p,"linkViaRedirect",ge)})).apply(this,arguments)}function No(){return(No=(0,a.Z)(function*(w,p){return yield ft(w)._initializationPromise,_a(w,p,!1)})).apply(this,arguments)}function _a(w,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,a.Z)(function*(w,p,_=!1){const x=ft(w),K=jo(x,p),wt=yield new Ga(x,K,_).execute();return wt&&!_&&(delete wt.user._redirectEventId,yield x._persistUserIfCurrent(wt.user),yield x._setRedirectUser(null,p)),wt})).apply(this,arguments)}function Sl(w){return ea.apply(this,arguments)}function ea(){return(ea=(0,a.Z)(function*(w){const p=oo(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class uu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(p,x)&&(_=!0,this.sendToConsumer(p,x),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Gu(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yc(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var x;if(p.error&&!Yc(p)){const K=(null===(x=p.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(He(this.auth,K))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const x=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&x}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ul(p))}saveEventToCache(p){this.cachedEventUids.add(ul(p)),this.lastProcessedEventTime=Date.now()}}function ul(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Yc({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Xs(w){return cu.apply(this,arguments)}function cu(){return(cu=(0,a.Z)(function*(w,p={}){return hn(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Kc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mc=/^https?/;function na(){return(na=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Xs(w);for(const _ of p)try{if(du(_))return}catch(x){}pt(w,"unauthorized-domain")})).apply(this,arguments)}function du(w){const p=Lt(),{protocol:_,hostname:x}=new URL(p);if(w.startsWith("chrome-extension://")){const wt=new URL(w);return""===wt.hostname&&""===x?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&wt.hostname===x}if(!mc.test(_))return!1;if(Kc.test(w))return x===w;const K=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(x)}const Md=new at(3e4,6e4);function Od(){const w=$i().___jsl;if(null==w?void 0:w.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Ea=null;function Pd(w){return Ea=Ea||function va(w){return new Promise((p,_)=>{var x,K,ge;function wt(){Od(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Od(),_(He(w,"network-request-failed"))},timeout:Md.get()})}if(null===(K=null===(x=$i().gapi)||void 0===x?void 0:x.iframes)||void 0===K?void 0:K.Iframe)p(gapi.iframes.getContext());else{if(!(null===(ge=$i().gapi)||void 0===ge?void 0:ge.load)){const Xt=di("iframefcb");return $i()[Xt]=()=>{gapi.load?wt():_(He(w,"network-request-failed"))},Jn(`https://apis.google.com/js/api.js?onload=${Xt}`).catch(zn=>_(zn))}wt()}}).catch(p=>{throw Ea=null,p})}(w),Ea}const yc=new at(5e3,15e3),dl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Al=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hl(w){const p=w.config;Ye(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?Et(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,x={apiKey:p.apiKey,appName:w.name,v:Ve.SDK_VERSION},K=Al.get(w.config.apiHost);K&&(x.eid=K);const ge=w._getFrameworks();return ge.length&&(x.fw=ge.join(",")),`${_}?${(0,Z.xO)(x).slice(1)}`}function jl(){return jl=(0,a.Z)(function*(w){const p=yield Pd(w),_=$i().gapi;return Ye(_,w,"internal-error"),p.open({where:document.body,url:hl(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dl,dontclear:!0},x=>new Promise(function(){var K=(0,a.Z)(function*(ge,wt){yield x.restyle({setHideOnLeave:!1});const Xt=He(w,"network-request-failed"),zn=$i().setTimeout(()=>{wt(Xt)},yc.get());function mr(){$i().clearTimeout(zn),ge(x)}x.ping(mr).then(mr,()=>{wt(Xt)})});return function(ge,wt){return K.apply(this,arguments)}}()))}),jl.apply(this,arguments)}const Ec={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Wa(w,p,_,x,K,ge){Ye(w.config.authDomain,w,"auth-domain-config-required"),Ye(w.config.apiKey,w,"invalid-api-key");const wt={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:x,v:Ve.SDK_VERSION,eventId:K};if(p instanceof qr){p.setDefaultLanguage(w.languageCode),wt.providerId=p.providerId||"",(0,Z.xb)(p.getCustomParameters())||(wt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[zn,mr]of Object.entries(ge||{}))wt[zn]=mr}if(p instanceof Tr){const zn=p.getScopes().filter(mr=>""!==mr);zn.length>0&&(wt.scopes=zn.join(","))}w.tenantId&&(wt.tid=w.tenantId);const Xt=wt;for(const zn of Object.keys(Xt))void 0===Xt[zn]&&delete Xt[zn];return`${function Xc({config:w}){return w.emulator?Et(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,Z.xO)(Xt).slice(1)}`}const ia="webStorageSupport";class Qc extends class Yu{constructor(p){this.factorId=p}_process(p,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,x);case"signin":return this._finalizeSignIn(p,_.credential);default:return st("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Qc(p)}_finalizeEnroll(p,_,x){return function qo(w,p){return hn(w,"POST","/v2/accounts/mfaEnrollment:finalize",St(w,p))}(p,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function le(w,p){return hn(w,"POST","/v2/accounts/mfaSignIn:finalize",St(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ku=(()=>{class w{constructor(){}static assertion(_){return Qc._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Zu="@firebase/auth",zl="0.19.12";class Rl{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(x=>{var K;p((null===(K=x)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sa(){return window}function Qs(){return(Qs=(0,a.Z)(function*(w,p,_){var x;const{BuildInfo:K}=sa();Fe(p.sessionId,"AuthEvent did not contain a session ID");const ge=yield Nd(p.sessionId),wt={};return xe()?wt.ibi=K.packageName:qt()?wt.apn=K.packageName:pt(w,"operation-not-supported-in-this-environment"),K.displayName&&(wt.appDisplayName=K.displayName),wt.sessionId=ge,Wa(w,_,p.type,void 0,null!==(x=p.eventId)&&void 0!==x?x:void 0,wt)})).apply(this,arguments)}function ba(){return(ba=(0,a.Z)(function*(w){const{BuildInfo:p}=sa(),_={};xe()?_.iosBundleId=p.packageName:qt()?_.androidPackageName=p.packageName:pt(w,"operation-not-supported-in-this-environment"),yield Xs(w,_)})).apply(this,arguments)}function Ma(){return(Ma=(0,a.Z)(function*(w,p,_){const{cordova:x}=sa();let K=()=>{};try{yield new Promise((ge,wt)=>{let Xt=null;function zn(){var $r;ge();const gs=null===($r=x.plugins.browsertab)||void 0===$r?void 0:$r.close;"function"==typeof gs&&gs(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function mr(){Xt||(Xt=window.setTimeout(()=>{wt(He(w,"redirect-cancelled-by-user"))},2e3))}function yr(){"visible"===(null==document?void 0:document.visibilityState)&&mr()}p.addPassiveListener(zn),document.addEventListener("resume",mr,!1),qt()&&document.addEventListener("visibilitychange",yr,!1),K=()=>{p.removePassiveListener(zn),document.removeEventListener("resume",mr,!1),document.removeEventListener("visibilitychange",yr,!1),Xt&&window.clearTimeout(Xt)}})}finally{K()}})).apply(this,arguments)}function Nd(w){return oa.apply(this,arguments)}function oa(){return(oa=(0,a.Z)(function*(w){const p=Fd(w),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fd(w){if(Fe(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const p=new ArrayBuffer(w.length),_=new Uint8Array(p);for(let x=0;x<w.length;x++)_[x]=w.charCodeAt(x);return _}!function pl(w){(0,Ve._registerComponent)(new we.wA("auth",(p,{options:_})=>{const x=p.getProvider("app").getImmediate(),K=p.getProvider("heartbeat"),{apiKey:ge,authDomain:wt}=x.options;return((Xt,zn)=>{Ye(ge&&!ge.includes(":"),"invalid-api-key",{appName:Xt.name}),Ye(!(null==wt?void 0:wt.includes(":")),"argument-error",{appName:Xt.name});const mr={apiKey:ge,authDomain:wt,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:an(w)},yr=new En(Xt,zn,mr);return function ut(w,p){const _=(null==p?void 0:p.persistence)||[],x=(Array.isArray(_)?_:[_]).map(Se);(null==p?void 0:p.errorMap)&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(x,null==p?void 0:p.popupRedirectResolver)}(yr,_),yr})(x,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,x)=>{p.getProvider("auth-internal").initialize()})),(0,Ve._registerComponent)(new we.wA("auth-internal",p=>{const _=ft(p.getProvider("auth").getImmediate());return new Rl(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ve.registerVersion)(Zu,zl,function kd(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Ve.registerVersion)(Zu,zl,"esm2017")}("Browser");class qa extends uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function Jc(w){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,a.Z)(function*(w){const p=yield td()._get(Ds(w));return p&&(yield td()._remove(Ds(w))),p})).apply(this,arguments)}function ed(){const w=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const x=Math.floor(Math.random()*p.length);w.push(p.charAt(x))}return w.join("")}function td(){return Se(ns)}function Ds(w){return Rt("authEvent",w.config.apiKey,w.name)}function ql(w){if(!(null==w?void 0:w.includes("?")))return{};const[p,..._]=w.split("?");return(0,Z.zd)(_.join("?"))}function $s(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:He("no-auth-event")}}function Fo(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Ic(w=(0,Z.z$)()){return!("file:"!==Fo()&&"ionic:"!==Fo()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Co(){try{const w=self.localStorage,p=oo();if(w)return w.setItem(p,"1"),w.removeItem(p),!function Ti(w=(0,Z.z$)()){return function Cf(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $d(w=(0,Z.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Z.hl)()}catch(w){return aa()&&(0,Z.hl)()}return!1}function aa(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lo(){return(function Ld(){return"http:"===Fo()||"https:"===Fo()}()||(0,Z.ru)()||Ic())&&!function Qu(){return(0,Z.b$)()||(0,Z.UG)()}()&&Co()&&!aa()}function Kl(){return Ic()&&"undefined"!=typeof document}function ka(){return(ka=(0,a.Z)(function*(){return!!Kl()&&new Promise(w=>{const p=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),w(!0)})})})).apply(this,arguments)}const to={LOCAL:"local",NONE:"none",SESSION:"session"},Ju=Ye,ec="persistence";function tc(w){return _u.apply(this,arguments)}function _u(){return(_u=(0,a.Z)(function*(w){yield w._initializationPromise;const p=Ml(),_=Rt(ec,w.config.apiKey,w.name);p&&p.setItem(_,w._getPersistence())})).apply(this,arguments)}function Ml(){var w;try{return(null===(w=function Cc(){return"undefined"!=typeof window?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch(p){return null}}const Bd=Ye;class Ya{constructor(){this.browserResolver=Se(class Hl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ps,this._completeRedirectFn=_a}_openPopup(p,_,x,K){var ge=this;return(0,a.Z)(function*(){var wt;Fe(null===(wt=ge.eventManagers[p._key()])||void 0===wt?void 0:wt.manager,"_initialize() not called before _openPopup()");const Xt=Wa(p,_,x,Lt(),K);return function za(w,p,_,x=500,K=600){const ge=Math.max((window.screen.availHeight-K)/2,0).toString(),wt=Math.max((window.screen.availWidth-x)/2,0).toString();let Xt="";const zn=Object.assign(Object.assign({},Ec),{width:x.toString(),height:K.toString(),top:ge,left:wt}),mr=(0,Z.z$)().toLowerCase();_&&(Xt=Ae(mr)?"_blank":_),tt(mr)&&(p=p||"http://localhost",zn.scrollbars="yes");const yr=Object.entries(zn).reduce((gs,[Ui,Zl])=>`${gs}${Ui}=${Zl},`,"");if(function $t(w=(0,Z.z$)()){var p;return xe(w)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(mr)&&"_self"!==Xt)return function zu(w,p){const _=document.createElement("a");_.href=w,_.target=p;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(p||"",Xt),new xl(null);const $r=window.open(p||"",Xt,yr);Ye($r,w,"popup-blocked");try{$r.focus()}catch(gs){}return new xl($r)}(p,Xt,oo())})()}_openRedirect(p,_,x,K){var ge=this;return(0,a.Z)(function*(){return yield ge._originValidation(p),function Uu(w){$i().location.href=w}(Wa(p,_,x,Lt(),K)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:K,promise:ge}=this.eventManagers[_];return K?Promise.resolve(K):(Fe(ge,"If manager is not set, promise should be"),ge)}const x=this.initAndGetManager(p);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(p){var _=this;return(0,a.Z)(function*(){const x=yield function vc(w){return jl.apply(this,arguments)}(p),K=new uu(p);return x.register("authEvent",ge=>(Ye(null==ge?void 0:ge.authEvent,p,"invalid-auth-event"),{status:K.onEvent(ge.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:K},_.iframes[p._key()]=x,K})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(ia,{type:ia},K=>{var ge;const wt=null===(ge=null==K?void 0:K[0])||void 0===ge?void 0:ge[ia];void 0!==wt&&_(!!wt),pt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Rd(w){return na.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Yt()||je()||xe()}}),this.cordovaResolver=Se(class Ls{constructor(){this._redirectPersistence=Ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_a}_initialize(p){var _=this;return(0,a.Z)(function*(){const x=p._key();let K=_.eventManagers.get(x);return K||(K=new qa(p),_.eventManagers.set(x,K),_.attachCallbackListeners(p,K)),K})()}_openPopup(p){pt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,x,K){var ge=this;return(0,a.Z)(function*(){!function gu(w){var p,_,x,K,ge,wt,Xt,zn,mr,yr;const $r=sa();Ye("function"==typeof(null===(p=null==$r?void 0:$r.universalLinks)||void 0===p?void 0:p.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ye(void 0!==(null===(_=null==$r?void 0:$r.BuildInfo)||void 0===_?void 0:_.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ye("function"==typeof(null===(ge=null===(K=null===(x=null==$r?void 0:$r.cordova)||void 0===x?void 0:x.plugins)||void 0===K?void 0:K.browsertab)||void 0===ge?void 0:ge.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(zn=null===(Xt=null===(wt=null==$r?void 0:$r.cordova)||void 0===wt?void 0:wt.plugins)||void 0===Xt?void 0:Xt.browsertab)||void 0===zn?void 0:zn.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(yr=null===(mr=null==$r?void 0:$r.cordova)||void 0===mr?void 0:mr.InAppBrowser)||void 0===yr?void 0:yr.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const wt=yield ge._initialize(p);yield wt.initialized(),wt.resetRedirect(),function xt(){al.clear()}(),yield ge._originValidation(p);const Xt=function Oa(w,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:ed(),postBody:null,tenantId:w.tenantId,error:He(w,"no-auth-event")}}(p,x,K);yield function wa(w,p){return td()._set(Ds(w),p)}(p,Xt);const zn=yield function fu(w,p,_){return Qs.apply(this,arguments)}(p,Xt,_),mr=yield function fs(w){const{cordova:p}=sa();return new Promise(_=>{p.plugins.browsertab.isAvailable(x=>{let K=null;x?p.plugins.browsertab.openUrl(w):K=p.InAppBrowser.open(w,function Te(w=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),_(K)})})}(zn);return function Wl(w,p,_){return Ma.apply(this,arguments)}(p,wt,mr)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function pu(w){return ba.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:x,handleOpenURL:K,BuildInfo:ge}=sa(),wt=setTimeout((0,a.Z)(function*(){yield Jc(p),_.onEvent($s())}),500),Xt=function(){var yr=(0,a.Z)(function*($r){clearTimeout(wt);const gs=yield Jc(p);let Ui=null;gs&&(null==$r?void 0:$r.url)&&(Ui=function mu(w,p){var _,x;const K=function gl(w){const p=ql(w),_=p.link?decodeURIComponent(p.link):void 0,x=ql(_).link,K=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ql(K).link||K||x||_||w}(p);if(K.includes("/__/auth/callback")){const ge=ql(K),wt=ge.firebaseError?function Ii(w){try{return JSON.parse(w)}catch(p){return null}}(decodeURIComponent(ge.firebaseError)):null,Xt=null===(x=null===(_=null==wt?void 0:wt.code)||void 0===_?void 0:_.split("auth/"))||void 0===x?void 0:x[1],zn=Xt?He(Xt):null;return zn?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:zn,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:K,postBody:null}}return null}(gs,$r.url)),_.onEvent(Ui||$s())});return function(gs){return yr.apply(this,arguments)}}();void 0!==x&&"function"==typeof x.subscribe&&x.subscribe(null,Xt);const zn=K,mr=`${ge.packageName.toLowerCase()}://`;sa().handleOpenURL=function(){var yr=(0,a.Z)(function*($r){if($r.toLowerCase().startsWith(mr)&&Xt({url:$r}),"function"==typeof zn)try{zn($r)}catch(gs){console.error(gs)}});return function($r){return yr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ps,this._completeRedirectFn=_a}_initialize(p){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,x,K){var ge=this;return(0,a.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openPopup(p,_,x,K)})()}_openRedirect(p,_,x,K){var ge=this;return(0,a.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openRedirect(p,_,x,K)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Kl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Bd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Bs(){return ka.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Vs(w){return w.unwrap()}function nc(w){return Ia(w)}function Ia(w){const{_tokenResponse:p}=w instanceof Z.ZR?w.customData:w;if(!p)return null;if(!(w instanceof Z.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Fs.credentialFromResult(w);const _=p.providerId;if(!_||"password"===_)return null;let x;switch(_){case"google.com":x=Qr;break;case"facebook.com":x=zi;break;case"github.com":x=Rs;break;case"twitter.com":x=jr;break;default:const{oauthIdToken:K,oauthAccessToken:ge,oauthTokenSecret:wt,pendingToken:Xt,nonce:zn}=p;return ge||wt||K||Xt?Xt?_.startsWith("saml.")?is._create(_,Xt):rt._fromParams({providerId:_,signInMethod:_,pendingToken:Xt,idToken:K,accessToken:ge}):new wr(_).credential({idToken:K,accessToken:ge,rawNonce:zn}):null}return w instanceof Z.ZR?x.credentialFromError(w):x.credentialFromResult(w)}function Js(w,p){return p.catch(_=>{throw _ instanceof Z.ZR&&function vu(w,p){var _;const x=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new ml(w,function pa(w,p){var _;const x=(0,Z.m9)(w),K=p;return Ye(p.customData.operationType,x,"argument-error"),Ye(null===(_=K.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),wo._fromError(x,K)}(w,p));else if(x){const K=Ia(p),ge=p;K&&(ge.credential=K,ge.tenantId=x.tenantId||void 0,ge.email=x.email||void 0,ge.phoneNumber=x.phoneNumber||void 0)}}(w,_),_}).then(_=>{const K=_.user;return{operationType:_.operationType,credential:nc(_),additionalUserInfo:Ws(_),user:la.getOrCreate(K)}})}function yo(w,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,a.Z)(function*(w,p){const _=yield p;return{verificationId:_.verificationId,confirm:x=>Js(w,_.confirm(x))}})).apply(this,arguments)}class ml{constructor(p,_){this.resolver=_,this.auth=function rd(w){return w.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Js(Vs(this.auth),this.resolver.resolveSignIn(p))}}class la{constructor(p){this._delegate=p,this.multiFactor=function Ko(w){const p=(0,Z.m9)(w);return Yo.has(p)||Yo.set(p,po._fromUser(p)),Yo.get(p)}(p)}static getOrCreate(p){return la.USER_MAP.has(p)||la.USER_MAP.set(p,new la(p)),la.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,a.Z)(function*(){return Js(_.auth,Hr(_._delegate,p))})()}linkWithPhoneNumber(p,_){var x=this;return(0,a.Z)(function*(){return yo(x.auth,function Jo(w,p,_){return Bi.apply(this,arguments)}(x._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,a.Z)(function*(){return Js(_.auth,function ol(w,p,_){return Vl.apply(this,arguments)}(_._delegate,p,Ya))})()}linkWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield tc(ft(_.auth)),function li(w,p,_){return function Ra(w,p,_){return Ul.apply(this,arguments)}(w,p,_)}(_._delegate,p,Ya)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,a.Z)(function*(){return Js(_.auth,Pr(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return yo(this.auth,function Ha(w,p,_){return rl.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Js(this.auth,function sl(w,p,_){return Ho.apply(this,arguments)}(this._delegate,p,Ya))}reauthenticateWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield tc(ft(_.auth)),function fi(w,p,_){return function Wr(w,p,_){return us.apply(this,arguments)}(w,p,_)}(_._delegate,p,Ya)})()}sendEmailVerification(p){return function Ri(w,p){return Li.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,a.Z)(function*(){return yield function ys(w,p){return Gs.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function da(w,p){return Bo((0,Z.m9)(w),p,null)}(this._delegate,p)}updatePassword(p){return function Ro(w,p){return Bo((0,Z.m9)(w),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Bl(w,p){return Ns.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function co(w,p){return Eo.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function zs(w,p,_){return ci.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}la.USER_MAP=new WeakMap;const _o=Ye;let yl=(()=>{class w{constructor(_,x){if(this.app=_,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=_.options;_o(K,"invalid-api-key",{appName:_.name}),_o(K,"invalid-api-key",{appName:_.name});const ge="undefined"!=typeof window?Ya:void 0;this._delegate=x.initialize({options:{persistence:Eu(K,_.name),popupRedirectResolver:ge}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?la.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,x){!function Pn(w,p,_){const x=ft(w);Ye(x._canInitEmulator,x,"emulator-config-failed"),Ye(/^https?:\/\//.test(p),x,"invalid-emulator-scheme");const K=!!(null==_?void 0:_.disableWarnings),ge=hr(p),{host:wt,port:Xt}=function Xr(w){const p=hr(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(x);if(K){const ge=K[1];return{host:ge,port:Mr(x.substr(ge.length+1))}}{const[ge,wt]=x.split(":");return{host:ge,port:Mr(wt)}}}(p);x.config.emulator={url:`${ge}//${wt}${null===Xt?"":`:${Xt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:wt,port:Xt,protocol:ge.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function ei(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,_,x)}applyActionCode(_){return function v(w,p){return P.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return b(this._delegate,_)}confirmPasswordReset(_,x){return function se(w,p,_){return jt.apply(this,arguments)}(this._delegate,_,x)}createUserWithEmailAndPassword(_,x){var K=this;return(0,a.Z)(function*(){return Js(K._delegate,function fe(w,p,_){return Le.apply(this,arguments)}(K._delegate,_,x))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Fi(w,p){return Fr.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function An(w,p){const _=Qi.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){_o(Lo(),_._delegate,"operation-not-supported-in-this-environment");const x=yield function mo(w,p){return No.apply(this,arguments)}(_._delegate,Ya);return x?Js(_._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function ps(w,p){ft(w)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,x,K){const{next:ge,error:wt,complete:Xt}=id(_,x,K);return this._delegate.onAuthStateChanged(ge,wt,Xt)}onIdTokenChanged(_,x,K){const{next:ge,error:wt,complete:Xt}=id(_,x,K);return this._delegate.onIdTokenChanged(ge,wt,Xt)}sendSignInLinkToEmail(_,x){return function sn(w,p,_){return kn.apply(this,arguments)}(this._delegate,_,x)}sendPasswordResetEmail(_,x){return function B(w,p,_){return N.apply(this,arguments)}(this._delegate,_,x||void 0)}setPersistence(_){var x=this;return(0,a.Z)(function*(){let K;switch(function nd(w,p){Ju(Object.values(to).includes(p),w,"invalid-persistence-type"),(0,Z.b$)()?Ju(p!==to.SESSION,w,"unsupported-persistence-type"):(0,Z.UG)()?Ju(p===to.NONE,w,"unsupported-persistence-type"):aa()?Ju(p===to.NONE||p===to.LOCAL&&(0,Z.hl)(),w,"unsupported-persistence-type"):Ju(p===to.NONE||Co(),w,"unsupported-persistence-type")}(x._delegate,_),_){case to.SESSION:K=Ps;break;case to.LOCAL:K=(yield Se(V)._isAvailable())?V:ns;break;case to.NONE:K=Ze;break;default:return pt("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Js(this._delegate,function so(w){return ss.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Js(this._delegate,Zt(this._delegate,_))}signInWithCustomToken(_){return Js(this._delegate,function ki(w,p){return Ji.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,x){return Js(this._delegate,function It(w,p,_){return Zt((0,Z.m9)(w),xs.credential(p,_))}(this._delegate,_,x))}signInWithEmailLink(_,x){return Js(this._delegate,function pr(w,p,_){return Mn.apply(this,arguments)}(this._delegate,_,x))}signInWithPhoneNumber(_,x){return yo(this._delegate,function Ys(w,p,_){return vs.apply(this,arguments)}(this._delegate,_,x))}signInWithPopup(_){var x=this;return(0,a.Z)(function*(){return _o(Lo(),x._delegate,"operation-not-supported-in-this-environment"),Js(x._delegate,function ko(w,p,_){return Aa.apply(this,arguments)}(x._delegate,_,Ya))})()}signInWithRedirect(_){var x=this;return(0,a.Z)(function*(){return _o(Lo(),x._delegate,"operation-not-supported-in-this-environment"),yield tc(x._delegate),function gr(w,p,_){return function or(w,p,_){return Rr.apply(this,arguments)}(w,p,_)}(x._delegate,_,Ya)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function I(w,p){return q.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=to,w})();function id(w,p,_){let x=w;"function"!=typeof w&&({next:x,error:p,complete:_}=w);const K=x;return{next:wt=>K(wt&&la.getOrCreate(wt)),error:p,complete:_}}function Eu(w,p){const _=function Dc(w,p){const _=Ml();if(!_)return[];const x=Rt(ec,w,p);switch(_.getItem(x)){case to.NONE:return[Ze];case to.LOCAL:return[V,Ps];case to.SESSION:return[Ps];default:return[]}}(w,p);if("undefined"!=typeof self&&!_.includes(V)&&_.push(V),"undefined"!=typeof window)for(const x of[ns,Ps])_.includes(x)||_.push(x);return _.includes(Ze)||_.push(Ze),_}class Na{constructor(){this.providerId="phone",this._delegate=new Fs(Vs(J.Z.auth()))}static credential(p,_){return Fs.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Na.PHONE_SIGN_IN_METHOD=Fs.PHONE_SIGN_IN_METHOD,Na.PROVIDER_ID=Fs.PROVIDER_ID;const Df=Ye;class Vd{constructor(p,_,x=J.Z.app()){var K;Df(null===(K=x.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new ks(p,_,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tc(w){w.INTERNAL.registerComponent(new we.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),x=p.getProvider("auth");return new yl(_,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xs,FacebookAuthProvider:zi,GithubAuthProvider:Rs,GoogleAuthProvider:Qr,OAuthProvider:wr,SAMLAuthProvider:Kr,PhoneAuthProvider:Na,PhoneMultiFactorGenerator:Ku,RecaptchaVerifier:Vd,TwitterAuthProvider:jr,Auth:yl,AuthCredential:Or,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.12")}(J.Z)},591:(On,Ct,L)=>{"use strict";L.d(Ct,{X:()=>Z});var a=L(8929),J=L(5279);class Z extends a.xQ{constructor(Me){super(),this._value=Me}get value(){return this.getValue()}_subscribe(Me){const ae=super._subscribe(Me);return ae&&!ae.closed&&Me.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new J.N;return this._value}next(Me){super.next(this._value=Me)}}},2916:(On,Ct,L)=>{"use strict";L.d(Ct,{y:()=>pe});var a=L(3489),Z=L(7668),Ve=L(3292),ae=L(3821),we=L(5379);var oe=L(2830);let pe=(()=>{class ce{constructor(Ne){this._isScalar=!1,Ne&&(this._subscribe=Ne)}lift(Ne){const _e=new ce;return _e.source=this,_e.operator=Ne,_e}subscribe(Ne,_e,ke){const{operator:$e}=this,Dt=function Me(ce,Xe,Ne){if(ce){if(ce instanceof a.L)return ce;if(ce[Z.b])return ce[Z.b]()}return ce||Xe||Ne?new a.L(ce,Xe,Ne):new a.L(Ve.c)}(Ne,_e,ke);if(Dt.add($e?$e.call(Dt,this.source):this.source||oe.v.useDeprecatedSynchronousErrorHandling&&!Dt.syncErrorThrowable?this._subscribe(Dt):this._trySubscribe(Dt)),oe.v.useDeprecatedSynchronousErrorHandling&&Dt.syncErrorThrowable&&(Dt.syncErrorThrowable=!1,Dt.syncErrorThrown))throw Dt.syncErrorValue;return Dt}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(_e){oe.v.useDeprecatedSynchronousErrorHandling&&(Ne.syncErrorThrown=!0,Ne.syncErrorValue=_e),function J(ce){for(;ce;){const{closed:Xe,destination:Ne,isStopped:_e}=ce;if(Xe||_e)return!1;ce=Ne&&Ne instanceof a.L?Ne:null}return!0}(Ne)?Ne.error(_e):console.warn(_e)}}forEach(Ne,_e){return new(_e=ee(_e))((ke,$e)=>{let Dt;Dt=this.subscribe(ve=>{try{Ne(ve)}catch(pt){$e(pt),Dt&&Dt.unsubscribe()}},$e,ke)})}_subscribe(Ne){const{source:_e}=this;return _e&&_e.subscribe(Ne)}[ae.L](){return this}pipe(...Ne){return 0===Ne.length?this:function Ee(ce){return 0===ce.length?we.y:1===ce.length?ce[0]:function(Ne){return ce.reduce((_e,ke)=>ke(_e),Ne)}}(Ne)(this)}toPromise(Ne){return new(Ne=ee(Ne))((_e,ke)=>{let $e;this.subscribe(Dt=>$e=Dt,Dt=>ke(Dt),()=>_e($e))})}}return ce.create=Xe=>new ce(Xe),ce})();function ee(ce){if(ce||(ce=oe.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},3292:(On,Ct,L)=>{"use strict";L.d(Ct,{c:()=>Z});var a=L(2830),J=L(2782);const Z={closed:!0,next(Ve){},error(Ve){if(a.v.useDeprecatedSynchronousErrorHandling)throw Ve;(0,J.z)(Ve)},complete(){}}},826:(On,Ct,L)=>{"use strict";L.d(Ct,{L:()=>J});var a=L(3489);class J extends a.L{notifyNext(Ve,Me,ae,we,Ce){this.destination.next(Me)}notifyError(Ve,Me){this.destination.error(Ve)}notifyComplete(Ve){this.destination.complete()}}},8929:(On,Ct,L)=>{"use strict";L.d(Ct,{Yc:()=>we,xQ:()=>Ce});var a=L(2916),J=L(3489),Z=L(2654),Ve=L(5279),Me=L(5283),ae=L(7668);class we extends J.L{constructor(pe){super(pe),this.destination=pe}}let Ce=(()=>{class oe extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new we(this)}lift(ee){const ce=new Ee(this,this);return ce.operator=ee,ce}next(ee){if(this.closed)throw new Ve.N;if(!this.isStopped){const{observers:ce}=this,Xe=ce.length,Ne=ce.slice();for(let _e=0;_e<Xe;_e++)Ne[_e].next(ee)}}error(ee){if(this.closed)throw new Ve.N;this.hasError=!0,this.thrownError=ee,this.isStopped=!0;const{observers:ce}=this,Xe=ce.length,Ne=ce.slice();for(let _e=0;_e<Xe;_e++)Ne[_e].error(ee);this.observers.length=0}complete(){if(this.closed)throw new Ve.N;this.isStopped=!0;const{observers:ee}=this,ce=ee.length,Xe=ee.slice();for(let Ne=0;Ne<ce;Ne++)Xe[Ne].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ee){if(this.closed)throw new Ve.N;return super._trySubscribe(ee)}_subscribe(ee){if(this.closed)throw new Ve.N;return this.hasError?(ee.error(this.thrownError),Z.w.EMPTY):this.isStopped?(ee.complete(),Z.w.EMPTY):(this.observers.push(ee),new Me.W(this,ee))}asObservable(){const ee=new a.y;return ee.source=this,ee}}return oe.create=(pe,ee)=>new Ee(pe,ee),oe})();class Ee extends Ce{constructor(pe,ee){super(),this.destination=pe,this.source=ee}next(pe){const{destination:ee}=this;ee&&ee.next&&ee.next(pe)}error(pe){const{destination:ee}=this;ee&&ee.error&&this.destination.error(pe)}complete(){const{destination:pe}=this;pe&&pe.complete&&this.destination.complete()}_subscribe(pe){const{source:ee}=this;return ee?this.source.subscribe(pe):Z.w.EMPTY}}},5283:(On,Ct,L)=>{"use strict";L.d(Ct,{W:()=>J});var a=L(2654);class J extends a.w{constructor(Ve,Me){super(),this.subject=Ve,this.subscriber=Me,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ve=this.subject,Me=Ve.observers;if(this.subject=null,!Me||0===Me.length||Ve.isStopped||Ve.closed)return;const ae=Me.indexOf(this.subscriber);-1!==ae&&Me.splice(ae,1)}}},3489:(On,Ct,L)=>{"use strict";L.d(Ct,{L:()=>we});var a=L(7043),J=L(3292),Z=L(2654),Ve=L(7668),Me=L(2830),ae=L(2782);class we extends Z.w{constructor(oe,pe,ee){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=J.c;break;case 1:if(!oe){this.destination=J.c;break}if("object"==typeof oe){oe instanceof we?(this.syncErrorThrowable=oe.syncErrorThrowable,this.destination=oe,oe.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ce(this,oe));break}default:this.syncErrorThrowable=!0,this.destination=new Ce(this,oe,pe,ee)}}[Ve.b](){return this}static create(oe,pe,ee){const ce=new we(oe,pe,ee);return ce.syncErrorThrowable=!1,ce}next(oe){this.isStopped||this._next(oe)}error(oe){this.isStopped||(this.isStopped=!0,this._error(oe))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(oe){this.destination.next(oe)}_error(oe){this.destination.error(oe),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:oe}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=oe,this}}class Ce extends we{constructor(oe,pe,ee,ce){super(),this._parentSubscriber=oe;let Xe,Ne=this;(0,a.m)(pe)?Xe=pe:pe&&(Xe=pe.next,ee=pe.error,ce=pe.complete,pe!==J.c&&(Ne=Object.create(pe),(0,a.m)(Ne.unsubscribe)&&this.add(Ne.unsubscribe.bind(Ne)),Ne.unsubscribe=this.unsubscribe.bind(this))),this._context=Ne,this._next=Xe,this._error=ee,this._complete=ce}next(oe){if(!this.isStopped&&this._next){const{_parentSubscriber:pe}=this;Me.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable?this.__tryOrSetError(pe,this._next,oe)&&this.unsubscribe():this.__tryOrUnsub(this._next,oe)}}error(oe){if(!this.isStopped){const{_parentSubscriber:pe}=this,{useDeprecatedSynchronousErrorHandling:ee}=Me.v;if(this._error)ee&&pe.syncErrorThrowable?(this.__tryOrSetError(pe,this._error,oe),this.unsubscribe()):(this.__tryOrUnsub(this._error,oe),this.unsubscribe());else if(pe.syncErrorThrowable)ee?(pe.syncErrorValue=oe,pe.syncErrorThrown=!0):(0,ae.z)(oe),this.unsubscribe();else{if(this.unsubscribe(),ee)throw oe;(0,ae.z)(oe)}}}complete(){if(!this.isStopped){const{_parentSubscriber:oe}=this;if(this._complete){const pe=()=>this._complete.call(this._context);Me.v.useDeprecatedSynchronousErrorHandling&&oe.syncErrorThrowable?(this.__tryOrSetError(oe,pe),this.unsubscribe()):(this.__tryOrUnsub(pe),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(oe,pe){try{oe.call(this._context,pe)}catch(ee){if(this.unsubscribe(),Me.v.useDeprecatedSynchronousErrorHandling)throw ee;(0,ae.z)(ee)}}__tryOrSetError(oe,pe,ee){if(!Me.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{pe.call(this._context,ee)}catch(ce){return Me.v.useDeprecatedSynchronousErrorHandling?(oe.syncErrorValue=ce,oe.syncErrorThrown=!0,!0):((0,ae.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:oe}=this;this._context=null,this._parentSubscriber=null,oe.unsubscribe()}}},2654:(On,Ct,L)=>{"use strict";L.d(Ct,{w:()=>ae});var a=L(6688),J=L(7830),Z=L(7043);const Me=(()=>{function Ce(Ee){return Error.call(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((oe,pe)=>`${pe+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee,this}return Ce.prototype=Object.create(Error.prototype),Ce})();class ae{constructor(Ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=Ee)}unsubscribe(){let Ee;if(this.closed)return;let{_parentOrParents:oe,_ctorUnsubscribe:pe,_unsubscribe:ee,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,oe instanceof ae)oe.remove(this);else if(null!==oe)for(let Xe=0;Xe<oe.length;++Xe)oe[Xe].remove(this);if((0,Z.m)(ee)){pe&&(this._unsubscribe=void 0);try{ee.call(this)}catch(Xe){Ee=Xe instanceof Me?we(Xe.errors):[Xe]}}if((0,a.k)(ce)){let Xe=-1,Ne=ce.length;for(;++Xe<Ne;){const _e=ce[Xe];if((0,J.K)(_e))try{_e.unsubscribe()}catch(ke){Ee=Ee||[],ke instanceof Me?Ee=Ee.concat(we(ke.errors)):Ee.push(ke)}}}if(Ee)throw new Me(Ee)}add(Ee){let oe=Ee;if(!Ee)return ae.EMPTY;switch(typeof Ee){case"function":oe=new ae(Ee);case"object":if(oe===this||oe.closed||"function"!=typeof oe.unsubscribe)return oe;if(this.closed)return oe.unsubscribe(),oe;if(!(oe instanceof ae)){const ce=oe;oe=new ae,oe._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+Ee+" added to Subscription.")}let{_parentOrParents:pe}=oe;if(null===pe)oe._parentOrParents=this;else if(pe instanceof ae){if(pe===this)return oe;oe._parentOrParents=[pe,this]}else{if(-1!==pe.indexOf(this))return oe;pe.push(this)}const ee=this._subscriptions;return null===ee?this._subscriptions=[oe]:ee.push(oe),oe}remove(Ee){const oe=this._subscriptions;if(oe){const pe=oe.indexOf(Ee);-1!==pe&&oe.splice(pe,1)}}}var Ce;function we(Ce){return Ce.reduce((Ee,oe)=>Ee.concat(oe instanceof Me?oe.errors:oe),[])}ae.EMPTY=((Ce=new ae).closed=!0,Ce)},2830:(On,Ct,L)=>{"use strict";L.d(Ct,{v:()=>J});let a=!1;const J={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const Ve=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ve.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=Z},get useDeprecatedSynchronousErrorHandling(){return a}}},1177:(On,Ct,L)=>{"use strict";L.d(Ct,{IY:()=>Ve,Ds:()=>ae,ft:()=>Ce});var a=L(3489),J=L(2916),Z=L(9249);class Ve extends a.L{constructor(oe){super(),this.parent=oe}_next(oe){this.parent.notifyNext(oe)}_error(oe){this.parent.notifyError(oe),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends a.L{notifyNext(oe){this.destination.next(oe)}notifyError(oe){this.destination.error(oe)}notifyComplete(){this.destination.complete()}}function Ce(Ee,oe){if(oe.closed)return;if(Ee instanceof J.y)return Ee.subscribe(oe);let pe;try{pe=(0,Z.s)(Ee)(oe)}catch(ee){oe.error(ee)}return pe}},1762:(On,Ct,L)=>{"use strict";L.d(Ct,{c:()=>Me,N:()=>ae});var a=L(8929),J=L(2916),Z=L(2654),Ve=L(4327);class Me extends J.y{constructor(pe,ee){super(),this.source=pe,this.subjectFactory=ee,this._refCount=0,this._isComplete=!1}_subscribe(pe){return this.getSubject().subscribe(pe)}getSubject(){const pe=this._subject;return(!pe||pe.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let pe=this._connection;return pe||(this._isComplete=!1,pe=this._connection=new Z.w,pe.add(this.source.subscribe(new we(this.getSubject(),this))),pe.closed&&(this._connection=null,pe=Z.w.EMPTY)),pe}refCount(){return(0,Ve.x)()(this)}}const ae=(()=>{const oe=Me.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:oe._subscribe},_isComplete:{value:oe._isComplete,writable:!0},getSubject:{value:oe.getSubject},connect:{value:oe.connect},refCount:{value:oe.refCount}}})();class we extends a.Yc{constructor(pe,ee){super(pe),this.connectable=ee}_error(pe){this._unsubscribe(),super._error(pe)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const pe=this.connectable;if(pe){this.connectable=null;const ee=pe._connection;pe._refCount=0,pe._subject=null,pe._connection=null,ee&&ee.unsubscribe()}}}},1221:(On,Ct,L)=>{"use strict";L.d(Ct,{z:()=>Ve});var a=L(1086),J=L(9146);function Ve(...Me){return function Z(){return(0,J.J)(1)}()((0,a.of)(...Me))}},8896:(On,Ct,L)=>{"use strict";L.d(Ct,{E:()=>J,c:()=>Z});var a=L(2916);const J=new a.y(Me=>Me.complete());function Z(Me){return Me?function Ve(Me){return new a.y(ae=>Me.schedule(()=>ae.complete()))}(Me):J}},5254:(On,Ct,L)=>{"use strict";L.d(Ct,{D:()=>Ne});var a=L(2916),J=L(9249),Z=L(2654),Ve=L(3821),we=L(6454),Ce=L(5430),pe=L(8955),ee=L(8515);function Ne(_e,ke){return ke?function Xe(_e,ke){if(null!=_e){if(function oe(_e){return _e&&"function"==typeof _e[Ve.L]}(_e))return function Me(_e,ke){return new a.y($e=>{const Dt=new Z.w;return Dt.add(ke.schedule(()=>{const ve=_e[Ve.L]();Dt.add(ve.subscribe({next(pt){Dt.add(ke.schedule(()=>$e.next(pt)))},error(pt){Dt.add(ke.schedule(()=>$e.error(pt)))},complete(){Dt.add(ke.schedule(()=>$e.complete()))}}))})),Dt})}(_e,ke);if((0,pe.t)(_e))return function ae(_e,ke){return new a.y($e=>{const Dt=new Z.w;return Dt.add(ke.schedule(()=>_e.then(ve=>{Dt.add(ke.schedule(()=>{$e.next(ve),Dt.add(ke.schedule(()=>$e.complete()))}))},ve=>{Dt.add(ke.schedule(()=>$e.error(ve)))}))),Dt})}(_e,ke);if((0,ee.z)(_e))return(0,we.r)(_e,ke);if(function ce(_e){return _e&&"function"==typeof _e[Ce.hZ]}(_e)||"string"==typeof _e)return function Ee(_e,ke){if(!_e)throw new Error("Iterable cannot be null");return new a.y($e=>{const Dt=new Z.w;let ve;return Dt.add(()=>{ve&&"function"==typeof ve.return&&ve.return()}),Dt.add(ke.schedule(()=>{ve=_e[Ce.hZ](),Dt.add(ke.schedule(function(){if($e.closed)return;let pt,He;try{const dt=ve.next();pt=dt.value,He=dt.done}catch(dt){return void $e.error(dt)}He?$e.complete():($e.next(pt),this.schedule())}))})),Dt})}(_e,ke)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,ke):_e instanceof a.y?_e:new a.y((0,J.s)(_e))}},3009:(On,Ct,L)=>{"use strict";L.d(Ct,{n:()=>Ve});var a=L(2916),J=L(3650),Z=L(6454);function Ve(Me,ae){return ae?(0,Z.r)(Me,ae):new a.y((0,J.V)(Me))}},6787:(On,Ct,L)=>{"use strict";L.d(Ct,{T:()=>Me});var a=L(2916),J=L(2866),Z=L(9146),Ve=L(3009);function Me(...ae){let we=Number.POSITIVE_INFINITY,Ce=null,Ee=ae[ae.length-1];return(0,J.K)(Ee)?(Ce=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(we=ae.pop())):"number"==typeof Ee&&(we=ae.pop()),null===Ce&&1===ae.length&&ae[0]instanceof a.y?ae[0]:(0,Z.J)(we)((0,Ve.n)(ae,Ce))}},1086:(On,Ct,L)=>{"use strict";L.d(Ct,{of:()=>Ve});var a=L(2866),J=L(3009),Z=L(6454);function Ve(...Me){let ae=Me[Me.length-1];return(0,a.K)(ae)?(Me.pop(),(0,Z.r)(Me,ae)):(0,J.n)(Me)}},1737:(On,Ct,L)=>{"use strict";L.d(Ct,{_:()=>J});var a=L(2916);function J(Ve,Me){return new a.y(Me?ae=>Me.schedule(Z,0,{error:Ve,subscriber:ae}):ae=>ae.error(Ve))}function Z({error:Ve,subscriber:Me}){Me.error(Ve)}},1406:(On,Ct,L)=>{"use strict";L.d(Ct,{b:()=>J});var a=L(1709);function J(Z,Ve){return(0,a.zg)(Z,Ve,1)}},7314:(On,Ct,L)=>{"use strict";L.d(Ct,{d:()=>J});var a=L(3489);function J(Me=null){return ae=>ae.lift(new Z(Me))}class Z{constructor(ae){this.defaultValue=ae}call(ae,we){return we.subscribe(new Ve(ae,this.defaultValue))}}class Ve extends a.L{constructor(ae,we){super(ae),this.defaultValue=we,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(On,Ct,L)=>{"use strict";L.d(Ct,{x:()=>J});var a=L(3489);function J(Me,ae){return we=>we.lift(new Z(Me,ae))}class Z{constructor(ae,we){this.compare=ae,this.keySelector=we}call(ae,we){return we.subscribe(new Ve(ae,this.compare,this.keySelector))}}class Ve extends a.L{constructor(ae,we,Ce){super(ae),this.keySelector=Ce,this.hasKey=!1,"function"==typeof we&&(this.compare=we)}compare(ae,we){return ae===we}_next(ae){let we;try{const{keySelector:Ee}=this;we=Ee?Ee(ae):ae}catch(Ee){return this.destination.error(Ee)}let Ce=!1;if(this.hasKey)try{const{compare:Ee}=this;Ce=Ee(this.key,we)}catch(Ee){return this.destination.error(Ee)}else this.hasKey=!0;Ce||(this.key=we,this.destination.next(ae))}}},2198:(On,Ct,L)=>{"use strict";L.d(Ct,{h:()=>J});var a=L(3489);function J(Me,ae){return function(Ce){return Ce.lift(new Z(Me,ae))}}class Z{constructor(ae,we){this.predicate=ae,this.thisArg=we}call(ae,we){return we.subscribe(new Ve(ae,this.predicate,this.thisArg))}}class Ve extends a.L{constructor(ae,we,Ce){super(ae),this.predicate=we,this.thisArg=Ce,this.count=0}_next(ae){let we;try{we=this.predicate.call(this.thisArg,ae,this.count++)}catch(Ce){return void this.destination.error(Ce)}we&&this.destination.next(ae)}}},7224:(On,Ct,L)=>{"use strict";L.d(Ct,{P:()=>we});var a=L(4450),J=L(2198),Z=L(2986),Ve=L(7314),Me=L(4907),ae=L(5379);function we(Ce,Ee){const oe=arguments.length>=2;return pe=>pe.pipe(Ce?(0,J.h)((ee,ce)=>Ce(ee,ce,pe)):ae.y,(0,Z.q)(1),oe?(0,Ve.d)(Ee):(0,Me.T)(()=>new a.K))}},4850:(On,Ct,L)=>{"use strict";L.d(Ct,{U:()=>J});var a=L(3489);function J(Me,ae){return function(Ce){if("function"!=typeof Me)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ce.lift(new Z(Me,ae))}}class Z{constructor(ae,we){this.project=ae,this.thisArg=we}call(ae,we){return we.subscribe(new Ve(ae,this.project,this.thisArg))}}class Ve extends a.L{constructor(ae,we,Ce){super(ae),this.project=we,this.count=0,this.thisArg=Ce||this}_next(ae){let we;try{we=this.project.call(this.thisArg,ae,this.count++)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(we)}}},9146:(On,Ct,L)=>{"use strict";L.d(Ct,{J:()=>Z});var a=L(1709),J=L(5379);function Z(Ve=Number.POSITIVE_INFINITY){return(0,a.zg)(J.y,Ve)}},1709:(On,Ct,L)=>{"use strict";L.d(Ct,{zg:()=>Ve});var a=L(4850),J=L(5254),Z=L(1177);function Ve(Ce,Ee,oe=Number.POSITIVE_INFINITY){return"function"==typeof Ee?pe=>pe.pipe(Ve((ee,ce)=>(0,J.D)(Ce(ee,ce)).pipe((0,a.U)((Xe,Ne)=>Ee(ee,Xe,ce,Ne))),oe)):("number"==typeof Ee&&(oe=Ee),pe=>pe.lift(new Me(Ce,oe)))}class Me{constructor(Ee,oe=Number.POSITIVE_INFINITY){this.project=Ee,this.concurrent=oe}call(Ee,oe){return oe.subscribe(new ae(Ee,this.project,this.concurrent))}}class ae extends Z.Ds{constructor(Ee,oe,pe=Number.POSITIVE_INFINITY){super(Ee),this.project=oe,this.concurrent=pe,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Ee){this.active<this.concurrent?this._tryNext(Ee):this.buffer.push(Ee)}_tryNext(Ee){let oe;const pe=this.index++;try{oe=this.project(Ee,pe)}catch(ee){return void this.destination.error(ee)}this.active++,this._innerSub(oe)}_innerSub(Ee){const oe=new Z.IY(this),pe=this.destination;pe.add(oe);const ee=(0,Z.ft)(Ee,oe);ee!==oe&&pe.add(ee)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Ee){this.destination.next(Ee)}notifyComplete(){const Ee=this.buffer;this.active--,Ee.length>0?this._next(Ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(On,Ct,L)=>{"use strict";L.d(Ct,{ht:()=>Ee,QV:()=>we});var a=L(3489),J=L(8896),Z=L(1086),Ve=L(1737);class ae{constructor(ee,ce,Xe){this.kind=ee,this.value=ce,this.error=Xe,this.hasValue="N"===ee}observe(ee){switch(this.kind){case"N":return ee.next&&ee.next(this.value);case"E":return ee.error&&ee.error(this.error);case"C":return ee.complete&&ee.complete()}}do(ee,ce,Xe){switch(this.kind){case"N":return ee&&ee(this.value);case"E":return ce&&ce(this.error);case"C":return Xe&&Xe()}}accept(ee,ce,Xe){return ee&&"function"==typeof ee.next?this.observe(ee):this.do(ee,ce,Xe)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return(0,Ve._)(this.error);case"C":return(0,J.c)()}throw new Error("unexpected notification kind value")}static createNext(ee){return void 0!==ee?new ae("N",ee):ae.undefinedValueNotification}static createError(ee){return new ae("E",void 0,ee)}static createComplete(){return ae.completeNotification}}function we(pe,ee=0){return function(Xe){return Xe.lift(new Ce(pe,ee))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class Ce{constructor(ee,ce=0){this.scheduler=ee,this.delay=ce}call(ee,ce){return ce.subscribe(new Ee(ee,this.scheduler,this.delay))}}class Ee extends a.L{constructor(ee,ce,Xe=0){super(ee),this.scheduler=ce,this.delay=Xe}static dispatch(ee){const{notification:ce,destination:Xe}=ee;ce.observe(Xe),this.unsubscribe()}scheduleMessage(ee){this.destination.add(this.scheduler.schedule(Ee.dispatch,this.delay,new oe(ee,this.destination)))}_next(ee){this.scheduleMessage(ae.createNext(ee))}_error(ee){this.scheduleMessage(ae.createError(ee)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class oe{constructor(ee,ce){this.notification=ee,this.destination=ce}}},4327:(On,Ct,L)=>{"use strict";L.d(Ct,{x:()=>J});var a=L(3489);function J(){return function(ae){return ae.lift(new Z(ae))}}class Z{constructor(ae){this.connectable=ae}call(ae,we){const{connectable:Ce}=this;Ce._refCount++;const Ee=new Ve(ae,Ce),oe=we.subscribe(Ee);return Ee.closed||(Ee.connection=Ce.connect()),oe}}class Ve extends a.L{constructor(ae,we){super(ae),this.connectable=we}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const we=ae._refCount;if(we<=0)return void(this.connection=null);if(ae._refCount=we-1,we>1)return void(this.connection=null);const{connection:Ce}=this,Ee=ae._connection;this.connection=null,Ee&&(!Ce||Ee===Ce)&&Ee.unsubscribe()}}},2014:(On,Ct,L)=>{"use strict";L.d(Ct,{R:()=>J});var a=L(3489);function J(Me,ae){let we=!1;return arguments.length>=2&&(we=!0),function(Ee){return Ee.lift(new Z(Me,ae,we))}}class Z{constructor(ae,we,Ce=!1){this.accumulator=ae,this.seed=we,this.hasSeed=Ce}call(ae,we){return we.subscribe(new Ve(ae,this.accumulator,this.seed,this.hasSeed))}}class Ve extends a.L{constructor(ae,we,Ce,Ee){super(ae),this.accumulator=we,this._seed=Ce,this.hasSeed=Ee,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const we=this.index++;let Ce;try{Ce=this.accumulator(this.seed,ae,we)}catch(Ee){this.destination.error(Ee)}this.seed=Ce,this.destination.next(Ce)}}},2474:(On,Ct,L)=>{"use strict";L.d(Ct,{B:()=>we});var a=L(1762);class Z{constructor(Ee,oe){this.subjectFactory=Ee,this.selector=oe}call(Ee,oe){const{selector:pe}=this,ee=this.subjectFactory(),ce=pe(ee).subscribe(Ee);return ce.add(oe.subscribe(ee)),ce}}var Ve=L(4327),Me=L(8929);function ae(){return new Me.xQ}function we(){return Ce=>(0,Ve.x)()(function J(Ce,Ee){return function(pe){let ee;if(ee="function"==typeof Ce?Ce:function(){return Ce},"function"==typeof Ee)return pe.lift(new Z(ee,Ee));const ce=Object.create(pe,a.N);return ce.source=pe,ce.subjectFactory=ee,ce}}(ae)(Ce))}},1059:(On,Ct,L)=>{"use strict";L.d(Ct,{O:()=>Z});var a=L(1221),J=L(2866);function Z(...Ve){const Me=Ve[Ve.length-1];return(0,J.K)(Me)?(Ve.pop(),ae=>(0,a.z)(Ve,ae,Me)):ae=>(0,a.z)(Ve,ae)}},8915:(On,Ct,L)=>{"use strict";L.d(Ct,{R:()=>ke});var a=L(2916);let J=1;const Z=Promise.resolve(),Ve={};function Me(Dt){return Dt in Ve&&(delete Ve[Dt],!0)}const ae={setImmediate(Dt){const ve=J++;return Ve[ve]=!0,Z.then(()=>Me(ve)&&Dt()),ve},clearImmediate(Dt){Me(Dt)}};var Ce=L(6686),oe=L(2268);const ce=new class pe extends oe.v{flush(ve){this.active=!0,this.scheduled=void 0;const{actions:pt}=this;let He,dt=-1,mt=pt.length;ve=ve||pt.shift();do{if(He=ve.execute(ve.state,ve.delay))break}while(++dt<mt&&(ve=pt.shift()));if(this.active=!1,He){for(;++dt<mt&&(ve=pt.shift());)ve.unsubscribe();throw He}}}(class Ee extends Ce.o{constructor(ve,pt){super(ve,pt),this.scheduler=ve,this.work=pt}requestAsyncId(ve,pt,He=0){return null!==He&&He>0?super.requestAsyncId(ve,pt,He):(ve.actions.push(this),ve.scheduled||(ve.scheduled=ae.setImmediate(ve.flush.bind(ve,null))))}recycleAsyncId(ve,pt,He=0){if(null!==He&&He>0||null===He&&this.delay>0)return super.recycleAsyncId(ve,pt,He);0===ve.actions.length&&(ae.clearImmediate(pt),ve.scheduled=void 0)}});var Xe=L(6688);class _e extends a.y{constructor(ve,pt=0,He=ce){super(),this.source=ve,this.delayTime=pt,this.scheduler=He,(!function Ne(Dt){return!(0,Xe.k)(Dt)&&Dt-parseFloat(Dt)+1>=0}(pt)||pt<0)&&(this.delayTime=0),(!He||"function"!=typeof He.schedule)&&(this.scheduler=ce)}static create(ve,pt=0,He=ce){return new _e(ve,pt,He)}static dispatch(ve){const{source:pt,subscriber:He}=ve;return this.add(pt.subscribe(He))}_subscribe(ve){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:ve})}}function ke(Dt,ve=0){return function(He){return He.lift(new $e(Dt,ve))}}class $e{constructor(ve,pt){this.scheduler=ve,this.delay=pt}call(ve,pt){return new _e(pt,this.delay,this.scheduler).subscribe(ve)}}},7545:(On,Ct,L)=>{"use strict";L.d(Ct,{w:()=>Ve});var a=L(4850),J=L(5254),Z=L(1177);function Ve(we,Ce){return"function"==typeof Ce?Ee=>Ee.pipe(Ve((oe,pe)=>(0,J.D)(we(oe,pe)).pipe((0,a.U)((ee,ce)=>Ce(oe,ee,pe,ce))))):Ee=>Ee.lift(new Me(we))}class Me{constructor(Ce){this.project=Ce}call(Ce,Ee){return Ee.subscribe(new ae(Ce,this.project))}}class ae extends Z.Ds{constructor(Ce,Ee){super(Ce),this.project=Ee,this.index=0}_next(Ce){let Ee;const oe=this.index++;try{Ee=this.project(Ce,oe)}catch(pe){return void this.destination.error(pe)}this._innerSub(Ee)}_innerSub(Ce){const Ee=this.innerSubscription;Ee&&Ee.unsubscribe();const oe=new Z.IY(this),pe=this.destination;pe.add(oe),this.innerSubscription=(0,Z.ft)(Ce,oe),this.innerSubscription!==oe&&pe.add(this.innerSubscription)}_complete(){const{innerSubscription:Ce}=this;(!Ce||Ce.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(Ce){this.destination.next(Ce)}}},2986:(On,Ct,L)=>{"use strict";L.d(Ct,{q:()=>Ve});var a=L(3489),J=L(4231),Z=L(8896);function Ve(we){return Ce=>0===we?(0,Z.c)():Ce.lift(new Me(we))}class Me{constructor(Ce){if(this.total=Ce,this.total<0)throw new J.W}call(Ce,Ee){return Ee.subscribe(new ae(Ce,this.total))}}class ae extends a.L{constructor(Ce,Ee){super(Ce),this.total=Ee,this.count=0}_next(Ce){const Ee=this.total,oe=++this.count;oe<=Ee&&(this.destination.next(Ce),oe===Ee&&(this.destination.complete(),this.unsubscribe()))}}},2868:(On,Ct,L)=>{"use strict";L.d(Ct,{b:()=>Ve});var a=L(3489);function J(){}var Z=L(7043);function Ve(we,Ce,Ee){return function(pe){return pe.lift(new Me(we,Ce,Ee))}}class Me{constructor(Ce,Ee,oe){this.nextOrObserver=Ce,this.error=Ee,this.complete=oe}call(Ce,Ee){return Ee.subscribe(new ae(Ce,this.nextOrObserver,this.error,this.complete))}}class ae extends a.L{constructor(Ce,Ee,oe,pe){super(Ce),this._tapNext=J,this._tapError=J,this._tapComplete=J,this._tapError=oe||J,this._tapComplete=pe||J,(0,Z.m)(Ee)?(this._context=this,this._tapNext=Ee):Ee&&(this._context=Ee,this._tapNext=Ee.next||J,this._tapError=Ee.error||J,this._tapComplete=Ee.complete||J)}_next(Ce){try{this._tapNext.call(this._context,Ce)}catch(Ee){return void this.destination.error(Ee)}this.destination.next(Ce)}_error(Ce){try{this._tapError.call(this._context,Ce)}catch(Ee){return void this.destination.error(Ee)}this.destination.error(Ce)}_complete(){try{this._tapComplete.call(this._context)}catch(Ce){return void this.destination.error(Ce)}return this.destination.complete()}}},4907:(On,Ct,L)=>{"use strict";L.d(Ct,{T:()=>Z});var a=L(4450),J=L(3489);function Z(we=ae){return Ce=>Ce.lift(new Ve(we))}class Ve{constructor(Ce){this.errorFactory=Ce}call(Ce,Ee){return Ee.subscribe(new Me(Ce,this.errorFactory))}}class Me extends J.L{constructor(Ce,Ee){super(Ce),this.errorFactory=Ee,this.hasValue=!1}_next(Ce){this.hasValue=!0,this.destination.next(Ce)}_complete(){if(this.hasValue)return this.destination.complete();{let Ce;try{Ce=this.errorFactory()}catch(Ee){Ce=Ee}this.destination.error(Ce)}}}function ae(){return new a.K}},6454:(On,Ct,L)=>{"use strict";L.d(Ct,{r:()=>Z});var a=L(2916),J=L(2654);function Z(Ve,Me){return new a.y(ae=>{const we=new J.w;let Ce=0;return we.add(Me.schedule(function(){Ce!==Ve.length?(ae.next(Ve[Ce++]),ae.closed||we.add(this.schedule())):ae.complete()})),we})}},6686:(On,Ct,L)=>{"use strict";L.d(Ct,{o:()=>Z});var a=L(2654);class J extends a.w{constructor(Me,ae){super()}schedule(Me,ae=0){return this}}class Z extends J{constructor(Me,ae){super(Me,ae),this.scheduler=Me,this.work=ae,this.pending=!1}schedule(Me,ae=0){if(this.closed)return this;this.state=Me;const we=this.id,Ce=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(Ce,we,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(Ce,this.id,ae),this}requestAsyncId(Me,ae,we=0){return setInterval(Me.flush.bind(Me,this),we)}recycleAsyncId(Me,ae,we=0){if(null!==we&&this.delay===we&&!1===this.pending)return ae;clearInterval(ae)}execute(Me,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(Me,ae);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Me,ae){let Ce,we=!1;try{this.work(Me)}catch(Ee){we=!0,Ce=!!Ee&&Ee||new Error(Ee)}if(we)return this.unsubscribe(),Ce}_unsubscribe(){const Me=this.id,ae=this.scheduler,we=ae.actions,Ce=we.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Ce&&we.splice(Ce,1),null!=Me&&(this.id=this.recycleAsyncId(ae,Me,null)),this.delay=null}}},2268:(On,Ct,L)=>{"use strict";L.d(Ct,{v:()=>J});let a=(()=>{class Z{constructor(Me,ae=Z.now){this.SchedulerAction=Me,this.now=ae}schedule(Me,ae=0,we){return new this.SchedulerAction(this,Me).schedule(we,ae)}}return Z.now=()=>Date.now(),Z})();class J extends a{constructor(Ve,Me=a.now){super(Ve,()=>J.delegate&&J.delegate!==this?J.delegate.now():Me()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ve,Me=0,ae){return J.delegate&&J.delegate!==this?J.delegate.schedule(Ve,Me,ae):super.schedule(Ve,Me,ae)}flush(Ve){const{actions:Me}=this;if(this.active)return void Me.push(Ve);let ae;this.active=!0;do{if(ae=Ve.execute(Ve.state,Ve.delay))break}while(Ve=Me.shift());if(this.active=!1,ae){for(;Ve=Me.shift();)Ve.unsubscribe();throw ae}}}},353:(On,Ct,L)=>{"use strict";L.d(Ct,{z:()=>Z,P:()=>Ve});var a=L(6686);const Z=new(L(2268).v)(a.o),Ve=Z},341:(On,Ct,L)=>{"use strict";L.d(Ct,{c:()=>ae,N:()=>Me});var a=L(6686),Z=L(2268);const Me=new class Ve extends Z.v{}(class J extends a.o{constructor(Ce,Ee){super(Ce,Ee),this.scheduler=Ce,this.work=Ee}schedule(Ce,Ee=0){return Ee>0?super.schedule(Ce,Ee):(this.delay=Ee,this.state=Ce,this.scheduler.flush(this),this)}execute(Ce,Ee){return Ee>0||this.closed?super.execute(Ce,Ee):this._execute(Ce,Ee)}requestAsyncId(Ce,Ee,oe=0){return null!==oe&&oe>0||null===oe&&this.delay>0?super.requestAsyncId(Ce,Ee,oe):Ce.flush(this)}}),ae=Me},5430:(On,Ct,L)=>{"use strict";L.d(Ct,{hZ:()=>J});const J=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(On,Ct,L)=>{"use strict";L.d(Ct,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(On,Ct,L)=>{"use strict";L.d(Ct,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(On,Ct,L)=>{"use strict";L.d(Ct,{W:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Z.prototype=Object.create(Error.prototype),Z})()},4450:(On,Ct,L)=>{"use strict";L.d(Ct,{K:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Z.prototype=Object.create(Error.prototype),Z})()},5279:(On,Ct,L)=>{"use strict";L.d(Ct,{N:()=>J});const J=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2782:(On,Ct,L)=>{"use strict";function a(J){setTimeout(()=>{throw J},0)}L.d(Ct,{z:()=>a})},5379:(On,Ct,L)=>{"use strict";function a(J){return J}L.d(Ct,{y:()=>a})},6688:(On,Ct,L)=>{"use strict";L.d(Ct,{k:()=>a});const a=Array.isArray||(J=>J&&"number"==typeof J.length)},8515:(On,Ct,L)=>{"use strict";L.d(Ct,{z:()=>a});const a=J=>J&&"number"==typeof J.length&&"function"!=typeof J},7043:(On,Ct,L)=>{"use strict";function a(J){return"function"==typeof J}L.d(Ct,{m:()=>a})},7830:(On,Ct,L)=>{"use strict";function a(J){return null!==J&&"object"==typeof J}L.d(Ct,{K:()=>a})},8955:(On,Ct,L)=>{"use strict";function a(J){return!!J&&"function"!=typeof J.subscribe&&"function"==typeof J.then}L.d(Ct,{t:()=>a})},2866:(On,Ct,L)=>{"use strict";function a(J){return J&&"function"==typeof J.schedule}L.d(Ct,{K:()=>a})},9249:(On,Ct,L)=>{"use strict";L.d(Ct,{s:()=>pe});var a=L(3650),J=L(2782),Ve=L(5430),ae=L(3821),Ce=L(8515),Ee=L(8955),oe=L(7830);const pe=ee=>{if(ee&&"function"==typeof ee[ae.L])return(ee=>ce=>{const Xe=ee[ae.L]();if("function"!=typeof Xe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Xe.subscribe(ce)})(ee);if((0,Ce.z)(ee))return(0,a.V)(ee);if((0,Ee.t)(ee))return(ee=>ce=>(ee.then(Xe=>{ce.closed||(ce.next(Xe),ce.complete())},Xe=>ce.error(Xe)).then(null,J.z),ce))(ee);if(ee&&"function"==typeof ee[Ve.hZ])return(ee=>ce=>{const Xe=ee[Ve.hZ]();for(;;){let Ne;try{Ne=Xe.next()}catch(_e){return ce.error(_e),ce}if(Ne.done){ce.complete();break}if(ce.next(Ne.value),ce.closed)break}return"function"==typeof Xe.return&&ce.add(()=>{Xe.return&&Xe.return()}),ce})(ee);{const Xe=`You provided ${(0,oe.K)(ee)?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Xe)}}},3650:(On,Ct,L)=>{"use strict";L.d(Ct,{V:()=>a});const a=J=>Z=>{for(let Ve=0,Me=J.length;Ve<Me&&!Z.closed;Ve++)Z.next(J[Ve]);Z.complete()}},448:(On,Ct,L)=>{"use strict";L.d(Ct,{D:()=>Me});var a=L(3489);class J extends a.L{constructor(we,Ce,Ee){super(),this.parent=we,this.outerValue=Ce,this.outerIndex=Ee,this.index=0}_next(we){this.parent.notifyNext(this.outerValue,we,this.outerIndex,this.index++,this)}_error(we){this.parent.notifyError(we,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=L(9249),Ve=L(2916);function Me(ae,we,Ce,Ee,oe=new J(ae,Ce,Ee)){if(!oe.closed)return we instanceof Ve.y?we.subscribe(oe):(0,Z.s)(we)(oe)}},863:(On,Ct,L)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[3510,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[3024,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(Z){if(!L.o(a,Z))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+Z+"'");throw ae.code="MODULE_NOT_FOUND",ae});var Ve=a[Z],Me=Ve[0];return Promise.all(Ve.slice(1).map(L.e)).then(()=>L(Me))}J.keys=()=>Object.keys(a),J.id=863,On.exports=J},5899:(On,Ct,L)=>{var a={"./pwa-action-sheet.entry.js":[2987,2987],"./pwa-camera-modal-instance.entry.js":[3527,3527],"./pwa-camera-modal.entry.js":[5836,7839],"./pwa-camera.entry.js":[7943,7943],"./pwa-toast.entry.js":[3822,3822]};function J(Z){if(!L.o(a,Z))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+Z+"'");throw ae.code="MODULE_NOT_FOUND",ae});var Ve=a[Z],Me=Ve[0];return L.e(Ve[1]).then(()=>L(Me))}J.keys=()=>Object.keys(a),J.id=5899,On.exports=J},655:(On,Ct,L)=>{"use strict";function Ve(Fe,me){var Se={};for(var Ke in Fe)Object.prototype.hasOwnProperty.call(Fe,Ke)&&me.indexOf(Ke)<0&&(Se[Ke]=Fe[Ke]);if(null!=Fe&&"function"==typeof Object.getOwnPropertySymbols){var ut=0;for(Ke=Object.getOwnPropertySymbols(Fe);ut<Ke.length;ut++)me.indexOf(Ke[ut])<0&&Object.prototype.propertyIsEnumerable.call(Fe,Ke[ut])&&(Se[Ke[ut]]=Fe[Ke[ut]])}return Se}function Me(Fe,me,Se,Ke){var un,ut=arguments.length,Lt=ut<3?me:null===Ke?Ke=Object.getOwnPropertyDescriptor(me,Se):Ke;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Lt=Reflect.decorate(Fe,me,Se,Ke);else for(var vt=Fe.length-1;vt>=0;vt--)(un=Fe[vt])&&(Lt=(ut<3?un(Lt):ut>3?un(me,Se,Lt):un(me,Se))||Lt);return ut>3&&Lt&&Object.defineProperty(me,Se,Lt),Lt}function Ce(Fe,me,Se,Ke){return new(Se||(Se=Promise))(function(Lt,un){function vt(at){try{ze(Ke.next(at))}catch(Et){un(Et)}}function At(at){try{ze(Ke.throw(at))}catch(Et){un(Et)}}function ze(at){at.done?Lt(at.value):function ut(Lt){return Lt instanceof Se?Lt:new Se(function(un){un(Lt)})}(at.value).then(vt,At)}ze((Ke=Ke.apply(Fe,me||[])).next())})}L.d(Ct,{_T:()=>Ve,gn:()=>Me,mG:()=>Ce})},9808:(On,Ct,L)=>{"use strict";L.d(Ct,{mr:()=>Dt,Ov:()=>Tt,ez:()=>is,K0:()=>we,Do:()=>pt,V_:()=>oe,Ye:()=>He,S$:()=>ke,sg:()=>gi,O5:()=>te,tP:()=>nr,b0:()=>ve,lw:()=>Ce,EM:()=>Ms,JF:()=>ti,PM:()=>wi,w_:()=>ae,bD:()=>ws,q:()=>Z,Mx:()=>Hi,HT:()=>Me});var a=L(5e3);let J=null;function Z(){return J}function Me(H){J||(J=H)}class ae{}const we=new a.OlP("DocumentToken");let Ce=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=a.Yz7({token:H,factory:function(){return function Ee(){return(0,a.LFG)(pe)}()},providedIn:"platform"}),H})();const oe=new a.OlP("Location Initialized");let pe=(()=>{class H extends Ce{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(j){const de=Z().getGlobalEventTarget(this._doc,"window");return de.addEventListener("popstate",j,!1),()=>de.removeEventListener("popstate",j)}onHashChange(j){const de=Z().getGlobalEventTarget(this._doc,"window");return de.addEventListener("hashchange",j,!1),()=>de.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,de,nt){ee()?this._history.pushState(j,de,nt):this.location.hash=nt}replaceState(j,de,nt){ee()?this._history.replaceState(j,de,nt):this.location.hash=nt}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return H.\u0275fac=function(j){return new(j||H)(a.LFG(we))},H.\u0275prov=a.Yz7({token:H,factory:function(){return function ce(){return new pe((0,a.LFG)(we))}()},providedIn:"platform"}),H})();function ee(){return!!window.history.pushState}function Xe(H,ie){if(0==H.length)return ie;if(0==ie.length)return H;let j=0;return H.endsWith("/")&&j++,ie.startsWith("/")&&j++,2==j?H+ie.substring(1):1==j?H+ie:H+"/"+ie}function Ne(H){const ie=H.match(/#|\?|$/),j=ie&&ie.index||H.length;return H.slice(0,j-("/"===H[j-1]?1:0))+H.slice(j)}function _e(H){return H&&"?"!==H[0]?"?"+H:H}let ke=(()=>{class H{historyGo(j){throw new Error("Not implemented")}}return H.\u0275fac=function(j){return new(j||H)},H.\u0275prov=a.Yz7({token:H,factory:function(){return function $e(H){const ie=(0,a.LFG)(we).location;return new ve((0,a.LFG)(Ce),ie&&ie.origin||"")}()},providedIn:"root"}),H})();const Dt=new a.OlP("appBaseHref");let ve=(()=>{class H extends ke{constructor(j,de){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==de&&(de=this._platformLocation.getBaseHrefFromDOM()),null==de)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=de}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return Xe(this._baseHref,j)}path(j=!1){const de=this._platformLocation.pathname+_e(this._platformLocation.search),nt=this._platformLocation.hash;return nt&&j?`${de}${nt}`:de}pushState(j,de,nt,Mt){const en=this.prepareExternalUrl(nt+_e(Mt));this._platformLocation.pushState(j,de,en)}replaceState(j,de,nt,Mt){const en=this.prepareExternalUrl(nt+_e(Mt));this._platformLocation.replaceState(j,de,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var de,nt;null===(nt=(de=this._platformLocation).historyGo)||void 0===nt||nt.call(de,j)}}return H.\u0275fac=function(j){return new(j||H)(a.LFG(Ce),a.LFG(Dt,8))},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac}),H})(),pt=(()=>{class H extends ke{constructor(j,de){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=de&&(this._baseHref=de)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let de=this._platformLocation.hash;return null==de&&(de="#"),de.length>0?de.substring(1):de}prepareExternalUrl(j){const de=Xe(this._baseHref,j);return de.length>0?"#"+de:de}pushState(j,de,nt,Mt){let en=this.prepareExternalUrl(nt+_e(Mt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.pushState(j,de,en)}replaceState(j,de,nt,Mt){let en=this.prepareExternalUrl(nt+_e(Mt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.replaceState(j,de,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var de,nt;null===(nt=(de=this._platformLocation).historyGo)||void 0===nt||nt.call(de,j)}}return H.\u0275fac=function(j){return new(j||H)(a.LFG(Ce),a.LFG(Dt,8))},H.\u0275prov=a.Yz7({token:H,factory:H.\u0275fac}),H})(),He=(()=>{class H{constructor(j,de){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const nt=this._platformStrategy.getBaseHref();this._platformLocation=de,this._baseHref=Ne(Ft(nt)),this._platformStrategy.onPopState(Mt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Mt.state,type:Mt.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,de=""){return this.path()==this.normalize(j+_e(de))}normalize(j){return H.stripTrailingSlash(function mt(H,ie){return H&&ie.startsWith(H)?ie.substring(H.length):ie}(this._baseHref,Ft(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,de="",nt=null){this._platformStrategy.pushState(nt,"",j,de),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+_e(de)),nt)}replaceState(j,de="",nt=null){this._platformStrategy.replaceState(nt,"",j,de),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+_e(de)),nt)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var de,nt;null===(nt=(de=this._platformStrategy).historyGo)||void 0===nt||nt.call(de,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(de=>{this._notifyUrlChangeListeners(de.url,de.state)}))}_notifyUrlChangeListeners(j="",de){this._urlChangeListeners.forEach(nt=>nt(j,de))}subscribe(j,de,nt){return this._subject.subscribe({next:j,error:de,complete:nt})}}return H.normalizeQueryParams=_e,H.joinWithSlash=Xe,H.stripTrailingSlash=Ne,H.\u0275fac=function(j){return new(j||H)(a.LFG(ke),a.LFG(Ce))},H.\u0275prov=a.Yz7({token:H,factory:function(){return function dt(){return new He((0,a.LFG)(ke),(0,a.LFG)(Ce))}()},providedIn:"root"}),H})();function Ft(H){return H.replace(/\/index.html$/,"")}function Hi(H,ie){ie=encodeURIComponent(ie);for(const j of H.split(";")){const de=j.indexOf("="),[nt,Mt]=-1==de?[j,""]:[j.slice(0,de),j.slice(de+1)];if(nt.trim()===ie)return decodeURIComponent(Mt)}return null}class Ci{constructor(ie,j,de,nt){this.$implicit=ie,this.ngForOf=j,this.index=de,this.count=nt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class H{constructor(j,de,nt){this._viewContainer=j,this._template=de,this._differs=nt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const de=this._viewContainer;j.forEachOperation((nt,Mt,en)=>{if(null==nt.previousIndex)de.createEmbeddedView(this._template,new Ci(nt.item,this._ngForOf,-1,-1),null===en?void 0:en);else if(null==en)de.remove(null===Mt?void 0:Mt);else if(null!==Mt){const Zt=de.get(Mt);de.move(Zt,en),Mi(Zt,nt)}});for(let nt=0,Mt=de.length;nt<Mt;nt++){const Zt=de.get(nt).context;Zt.index=nt,Zt.count=Mt,Zt.ngForOf=this._ngForOf}j.forEachIdentityChange(nt=>{Mi(de.get(nt.currentIndex),nt)})}static ngTemplateContextGuard(j,de){return!0}}return H.\u0275fac=function(j){return new(j||H)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},H.\u0275dir=a.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),H})();function Mi(H,ie){H.context.$implicit=ie.item}let te=(()=>{class H{constructor(j,de){this._viewContainer=j,this._context=new ye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=de}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){Je("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){Je("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,de){return!0}}return H.\u0275fac=function(j){return new(j||H)(a.Y36(a.s_b),a.Y36(a.Rgc))},H.\u0275dir=a.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),H})();class ye{constructor(){this.$implicit=null,this.ngIf=null}}function Je(H,ie){if(ie&&!ie.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,a.AaK)(ie)}'.`)}let nr=(()=>{class H{constructor(j){this._viewContainerRef=j,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(j){if(j.ngTemplateOutlet){const de=this._viewContainerRef;this._viewRef&&de.remove(de.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?de.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&j.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return H.\u0275fac=function(j){return new(j||H)(a.Y36(a.s_b))},H.\u0275dir=a.lG2({type:H,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[a.TTD]}),H})();class xi{createSubscription(ie,j){return ie.subscribe({next:j,error:de=>{throw de}})}dispose(ie){ie.unsubscribe()}onDestroy(ie){ie.unsubscribe()}}class Oi{createSubscription(ie,j){return ie.then(j,de=>{throw de})}dispose(ie){}onDestroy(ie){}}const rt=new Oi,ot=new xi;let Tt=(()=>{class H{constructor(j){this._ref=j,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(j){return this._obj?j!==this._obj?(this._dispose(),this.transform(j)):this._latestValue:(j&&this._subscribe(j),this._latestValue)}_subscribe(j){this._obj=j,this._strategy=this._selectStrategy(j),this._subscription=this._strategy.createSubscription(j,de=>this._updateLatestValue(j,de))}_selectStrategy(j){if((0,a.QGY)(j))return rt;if((0,a.F4k)(j))return ot;throw function xr(H,ie){return new a.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(j,de){j===this._obj&&(this._latestValue=de,this._ref.markForCheck())}}return H.\u0275fac=function(j){return new(j||H)(a.Y36(a.sBO,16))},H.\u0275pipe=a.Yjl({name:"async",type:H,pure:!1}),H})(),is=(()=>{class H{}return H.\u0275fac=function(j){return new(j||H)},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({}),H})();const ws="browser";function wi(H){return"server"===H}let Ms=(()=>{class H{}return H.\u0275prov=(0,a.Yz7)({token:H,providedIn:"root",factory:()=>new Os((0,a.LFG)(we),window)}),H})();class Os{constructor(ie,j){this.document=ie,this.window=j,this.offset=()=>[0,0]}setOffset(ie){this.offset=Array.isArray(ie)?()=>ie:ie}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ie){this.supportsScrolling()&&this.window.scrollTo(ie[0],ie[1])}scrollToAnchor(ie){if(!this.supportsScrolling())return;const j=function ys(H,ie){const j=H.getElementById(ie)||H.getElementsByName(ie)[0];if(j)return j;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const de=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let nt=de.currentNode;for(;nt;){const Mt=nt.shadowRoot;if(Mt){const en=Mt.getElementById(ie)||Mt.querySelector(`[name="${ie}"]`);if(en)return en}nt=de.nextNode()}}return null}(this.document,ie);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(ie){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=ie)}}scrollToElement(ie){const j=ie.getBoundingClientRect(),de=j.left+this.window.pageXOffset,nt=j.top+this.window.pageYOffset,Mt=this.offset();this.window.scrollTo(de-Mt[0],nt-Mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ie=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!ie||!ie.writable&&!ie.set)}catch(ie){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ie){return!1}}}function Ei(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class ti{}},520:(On,Ct,L)=>{"use strict";L.d(Ct,{eN:()=>ut,JF:()=>Ir});var a=L(9808),J=L(5e3),Z=L(1086),Ve=L(2916),Me=L(1406),ae=L(2198),we=L(4850);class Ce{}class Ee{}class oe{constructor(qe){this.normalizedNames=new Map,this.lazyUpdate=null,qe?this.lazyInit="string"==typeof qe?()=>{this.headers=new Map,qe.split("\n").forEach(Ie=>{const Kt=Ie.indexOf(":");if(Kt>0){const Nt=Ie.slice(0,Kt),nn=Nt.toLowerCase(),Tn=Ie.slice(Kt+1).trim();this.maybeSetNormalizedName(Nt,nn),this.headers.has(nn)?this.headers.get(nn).push(Tn):this.headers.set(nn,[Tn])}})}:()=>{this.headers=new Map,Object.keys(qe).forEach(Ie=>{let Kt=qe[Ie];const Nt=Ie.toLowerCase();"string"==typeof Kt&&(Kt=[Kt]),Kt.length>0&&(this.headers.set(Nt,Kt),this.maybeSetNormalizedName(Ie,Nt))})}:this.headers=new Map}has(qe){return this.init(),this.headers.has(qe.toLowerCase())}get(qe){this.init();const Ie=this.headers.get(qe.toLowerCase());return Ie&&Ie.length>0?Ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(qe){return this.init(),this.headers.get(qe.toLowerCase())||null}append(qe,Ie){return this.clone({name:qe,value:Ie,op:"a"})}set(qe,Ie){return this.clone({name:qe,value:Ie,op:"s"})}delete(qe,Ie){return this.clone({name:qe,value:Ie,op:"d"})}maybeSetNormalizedName(qe,Ie){this.normalizedNames.has(Ie)||this.normalizedNames.set(Ie,qe)}init(){this.lazyInit&&(this.lazyInit instanceof oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(qe=>this.applyUpdate(qe)),this.lazyUpdate=null))}copyFrom(qe){qe.init(),Array.from(qe.headers.keys()).forEach(Ie=>{this.headers.set(Ie,qe.headers.get(Ie)),this.normalizedNames.set(Ie,qe.normalizedNames.get(Ie))})}clone(qe){const Ie=new oe;return Ie.lazyInit=this.lazyInit&&this.lazyInit instanceof oe?this.lazyInit:this,Ie.lazyUpdate=(this.lazyUpdate||[]).concat([qe]),Ie}applyUpdate(qe){const Ie=qe.name.toLowerCase();switch(qe.op){case"a":case"s":let Kt=qe.value;if("string"==typeof Kt&&(Kt=[Kt]),0===Kt.length)return;this.maybeSetNormalizedName(qe.name,Ie);const Nt=("a"===qe.op?this.headers.get(Ie):void 0)||[];Nt.push(...Kt),this.headers.set(Ie,Nt);break;case"d":const nn=qe.value;if(nn){let Tn=this.headers.get(Ie);if(!Tn)return;Tn=Tn.filter(Xn=>-1===nn.indexOf(Xn)),0===Tn.length?(this.headers.delete(Ie),this.normalizedNames.delete(Ie)):this.headers.set(Ie,Tn)}else this.headers.delete(Ie),this.normalizedNames.delete(Ie)}}forEach(qe){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ie=>qe(this.normalizedNames.get(Ie),this.headers.get(Ie)))}}class pe{encodeKey(qe){return Ne(qe)}encodeValue(qe){return Ne(qe)}decodeKey(qe){return decodeURIComponent(qe)}decodeValue(qe){return decodeURIComponent(qe)}}const ce=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ne(gt){return encodeURIComponent(gt).replace(ce,(qe,Ie)=>{var Kt;return null!==(Kt=Xe[Ie])&&void 0!==Kt?Kt:qe})}function _e(gt){return`${gt}`}class ke{constructor(qe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=qe.encoder||new pe,qe.fromString){if(qe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ee(gt,qe){const Ie=new Map;return gt.length>0&&gt.replace(/^\?/,"").split("&").forEach(Nt=>{const nn=Nt.indexOf("="),[Tn,Xn]=-1==nn?[qe.decodeKey(Nt),""]:[qe.decodeKey(Nt.slice(0,nn)),qe.decodeValue(Nt.slice(nn+1))],Zn=Ie.get(Tn)||[];Zn.push(Xn),Ie.set(Tn,Zn)}),Ie}(qe.fromString,this.encoder)}else qe.fromObject?(this.map=new Map,Object.keys(qe.fromObject).forEach(Ie=>{const Kt=qe.fromObject[Ie];this.map.set(Ie,Array.isArray(Kt)?Kt:[Kt])})):this.map=null}has(qe){return this.init(),this.map.has(qe)}get(qe){this.init();const Ie=this.map.get(qe);return Ie?Ie[0]:null}getAll(qe){return this.init(),this.map.get(qe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(qe,Ie){return this.clone({param:qe,value:Ie,op:"a"})}appendAll(qe){const Ie=[];return Object.keys(qe).forEach(Kt=>{const Nt=qe[Kt];Array.isArray(Nt)?Nt.forEach(nn=>{Ie.push({param:Kt,value:nn,op:"a"})}):Ie.push({param:Kt,value:Nt,op:"a"})}),this.clone(Ie)}set(qe,Ie){return this.clone({param:qe,value:Ie,op:"s"})}delete(qe,Ie){return this.clone({param:qe,value:Ie,op:"d"})}toString(){return this.init(),this.keys().map(qe=>{const Ie=this.encoder.encodeKey(qe);return this.map.get(qe).map(Kt=>Ie+"="+this.encoder.encodeValue(Kt)).join("&")}).filter(qe=>""!==qe).join("&")}clone(qe){const Ie=new ke({encoder:this.encoder});return Ie.cloneFrom=this.cloneFrom||this,Ie.updates=(this.updates||[]).concat(qe),Ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(qe=>this.map.set(qe,this.cloneFrom.map.get(qe))),this.updates.forEach(qe=>{switch(qe.op){case"a":case"s":const Ie=("a"===qe.op?this.map.get(qe.param):void 0)||[];Ie.push(_e(qe.value)),this.map.set(qe.param,Ie);break;case"d":if(void 0===qe.value){this.map.delete(qe.param);break}{let Kt=this.map.get(qe.param)||[];const Nt=Kt.indexOf(_e(qe.value));-1!==Nt&&Kt.splice(Nt,1),Kt.length>0?this.map.set(qe.param,Kt):this.map.delete(qe.param)}}}),this.cloneFrom=this.updates=null)}}class Dt{constructor(){this.map=new Map}set(qe,Ie){return this.map.set(qe,Ie),this}get(qe){return this.map.has(qe)||this.map.set(qe,qe.defaultValue()),this.map.get(qe)}delete(qe){return this.map.delete(qe),this}has(qe){return this.map.has(qe)}keys(){return this.map.keys()}}function pt(gt){return"undefined"!=typeof ArrayBuffer&&gt instanceof ArrayBuffer}function He(gt){return"undefined"!=typeof Blob&&gt instanceof Blob}function dt(gt){return"undefined"!=typeof FormData&&gt instanceof FormData}class Ft{constructor(qe,Ie,Kt,Nt){let nn;if(this.url=Ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=qe.toUpperCase(),function ve(gt){switch(gt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Nt?(this.body=void 0!==Kt?Kt:null,nn=Nt):nn=Kt,nn&&(this.reportProgress=!!nn.reportProgress,this.withCredentials=!!nn.withCredentials,nn.responseType&&(this.responseType=nn.responseType),nn.headers&&(this.headers=nn.headers),nn.context&&(this.context=nn.context),nn.params&&(this.params=nn.params)),this.headers||(this.headers=new oe),this.context||(this.context=new Dt),this.params){const Tn=this.params.toString();if(0===Tn.length)this.urlWithParams=Ie;else{const Xn=Ie.indexOf("?");this.urlWithParams=Ie+(-1===Xn?"?":Xn<Ie.length-1?"&":"")+Tn}}else this.params=new ke,this.urlWithParams=Ie}serializeBody(){return null===this.body?null:pt(this.body)||He(this.body)||dt(this.body)||function mt(gt){return"undefined"!=typeof URLSearchParams&&gt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ke?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dt(this.body)?null:He(this.body)?this.body.type||null:pt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ke?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(qe={}){var Ie;const Kt=qe.method||this.method,Nt=qe.url||this.url,nn=qe.responseType||this.responseType,Tn=void 0!==qe.body?qe.body:this.body,Xn=void 0!==qe.withCredentials?qe.withCredentials:this.withCredentials,Zn=void 0!==qe.reportProgress?qe.reportProgress:this.reportProgress;let Ln=qe.headers||this.headers,Hn=qe.params||this.params;const Er=null!==(Ie=qe.context)&&void 0!==Ie?Ie:this.context;return void 0!==qe.setHeaders&&(Ln=Object.keys(qe.setHeaders).reduce((Cr,yn)=>Cr.set(yn,qe.setHeaders[yn]),Ln)),qe.setParams&&(Hn=Object.keys(qe.setParams).reduce((Cr,yn)=>Cr.set(yn,qe.setParams[yn]),Hn)),new Ft(Kt,Nt,Tn,{params:Hn,headers:Ln,context:Er,reportProgress:Zn,responseType:nn,withCredentials:Xn})}}var Ye=(()=>((Ye=Ye||{})[Ye.Sent=0]="Sent",Ye[Ye.UploadProgress=1]="UploadProgress",Ye[Ye.ResponseHeader=2]="ResponseHeader",Ye[Ye.DownloadProgress=3]="DownloadProgress",Ye[Ye.Response=4]="Response",Ye[Ye.User=5]="User",Ye))();class st{constructor(qe,Ie=200,Kt="OK"){this.headers=qe.headers||new oe,this.status=void 0!==qe.status?qe.status:Ie,this.statusText=qe.statusText||Kt,this.url=qe.url||null,this.ok=this.status>=200&&this.status<300}}class Fe extends st{constructor(qe={}){super(qe),this.type=Ye.ResponseHeader}clone(qe={}){return new Fe({headers:qe.headers||this.headers,status:void 0!==qe.status?qe.status:this.status,statusText:qe.statusText||this.statusText,url:qe.url||this.url||void 0})}}class me extends st{constructor(qe={}){super(qe),this.type=Ye.Response,this.body=void 0!==qe.body?qe.body:null}clone(qe={}){return new me({body:void 0!==qe.body?qe.body:this.body,headers:qe.headers||this.headers,status:void 0!==qe.status?qe.status:this.status,statusText:qe.statusText||this.statusText,url:qe.url||this.url||void 0})}}class Se extends st{constructor(qe){super(qe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${qe.url||"(unknown url)"}`:`Http failure response for ${qe.url||"(unknown url)"}: ${qe.status} ${qe.statusText}`,this.error=qe.error||null}}function Ke(gt,qe){return{body:qe,headers:gt.headers,context:gt.context,observe:gt.observe,params:gt.params,reportProgress:gt.reportProgress,responseType:gt.responseType,withCredentials:gt.withCredentials}}let ut=(()=>{class gt{constructor(Ie){this.handler=Ie}request(Ie,Kt,Nt={}){let nn;if(Ie instanceof Ft)nn=Ie;else{let Zn,Ln;Zn=Nt.headers instanceof oe?Nt.headers:new oe(Nt.headers),Nt.params&&(Ln=Nt.params instanceof ke?Nt.params:new ke({fromObject:Nt.params})),nn=new Ft(Ie,Kt,void 0!==Nt.body?Nt.body:null,{headers:Zn,context:Nt.context,params:Ln,reportProgress:Nt.reportProgress,responseType:Nt.responseType||"json",withCredentials:Nt.withCredentials})}const Tn=(0,Z.of)(nn).pipe((0,Me.b)(Zn=>this.handler.handle(Zn)));if(Ie instanceof Ft||"events"===Nt.observe)return Tn;const Xn=Tn.pipe((0,ae.h)(Zn=>Zn instanceof me));switch(Nt.observe||"body"){case"body":switch(nn.responseType){case"arraybuffer":return Xn.pipe((0,we.U)(Zn=>{if(null!==Zn.body&&!(Zn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Zn.body}));case"blob":return Xn.pipe((0,we.U)(Zn=>{if(null!==Zn.body&&!(Zn.body instanceof Blob))throw new Error("Response is not a Blob.");return Zn.body}));case"text":return Xn.pipe((0,we.U)(Zn=>{if(null!==Zn.body&&"string"!=typeof Zn.body)throw new Error("Response is not a string.");return Zn.body}));default:return Xn.pipe((0,we.U)(Zn=>Zn.body))}case"response":return Xn;default:throw new Error(`Unreachable: unhandled observe type ${Nt.observe}}`)}}delete(Ie,Kt={}){return this.request("DELETE",Ie,Kt)}get(Ie,Kt={}){return this.request("GET",Ie,Kt)}head(Ie,Kt={}){return this.request("HEAD",Ie,Kt)}jsonp(Ie,Kt){return this.request("JSONP",Ie,{params:(new ke).append(Kt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ie,Kt={}){return this.request("OPTIONS",Ie,Kt)}patch(Ie,Kt,Nt={}){return this.request("PATCH",Ie,Ke(Nt,Kt))}post(Ie,Kt,Nt={}){return this.request("POST",Ie,Ke(Nt,Kt))}put(Ie,Kt,Nt={}){return this.request("PUT",Ie,Ke(Nt,Kt))}}return gt.\u0275fac=function(Ie){return new(Ie||gt)(J.LFG(Ce))},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})();class Lt{constructor(qe,Ie){this.next=qe,this.interceptor=Ie}handle(qe){return this.interceptor.intercept(qe,this.next)}}const un=new J.OlP("HTTP_INTERCEPTORS");let vt=(()=>{class gt{intercept(Ie,Kt){return Kt.handle(Ie)}}return gt.\u0275fac=function(Ie){return new(Ie||gt)},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})();const hn=/^\)\]\}',?\n/;let jn=(()=>{class gt{constructor(Ie){this.xhrFactory=Ie}handle(Ie){if("JSONP"===Ie.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ve.y(Kt=>{const Nt=this.xhrFactory.build();if(Nt.open(Ie.method,Ie.urlWithParams),Ie.withCredentials&&(Nt.withCredentials=!0),Ie.headers.forEach((yn,Wn)=>Nt.setRequestHeader(yn,Wn.join(","))),Ie.headers.has("Accept")||Nt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ie.headers.has("Content-Type")){const yn=Ie.detectContentTypeHeader();null!==yn&&Nt.setRequestHeader("Content-Type",yn)}if(Ie.responseType){const yn=Ie.responseType.toLowerCase();Nt.responseType="json"!==yn?yn:"text"}const nn=Ie.serializeBody();let Tn=null;const Xn=()=>{if(null!==Tn)return Tn;const yn=Nt.statusText||"OK",Wn=new oe(Nt.getAllResponseHeaders()),cr=function mn(gt){return"responseURL"in gt&&gt.responseURL?gt.responseURL:/^X-Request-URL:/m.test(gt.getAllResponseHeaders())?gt.getResponseHeader("X-Request-URL"):null}(Nt)||Ie.url;return Tn=new Fe({headers:Wn,status:Nt.status,statusText:yn,url:cr}),Tn},Zn=()=>{let{headers:yn,status:Wn,statusText:cr,url:Rn}=Xn(),Vt=null;204!==Wn&&(Vt=void 0===Nt.response?Nt.responseText:Nt.response),0===Wn&&(Wn=Vt?200:0);let wn=Wn>=200&&Wn<300;if("json"===Ie.responseType&&"string"==typeof Vt){const Yn=Vt;Vt=Vt.replace(hn,"");try{Vt=""!==Vt?JSON.parse(Vt):null}catch(Kn){Vt=Yn,wn&&(wn=!1,Vt={error:Kn,text:Vt})}}wn?(Kt.next(new me({body:Vt,headers:yn,status:Wn,statusText:cr,url:Rn||void 0})),Kt.complete()):Kt.error(new Se({error:Vt,headers:yn,status:Wn,statusText:cr,url:Rn||void 0}))},Ln=yn=>{const{url:Wn}=Xn(),cr=new Se({error:yn,status:Nt.status||0,statusText:Nt.statusText||"Unknown Error",url:Wn||void 0});Kt.error(cr)};let Hn=!1;const Er=yn=>{Hn||(Kt.next(Xn()),Hn=!0);let Wn={type:Ye.DownloadProgress,loaded:yn.loaded};yn.lengthComputable&&(Wn.total=yn.total),"text"===Ie.responseType&&!!Nt.responseText&&(Wn.partialText=Nt.responseText),Kt.next(Wn)},Cr=yn=>{let Wn={type:Ye.UploadProgress,loaded:yn.loaded};yn.lengthComputable&&(Wn.total=yn.total),Kt.next(Wn)};return Nt.addEventListener("load",Zn),Nt.addEventListener("error",Ln),Nt.addEventListener("timeout",Ln),Nt.addEventListener("abort",Ln),Ie.reportProgress&&(Nt.addEventListener("progress",Er),null!==nn&&Nt.upload&&Nt.upload.addEventListener("progress",Cr)),Nt.send(nn),Kt.next({type:Ye.Sent}),()=>{Nt.removeEventListener("error",Ln),Nt.removeEventListener("abort",Ln),Nt.removeEventListener("load",Zn),Nt.removeEventListener("timeout",Ln),Ie.reportProgress&&(Nt.removeEventListener("progress",Er),null!==nn&&Nt.upload&&Nt.upload.removeEventListener("progress",Cr)),Nt.readyState!==Nt.DONE&&Nt.abort()}})}}return gt.\u0275fac=function(Ie){return new(Ie||gt)(J.LFG(a.JF))},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})();const Fn=new J.OlP("XSRF_COOKIE_NAME"),Dn=new J.OlP("XSRF_HEADER_NAME");class er{}let Br=(()=>{class gt{constructor(Ie,Kt,Nt){this.doc=Ie,this.platform=Kt,this.cookieName=Nt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ie=this.doc.cookie||"";return Ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,a.Mx)(Ie,this.cookieName),this.lastCookieString=Ie),this.lastToken}}return gt.\u0275fac=function(Ie){return new(Ie||gt)(J.LFG(a.K0),J.LFG(J.Lbi),J.LFG(Fn))},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})(),rr=(()=>{class gt{constructor(Ie,Kt){this.tokenService=Ie,this.headerName=Kt}intercept(Ie,Kt){const Nt=Ie.url.toLowerCase();if("GET"===Ie.method||"HEAD"===Ie.method||Nt.startsWith("http://")||Nt.startsWith("https://"))return Kt.handle(Ie);const nn=this.tokenService.getToken();return null!==nn&&!Ie.headers.has(this.headerName)&&(Ie=Ie.clone({headers:Ie.headers.set(this.headerName,nn)})),Kt.handle(Ie)}}return gt.\u0275fac=function(Ie){return new(Ie||gt)(J.LFG(er),J.LFG(Dn))},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})(),lr=(()=>{class gt{constructor(Ie,Kt){this.backend=Ie,this.injector=Kt,this.chain=null}handle(Ie){if(null===this.chain){const Kt=this.injector.get(un,[]);this.chain=Kt.reduceRight((Nt,nn)=>new Lt(Nt,nn),this.backend)}return this.chain.handle(Ie)}}return gt.\u0275fac=function(Ie){return new(Ie||gt)(J.LFG(Ee),J.LFG(J.zs3))},gt.\u0275prov=J.Yz7({token:gt,factory:gt.\u0275fac}),gt})(),vr=(()=>{class gt{static disable(){return{ngModule:gt,providers:[{provide:rr,useClass:vt}]}}static withOptions(Ie={}){return{ngModule:gt,providers:[Ie.cookieName?{provide:Fn,useValue:Ie.cookieName}:[],Ie.headerName?{provide:Dn,useValue:Ie.headerName}:[]]}}}return gt.\u0275fac=function(Ie){return new(Ie||gt)},gt.\u0275mod=J.oAB({type:gt}),gt.\u0275inj=J.cJS({providers:[rr,{provide:un,useExisting:rr,multi:!0},{provide:er,useClass:Br},{provide:Fn,useValue:"XSRF-TOKEN"},{provide:Dn,useValue:"X-XSRF-TOKEN"}]}),gt})(),Ir=(()=>{class gt{}return gt.\u0275fac=function(Ie){return new(Ie||gt)},gt.\u0275mod=J.oAB({type:gt}),gt.\u0275inj=J.cJS({providers:[ut,{provide:Ce,useClass:lr},jn,{provide:Ee,useExisting:jn}],imports:[[vr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),gt})()},5e3:(On,Ct,L)=>{"use strict";L.d(Ct,{deG:()=>Sa,tb:()=>gE,AFp:()=>dE,ip1:()=>cE,CZH:()=>_v,hGG:()=>rI,z2F:()=>Dv,sBO:()=>Uw,Sil:()=>bw,_Vd:()=>Hy,EJc:()=>vw,SBq:()=>rm,qLn:()=>Js,vpe:()=>zc,tBr:()=>ea,XFs:()=>pn,OlP:()=>hs,zs3:()=>ru,ZZ4:()=>Mv,aQg:()=>Ov,soG:()=>Ev,YKP:()=>I0,h0i:()=>Tp,PXZ:()=>Pw,R0b:()=>hc,FiY:()=>ta,Lbi:()=>pE,g9A:()=>fE,Qsj:()=>mb,FYo:()=>_0,JOm:()=>Xt,q3G:()=>cs,tp0:()=>ul,Rgc:()=>am,dDg:()=>vE,q4F:()=>E0,GfV:()=>v0,s_b:()=>Wy,ifc:()=>Nt,eFA:()=>wE,G48:()=>Vw,Gpc:()=>pe,X6Q:()=>Bw,_c5:()=>nI,VLi:()=>Rw,c2e:()=>mE,zSh:()=>Xh,wAp:()=>Zr,vHH:()=>Ne,EiD:()=>ql,mCW:()=>Qs,qzn:()=>Hl,JVY:()=>Yu,pB0:()=>zl,eBb:()=>Ku,L6k:()=>Qc,LAX:()=>Zu,cg1:()=>vp,kL8:()=>wh,yhl:()=>Gl,dqk:()=>Ln,sIi:()=>nf,CqO:()=>fy,QGY:()=>dy,F4k:()=>hy,RDi:()=>Ei,AaK:()=>Ce,z3N:()=>ia,qOj:()=>ef,TTD:()=>zi,_Bn:()=>g0,xp6:()=>Nh,uIk:()=>sf,ekj:()=>fp,Suo:()=>H0,Xpm:()=>Vn,lG2:()=>je,Yz7:()=>Qe,cJS:()=>St,oAB:()=>_t,Yjl:()=>Ae,Y36:()=>hf,_UZ:()=>Mg,GkF:()=>Og,BQk:()=>ap,ynx:()=>op,qZA:()=>ff,TgZ:()=>ro,EpF:()=>cy,n5z:()=>ln,LFG:()=>li,$8M:()=>di,$Z:()=>ay,NdJ:()=>lp,CRH:()=>G0,oxw:()=>py,ALo:()=>k0,lcZ:()=>N0,Hsn:()=>kg,F$t:()=>Pg,Q6J:()=>Ts,s9C:()=>gh,DdM:()=>S0,VKq:()=>A0,iGM:()=>U0,CHM:()=>E,LSH:()=>yu,YNc:()=>bg,_uU:()=>zg,Oqu:()=>Bu,hij:()=>mp,Gf:()=>j0});var a=L(8929),J=L(2654),Z=L(2916),Ve=L(6787),Me=L(2474);function ae(n){for(let r in n)if(n[r]===ae)return r;throw Error("Could not find renamed property on target object.")}function we(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ce(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ce).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ee(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const oe=ae({__forward_ref__:ae});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return Ce(this())},n}function ee(n){return ce(n)?n():n}function ce(n){return"function"==typeof n&&n.hasOwnProperty(oe)&&n.__forward_ref__===pe}class Ne extends Error{constructor(r,s){super(function _e(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function ke(n){return"string"==typeof n?n:null==n?"":String(n)}function $e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ke(n)}function He(n,r){const s=r?` in ${r}`:"";throw new Ne(-201,`No provider for ${$e(n)} found${s}`)}function At(n,r){null==n&&function ze(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function hn(n){return mn(n,er)||mn(n,rr)}function mn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Dn(n){return n&&(n.hasOwnProperty(Br)||n.hasOwnProperty(lr))?n[Br]:null}const er=ae({\u0275prov:ae}),Br=ae({\u0275inj:ae}),rr=ae({ngInjectableDef:ae}),lr=ae({ngInjectorDef:ae});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let Ar;function Ir(n){const r=Ar;return Ar=n,r}function ur(n,r,s){const l=hn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&pn.Optional?null:void 0!==r?r:void He(Ce(n),"Injector")}function gt(n){return{toString:n}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),Nt=(()=>{return(n=Nt||(Nt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Nt;var n})();const nn="undefined"!=typeof globalThis&&globalThis,Tn="undefined"!=typeof window&&window,Xn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ln=nn||"undefined"!=typeof global&&global||Tn||Xn,Cr={},yn=[],Wn=ae({\u0275cmp:ae}),cr=ae({\u0275dir:ae}),Rn=ae({\u0275pipe:ae}),Vt=ae({\u0275mod:ae}),wn=ae({\u0275fac:ae}),Yn=ae({__NG_ELEMENT_ID__:ae});let Kn=0;function Vn(n){return gt(()=>{const s={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||yn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Nt.Emulated,id:"c",styles:n.styles||yn,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,y=n.features,D=n.pipes;return l.id+=Kn++,l.inputs=tt(n.inputs,s),l.outputs=tt(n.outputs),y&&y.forEach(M=>M(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(De):null,l.pipeDefs=D?()=>("function"==typeof D?D():D).map(Ze):null,l})}function De(n){return lt(n)||function qt(n){return n[cr]||null}(n)}function Ze(n){return function _n(n){return n[Rn]||null}(n)}const Rt={};function _t(n){return gt(()=>{const r={type:n.type,bootstrap:n.bootstrap||yn,declarations:n.declarations||yn,imports:n.imports||yn,exports:n.exports||yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Rt[n.id]=n.type),r})}function tt(n,r){if(null==n)return Cr;const s={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),s[f]=l,r&&(r[f]=y)}return s}const je=Vn;function Ae(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function lt(n){return n[Wn]||null}function Un(n,r){const s=n[Vt]||null;if(!s&&!0===r)throw new Error(`Type ${Ce(n)} does not have '\u0275mod' property.`);return s}function be(n){return Array.isArray(n)&&"object"==typeof n[1]}function Oe(n){return Array.isArray(n)&&!0===n[1]}function yt(n){return 0!=(8&n.flags)}function Gt(n){return 2==(2&n.flags)}function Jt(n){return 1==(1&n.flags)}function kt(n){return null!==n.template}function Nn(n){return 0!=(512&n[2])}function Tr(n,r){return n.hasOwnProperty(wn)?n[wn]:null}class wr{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function zi(){return Qr}function Qr(n){return n.type.prototype.ngOnChanges&&(n.setInput=vo),Rs}function Rs(){const n=ws(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Cr)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function vo(n,r,s,l){const f=ws(n)||function Kr(n,r){return n[is]=r}(n,{previous:Cr,current:null}),y=f.current||(f.current={}),D=f.previous,M=this.declaredInputs[s],F=D[M];y[M]=new wr(F&&F.currentValue,r,D===Cr),n[l]=r}zi.ngInherit=!0;const is="__ngSimpleChanges__";function ws(n){return n[is]||null}let Os;function Ei(n){Os=n}function ti(n){return!!n.listen}const H={createRenderer:(n,r)=>function ys(){return void 0!==Os?Os:"undefined"!=typeof document?document:void 0}()};function j(n){for(;Array.isArray(n);)n=n[0];return n}function Mt(n,r){return j(r[n])}function en(n,r){return j(r[n.index])}function oi(n,r){return n.data[r]}function Nr(n,r){const s=r[n];return be(s)?s:s[0]}function Pr(n){return 4==(4&n[2])}function Di(n){return 128==(128&n[2])}function bi(n,r){return null==r?null:n[r]}function ki(n){n[18]=0}function Ji(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const ir={lFrame:fo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function se(){return ir.bindingsEnabled}function P(){return ir.lFrame.lView}function b(){return ir.lFrame.tView}function E(n){return ir.lFrame.contextLView=n,n[8]}function I(){let n=q();for(;null!==n&&64===n.type;)n=n.parent;return n}function q(){return ir.lFrame.currentTNode}function Le(n,r){const s=ir.lFrame;s.currentTNode=n,s.isParent=r}function It(){return ir.lFrame.isParent}function sn(){ir.lFrame.isParent=!1}function pr(){return ir.isInCheckNoChangesMode}function Mn(n){ir.isInCheckNoChangesMode=n}function zr(){const n=ir.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Fr(){return ir.lFrame.bindingIndex++}function ci(n,r){const s=ir.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ki(r)}function Ki(n){ir.lFrame.currentDirectiveIndex=n}function Eo(){return ir.lFrame.currentQueryIndex}function da(n){ir.lFrame.currentQueryIndex=n}function Ro(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Bo(n,r,s){if(s&pn.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||s&pn.Host||(f=Ro(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const l=ir.lFrame=Wo();return l.currentTNode=r,l.lView=n,!0}function ho(n){const r=Wo(),s=n[1];ir.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Wo(){const n=ir.lFrame,r=null===n?null:n.child;return null===r?fo(n):r}function fo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Vo(){const n=ir.lFrame;return ir.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ta=Vo;function Mo(){const n=Vo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ws(){return ir.lFrame.selectedIndex}function ha(n){ir.lFrame.selectedIndex=n}function ts(){const n=ir.lFrame;return oi(n.tView,n.selectedIndex)}function bo(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const y=n.data[s].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:M,ngAfterViewInit:F,ngAfterViewChecked:X,ngOnDestroy:re}=y;D&&(n.contentHooks||(n.contentHooks=[])).push(-s,D),M&&((n.contentHooks||(n.contentHooks=[])).push(s,M),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,M)),F&&(n.viewHooks||(n.viewHooks=[])).push(-s,F),X&&((n.viewHooks||(n.viewHooks=[])).push(s,X),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,X)),null!=re&&(n.destroyHooks||(n.destroyHooks=[])).push(s,re)}}function wo(n,r,s){qo(n,r,3,s)}function pa(n,r,s,l){(3&n[2])===s&&qo(n,r,s,l)}function Zi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function qo(n,r,s,l){const y=null!=l?l:-1,D=r.length-1;let M=0;for(let F=void 0!==l?65535&n[18]:0;F<D;F++)if("number"==typeof r[F+1]){if(M=r[F],null!=l&&M>=l)break}else r[F]<0&&(n[18]+=65536),(M<y||-1==y)&&($a(n,s,r,F),n[18]=(4294901760&n[18])+F+2),F++}function $a(n,r,s,l){const f=s[l]<0,y=s[l+1],M=n[f?-s[l]:s[l]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(M)}finally{}}}else try{y.call(M)}finally{}}class Yo{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Va(n,r,s){const l=ti(n);let f=0;for(;f<s.length;){const y=s[f];if("number"==typeof y){if(0!==y)break;f++;const D=s[f++],M=s[f++],F=s[f++];l?n.setAttribute(r,M,F,D):r.setAttributeNS(D,M,F)}else{const D=y,M=s[++f];ga(D)?l&&n.setProperty(r,D,M):l?n.setAttribute(r,D,M):r.setAttribute(D,M),f++}}return f}function Ps(n){return 3===n||4===n||6===n}function ga(n){return 64===n.charCodeAt(0)}function Io(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||oo(n,s,f,null,-1===s||2===s?r[++l]:null)}}return n}function oo(n,r,s,l,f){let y=0,D=n.length;if(-1===r)D=-1;else for(;y<n.length;){const M=n[y++];if("number"==typeof M){if(M===r){D=-1;break}if(M>r){D=y-1;break}}}for(;y<n.length;){const M=n[y];if("number"==typeof M)break;if(M===s){if(null===l)return void(null!==f&&(n[y+1]=f));if(l===n[y+1])return void(n[y+2]=f)}y++,null!==l&&y++,null!==f&&y++}-1!==D&&(n.splice(D,0,r),y=D+1),n.splice(y++,0,s),null!==l&&n.splice(y++,0,l),null!==f&&n.splice(y++,0,f)}function Uo(n){return-1!==n}function $i(n){return 32767&n}function _s(n,r){let s=function Uu(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let ma=!0;function ya(n){const r=ma;return ma=n,r}let Po=0;function Xo(n,r){const s=Ur(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,xn(l.data,n),xn(r,null),xn(l.blueprint,null));const f=qi(n,r),y=n.injectorIndex;if(Uo(f)){const D=$i(f),M=_s(f,r),F=M[1].data;for(let X=0;X<8;X++)r[y+X]=M[D+X]|F[D+X]}return r[y+8]=f,y}function xn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ur(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function qi(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){const y=f[1],D=y.type;if(l=2===D?y.declTNode:1===D?f[6]:null,null===l)return-1;if(s++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function eo(n,r,s){!function ao(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(Yn)&&(l=s[Yn]),null==l&&(l=s[Yn]=Po++);const f=255&l;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function kr(n,r,s){if(s&pn.Optional)return n;He(r,"NodeInjector")}function Ua(n,r,s,l){if(s&pn.Optional&&void 0===l&&(l=null),0==(s&(pn.Self|pn.Host))){const f=n[9],y=Ir(void 0);try{return f?f.get(r,l,s&pn.Optional):ur(r,l,s&pn.Optional)}finally{Ir(y)}}return kr(l,r,s)}function $n(n,r,s,l=pn.Default,f){if(null!==n){const y=function Y(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Yn)?n[Yn]:void 0;return"number"==typeof r?r>=0?255&r:R:r}(s);if("function"==typeof y){if(!Bo(r,n,l))return l&pn.Host?kr(f,s,l):Ua(r,s,l,f);try{const D=y(l);if(null!=D||l&pn.Optional)return D;He(s)}finally{Ta()}}else if("number"==typeof y){let D=null,M=Ur(n,r),F=-1,X=l&pn.Host?r[16][6]:null;for((-1===M||l&pn.SkipSelf)&&(F=-1===M?qi(n,r):r[M+8],-1!==F&&Be(l,!1)?(D=r[1],M=$i(F),r=_s(F,r)):M=-1);-1!==M;){const re=r[1];if(le(y,M,re.data)){const Pe=A(M,r,s,D,l,X);if(Pe!==Ht)return Pe}F=r[M+8],-1!==F&&Be(l,r[1].data[M+8]===X)&&le(y,M,r)?(D=re,M=$i(F),r=_s(F,r)):M=-1}}}return Ua(r,s,l,f)}const Ht={};function R(){return new it(I(),P())}function A(n,r,s,l,f,y){const D=r[1],M=D.data[n+8],re=S(M,D,s,null==l?Gt(M)&&ma:l!=D&&0!=(3&M.type),f&pn.Host&&y===M);return null!==re?V(r,D,re,M):Ht}function S(n,r,s,l,f){const y=n.providerIndexes,D=r.data,M=1048575&y,F=n.directiveStart,re=y>>20,ct=f?M+re:n.directiveEnd;for(let Pt=l?M:M+re;Pt<ct;Pt++){const fn=D[Pt];if(Pt<F&&s===fn||Pt>=F&&fn.type===s)return Pt}if(f){const Pt=D[F];if(Pt&&kt(Pt)&&Pt.type===s)return F}return null}function V(n,r,s,l){let f=n[s];const y=r.data;if(function Ko(n){return n instanceof Yo}(f)){const D=f;D.resolving&&function Dt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${n}${s}`)}($e(y[s]));const M=ya(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?Ir(D.injectImpl):null;Bo(n,l,pn.Default);try{f=n[s]=D.factory(void 0,y,n,l),r.firstCreatePass&&s>=l.directiveStart&&function fa(n,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(l){const D=Qr(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,D),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,D)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),y&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y))}(s,y[s],r)}finally{null!==F&&Ir(F),ya(M),D.resolving=!1,Ta()}}return f}function le(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Be(n,r){return!(n&pn.Self||n&pn.Host&&r)}class it{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return $n(this._tNode,this._lView,r,l,s)}}function ln(n){return gt(()=>{const r=n.prototype.constructor,s=r[wn]||Jn(r),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const y=f[wn]||Jn(f);if(y&&y!==s)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function Jn(n){return ce(n)?()=>{const r=Jn(ee(n));return r&&r()}:Tr(n)}function di(n){return function sr(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const y=s[f];if(Ps(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(y===r)return s[f+1];f+=2}}}return null}(I(),n)}const vi="__parameters__";function Qo(n,r,s){return gt(()=>{const l=function lo(n){return function(...s){if(n){const l=n(...s);for(const f in l)this[f]=l[f]}}}(r);function f(...y){if(this instanceof f)return l.apply(this,y),this;const D=new f(...y);return M.annotation=D,M;function M(F,X,re){const Pe=F.hasOwnProperty(vi)?F[vi]:Object.defineProperty(F,vi,{value:[]})[vi];for(;Pe.length<=re;)Pe.push(null);return(Pe[re]=Pe[re]||[]).push(D),F}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class hs{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Qe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Sa=new hs("AnalyzeForEntryComponents");function Ks(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),Ks(l,r)):r!==n&&r.push(l)}return r}function Zs(n,r){n.forEach(s=>Array.isArray(s)?Zs(s,r):r(s))}function Bl(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ns(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Fs(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function ls(n,r,s){let l=ko(n,r);return l>=0?n[1|l]=s:(l=~l,function Gn(n,r,s,l){let f=n.length;if(f==r)n.push(s,l);else if(1===f)n.push(l,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function il(n,r){const s=ko(n,r);if(s>=0)return n[1|s]}function ko(n,r){return function sl(n,r,s){let l=0,f=n.length>>s;for(;f!==l;){const y=l+(f-l>>1),D=n[y<<s];if(r===D)return y<<s;D>r?f=y:l=y+1}return~(f<<s)}(n,r,1)}const ue={},Ge="__NG_DI_FLAG__",xt="ngTempTokenPath",vn=/\n/gm,or="__source",Rr=ae({provide:String,useValue:ae});let fi;function Wr(n){const r=fi;return fi=n,r}function us(n,r=pn.Default){if(void 0===fi)throw new Ne(203,"");return null===fi?ur(n,void 0,r):fi.get(n,r&pn.Optional?null:void 0,r)}function li(n,r=pn.Default){return(function vr(){return Ar}()||us)(ee(n),r)}const Ul=li;function mo(n){const r=[];for(let s=0;s<n.length;s++){const l=ee(n[s]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let f,y=pn.Default;for(let D=0;D<l.length;D++){const M=l[D],F=_a(M);"number"==typeof F?-1===F?f=M.token:y|=F:f=M}r.push(li(f,y))}else r.push(li(l))}return r}function No(n,r){return n[Ge]=r,n.prototype[Ge]=r,n}function _a(n){return n[Ge]}const ea=No(Qo("Inject",n=>({token:n})),-1),ta=No(Qo("Optional"),8),ul=No(Qo("SkipSelf"),4);let dl;function hl(n){var r;return(null===(r=function Al(){if(void 0===dl&&(dl=null,Ln.trustedTypes))try{dl=Ln.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return dl}())||void 0===r?void 0:r.createHTML(n))||n}class za{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class zu extends za{getTypeName(){return"HTML"}}class Wu extends za{getTypeName(){return"Style"}}class qu extends za{getTypeName(){return"Script"}}class Wa extends za{getTypeName(){return"URL"}}class Xc extends za{getTypeName(){return"ResourceURL"}}function ia(n){return n instanceof za?n.changingThisBreaksApplicationSecurity:n}function Hl(n,r){const s=Gl(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function Gl(n){return n instanceof za&&n.getTypeName()||null}function Yu(n){return new zu(n)}function Qc(n){return new Wu(n)}function Ku(n){return new qu(n)}function Zu(n){return new Wa(n)}function zl(n){return new Xc(n)}class kd{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(hl(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class pl{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const l=this.inertDocument.createElement("body");s.appendChild(l)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=hl(r),s;const l=this.inertDocument.createElement("body");return l.innerHTML=hl(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(r){const s=r.attributes;for(let f=s.length-1;0<f;f--){const D=s.item(f).name;("xmlns:ns1"===D||0===D.indexOf("ns1:"))&&r.removeAttribute(D)}let l=r.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const sa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qs(n){return(n=String(n)).match(sa)||n.match(fu)?n:"unsafe:"+n}function ba(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function fs(...n){const r={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(r[l]=!0);return r}const Wl=ba("area,br,col,hr,img,wbr"),Ma=ba("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gu=ba("rp,rt"),wc=fs(Wl,fs(Ma,ba("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fs(gu,ba("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fs(gu,Ma)),qa=ba("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Oa=ba("srcset"),Xu=fs(qa,Oa,ba("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ba("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mu=ba("script,style,template");class ed{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let f=this.checkClobberedElement(s,s.nextSibling);if(f){s=f;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!wc.hasOwnProperty(s))return this.sanitizedSomething=!0,!mu.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=r.attributes;for(let f=0;f<l.length;f++){const y=l.item(f),D=y.name,M=D.toLowerCase();if(!Xu.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let F=y.value;qa[M]&&(F=Qs(F)),Oa[M]&&(n=F,F=(n=String(n)).split(",").map(r=>Qs(r.trim())).join(", ")),this.buf.push(" ",D,'="',Ii(F),'"')}var n;return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();wc.hasOwnProperty(s)&&!Wl.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Ii(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const td=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ds=/([^\#-~ |!])/g;function Ii(n){return n.replace(/&/g,"&amp;").replace(td,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ds,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gl;function ql(n,r){let s=null;try{gl=gl||function Rl(n){const r=new pl(n);return function bc(){try{return!!(new window.DOMParser).parseFromString(hl(""),"text/html")}catch(n){return!1}}()?new kd(r):r}(n);let l=r?String(r):"";s=gl.getInertBodyElement(l);let f=5,y=l;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,l=y,y=s.innerHTML,s=gl.getInertBodyElement(l)}while(l!==y);return hl((new ed).sanitizeChildren(Pa(s)||s))}finally{if(s){const l=Pa(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Pa(n){return"content"in n&&function Ls(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var cs=(()=>((cs=cs||{})[cs.NONE=0]="NONE",cs[cs.HTML=1]="HTML",cs[cs.STYLE=2]="STYLE",cs[cs.SCRIPT=3]="SCRIPT",cs[cs.URL=4]="URL",cs[cs.RESOURCE_URL=5]="RESOURCE_URL",cs))();function yu(n){const r=function Ti(){const n=P();return n&&n[12]}();return r?r.sanitize(cs.URL,n)||"":Hl(n,"URL")?ia(n):Qs(ke(n))}const Kl="__ngContext__";function Bs(n,r){n[Kl]=r}function Cc(n){const r=function ka(n){return n[Kl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function nc(n){return n.ngOriginalError}function Ia(n,...r){n.error(...r)}class Js{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),l=function vu(n){return n&&n.ngErrorLogger||Ia}(r);l(this._console,"ERROR",r),s&&l(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&nc(r);for(;s&&nc(s);)s=nc(s);return s||null}}const Vd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ln))();function _(n){return n instanceof Function?n():n}var Xt=(()=>((Xt=Xt||{})[Xt.Important=1]="Important",Xt[Xt.DashCase=2]="DashCase",Xt))();function mr(n,r){return undefined(n,r)}function gs(n){const r=n[3];return Oe(r)?r[3]:r}function Xl(n){return sd(n[13])}function bu(n){return sd(n[4])}function sd(n){for(;null!==n&&!Oe(n);)n=n[4];return n}function Ol(n,r,s,l,f){if(null!=l){let y,D=!1;Oe(l)?y=l:be(l)&&(D=!0,l=l[0]);const M=j(l);0===n&&null!==s?null==f?xc(r,s,M):tn(r,s,M,f||null,!0):1===n&&null!==s?tn(r,s,M,f||null,!0):2===n?function Ql(n,r,s){const l=wu(n,r);l&&function Af(n,r,s,l){ti(n)?n.removeChild(r,s,l):r.removeChild(s)}(n,l,r,s)}(r,M,D):3===n&&r.destroyNode(M),null!=y&&function Mc(n,r,s,l,f){const y=s[7];y!==j(s)&&Ol(r,n,l,y,f);for(let M=10;M<s.length;M++){const F=s[M];dd(F[1],F,n,r,l,y)}}(r,n,y,s,f)}}function Ac(n,r,s){if(ti(n))return n.createElement(r,s);{const l=null!==s?function Ms(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===l?n.createElement(r):n.createElementNS(l,r)}}function Tf(n,r){const s=n[9],l=s.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Ji(f,-1)),s.splice(l,1)}function Rh(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const f=l[17];null!==f&&f!==n&&Tf(f,l),r>0&&(n[s-1][4]=l[4]);const y=Ns(n,10+r);!function Ah(n,r){dd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const D=y[19];null!==D&&D.detachView(y[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Mh(n,r){if(!(256&r[2])){const s=r[11];ti(s)&&s.destroyNode&&dd(n,r,s,3,null,null),function xp(n){let r=n[13];if(!r)return Oh(n[1],n);for(;r;){let s=null;if(be(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)be(r)&&Oh(r[1],r),r=r[3];null===r&&(r=n),be(r)&&Oh(r[1],r),s=r&&r[4]}r=s}}(r)}}function Oh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Op(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof Yo)){const y=s[l+1];if(Array.isArray(y))for(let D=0;D<y.length;D+=2){const M=f[y[D]],F=y[D+1];try{F.call(M)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function Sf(n,r){const s=n.cleanup,l=r[7];let f=-1;if(null!==s)for(let y=0;y<s.length-1;y+=2)if("string"==typeof s[y]){const D=s[y+1],M="function"==typeof D?D(r):j(r[D]),F=l[f=s[y+2]],X=s[y+3];"boolean"==typeof X?M.removeEventListener(s[y],F,X):X>=0?l[f=X]():l[f=-X].unsubscribe(),y+=2}else{const D=l[f=s[y+1]];s[y].call(D)}if(null!==l){for(let y=f+1;y<l.length;y++)l[y]();r[7]=null}}(n,r),1===r[1].type&&ti(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Oe(r[3])){s!==r[3]&&Tf(s,r);const l=r[19];null!==l&&l.detachView(n)}}}function Fa(n,r,s){return function Ph(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const f=n.data[l.directiveStart].encapsulation;if(f===Nt.None||f===Nt.Emulated)return null}return en(l,s)}(n,r.parent,s)}function tn(n,r,s,l,f){ti(n)?n.insertBefore(r,s,l,f):r.insertBefore(s,l,f)}function xc(n,r,s){ti(n)?n.appendChild(r,s):r.appendChild(s)}function Za(n,r,s,l,f){null!==l?tn(n,r,s,l,f):xc(n,r,s)}function wu(n,r){return ti(n)?n.parentNode(r):r.parentNode}function xf(n,r,s){return Rf(n,r,s)}let Rf=function Iu(n,r,s){return 40&n.type?en(n,s):null};function no(n,r,s,l){const f=Fa(n,l,r),y=r[11],M=xf(l.parent||r[6],l,r);if(null!=f)if(Array.isArray(s))for(let F=0;F<s.length;F++)Za(y,f,s[F],M,!1);else Za(y,f,s,M,!1)}function Rc(n,r){if(null!==r){const s=r.type;if(3&s)return en(r,n);if(4&s)return cd(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return Rc(n,l);{const f=n[r.index];return Oe(f)?cd(-1,f):j(f)}}if(32&s)return mr(r,n)()||j(n[r.index]);{const l=Hd(n,r);return null!==l?Array.isArray(l)?l[0]:Rc(gs(n[16]),l):Rc(n,r.next)}}return null}function Hd(n,r){return null!==r?n[16][6].projection[r.projection]:null}function cd(n,r){const s=10+n+1;if(s<r.length){const l=r[s],f=l[1].firstChild;if(null!==f)return Rc(l,f)}return r[7]}function Gd(n,r,s,l,f,y,D){for(;null!=s;){const M=l[s.index],F=s.type;if(D&&0===r&&(M&&Bs(j(M),l),s.flags|=4),64!=(64&s.flags))if(8&F)Gd(n,r,s.child,l,f,y,!1),Ol(r,n,f,M,y);else if(32&F){const X=mr(s,l);let re;for(;re=X();)Ol(r,n,f,re,y);Ol(r,n,f,M,y)}else 16&F?zd(n,r,l,s,f,y):Ol(r,n,f,M,y);s=D?s.projectionNext:s.next}}function dd(n,r,s,l,f,y){Gd(s,l,n.firstChild,r,f,y,!1)}function zd(n,r,s,l,f,y){const D=s[16],F=D[6].projection[l.projection];if(Array.isArray(F))for(let X=0;X<F.length;X++)Ol(r,n,f,F[X],y);else Gd(n,r,F,D[3],f,y,!0)}function sc(n,r,s){ti(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function oc(n,r,s){ti(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Wd(n,r,s){let l=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===l||n.charCodeAt(f+y)<=32)return f}s=f+1}}const qd="ng-template";function Pf(n,r,s){let l=0;for(;l<n.length;){let f=n[l++];if(s&&"class"===f){if(f=n[l],-1!==Wd(f.toLowerCase(),r,0))return!0}else if(1===f){for(;l<n.length&&"string"==typeof(f=n[l++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function kf(n){return 4===n.type&&n.value!==qd}function Jl(n,r,s){return r===(4!==n.type||s?n.value:qd)}function Do(n,r,s){let l=4;const f=n.attrs||[],y=function Nf(n){for(let r=0;r<n.length;r++)if(Ps(n[r]))return r;return n.length}(f);let D=!1;for(let M=0;M<r.length;M++){const F=r[M];if("number"!=typeof F){if(!D)if(4&l){if(l=2|1&l,""!==F&&!Jl(n,F,s)||""===F&&1===r.length){if(Is(l))return!1;D=!0}}else{const X=8&l?F:r[++M];if(8&l&&null!==n.attrs){if(!Pf(n.attrs,X,s)){if(Is(l))return!1;D=!0}continue}const Pe=eu(8&l?"class":F,f,kf(n),s);if(-1===Pe){if(Is(l))return!1;D=!0;continue}if(""!==X){let ct;ct=Pe>y?"":f[Pe+1].toLowerCase();const Pt=8&l?ct:null;if(Pt&&-1!==Wd(Pt,X,0)||2&l&&X!==ct){if(Is(l))return!1;D=!0}}}}else{if(!D&&!Is(l)&&!Is(F))return!1;if(D&&Is(F))continue;D=!1,l=F|1&l}}return Is(l)||D}function Is(n){return 0==(1&n)}function eu(n,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let y=!1;for(;f<r.length;){const D=r[f];if(D===n)return f;if(3===D||6===D)y=!0;else{if(1===D||2===D){let M=r[++f];for(;"string"==typeof M;)M=r[++f];continue}if(4===D)break;if(0===D){f+=4;continue}}f+=y?1:2}return-1}return function kp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function Cu(n,r,s=!1){for(let l=0;l<r.length;l++)if(Do(n,r[l],s))return!0;return!1}function Np(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let f=0;f<n.length;f++)if(n[f]!==l[f])continue e;return!0}}return!1}function Ff(n,r){return n?":not("+r.trim()+")":r}function hd(n){let r=n[0],s=1,l=2,f="",y=!1;for(;s<n.length;){let D=n[s];if("string"==typeof D)if(2&l){const M=n[++s];f+="["+D+(M.length>0?'="'+M+'"':"")+"]"}else 8&l?f+="."+D:4&l&&(f+=" "+D);else""!==f&&!Is(D)&&(r+=Ff(y,f),f=""),l=D,y=y||!Is(l);s++}return""!==f&&(r+=Ff(y,f)),r}const ai={};function Nh(n){Fh(b(),P(),Ws()+n,pr())}function Fh(n,r,s,l){if(!l)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&wo(r,y,s)}else{const y=n.preOrderHooks;null!==y&&pa(r,y,0,s)}ha(s)}function tu(n,r){return n<<17|r<<2}function Xa(n){return n>>17&32767}function ac(n){return 2|n}function La(n){return(131068&n)>>2}function pd(n,r){return-131069&n|r<<2}function Yd(n){return 1|n}function Vp(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const f=s[l],y=s[l+1];if(-1!==y){const D=n.data[y];da(f),D.contentQueries(2,r[y],y)}}}function Ru(n,r,s,l,f,y,D,M,F,X){const re=r.blueprint.slice();return re[0]=f,re[2]=140|l,ki(re),re[3]=re[15]=n,re[8]=s,re[10]=D||n&&n[10],re[11]=M||n&&n[11],re[12]=F||n&&n[12]||null,re[9]=X||n&&n[9]||null,re[6]=y,re[16]=2==r.type?n[16]:re,re}function Pc(n,r,s,l,f){let y=n.data[r];if(null===y)y=function Xd(n,r,s,l,f){const y=q(),D=It(),F=n.data[r]=function n_(n,r,s,l,f,y){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?y:y&&y.parent,s,r,l,f);return null===n.firstChild&&(n.firstChild=F),null!==y&&(D?null==y.child&&null!==F.parent&&(y.child=F):null===y.next&&(y.next=F)),F}(n,r,s,l,f),function Li(){return ir.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=s,y.value=l,y.attrs=f;const D=function fe(){const n=ir.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===D?-1:D.injectorIndex}return Le(y,!0),y}function yd(n,r,s,l){if(0===s)return-1;const f=r.length;for(let y=0;y<s;y++)r.push(l),n.blueprint.push(l),n.data.push(null);return f}function Qd(n,r,s){ho(r);try{const l=n.viewQuery;null!==l&&Yh(1,l,s);const f=n.template;null!==f&&Vf(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Vp(n,r),n.staticViewQueries&&Yh(2,n.viewQuery,s);const y=n.components;null!==y&&function Zd(n,r){for(let s=0;s<r.length;s++)Dm(n,r[s])}(r,y)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,Mo()}}function _d(n,r,s,l){const f=r[2];if(256==(256&f))return;ho(r);const y=pr();try{ki(r),function Fi(n){return ir.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Vf(n,r,s,2,l);const D=3==(3&f);if(!y)if(D){const X=n.preOrderCheckHooks;null!==X&&wo(r,X,null)}else{const X=n.preOrderHooks;null!==X&&pa(r,X,0,null),Zi(r,0)}if(function zf(n){for(let r=Xl(n);null!==r;r=bu(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const f=s[l],y=f[3];0==(1024&f[2])&&Ji(y,1),f[2]|=1024}}}(r),function Kp(n){for(let r=Xl(n);null!==r;r=bu(r))for(let s=10;s<r.length;s++){const l=r[s],f=l[1];Di(l)&&_d(f,l,f.template,l[8])}}(r),null!==n.contentQueries&&Vp(n,r),!y)if(D){const X=n.contentCheckHooks;null!==X&&wo(r,X)}else{const X=n.contentHooks;null!==X&&pa(r,X,1),Zi(r,1)}!function Jy(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)ha(~f);else{const y=f,D=s[++l],M=s[++l];ci(D,y),M(2,r[y])}}}finally{ha(-1)}}(n,r);const M=n.components;null!==M&&function e_(n,r){for(let s=0;s<r.length;s++)zh(n,r[s])}(r,M);const F=n.viewQuery;if(null!==F&&Yh(2,F,l),!y)if(D){const X=n.viewCheckHooks;null!==X&&wo(r,X)}else{const X=n.viewHooks;null!==X&&pa(r,X,2),Zi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Ji(r[3],-1))}finally{Mo()}}function t_(n,r,s,l){const f=r[10],y=!pr(),D=Pr(r);try{y&&!D&&f.begin&&f.begin(),D&&Qd(n,r,l),_d(n,r,s,l)}finally{y&&!D&&f.end&&f.end()}}function Vf(n,r,s,l,f){const y=Ws(),D=2&l;try{ha(-1),D&&r.length>20&&Fh(n,r,20,pr()),s(l,f)}finally{ha(y)}}function dm(n,r,s){if(yt(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const D=n.data[y];D.contentQueries&&D.contentQueries(1,s[y],y)}}}function Uh(n,r,s){!se()||(function r_(n,r,s,l){const f=s.directiveStart,y=s.directiveEnd;n.firstCreatePass||Xo(s,r),Bs(l,r);const D=s.initialInputs;for(let M=f;M<y;M++){const F=n.data[M],X=kt(F);X&&s_(r,s,F);const re=V(r,n,M,s);Bs(re,r),null!==D&&o_(0,M-f,re,F,0,D),X&&(Nr(s.index,r)[8]=re)}}(n,r,s,en(s,r)),128==(128&s.flags)&&function i_(n,r,s){const l=s.directiveStart,f=s.directiveEnd,D=s.index,M=function es(){return ir.lFrame.currentDirectiveIndex}();try{ha(D);for(let F=l;F<f;F++){const X=n.data[F],re=r[F];Ki(F),(null!==X.hostBindings||0!==X.hostVars||null!==X.hostAttrs)&&bm(X,re)}}finally{ha(-1),Ki(M)}}(n,r,s))}function Up(n,r,s=en){const l=r.localNames;if(null!==l){let f=r.index+1;for(let y=0;y<l.length;y+=2){const D=l[y+1],M=-1===D?s(r,n):n[D];n[f++]=M}}}function hm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Jd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Jd(n,r,s,l,f,y,D,M,F,X){const re=20+l,Pe=re+f,ct=function Go(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:ai);return s}(re,Pe),Pt="function"==typeof X?X():X;return ct[1]={type:n,blueprint:ct,template:s,queries:null,viewQuery:M,declTNode:r,data:ct.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:Pt,incompleteFirstPass:!1}}function gm(n,r,s,l){const f=tg(r);null===s?f.push(l):(f.push(s),n.firstCreatePass&&Ed(n).push(l,f.length-1))}function mm(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const f=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,f):s[l]=[r,f]}return s}function Qa(n,r,s,l,f,y,D,M){const F=en(r,s);let re,X=r.inputs;!M&&null!=X&&(re=X[l])?(xm(n,s,re,l,f),Gt(r)&&function Hp(n,r){const s=Nr(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(l=function ym(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=D?D(f,r.value||"",l):f,ti(y)?y.setProperty(F,l,f):ga(l)||(F.setProperty?F.setProperty(l,f):F[l]=f))}function Gf(n,r,s,l){let f=!1;if(se()){const y=function wm(n,r,s){const l=n.directiveRegistry;let f=null;if(l)for(let y=0;y<l.length;y++){const D=l[y];Cu(s,D.selectors,!1)&&(f||(f=[]),eo(Xo(s,r),n,D.type),kt(D)?(jh(n,s),f.unshift(D)):f.push(D))}return f}(n,r,s),D=null===l?null:{"":-1};if(null!==y){f=!0,qp(s,n.data.length,y.length);for(let re=0;re<y.length;re++){const Pe=y[re];Pe.providersResolver&&Pe.providersResolver(Pe)}let M=!1,F=!1,X=yd(n,r,y.length,null);for(let re=0;re<y.length;re++){const Pe=y[re];s.mergedAttrs=Io(s.mergedAttrs,Pe.hostAttrs),Im(n,s,r,X,Pe),Wp(X,Pe,D),null!==Pe.contentQueries&&(s.flags|=8),(null!==Pe.hostBindings||null!==Pe.hostAttrs||0!==Pe.hostVars)&&(s.flags|=128);const ct=Pe.type.prototype;!M&&(ct.ngOnChanges||ct.ngOnInit||ct.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),M=!0),!F&&(ct.ngOnChanges||ct.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),F=!0),X++}!function jp(n,r){const l=r.directiveEnd,f=n.data,y=r.attrs,D=[];let M=null,F=null;for(let X=r.directiveStart;X<l;X++){const re=f[X],Pe=re.inputs,ct=null===y||kf(r)?null:Gh(Pe,y);D.push(ct),M=mm(Pe,X,M),F=mm(re.outputs,X,F)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=16),M.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=D,r.inputs=M,r.outputs=F}(n,s)}D&&function Hh(n,r,s){if(r){const l=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=s[r[f+1]];if(null==y)throw new Ne(-301,!1);l.push(r[f],y)}}}(s,l,D)}return s.mergedAttrs=Io(s.mergedAttrs,s.attrs),f}function vm(n,r,s,l,f,y){const D=y.hostBindings;if(D){let M=n.hostBindingOpCodes;null===M&&(M=n.hostBindingOpCodes=[]);const F=~r.index;(function Em(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(M)!=F&&M.push(F),M.push(l,f,D)}}function bm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function jh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Wp(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;kt(r)&&(s[""]=n)}}function qp(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Im(n,r,s,l,f){n.data[l]=f;const y=f.factory||(f.factory=Tr(f.type)),D=new Yo(y,kt(f),null);n.blueprint[l]=D,s[l]=D,vm(n,r,0,l,yd(n,s,f.hostVars,ai),f)}function s_(n,r,s){const l=en(r,n),f=hm(s),y=n[10],D=eh(n,Ru(n,f,null,s.onPush?64:16,l,r,y,y.createRenderer(l,s),null,null));n[r.index]=D}function Mu(n,r,s,l,f,y){const D=en(n,r);!function Yp(n,r,s,l,f,y,D){if(null==y)ti(n)?n.removeAttribute(r,f,s):r.removeAttribute(f);else{const M=null==D?ke(y):D(y,l||"",f);ti(n)?n.setAttribute(r,f,M,s):s?r.setAttributeNS(s,f,M):r.setAttribute(f,M)}}(r[11],D,y,n.value,s,l,f)}function o_(n,r,s,l,f,y){const D=y[r];if(null!==D){const M=l.setInput;for(let F=0;F<D.length;){const X=D[F++],re=D[F++],Pe=D[F++];null!==M?l.setInput(s,Pe,X,re):s[re]=Pe}}}function Gh(n,r){let s=null,l=0;for(;l<r.length;){const f=r[l];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[l+1])),l+=2}else l+=2;else l+=4}return s}function vd(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function zh(n,r){const s=Nr(r,n);if(Di(s)){const l=s[1];80&s[2]?_d(l,s,l.template,s[8]):s[5]>0&&Wh(s)}}function Wh(n){for(let l=Xl(n);null!==l;l=bu(l))for(let f=10;f<l.length;f++){const y=l[f];if(1024&y[2]){const D=y[1];_d(D,y,D.template,y[8])}else y[5]>0&&Wh(y)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const f=Nr(s[l],n);Di(f)&&f[5]>0&&Wh(f)}}function Dm(n,r){const s=Nr(r,n),l=s[1];(function Zp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),Qd(l,s,s[8])}function eh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Ou(n){for(;n;){n[2]|=64;const r=gs(n);if(Nn(n)&&!r)return n;n=r}return null}function qh(n,r,s){const l=r[10];l.begin&&l.begin();try{_d(n,r,n.template,s)}catch(f){throw Am(r,f),f}finally{l.end&&l.end()}}function Sm(n){!function Xp(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],l=Cc(s),f=l[1];t_(f,l,f.template,s)}}(n[8])}function Yh(n,r,s){da(0),r(n,s)}const eg=(()=>Promise.resolve(null))();function tg(n){return n[7]||(n[7]=[])}function Ed(n){return n.cleanup||(n.cleanup=[])}function Am(n,r){const s=n[9],l=s?s.get(Js,null):null;l&&l.handleError(r)}function xm(n,r,s,l,f){for(let y=0;y<s.length;){const D=s[y++],M=s[y++],F=r[D],X=n.data[D];null!==X.setInput?X.setInput(F,f,l,M):F[M]=f}}function Pu(n,r,s){const l=Mt(r,n);!function od(n,r,s){ti(n)?n.setValue(r,s):r.textContent=s}(n[11],l,s)}function Kh(n,r,s){let l=s?n.styles:null,f=s?n.classes:null,y=0;if(null!==r)for(let D=0;D<r.length;D++){const M=r[D];"number"==typeof M?y=M:1==y?f=Ee(f,M):2==y&&(l=Ee(l,M+": "+r[++D]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=f:n.classesWithoutHost=f}const Zh=new hs("INJECTOR",-1);class Rm{get(r,s=ue){if(s===ue){const l=new Error(`NullInjectorError: No provider for ${Ce(r)}!`);throw l.name="NullInjectorError",l}return s}}const Xh=new hs("Set Injector scope."),Qh={},rg={};let qf;function Yf(){return void 0===qf&&(qf=new Rm),qf}function Kf(n,r=null,s=null,l){const f=Zf(n,r,s,l);return f._resolveInjectorDefTypes(),f}function Zf(n,r=null,s=null,l){return new th(n,s,r||Yf(),l)}class th{constructor(r,s,l,f=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];s&&Zs(s,M=>this.processProvider(M,r,s)),Zs([r],M=>this.processInjectorType(M,[],y)),this.records.set(Zh,wd(void 0,this));const D=this.records.get(Xh);this.scope=null!=D?D.value:null,this.source=f||("object"==typeof r?null:Ce(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=ue,l=pn.Default){this.assertNotDestroyed();const f=Wr(this),y=Ir(void 0);try{if(!(l&pn.SkipSelf)){let M=this.records.get(r);if(void 0===M){const F=function d_(n){return"function"==typeof n||"object"==typeof n&&n instanceof hs}(r)&&hn(r);M=F&&this.injectableDefInScope(F)?wd(ku(r),Qh):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(l&pn.Self?Yf():this.parent).get(r,s=l&pn.Optional&&s===ue?null:s)}catch(D){if("NullInjectorError"===D.name){if((D[xt]=D[xt]||[]).unshift(Ce(r)),f)throw D;return function ll(n,r,s,l){const f=n[xt];throw r[or]&&f.unshift(r[or]),n.message=function Sl(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=Ce(r);if(Array.isArray(r))f=r.map(Ce).join(" -> ");else if("object"==typeof r){let y=[];for(let D in r)if(r.hasOwnProperty(D)){let M=r[D];y.push(D+":"+("string"==typeof M?JSON.stringify(M):Ce(M)))}f=`{${y.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${n.replace(vn,"\n  ")}`}("\n"+n.message,f,s,l),n.ngTokenPath=f,n[xt]=null,n}(D,r,"R3InjectorError",this.source)}throw D}finally{Ir(y),Wr(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((l,f)=>r.push(Ce(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(r,s,l){if(!(r=ee(r)))return!1;let f=Dn(r);const y=null==f&&r.ngModule||void 0,D=void 0===y?r:y,M=-1!==l.indexOf(D);if(void 0!==y&&(f=Dn(y)),null==f)return!1;if(null!=f.imports&&!M){let re;l.push(D);try{Zs(f.imports,Pe=>{this.processInjectorType(Pe,s,l)&&(void 0===re&&(re=[]),re.push(Pe))})}finally{}if(void 0!==re)for(let Pe=0;Pe<re.length;Pe++){const{ngModule:ct,providers:Pt}=re[Pe];Zs(Pt,fn=>this.processProvider(fn,ct,Pt||yn))}}this.injectorDefTypes.add(D);const F=Tr(D)||(()=>new D);this.records.set(D,wd(F,Qh));const X=f.providers;if(null!=X&&!M){const re=r;Zs(X,Pe=>this.processProvider(Pe,re,X))}return void 0!==y&&void 0!==r.providers}processProvider(r,s,l){let f=kc(r=ee(r))?r:ee(r&&r.provide);const y=function nh(n,r,s){return Id(n)?wd(void 0,n.useValue):wd(bd(n),Qh)}(r);if(kc(r)||!0!==r.multi)this.records.get(f);else{let D=this.records.get(f);D||(D=wd(void 0,Qh,!0),D.factory=()=>mo(D.multi),this.records.set(f,D)),f=r,D.multi.push(r)}this.records.set(f,y)}hydrate(r,s){return s.value===Qh&&(s.value=rg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ag(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ee(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function ku(n){const r=hn(n),s=null!==r?r.factory:Tr(n);if(null!==s)return s;if(n instanceof hs)throw new Ne(204,!1);if(n instanceof Function)return function ig(n){const r=n.length;if(r>0)throw Fs(r,"?"),new Ne(204,!1);const s=function jn(n){const r=n&&(n[er]||n[rr]);if(r){const s=function Fn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ne(204,!1)}function bd(n,r,s){let l;if(kc(n)){const f=ee(n);return Tr(f)||ku(f)}if(Id(n))l=()=>ee(n.useValue);else if(function c_(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...mo(n.deps||[]));else if(function u_(n){return!(!n||!n.useExisting)}(n))l=()=>li(ee(n.useExisting));else{const f=ee(n&&(n.useClass||n.provide));if(!function og(n){return!!n.deps}(n))return Tr(f)||ku(f);l=()=>new f(...mo(n.deps))}return l}function wd(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Id(n){return null!==n&&"object"==typeof n&&Rr in n}function kc(n){return"function"==typeof n}let ru=(()=>{class n{static create(s,l){var f;if(Array.isArray(s))return Kf({name:""},l,s,"");{const y=null!==(f=s.name)&&void 0!==f?f:"";return Kf({name:y},s.parent,s.providers,y)}}}return n.THROW_IF_NOT_FOUND=ue,n.NULL=new Rm,n.\u0275prov=Qe({token:n,providedIn:"any",factory:()=>li(Zh)}),n.__NG_ELEMENT_ID__=-1,n})();function g_(n,r){bo(Cc(n)[1],I())}function ef(n){let r=function Gm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let f;if(kt(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ne(903,"");f=r.\u0275dir}if(f){if(s){l.push(f);const D=n;D.inputs=tf(n.inputs),D.declaredInputs=tf(n.declaredInputs),D.outputs=tf(n.outputs);const M=f.hostBindings;M&&fg(n,M);const F=f.viewQuery,X=f.contentQueries;if(F&&rh(n,F),X&&zm(n,X),we(n.inputs,f.inputs),we(n.declaredInputs,f.declaredInputs),we(n.outputs,f.outputs),kt(f)&&f.data.animation){const re=n.data;re.animation=(re.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let D=0;D<y.length;D++){const M=y[D];M&&M.ngInherit&&M(n),M===ef&&(s=!1)}}r=Object.getPrototypeOf(r)}!function hg(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=r+=f.hostVars,f.hostAttrs=Io(f.hostAttrs,s=Io(s,f.hostAttrs))}}(l)}function tf(n){return n===Cr?{}:n===yn?[]:n}function rh(n,r){const s=n.viewQuery;n.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function zm(n,r){const s=n.contentQueries;n.contentQueries=s?(l,f,y)=>{r(l,f,y),s(l,f,y)}:r}function fg(n,r){const s=n.hostBindings;n.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}let ih=null;function sh(){if(!ih){const n=Ln.Symbol;if(n&&n.iterator)ih=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(ih=l)}}}return ih}function nf(n){return!!yg(n)&&(Array.isArray(n)||!(n instanceof Map)&&sh()in n)}function yg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Nl(n,r,s){return n[r]=s}function zo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function sf(n,r,s,l){const f=P();return zo(f,Fr(),r)&&(b(),Mu(ts(),f,n,r,s,l)),sf}function ah(n,r,s,l){return zo(n,Fr(),s)?r+ke(s)+l:ai}function bg(n,r,s,l,f,y,D,M){const F=P(),X=b(),re=n+20,Pe=X.firstCreatePass?function __(n,r,s,l,f,y,D,M,F){const X=r.consts,re=Pc(r,n,4,D||null,bi(X,M));Gf(r,s,re,bi(X,F)),bo(r,re);const Pe=re.tViews=Jd(2,re,l,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,X);return null!==r.queries&&(r.queries.template(r,re),Pe.queries=r.queries.embeddedTView(re)),re}(re,X,F,r,s,l,f,y,D):X.data[re];Le(Pe,!1);const ct=F[11].createComment("");no(X,F,ct,Pe),Bs(ct,F),eh(F,F[re]=vd(ct,F,ct,Pe)),Jt(Pe)&&Uh(X,F,Pe),null!=D&&Up(F,Pe,M)}function hf(n,r=pn.Default){const s=P();return null===s?li(n,r):$n(I(),s,ee(n),r)}function ay(){throw new Error("invalid")}function Ts(n,r,s){const l=P();return zo(l,Fr(),r)&&Qa(b(),ts(),l,n,r,l[11],s,!1),Ts}function ly(n,r,s,l,f){const D=f?"class":"style";xm(n,s,r.inputs[D],D,l)}function ro(n,r,s,l){const f=P(),y=b(),D=20+n,M=f[11],F=f[D]=Ac(M,r,function nl(){return ir.lFrame.currentNamespace}()),X=y.firstCreatePass?function Kv(n,r,s,l,f,y,D){const M=r.consts,X=Pc(r,n,2,f,bi(M,y));return Gf(r,s,X,bi(M,D)),null!==X.attrs&&Kh(X,X.attrs,!1),null!==X.mergedAttrs&&Kh(X,X.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,X),X}(D,y,f,0,r,s,l):y.data[D];Le(X,!0);const re=X.mergedAttrs;null!==re&&Va(M,F,re);const Pe=X.classes;null!==Pe&&oc(M,F,Pe);const ct=X.styles;return null!==ct&&sc(M,F,ct),64!=(64&X.flags)&&no(y,f,F,X),0===function G(){return ir.lFrame.elementDepthCount}()&&Bs(F,f),function B(){ir.lFrame.elementDepthCount++}(),Jt(X)&&(Uh(y,f,X),dm(y,X,f)),null!==l&&Up(f,X),ro}function ff(){let n=I();It()?sn():(n=n.parent,Le(n,!1));const r=n;!function N(){ir.lFrame.elementDepthCount--}();const s=b();return s.firstCreatePass&&(bo(s,n),yt(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Ll(n){return 0!=(16&n.flags)}(r)&&ly(s,r,P(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Cs(n){return 0!=(32&n.flags)}(r)&&ly(s,r,P(),r.stylesWithoutHost,!1),ff}function Mg(n,r,s,l){return ro(n,r,s,l),ff(),Mg}function op(n,r,s){const l=P(),f=b(),y=n+20,D=f.firstCreatePass?function uy(n,r,s,l,f){const y=r.consts,D=bi(y,l),M=Pc(r,n,8,"ng-container",D);return null!==D&&Kh(M,D,!0),Gf(r,s,M,bi(y,f)),null!==r.queries&&r.queries.elementStart(r,M),M}(y,f,l,r,s):f.data[y];Le(D,!0);const M=l[y]=l[11].createComment("");return no(f,l,M,D),Bs(M,l),Jt(D)&&(Uh(f,l,D),dm(f,D,l)),null!=s&&Up(l,D),op}function ap(){let n=I();const r=b();return It()?sn():(n=n.parent,Le(n,!1)),r.firstCreatePass&&(bo(r,n),yt(n)&&r.queries.elementEnd(n)),ap}function Og(n,r,s){return op(n,r,s),ap(),Og}function cy(){return P()}function dy(n){return!!n&&"function"==typeof n.then}function hy(n){return!!n&&"function"==typeof n.subscribe}const fy=hy;function lp(n,r,s,l){const f=P(),y=b(),D=I();return function iu(n,r,s,l,f,y,D,M){const F=Jt(l),re=n.firstCreatePass&&Ed(n),Pe=r[8],ct=tg(r);let Pt=!0;if(3&l.type||M){const tr=en(l,r),Sr=M?M(tr):tr,Cn=ct.length,Jr=M?ji=>M(j(ji[l.index])):l.index;if(ti(s)){let ji=null;if(!M&&F&&(ji=function Xv(n,r,s,l){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const D=f[y];if(D===s&&f[y+1]===l){const M=r[7],F=f[y+2];return M.length>F?M[F]:null}"string"==typeof D&&(y+=2)}return null}(n,r,f,l.index)),null!==ji)(ji.__ngLastListenerFn__||ji).__ngNextListenerFn__=y,ji.__ngLastListenerFn__=y,Pt=!1;else{y=ph(l,r,Pe,y,!1);const Es=s.listen(Sr,f,y);ct.push(y,Es),re&&re.push(f,Jr,Cn,Cn+1)}}else y=ph(l,r,Pe,y,!0),Sr.addEventListener(f,y,D),ct.push(y),re&&re.push(f,Jr,Cn,D)}else y=ph(l,r,Pe,y,!1);const fn=l.outputs;let Bn;if(Pt&&null!==fn&&(Bn=fn[f])){const tr=Bn.length;if(tr)for(let Sr=0;Sr<tr;Sr+=2){const au=r[Bn[Sr]][Bn[Sr+1]].subscribe(y),If=ct.length;ct.push(y,au),re&&re.push(f,l.index,If,-(If+1))}}}(y,f,f[11],D,n,r,!!s,l),lp}function Bc(n,r,s,l){try{return!1!==s(l)}catch(f){return Am(n,f),!1}}function ph(n,r,s,l,f){return function y(D){if(D===Function)return l;const M=2&n.flags?Nr(n.index,r):r;0==(32&r[2])&&Ou(M);let F=Bc(r,0,l,D),X=y.__ngNextListenerFn__;for(;X;)F=Bc(r,0,X,D)&&F,X=X.__ngNextListenerFn__;return f&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function py(n=1){return function wl(n){return(ir.lFrame.contextLView=function Oo(n,r){for(;n>0;)r=r[15],n--;return r}(n,ir.lFrame.contextLView))[8]}(n)}function D_(n,r){let s=null;const l=function Pp(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const y=r[f];if("*"!==y){if(null===l?Cu(n,y,!0):Np(l,y))return f}else s=f}return s}function Pg(n){const r=P()[16][6];if(!r.projection){const l=r.projection=Fs(n?n.length:1,null),f=l.slice();let y=r.child;for(;null!==y;){const D=n?D_(y,n):0;null!==D&&(f[D]?f[D].projectionNext=y:l[D]=y,f[D]=y),y=y.next}}}function kg(n,r=0,s){const l=P(),f=b(),y=Pc(f,20+n,16,null,s||null);null===y.projection&&(y.projection=r),sn(),64!=(64&y.flags)&&function Mf(n,r,s){zd(r[11],0,r,s,Fa(n,s,r),xf(s.parent||r[6],s,r))}(f,l,y)}function gh(n,r,s){return Ng(n,"",r,"",s),gh}function Ng(n,r,s,l,f){const y=P(),D=ah(y,r,s,l);return D!==ai&&Qa(b(),ts(),y,n,D,y[11],f,!1),Ng}function Uc(n,r,s,l,f){const y=n[s+1],D=null===r;let M=l?Xa(y):La(y),F=!1;for(;0!==M&&(!1===F||D);){const re=n[M+1];Ey(n[M],r)&&(F=!0,n[M+1]=l?Yd(re):ac(re)),M=l?Xa(re):La(re)}F&&(n[s+1]=l?ac(y):Yd(y))}function Ey(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ko(n,r)>=0}function fp(n,r){return function su(n,r,s,l){const f=P(),y=b(),D=function Ri(n){const r=ir.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);y.firstUpdatePass&&function by(n,r,s,l){const f=n.data;if(null===f[s+1]){const y=f[Ws()],D=function Ug(n,r){return r>=n.expandoStartIndex}(n,s);(function Cy(n,r){return 0!=(n.flags&(r?16:32))})(y,l)&&null===r&&!D&&(r=!1),r=function A_(n,r,s,l){const f=function co(n){const r=ir.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=yf(s=pp(null,n,r,s,l),r.attrs,l),y=null);else{const D=r.directiveStylingLast;if(-1===D||n[D]!==f)if(s=pp(f,n,r,s,l),null===y){let F=function wy(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==La(l))return n[Xa(l)]}(n,r,l);void 0!==F&&Array.isArray(F)&&(F=pp(null,n,r,F[1],l),F=yf(F,r.attrs,l),function x_(n,r,s,l){n[Xa(s?r.classBindings:r.styleBindings)]=l}(n,r,l,F))}else y=function R_(n,r,s){let l;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)l=yf(l,n[y].hostAttrs,s);return yf(l,r.attrs,s)}(n,r,l)}return void 0!==y&&(l?r.residualClasses=y:r.residualStyles=y),s}(f,y,r,l),function Lg(n,r,s,l,f,y){let D=y?r.classBindings:r.styleBindings,M=Xa(D),F=La(D);n[l]=s;let re,X=!1;if(Array.isArray(s)){const Pe=s;re=Pe[1],(null===re||ko(Pe,re)>0)&&(X=!0)}else re=s;if(f)if(0!==F){const ct=Xa(n[M+1]);n[l+1]=tu(ct,M),0!==ct&&(n[ct+1]=pd(n[ct+1],l)),n[M+1]=function fd(n,r){return 131071&n|r<<17}(n[M+1],l)}else n[l+1]=tu(M,0),0!==M&&(n[M+1]=pd(n[M+1],l)),M=l;else n[l+1]=tu(F,0),0===M?M=l:n[F+1]=pd(n[F+1],l),F=l;X&&(n[l+1]=ac(n[l+1])),Uc(n,re,l,!0),Uc(n,re,l,!1),function vy(n,r,s,l,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&ko(y,r)>=0&&(s[l+1]=Yd(s[l+1]))}(r,re,n,l,y),D=tu(M,F),y?r.classBindings=D:r.styleBindings=D}(f,y,r,s,D,l)}}(y,n,D,l),r!==ai&&zo(f,D,r)&&function Hg(n,r,s,l,f,y,D,M){if(!(3&r.type))return;const F=n.data,X=F[M+1];vh(function ua(n){return 1==(1&n)}(X)?Gg(F,r,s,f,La(X),D):void 0)||(vh(y)||function Lh(n){return 2==(2&n)}(X)&&(y=Gg(F,null,s,f,M,D)),function ic(n,r,s,l,f){const y=ti(n);if(r)f?y?n.addClass(s,l):s.classList.add(l):y?n.removeClass(s,l):s.classList.remove(l);else{let D=-1===l.indexOf("-")?void 0:Xt.DashCase;if(null==f)y?n.removeStyle(s,l,D):s.style.removeProperty(l);else{const M="string"==typeof f&&f.endsWith("!important");M&&(f=f.slice(0,-10),D|=Xt.Important),y?n.setStyle(s,l,f,D):s.style.setProperty(l,f,M?"important":"")}}}(l,D,Mt(Ws(),s),f,y))}(y,y.data[Ws()],f,f[11],n,f[D+1]=function gp(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ce(ia(n)))),n}(r,s),l,D)}(n,r,null,!0),fp}function pp(n,r,s,l,f){let y=null;const D=s.directiveEnd;let M=s.directiveStylingLast;for(-1===M?M=s.directiveStart:M++;M<D&&(y=r[M],l=yf(l,y.hostAttrs,f),y!==n);)M++;return null!==n&&(s.directiveStylingLast=M),l}function yf(n,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const D=r[y];"number"==typeof D?f=D:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ls(n,D,!!s||r[++y]))}return void 0===n?null:n}function Gg(n,r,s,l,f,y){const D=null===r;let M;for(;f>0;){const F=n[f],X=Array.isArray(F),re=X?F[1]:F,Pe=null===re;let ct=s[f+1];ct===ai&&(ct=Pe?yn:void 0);let Pt=Pe?il(ct,l):re===l?ct:void 0;if(X&&!vh(Pt)&&(Pt=il(F,l)),vh(Pt)&&(M=Pt,D))return M;const fn=n[f+1];f=D?Xa(fn):La(fn)}if(null!==r){let F=y?r.residualClasses:r.residualStyles;null!=F&&(M=il(F,l))}return M}function vh(n){return void 0!==n}function zg(n,r=""){const s=P(),l=b(),f=n+20,y=l.firstCreatePass?Pc(l,f,1,r,null):l.data[f],D=s[f]=function Sc(n,r){return ti(n)?n.createText(r):n.createTextNode(r)}(s[11],r);no(l,s,D,y),Le(y,!1)}function Bu(n){return mp("",n,""),Bu}function mp(n,r,s){const l=P(),f=ah(l,n,r,s);return f!==ai&&Pu(l,Ws(),f),mp}const Gc=void 0;var Fl=["en",[["a","p"],["AM","PM"],Gc],[["AM","PM"],Gc,Gc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gc,"{1} 'at' {0}",Gc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Sd(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Ao={};function vp(n){const r=function Ih(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Ca(r);if(s)return s;const l=r.split("-")[0];if(s=Ca(l),s)return s;if("en"===l)return Fl;throw new Error(`Missing locale data for the locale "${n}".`)}function wh(n){return vp(n)[Zr.PluralCase]}function Ca(n){return n in Ao||(Ao[n]=Ln.ng&&Ln.ng.common&&Ln.ng.common.locales&&Ln.ng.common.locales[n]),Ao[n]}var Zr=(()=>((Zr=Zr||{})[Zr.LocaleId=0]="LocaleId",Zr[Zr.DayPeriodsFormat=1]="DayPeriodsFormat",Zr[Zr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Zr[Zr.DaysFormat=3]="DaysFormat",Zr[Zr.DaysStandalone=4]="DaysStandalone",Zr[Zr.MonthsFormat=5]="MonthsFormat",Zr[Zr.MonthsStandalone=6]="MonthsStandalone",Zr[Zr.Eras=7]="Eras",Zr[Zr.FirstDayOfWeek=8]="FirstDayOfWeek",Zr[Zr.WeekendRange=9]="WeekendRange",Zr[Zr.DateFormat=10]="DateFormat",Zr[Zr.TimeFormat=11]="TimeFormat",Zr[Zr.DateTimeFormat=12]="DateTimeFormat",Zr[Zr.NumberSymbols=13]="NumberSymbols",Zr[Zr.NumberFormats=14]="NumberFormats",Zr[Zr.CurrencyCode=15]="CurrencyCode",Zr[Zr.CurrencySymbol=16]="CurrencySymbol",Zr[Zr.CurrencyName=17]="CurrencyName",Zr[Zr.Currencies=18]="Currencies",Zr[Zr.Directionality=19]="Directionality",Zr[Zr.PluralCase=20]="PluralCase",Zr[Zr.ExtraData=21]="ExtraData",Zr))();const Vu="en-US";let Ny=Vu;function Q_(n,r,s,l,f){if(n=ee(n),Array.isArray(n))for(let y=0;y<n.length;y++)Q_(n[y],r,s,l,f);else{const y=b(),D=P();let M=kc(n)?n:ee(n.provide),F=bd(n);const X=I(),re=1048575&X.providerIndexes,Pe=X.directiveStart,ct=X.providerIndexes>>20;if(kc(n)||!n.multi){const Pt=new Yo(F,f,hf),fn=ev(M,r,f?re:re+ct,Pe);-1===fn?(eo(Xo(X,D),y,M),J_(y,n,r.length),r.push(M),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),s.push(Pt),D.push(Pt)):(s[fn]=Pt,D[fn]=Pt)}else{const Pt=ev(M,r,re+ct,Pe),fn=ev(M,r,re,re+ct),Bn=Pt>=0&&s[Pt],tr=fn>=0&&s[fn];if(f&&!tr||!f&&!Bn){eo(Xo(X,D),y,M);const Sr=function cb(n,r,s,l,f){const y=new Yo(n,s,hf);return y.multi=[],y.index=r,y.componentProviders=0,p0(y,f,l&&!s),y}(f?ub:lb,s.length,f,l,F);!f&&tr&&(s[fn].providerFactory=Sr),J_(y,n,r.length,0),r.push(M),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),s.push(Sr),D.push(Sr)}else J_(y,n,Pt>-1?Pt:fn,p0(s[f?fn:Pt],F,!f&&l));!f&&l&&tr&&s[fn].componentProviders++}}}function J_(n,r,s,l){const f=kc(r),y=function sg(n){return!!n.useClass}(r);if(f||y){const F=(y?ee(r.useClass):r).prototype.ngOnDestroy;if(F){const X=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const re=X.indexOf(s);-1===re?X.push(s,[l,F]):X[re+1].push(l,F)}else X.push(s,F)}}}function p0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function ev(n,r,s,l){for(let f=s;f<l;f++)if(r[f]===n)return f;return-1}function lb(n,r,s,l){return tv(this.multi,[])}function ub(n,r,s,l){const f=this.multi;let y;if(this.providerFactory){const D=this.providerFactory.componentProviders,M=V(s,s[1],this.providerFactory.index,l);y=M.slice(0,D),tv(f,y);for(let F=D;F<M.length;F++)y.push(M[F])}else y=[],tv(f,y);return y}function tv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function g0(n,r=[]){return s=>{s.providersResolver=(l,f)=>function ab(n,r,s){const l=b();if(l.firstCreatePass){const f=kt(n);Q_(s,l.data,l.blueprint,f,!0),Q_(r,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,r)}}class m0{}class fb{resolveComponentFactory(r){throw function hb(n){const r=Error(`No component factory found for ${Ce(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Hy=(()=>{class n{}return n.NULL=new fb,n})();function pb(){return Dp(I(),P())}function Dp(n,r){return new rm(en(n,r))}let rm=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=pb,n})();function gb(n){return n instanceof rm?n.nativeElement:n}class _0{}let mb=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function _b(){const n=P(),s=Nr(I().index,n);return function yb(n){return n[11]}(be(s)?s:n)}(),n})(),vb=(()=>{class n{}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:()=>null}),n})();class v0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const E0=new v0("13.2.7"),nv={};function Gy(n,r,s,l,f=!1){for(;null!==s;){const y=r[s.index];if(null!==y&&l.push(j(y)),Oe(y))for(let M=10;M<y.length;M++){const F=y[M],X=F[1].firstChild;null!==X&&Gy(F[1],F,X,l)}const D=s.type;if(8&D)Gy(n,r,s.child,l);else if(32&D){const M=mr(s,r);let F;for(;F=M();)l.push(F)}else if(16&D){const M=Hd(r,s);if(Array.isArray(M))l.push(...M);else{const F=gs(r[16]);Gy(F[1],F,M,l,!0)}}s=f?s.projectionNext:s.next}return l}class im{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Gy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Oe(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(Rh(r,l),Ns(s,l))}this._attachedToViewContainer=!1}Mh(this._lView[1],this._lView)}onDestroy(r){gm(this._lView[1],this._lView,null,r)}markForCheck(){Ou(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Qp(n,r,s){Mn(!0);try{qh(n,r,s)}finally{Mn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xh(n,r){dd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=r}}class Eb extends im{constructor(r){super(r),this._view=r}detectChanges(){Sm(this._view)}checkNoChanges(){!function a_(n){Mn(!0);try{Sm(n)}finally{Mn(!1)}}(this._view)}get context(){return null}}class b0 extends Hy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=lt(r);return new rv(s,this.ngModule)}}function w0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class rv extends m0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Du(n){return n.map(hd).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return w0(this.componentDef.inputs)}get outputs(){return w0(this.componentDef.outputs)}create(r,s,l,f){const y=(f=f||this.ngModule)?function wb(n,r){return{get:(s,l,f)=>{const y=n.get(s,nv,f);return y!==nv||l===nv?y:r.get(s,l,f)}}}(r,f.injector):r,D=y.get(_0,H),M=y.get(vb,null),F=D.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",re=l?function pm(n,r,s){if(ti(n))return n.selectRootElement(r,s===Nt.ShadowDom);let l="string"==typeof r?n.querySelector(r):r;return l.textContent="",l}(F,l,this.componentDef.encapsulation):Ac(D.createRenderer(null,this.componentDef),X,function bb(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(X)),Pe=this.componentDef.onPush?576:528,ct=function ep(n,r){return{components:[],scheduler:n||Vd,clean:eg,playerHandler:r||null,flags:0}}(),Pt=Jd(0,null,null,1,0,null,null,null,null,null),fn=Ru(null,Pt,ct,Pe,null,null,D,F,M,y);let Bn,tr;ho(fn);try{const Sr=function Jf(n,r,s,l,f,y){const D=s[1];s[20]=n;const F=Pc(D,20,2,"#host",null),X=F.mergedAttrs=r.hostAttrs;null!==X&&(Kh(F,X,!0),null!==n&&(Va(f,n,X),null!==F.classes&&oc(f,n,F.classes),null!==F.styles&&sc(f,n,F.styles)));const re=l.createRenderer(n,r),Pe=Ru(s,hm(r),null,r.onPush?64:16,s[20],F,l,re,y||null,null);return D.firstCreatePass&&(eo(Xo(F,s),D,r.type),jh(D,F),qp(F,s.length,1)),eh(s,Pe),s[20]=Pe}(re,this.componentDef,fn,D,F);if(re)if(l)Va(F,re,["ng-version",E0.full]);else{const{attrs:Cn,classes:Jr}=function Tu(n){const r=[],s=[];let l=1,f=2;for(;l<n.length;){let y=n[l];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++l]):8===f&&s.push(y);else{if(!Is(f))break;f=y}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Cn&&Va(F,re,Cn),Jr&&Jr.length>0&&oc(F,re,Jr.join(" "))}if(tr=oi(Pt,20),void 0!==s){const Cn=tr.projection=[];for(let Jr=0;Jr<this.ngContentSelectors.length;Jr++){const ji=s[Jr];Cn.push(null!=ji?Array.from(ji):null)}}Bn=function jm(n,r,s,l,f){const y=s[1],D=function zp(n,r,s){const l=I();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Im(n,l,r,yd(n,r,1,null),s));const f=V(r,n,l.directiveStart,l);Bs(f,r);const y=en(l,r);return y&&Bs(y,r),f}(y,s,r);if(l.components.push(D),n[8]=D,f&&f.forEach(F=>F(D,r)),r.contentQueries){const F=I();r.contentQueries(1,D,F.directiveStart)}const M=I();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ha(M.index),vm(s[1],M,0,M.directiveStart,M.directiveEnd,r),bm(r,D)),D}(Sr,this.componentDef,fn,ct,[g_]),Qd(Pt,fn,null)}finally{Mo()}return new Cb(this.componentType,Bn,Dp(tr,fn),fn,tr)}}class Cb extends class db{}{constructor(r,s,l,f,y){super(),this.location=l,this._rootLView=f,this._tNode=y,this.instance=s,this.hostView=this.changeDetectorRef=new Eb(f),this.componentType=r}get injector(){return new it(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Tp{}class I0{}const Sp=new Map;class T0 extends Tp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new b0(this);const l=Un(r);this._bootstrapComponents=_(l.bootstrap),this._r3Injector=Zf(r,s,[{provide:Tp,useValue:this},{provide:Hy,useValue:this.componentFactoryResolver}],Ce(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=ru.THROW_IF_NOT_FOUND,l=pn.Default){return r===ru||r===Tp||r===Zh?this:this._r3Injector.get(r,s,l)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class iv extends I0{constructor(r){super(),this.moduleType=r,null!==Un(r)&&function Tb(n){const r=new Set;!function s(l){const f=Un(l,!0),y=f.id;null!==y&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Ce(r)} vs ${Ce(r.name)}`)}(y,Sp.get(y),l),Sp.set(y,l));const D=_(f.imports);for(const M of D)r.has(M)||(r.add(M),s(M))}(n)}(r)}create(r){return new T0(this.moduleType,r)}}function S0(n,r,s){const l=zr()+n,f=P();return f[l]===ai?Nl(f,l,s?r.call(s):r()):function rf(n,r){return n[r]}(f,l)}function A0(n,r,s,l){return x0(P(),zr(),n,r,s,l)}function x0(n,r,s,l,f,y){const D=r+s;return zo(n,D,f)?Nl(n,D+1,y?l.call(y,f):l(f)):function sm(n,r){const s=n[r];return s===ai?void 0:s}(n,D+1)}function k0(n,r){const s=b();let l;const f=n+20;s.firstCreatePass?(l=function Nb(n,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(n===l.name)return l}}(r,s.pipeRegistry),s.data[f]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(f,l.onDestroy)):l=s.data[f];const y=l.factory||(l.factory=Tr(l.type)),D=Ir(hf);try{const M=ya(!1),F=y();return ya(M),function wg(n,r,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=l}(s,P(),f,F),F}finally{Ir(D)}}function N0(n,r,s){const l=n+20,f=P(),y=function Hr(n,r){return n[r]}(f,l);return function om(n,r){return n[1].data[r].pure}(f,l)?x0(f,zr(),r,y.transform,s,y):y.transform(s)}function sv(n){return r=>{setTimeout(n,void 0,r)}}const zc=class Vb extends a.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var f,y,D;let M=r,F=s||(()=>null),X=l;if(r&&"object"==typeof r){const Pe=r;M=null===(f=Pe.next)||void 0===f?void 0:f.bind(Pe),F=null===(y=Pe.error)||void 0===y?void 0:y.bind(Pe),X=null===(D=Pe.complete)||void 0===D?void 0:D.bind(Pe)}this.__isAsync&&(F=sv(F),M&&(M=sv(M)),X&&(X=sv(X)));const re=super.subscribe({next:M,error:F,complete:X});return r instanceof J.w&&r.add(re),re}};function Ub(){return this._results[sh()]()}class ov{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=sh(),l=ov.prototype;l[s]||(l[s]=Ub)}get changes(){return this._changes||(this._changes=new zc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=Ks(r);(this._changesDetected=!function rl(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],y=r[l];if(s&&(f=s(f),y=s(y)),y!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let am=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gb,n})();const jb=am,Hb=class extends jb{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r){const s=this._declarationTContainer.tViews,l=Ru(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(s)),Qd(s,l,r),new im(l)}};function Gb(){return zy(I(),P())}function zy(n,r){return 4&n.type?new Hb(r,n,Dp(n,r)):null}let Wy=(()=>{class n{}return n.__NG_ELEMENT_ID__=zb,n})();function zb(){return $0(I(),P())}const Wb=Wy,F0=class extends Wb{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return Dp(this._hostTNode,this._hostLView)}get injector(){return new it(this._hostTNode,this._hostLView)}get parentInjector(){const r=qi(this._hostTNode,this._hostLView);if(Uo(r)){const s=_s(r,this._hostLView),l=$i(r);return new it(s[1].data[l+8],s)}return new it(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=L0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){const f=r.createEmbeddedView(s||{});return this.insert(f,l),f}createComponent(r,s,l,f,y){const D=r&&!function Bi(n){return"function"==typeof n}(r);let M;if(D)M=s;else{const Pe=s||{};M=Pe.index,l=Pe.injector,f=Pe.projectableNodes,y=Pe.ngModuleRef}const F=D?r:new rv(lt(r)),X=l||this.parentInjector;if(!y&&null==F.ngModule){const ct=(D?X:this.parentInjector).get(Tp,null);ct&&(y=ct)}const re=F.create(X,f,void 0,y);return this.insert(re.hostView,M),re}insert(r,s){const l=r._lView,f=l[1];if(function ni(n){return Oe(n[3])}(l)){const re=this.indexOf(r);if(-1!==re)this.detach(re);else{const Pe=l[3],ct=new F0(Pe,Pe[6],Pe[3]);ct.detach(ct.indexOf(r))}}const y=this._adjustIndex(s),D=this._lContainer;!function Rp(n,r,s,l){const f=10+l,y=s.length;l>0&&(s[f-1][4]=r),l<y-10?(r[4]=s[f],Bl(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const D=r[17];null!==D&&s!==D&&function Mp(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(D,r);const M=r[19];null!==M&&M.insertView(n),r[2]|=128}(f,l,D,y);const M=cd(y,D),F=l[11],X=wu(F,D[7]);return null!==X&&function ld(n,r,s,l,f,y){l[0]=f,l[6]=r,dd(n,l,s,1,f,y)}(f,D[6],F,l,X,M),r.attachToViewContainerRef(),Bl(av(D),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=L0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=Rh(this._lContainer,s);l&&(Ns(av(this._lContainer),s),Mh(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=Rh(this._lContainer,s);return l&&null!=Ns(av(this._lContainer),s)?new im(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function L0(n){return n[8]}function av(n){return n[8]||(n[8]=[])}function $0(n,r){let s;const l=r[n.index];if(Oe(l))s=l;else{let f;if(8&n.type)f=j(l);else{const y=r[11];f=y.createComment("");const D=en(n,r);tn(y,wu(y,D),f,function rc(n,r){return ti(n)?n.nextSibling(r):r.nextSibling}(y,D),!1)}r[n.index]=s=vd(l,r,f,n),eh(r,s)}return new F0(s,n,r)}class lv{constructor(r){this.queryList=r,this.matches=null}clone(){return new lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class uv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let y=0;y<l;y++){const D=s.getByIndex(y);f.push(this.queries[D.indexInDeclarationView].clone())}return new uv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==q0(r,s).matches&&this.queries[s].setDirty()}}class B0{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class cv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,y=this.getByIndex(l).embeddedTView(r,f);y&&(y.indexInDeclarationView=l,null!==s?s.push(y):s=[y])}return null!==s?new cv(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class dv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new dv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const y=l[f];this.matchTNodeWithReadOption(r,s,Kb(s,y)),this.matchTNodeWithReadOption(r,s,S(s,r,y,!1,!1))}else l===am?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,S(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===rm||f===Wy||f===am&&4&s.type)this.addMatch(s.index,-2);else{const y=S(s,r,f,!1,!1);null!==y&&this.addMatch(s.index,y)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Kb(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function Xb(n,r,s,l){return-1===s?function Zb(n,r){return 11&n.type?Dp(n,r):4&n.type?zy(n,r):null}(r,n):-2===s?function Qb(n,r,s){return s===rm?Dp(r,n):s===am?zy(r,n):s===Wy?$0(r,n):void 0}(n,r,l):V(n,n[1],s,r)}function V0(n,r,s,l){const f=r[19].queries[l];if(null===f.matches){const y=n.data,D=s.matches,M=[];for(let F=0;F<D.length;F+=2){const X=D[F];M.push(X<0?null:Xb(r,y[X],D[F+1],s.metadata.read))}f.matches=M}return f.matches}function hv(n,r,s,l){const f=n.queries.getByIndex(s),y=f.matches;if(null!==y){const D=V0(n,r,f,s);for(let M=0;M<y.length;M+=2){const F=y[M];if(F>0)l.push(D[M/2]);else{const X=y[M+1],re=r[-F];for(let Pe=10;Pe<re.length;Pe++){const ct=re[Pe];ct[17]===ct[3]&&hv(ct[1],ct,X,l)}if(null!==re[9]){const Pe=re[9];for(let ct=0;ct<Pe.length;ct++){const Pt=Pe[ct];hv(Pt[1],Pt,X,l)}}}}}return l}function U0(n){const r=P(),s=b(),l=Eo();da(l+1);const f=q0(s,l);if(n.dirty&&Pr(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?hv(s,r,l,[]):V0(s,r,f,l);n.reset(y,gb),n.notifyOnChanges()}return!0}return!1}function j0(n,r,s){const l=b();l.firstCreatePass&&(W0(l,new B0(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),z0(l,P(),r)}function H0(n,r,s,l){const f=b();if(f.firstCreatePass){const y=I();W0(f,new B0(r,s,l),y.index),function ew(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}z0(f,P(),s)}function G0(){return function Jb(n,r){return n[19].queries[r].queryList}(P(),Eo())}function z0(n,r,s){const l=new ov(4==(4&s));gm(n,r,l,l.destroy),null===r[19]&&(r[19]=new uv),r[19].queries.push(new lv(l))}function W0(n,r,s){null===n.queries&&(n.queries=new cv),n.queries.track(new dv(r,s))}function q0(n,r){return n.queries.getByIndex(r)}function Ky(...n){}const cE=new hs("Application Initializer");let _v=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Ky,this.reject=Ky,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(dy(y))s.push(y);else if(fy(y)){const D=new Promise((M,F)=>{y.subscribe({complete:M,error:F})});s.push(D)}}Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(li(cE,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dE=new hs("AppId",{providedIn:"root",factory:function hE(){return`${vv()}${vv()}${vv()}`}});function vv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fE=new hs("Platform Initializer"),pE=new hs("Platform ID"),gE=new hs("appBootstrapListener");let mE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const Ev=new hs("LocaleId",{providedIn:"root",factory:()=>Ul(Ev,pn.Optional|pn.SkipSelf)||function _w(){return"undefined"!=typeof $localize&&$localize.locale||Vu}()}),vw=new hs("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ew{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let bw=(()=>{class n{compileModuleSync(s){return new iv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),y=_(Un(s).declarations).reduce((D,M)=>{const F=lt(M);return F&&D.push(new rv(F)),D},[]);return new Ew(l,y)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Iw=(()=>Promise.resolve(0))();function bv(n){"undefined"==typeof Zone?Iw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class hc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zc(!1),this.onMicrotaskEmpty=new zc(!1),this.onStable=new zc(!1),this.onError=new zc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Cw(){let n=Ln.requestAnimationFrame,r=Ln.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Sw(n){const r=()=>{!function Tw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ln,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,y,D,M)=>{try{return yE(n),s.invokeTask(f,y,D,M)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),_E(n)}},onInvoke:(s,l,f,y,D,M,F)=>{try{return yE(n),s.invoke(f,y,D,M,F)}finally{n.shouldCoalesceRunChangeDetection&&r(),_E(n)}},onHasTask:(s,l,f,y)=>{s.hasTask(f,y),l===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,Iv(n),wv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(s,l,f,y)=>(s.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const y=this._inner,D=y.scheduleEventTask("NgZoneEvent: "+f,r,Dw,Ky,Ky);try{return y.runTask(D,s,l)}finally{y.cancelTask(D)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const Dw={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function yE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _E(n){n._nesting--,wv(n)}class Aw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zc,this.onMicrotaskEmpty=new zc,this.onStable=new zc,this.onError=new zc}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}let vE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hc.assertNotInAngularZone(),bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let y=-1;l&&l>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==y),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:y,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,l,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(li(hc))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),EE=(()=>{class n{constructor(){this._applications=new Map,Cv.addToWindow(this)}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return Cv.findTestabilityInTree(this,s,l)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class xw{addToWindow(r){}findTestabilityInTree(r,s,l){return null}}function Rw(n){Cv=n}let fc,Cv=new xw;const bE=new hs("AllowMultipleToken");class Pw{constructor(r,s){this.name=r,this.token=s}}function wE(n,r,s=[]){const l=`Platform: ${r}`,f=new hs(l);return(y=[])=>{let D=IE();if(!D||D.injector.get(bE,!1))if(n)n(s.concat(y).concat({provide:f,useValue:!0}));else{const M=s.concat(y).concat({provide:f,useValue:!0},{provide:Xh,useValue:"platform"});!function kw(n){if(fc&&!fc.destroyed&&!fc.injector.get(bE,!1))throw new Ne(400,"");fc=n.get(CE);const r=n.get(fE,null);r&&r.forEach(s=>s())}(ru.create({providers:M,name:l}))}return function Nw(n){const r=IE();if(!r)throw new Ne(401,"");return r}()}}function IE(){return fc&&!fc.destroyed?fc:null}let CE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const M=function Fw(n,r){let s;return s="noop"===n?new Aw:("zone.js"===n?void 0:n)||new hc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),F=[{provide:hc,useValue:M}];return M.run(()=>{const X=ru.create({providers:F,parent:this.injector,name:s.moduleType.name}),re=s.create(X),Pe=re.injector.get(Js,null);if(!Pe)throw new Ne(402,"");return M.runOutsideAngular(()=>{const ct=M.onError.subscribe({next:Pt=>{Pe.handleError(Pt)}});re.onDestroy(()=>{Tv(this._modules,re),ct.unsubscribe()})}),function Lw(n,r,s){try{const l=s();return dy(l)?l.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(Pe,M,()=>{const ct=re.injector.get(_v);return ct.runInitializers(),ct.donePromise.then(()=>(function W_(n){At(n,"Expected localeId to be defined"),"string"==typeof n&&(Ny=n.toLowerCase().replace(/_/g,"-"))}(re.injector.get(Ev,Vu)||Vu),this._moduleDoBootstrap(re),re))})})}bootstrapModule(s,l=[]){const f=DE({},l);return function Mw(n,r,s){const l=new iv(s);return Promise.resolve(l)}(0,0,s).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(s){const l=s.injector.get(Dv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new Ne(403,"");s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(li(ru))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function DE(n,r){return Array.isArray(r)?r.reduce(DE,n):Object.assign(Object.assign({},n),r)}let Dv=(()=>{class n{constructor(s,l,f,y,D){this._zone=s,this._injector=l,this._exceptionHandler=f,this._componentFactoryResolver=y,this._initStatus=D,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const M=new Z.y(X=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{X.next(this._stable),X.complete()})}),F=new Z.y(X=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{hc.assertNotInAngularZone(),bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,X.next(!0))})})});const Pe=this._zone.onUnstable.subscribe(()=>{hc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{X.next(!1)}))});return()=>{re.unsubscribe(),Pe.unsubscribe()}});this.isStable=(0,Ve.T)(M,F.pipe((0,Me.B)()))}bootstrap(s,l){if(!this._initStatus.done)throw new Ne(405,"");let f;f=s instanceof m0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(f.componentType);const y=function Ow(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Tp),M=f.create(ru.NULL,[],l||f.selector,y),F=M.location.nativeElement,X=M.injector.get(vE,null),re=X&&M.injector.get(EE);return X&&re&&re.registerApplication(F,X),M.onDestroy(()=>{this.detachView(M.hostView),Tv(this.components,M),re&&re.unregisterApplication(F)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;Tv(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(gE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(li(hc),li(ru),li(Js),li(Hy),li(_v))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let SE=!0,AE=!1;function Bw(){return AE=!0,SE}function Vw(){if(AE)throw new Error("Cannot enable prod mode after platform setup.");SE=!1}let Uw=(()=>{class n{}return n.__NG_ELEMENT_ID__=jw,n})();function jw(n){return function Hw(n,r,s){if(Gt(n)&&!s){const l=Nr(n.index,r);return new im(l,l)}return 47&n.type?new im(r[16],r):null}(I(),P(),16==(16&n))}class OE{constructor(){}supports(r){return nf(r)}create(r){return new Kw(r)}}const Yw=(n,r)=>r;class Kw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Yw}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,y=null;for(;s||l;){const D=!l||s&&s.currentIndex<kE(l,f,y)?s:l,M=kE(D,f,y),F=D.currentIndex;if(D===l)f--,l=l._nextRemoved;else if(s=s._next,null==D.previousIndex)f++;else{y||(y=[]);const X=M-f,re=F-f;if(X!=re){for(let ct=0;ct<X;ct++){const Pt=ct<y.length?y[ct]:y[ct]=0,fn=Pt+ct;re<=fn&&fn<X&&(y[ct]=Pt+1)}y[D.previousIndex]=re-X}}M!==F&&r(D,M,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!nf(r))throw new Ne(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,D,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let M=0;M<this.length;M++)y=r[M],D=this._trackByFn(M,y),null!==s&&Object.is(s.trackById,D)?(l&&(s=this._verifyReinsertion(s,y,D,M)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,D,M),l=!0),s=s._next}else f=0,function mg(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[sh()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,M=>{D=this._trackByFn(f,M),null!==s&&Object.is(s.trackById,D)?(l&&(s=this._verifyReinsertion(s,M,D,f)),Object.is(s.item,M)||this._addIdentityChange(s,M)):(s=this._mismatch(s,M,D,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,y,f)):r=this._addAfter(new Zw(s,l),y,f),r}_verifyReinsertion(r,s,l,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new PE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Zw{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class PE{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new Xw,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kE(n,r,s){const l=n.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class NE{constructor(){}supports(r){return r instanceof Map||yg(r)}create(){return new Qw}}class Qw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||yg(r)))throw new Ne(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const y=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,y)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const y=f._prev,D=f._next;return y&&(y._next=D),D&&(D._prev=y),f._next=null,f._prev=null,f}const l=new Jw(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class Jw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FE(){return new Mv([new OE])}let Mv=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||FE()),deps:[[n,new ul,new ta]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new Ne(901,"")}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:FE}),n})();function LE(){return new Ov([new NE])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||LE()),deps:[[n,new ul,new ta]]}}find(s){const l=this.factories.find(y=>y.supports(s));if(l)return l;throw new Ne(901,"")}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:LE}),n})();const nI=wE(null,"core",[{provide:pE,useValue:"unknown"},{provide:CE,deps:[ru]},{provide:EE,deps:[]},{provide:mE,deps:[]}]);let rI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(li(Dv))},n.\u0275mod=_t({type:n}),n.\u0275inj=St({}),n})()},4182:(On,Ct,L)=>{"use strict";L.d(Ct,{qu:()=>ir,NI:()=>Ci,u:()=>Tr,sg:()=>Gi,u5:()=>bi,JU:()=>ee,a5:()=>lr,JJ:()=>ur,JL:()=>ar,On:()=>nr,UX:()=>ki,kI:()=>mt,_Y:()=>fr});var a=L(5e3),J=L(9808),Z=L(2916),Ve=L(6688),Me=L(4850),ae=L(7830),we=L(5254);function Ee(G,B){return new Z.y(N=>{const se=G.length;if(0===se)return void N.complete();const jt=new Array(se);let v=0,P=0;for(let b=0;b<se;b++){const E=(0,we.D)(G[b]);let I=!1;N.add(E.subscribe({next:q=>{I||(I=!0,P++),jt[b]=q},error:q=>N.error(q),complete:()=>{v++,(v===se||!I)&&(P===se&&N.next(B?B.reduce((q,fe,Le)=>(q[fe]=jt[Le],q),{}):jt),N.complete())}}))}})}let oe=(()=>{class G{constructor(N,se){this._renderer=N,this._elementRef=se,this.onChange=jt=>{},this.onTouched=()=>{}}setProperty(N,se){this._renderer.setProperty(this._elementRef.nativeElement,N,se)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(a.Qsj),a.Y36(a.SBq))},G.\u0275dir=a.lG2({type:G}),G})(),pe=(()=>{class G extends oe{}return G.\u0275fac=function(){let B;return function(se){return(B||(B=a.n5z(G)))(se||G)}}(),G.\u0275dir=a.lG2({type:G,features:[a.qOj]}),G})();const ee=new a.OlP("NgValueAccessor"),Ne={provide:ee,useExisting:(0,a.Gpc)(()=>$e),multi:!0},ke=new a.OlP("CompositionEventMode");let $e=(()=>{class G extends oe{constructor(N,se,jt){super(N,se),this._compositionMode=jt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _e(){const G=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(ke,8))},G.\u0275dir=a.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,se){1&N&&a.NdJ("input",function(v){return se._handleInput(v.target.value)})("blur",function(){return se.onTouched()})("compositionstart",function(){return se._compositionStart()})("compositionend",function(v){return se._compositionEnd(v.target.value)})},features:[a._Bn([Ne]),a.qOj]}),G})();function Dt(G){return null==G||0===G.length}function ve(G){return null!=G&&"number"==typeof G.length}const pt=new a.OlP("NgValidators"),He=new a.OlP("NgAsyncValidators"),dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mt{static min(B){return function Ft(G){return B=>{if(Dt(B.value)||Dt(G))return null;const N=parseFloat(B.value);return!isNaN(N)&&N<G?{min:{min:G,actual:B.value}}:null}}(B)}static max(B){return function Ye(G){return B=>{if(Dt(B.value)||Dt(G))return null;const N=parseFloat(B.value);return!isNaN(N)&&N>G?{max:{max:G,actual:B.value}}:null}}(B)}static required(B){return function st(G){return Dt(G.value)?{required:!0}:null}(B)}static requiredTrue(B){return function Fe(G){return!0===G.value?null:{required:!0}}(B)}static email(B){return function me(G){return Dt(G.value)||dt.test(G.value)?null:{email:!0}}(B)}static minLength(B){return function Se(G){return B=>Dt(B.value)||!ve(B.value)?null:B.value.length<G?{minlength:{requiredLength:G,actualLength:B.value.length}}:null}(B)}static maxLength(B){return function Ke(G){return B=>ve(B.value)&&B.value.length>G?{maxlength:{requiredLength:G,actualLength:B.value.length}}:null}(B)}static pattern(B){return function ut(G){if(!G)return Lt;let B,N;return"string"==typeof G?(N="","^"!==G.charAt(0)&&(N+="^"),N+=G,"$"!==G.charAt(G.length-1)&&(N+="$"),B=new RegExp(N)):(N=G.toString(),B=G),se=>{if(Dt(se.value))return null;const jt=se.value;return B.test(jt)?null:{pattern:{requiredPattern:N,actualValue:jt}}}}(B)}static nullValidator(B){return null}static compose(B){return U(B)}static composeAsync(B){return rn(B)}}function Lt(G){return null}function un(G){return null!=G}function vt(G){const B=(0,a.QGY)(G)?(0,we.D)(G):G;return(0,a.CqO)(B),B}function At(G){let B={};return G.forEach(N=>{B=null!=N?Object.assign(Object.assign({},B),N):B}),0===Object.keys(B).length?null:B}function ze(G,B){return B.map(N=>N(G))}function Et(G){return G.map(B=>function at(G){return!G.validate}(B)?B:N=>B.validate(N))}function U(G){if(!G)return null;const B=G.filter(un);return 0==B.length?null:function(N){return At(ze(N,B))}}function Qe(G){return null!=G?U(Et(G)):null}function rn(G){if(!G)return null;const B=G.filter(un);return 0==B.length?null:function(N){return function Ce(...G){if(1===G.length){const B=G[0];if((0,Ve.k)(B))return Ee(B,null);if((0,ae.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const N=Object.keys(B);return Ee(N.map(se=>B[se]),N)}}if("function"==typeof G[G.length-1]){const B=G.pop();return Ee(G=1===G.length&&(0,Ve.k)(G[0])?G[0]:G,null).pipe((0,Me.U)(N=>B(...N)))}return Ee(G,null)}(ze(N,B).map(vt)).pipe((0,Me.U)(At))}}function St(G){return null!=G?rn(Et(G)):null}function hn(G,B){return null===G?[B]:Array.isArray(G)?[...G,B]:[G,B]}function mn(G){return G._rawValidators}function jn(G){return G._rawAsyncValidators}function Fn(G){return G?Array.isArray(G)?G:[G]:[]}function Dn(G,B){return Array.isArray(G)?G.includes(B):G===B}function er(G,B){const N=Fn(B);return Fn(G).forEach(jt=>{Dn(N,jt)||N.push(jt)}),N}function Br(G,B){return Fn(B).filter(N=>!Dn(G,N))}class rr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=Qe(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,N){return!!this.control&&this.control.hasError(B,N)}getError(B,N){return this.control?this.control.getError(B,N):null}}class lr extends rr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pn extends rr{get formDirective(){return null}get path(){return null}}class Ar{constructor(B){this._cd=B}is(B){var N,se,jt;return"submitted"===B?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(jt=null===(se=this._cd)||void 0===se?void 0:se.control)||void 0===jt?void 0:jt[B])}}let ur=(()=>{class G extends Ar{constructor(N){super(N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(lr,2))},G.\u0275dir=a.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,se){2&N&&a.ekj("ng-untouched",se.is("untouched"))("ng-touched",se.is("touched"))("ng-pristine",se.is("pristine"))("ng-dirty",se.is("dirty"))("ng-valid",se.is("valid"))("ng-invalid",se.is("invalid"))("ng-pending",se.is("pending"))},features:[a.qOj]}),G})(),ar=(()=>{class G extends Ar{constructor(N){super(N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(pn,10))},G.\u0275dir=a.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(N,se){2&N&&a.ekj("ng-untouched",se.is("untouched"))("ng-touched",se.is("touched"))("ng-pristine",se.is("pristine"))("ng-dirty",se.is("dirty"))("ng-valid",se.is("valid"))("ng-invalid",se.is("invalid"))("ng-pending",se.is("pending"))("ng-submitted",se.is("submitted"))},features:[a.qOj]}),G})();function Rn(G,B){return[...B.path,G]}function Vt(G,B){Vn(G,B),B.valueAccessor.writeValue(G.value),function De(G,B){B.valueAccessor.registerOnChange(N=>{G._pendingValue=N,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&Rt(G,B)})}(G,B),function _t(G,B){const N=(se,jt)=>{B.valueAccessor.writeValue(se),jt&&B.viewToModelUpdate(se)};G.registerOnChange(N),B._registerOnDestroy(()=>{G._unregisterOnChange(N)})}(G,B),function Ze(G,B){B.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&Rt(G,B),"submit"!==G.updateOn&&G.markAsTouched()})}(G,B),function Kn(G,B){if(B.valueAccessor.setDisabledState){const N=se=>{B.valueAccessor.setDisabledState(se)};G.registerOnDisabledChange(N),B._registerOnDestroy(()=>{G._unregisterOnDisabledChange(N)})}}(G,B)}function wn(G,B,N=!0){const se=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(se),B.valueAccessor.registerOnTouched(se)),We(G,B),G&&(B._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Yn(G,B){G.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(B)})}function Vn(G,B){const N=mn(G);null!==B.validator?G.setValidators(hn(N,B.validator)):"function"==typeof N&&G.setValidators([N]);const se=jn(G);null!==B.asyncValidator?G.setAsyncValidators(hn(se,B.asyncValidator)):"function"==typeof se&&G.setAsyncValidators([se]);const jt=()=>G.updateValueAndValidity();Yn(B._rawValidators,jt),Yn(B._rawAsyncValidators,jt)}function We(G,B){let N=!1;if(null!==G){if(null!==B.validator){const jt=mn(G);if(Array.isArray(jt)&&jt.length>0){const v=jt.filter(P=>P!==B.validator);v.length!==jt.length&&(N=!0,G.setValidators(v))}}if(null!==B.asyncValidator){const jt=jn(G);if(Array.isArray(jt)&&jt.length>0){const v=jt.filter(P=>P!==B.asyncValidator);v.length!==jt.length&&(N=!0,G.setAsyncValidators(v))}}}const se=()=>{};return Yn(B._rawValidators,se),Yn(B._rawAsyncValidators,se),N}function Rt(G,B){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function _n(G,B){if(!G.hasOwnProperty("model"))return!1;const N=G.model;return!!N.isFirstChange()||!Object.is(B,N.currentValue)}function Te(G,B){if(!B)return null;let N,se,jt;return Array.isArray(B),B.forEach(v=>{v.constructor===$e?N=v:function Un(G){return Object.getPrototypeOf(G.constructor)===pe}(v)?se=v:jt=v}),jt||se||N||null}function $t(G,B){const N=G.indexOf(B);N>-1&&G.splice(N,1)}const Qt="VALID",an="INVALID",En="PENDING",ft="DISABLED";function Pn(G){return(ei(G)?G.validators:G)||null}function hr(G){return Array.isArray(G)?Qe(G):G||null}function Xr(G,B){return(ei(B)?B.asyncValidators:G)||null}function Mr(G){return Array.isArray(G)?St(G):G||null}function ei(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}const Or=G=>G instanceof Ci,si=G=>G instanceof gi,pi=G=>G instanceof Mi;function br(G){return Or(G)?G.value:G.getRawValue()}function Hi(G,B){const N=si(G),se=G.controls;if(!(N?Object.keys(se):se).length)throw new a.vHH(1e3,"");if(!se[B])throw new a.vHH(1001,"")}function Ni(G,B){si(G),G._forEachChild((se,jt)=>{if(void 0===B[jt])throw new a.vHH(1002,"")})}class Si{constructor(B,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=N,this._composedValidatorFn=hr(this._rawValidators),this._composedAsyncValidatorFn=Mr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Qt}get invalid(){return this.status===an}get pending(){return this.status==En}get disabled(){return this.status===ft}get enabled(){return this.status!==ft}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=hr(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=Mr(B)}addValidators(B){this.setValidators(er(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(er(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Br(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Br(B,this._rawAsyncValidators))}hasValidator(B){return Dn(this._rawValidators,B)}hasAsyncValidator(B){return Dn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=En,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=ft,this.errors=null,this._forEachChild(se=>{se.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(se=>se(!0))}enable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=Qt,this._forEachChild(se=>{se.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(se=>se(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qt||this.status===En)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ft:Qt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=En,this._hasOwnPendingAsyncValidator=!0;const N=vt(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(se=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(se,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,N={}){this.errors=B,this._updateControlsErrors(!1!==N.emitEvent)}get(B){return function cn(G,B,N){if(null==B||(Array.isArray(B)||(B=B.split(N)),Array.isArray(B)&&0===B.length))return null;let se=G;return B.forEach(jt=>{se=si(se)?se.controls.hasOwnProperty(jt)?se.controls[jt]:null:pi(se)&&se.at(jt)||null}),se}(this,B,".")}getError(B,N){const se=N?this.get(N):this;return se&&se.errors?se.errors[B]:null}hasError(B,N){return!!this.getError(B,N)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?ft:this.errors?an:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(En)?En:this._anyControlsHaveStatus(an)?an:Qt}_anyControlsHaveStatus(B){return this._anyControls(N=>N.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_isBoxedValue(B){return"object"==typeof B&&null!==B&&2===Object.keys(B).length&&"value"in B&&"disabled"in B}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){ei(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ci extends Si{constructor(B=null,N,se){super(Pn(N),Xr(se,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ei(N)&&N.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(B)?B.value:B)}setValue(B,N={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(se=>se(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(B,N={}){this.setValue(B,N)}reset(B=this.defaultValue,N={}){this._applyFormState(B),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){$t(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){$t(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){this._isBoxedValue(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}}class gi extends Si{constructor(B,N,se){super(Pn(N),Xr(se,N)),this.controls=B,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,N){return this.controls[B]?this.controls[B]:(this.controls[B]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(B,N,se={}){this.registerControl(B,N),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}removeControl(B,N={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(B,N,se={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],N&&this.registerControl(B,N),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,N={}){Ni(this,B),Object.keys(B).forEach(se=>{Hi(this,se),this.controls[se].setValue(B[se],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(B,N={}){null!=B&&(Object.keys(B).forEach(se=>{this.controls[se]&&this.controls[se].patchValue(B[se],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(B={},N={}){this._forEachChild((se,jt)=>{se.reset(B[jt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(B,N,se)=>(B[se]=br(N),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(N,se)=>!!se._syncPendingControls()||N);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(N=>{const se=this.controls[N];se&&B(se,N)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const N of Object.keys(this.controls)){const se=this.controls[N];if(this.contains(N)&&B(se))return!0}return!1}_reduceValue(){return this._reduceChildren({},(B,N,se)=>((N.enabled||this.disabled)&&(B[se]=N.value),B))}_reduceChildren(B,N){let se=B;return this._forEachChild((jt,v)=>{se=N(se,jt,v)}),se}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Mi extends Si{constructor(B,N,se){super(Pn(N),Xr(se,N)),this.controls=B,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[B]}push(B,N={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(B,N,se={}){this.controls.splice(B,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:se.emitEvent})}removeAt(B,N={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(B,N,se={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),this.controls.splice(B,1),N&&(this.controls.splice(B,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,N={}){Ni(this,B),B.forEach((se,jt)=>{Hi(this,jt),this.at(jt).setValue(se,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(B,N={}){null!=B&&(B.forEach((se,jt)=>{this.at(jt)&&this.at(jt).patchValue(se,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(B=[],N={}){this._forEachChild((se,jt)=>{se.reset(B[jt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(B=>br(B))}clear(B={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_syncPendingControls(){let B=this.controls.reduce((N,se)=>!!se._syncPendingControls()||N,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((N,se)=>{B(N,se)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(N=>N.enabled&&B(N))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}}const kt={provide:lr,useExisting:(0,a.Gpc)(()=>nr)},Nn=(()=>Promise.resolve(null))();let nr=(()=>{class G extends lr{constructor(N,se,jt,v,P){super(),this._changeDetectorRef=P,this.control=new Ci,this._registered=!1,this.update=new a.vpe,this._parent=N,this._setValidators(se),this._setAsyncValidators(jt),this.valueAccessor=Te(0,v)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const se=N.name.previousValue;this.formDirective.removeControl({name:se,path:this._getPath(se)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),_n(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Nn.then(()=>{var se;this.control.setValue(N,{emitViewToModelChange:!1}),null===(se=this._changeDetectorRef)||void 0===se||se.markForCheck()})}_updateDisabled(N){const se=N.isDisabled.currentValue,jt=""===se||se&&"false"!==se;Nn.then(()=>{var v;jt&&!this.control.disabled?this.control.disable():!jt&&this.control.disabled&&this.control.enable(),null===(v=this._changeDetectorRef)||void 0===v||v.markForCheck()})}_getPath(N){return this._parent?Rn(N,this._parent):[N]}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(pn,9),a.Y36(pt,10),a.Y36(He,10),a.Y36(ee,10),a.Y36(a.sBO,8))},G.\u0275dir=a.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([kt]),a.qOj,a.TTD]}),G})(),fr=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275dir=a.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),ot=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({}),G})();const ri=new a.OlP("NgModelWithFormControlWarning"),ds={provide:pn,useExisting:(0,a.Gpc)(()=>Gi)};let Gi=(()=>{class G extends pn{constructor(N,se){super(),this.validators=N,this.asyncValidators=se,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(N),this._setAsyncValidators(se)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(We(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const se=this.form.get(N.path);return Vt(se,N),se.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),se}getControl(N){return this.form.get(N.path)}removeControl(N){wn(N.control||null,N,!1),$t(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,se){this.form.get(N.path).setValue(se)}onSubmit(N){return this.submitted=!0,function xe(G,B){G._syncPendingControls(),B.forEach(N=>{const se=N.control;"submit"===se.updateOn&&se._pendingChange&&(N.viewToModelUpdate(se._pendingValue),se._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(N),!1}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const se=N.control,jt=this.form.get(N.path);se!==jt&&(wn(se||null,N),Or(jt)&&(Vt(jt,N),N.control=jt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const se=this.form.get(N.path);(function dn(G,B){Vn(G,B)})(se,N),se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const se=this.form.get(N.path);se&&function tt(G,B){return We(G,B)}(se,N)&&se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vn(this.form,this),this._oldForm&&We(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(pt,10),a.Y36(He,10))},G.\u0275dir=a.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(N,se){1&N&&a.NdJ("submit",function(v){return se.onSubmit(v)})("reset",function(){return se.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([ds]),a.qOj,a.TTD]}),G})();const qr={provide:lr,useExisting:(0,a.Gpc)(()=>Tr)};let Tr=(()=>{class G extends lr{constructor(N,se,jt,v,P){super(),this._ngModelWarningConfig=P,this._added=!1,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=N,this._setValidators(se),this._setAsyncValidators(jt),this.valueAccessor=Te(0,v)}set isDisabled(N){}ngOnChanges(N){this._added||this._setUpControl(),_n(N,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}get path(){return Rn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(N){return new(N||G)(a.Y36(pn,13),a.Y36(pt,10),a.Y36(He,10),a.Y36(ee,10),a.Y36(ri,8))},G.\u0275dir=a.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([qr]),a.qOj,a.TTD]}),G})(),ni=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[[ot]]}),G})(),bi=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[ni]}),G})(),ki=(()=>{class G{static withConfig(N){return{ngModule:G,providers:[{provide:ri,useValue:N.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[ni]}),G})(),ir=(()=>{class G{group(N,se=null){const jt=this._reduceControls(N);let b,v=null,P=null;return null!=se&&(function Ji(G){return void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn}(se)?(v=null!=se.validators?se.validators:null,P=null!=se.asyncValidators?se.asyncValidators:null,b=null!=se.updateOn?se.updateOn:void 0):(v=null!=se.validator?se.validator:null,P=null!=se.asyncValidator?se.asyncValidator:null)),new gi(jt,{asyncValidators:P,updateOn:b,validators:v})}control(N,se,jt){return new Ci(N,se,jt)}array(N,se,jt){const v=N.map(P=>this._createControl(P));return new Mi(v,se,jt)}_reduceControls(N){const se={};return Object.keys(N).forEach(jt=>{se[jt]=this._createControl(N[jt])}),se}_createControl(N){return Or(N)||si(N)||pi(N)?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}}return G.\u0275fac=function(N){return new(N||G)},G.\u0275prov=a.Yz7({token:G,factory:G.\u0275fac,providedIn:ki}),G})()},2313:(On,Ct,L)=>{"use strict";L.d(Ct,{b2:()=>rr,H7:()=>Ze,q6:()=>er});var a=L(9808),J=L(5e3);class Z extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ve extends Z{static makeCurrent(){(0,a.HT)(new Ve)}onAndCancel(je,Ae,lt){return je.addEventListener(Ae,lt,!1),()=>{je.removeEventListener(Ae,lt,!1)}}dispatchEvent(je,Ae){je.dispatchEvent(Ae)}remove(je){je.parentNode&&je.parentNode.removeChild(je)}createElement(je,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(je){return je.nodeType===Node.ELEMENT_NODE}isShadowRoot(je){return je instanceof DocumentFragment}getGlobalEventTarget(je,Ae){return"window"===Ae?window:"document"===Ae?je:"body"===Ae?je.body:null}getBaseHref(je){const Ae=function ae(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==Ae?null:function Ce(tt){we=we||document.createElement("a"),we.setAttribute("href",tt);const je=we.pathname;return"/"===je.charAt(0)?je:`/${je}`}(Ae)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(je){return(0,a.Mx)(document.cookie,je)}}let we,Me=null;const Ee=new J.OlP("TRANSITION_ID"),pe=[{provide:J.ip1,useFactory:function oe(tt,je,Ae){return()=>{Ae.get(J.CZH).donePromise.then(()=>{const lt=(0,a.q)(),qt=je.querySelectorAll(`style[ng-transition="${tt}"]`);for(let _n=0;_n<qt.length;_n++)lt.remove(qt[_n])})}},deps:[Ee,a.K0,J.zs3],multi:!0}];class ee{static init(){(0,J.VLi)(new ee)}addToWindow(je){J.dqk.getAngularTestability=(lt,qt=!0)=>{const _n=je.findTestabilityInTree(lt,qt);if(null==_n)throw new Error("Could not find testability for element.");return _n},J.dqk.getAllAngularTestabilities=()=>je.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>je.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(lt=>{const qt=J.dqk.getAllAngularTestabilities();let _n=qt.length,Un=!1;const xe=function(Te){Un=Un||Te,_n--,0==_n&&lt(Un)};qt.forEach(function(Te){Te.whenStable(xe)})})}findTestabilityInTree(je,Ae,lt){if(null==Ae)return null;const qt=je.getTestability(Ae);return null!=qt?qt:lt?(0,a.q)().isShadowRoot(Ae)?this.findTestabilityInTree(je,Ae.host,!0):this.findTestabilityInTree(je,Ae.parentElement,!0):null}}let ce=(()=>{class tt{build(){return new XMLHttpRequest}}return tt.\u0275fac=function(Ae){return new(Ae||tt)},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const Xe=new J.OlP("EventManagerPlugins");let Ne=(()=>{class tt{constructor(Ae,lt){this._zone=lt,this._eventNameToPlugin=new Map,Ae.forEach(qt=>qt.manager=this),this._plugins=Ae.slice().reverse()}addEventListener(Ae,lt,qt){return this._findPluginFor(lt).addEventListener(Ae,lt,qt)}addGlobalEventListener(Ae,lt,qt){return this._findPluginFor(lt).addGlobalEventListener(Ae,lt,qt)}getZone(){return this._zone}_findPluginFor(Ae){const lt=this._eventNameToPlugin.get(Ae);if(lt)return lt;const qt=this._plugins;for(let _n=0;_n<qt.length;_n++){const Un=qt[_n];if(Un.supports(Ae))return this._eventNameToPlugin.set(Ae,Un),Un}throw new Error(`No event manager plugin found for event ${Ae}`)}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(Xe),J.LFG(J.R0b))},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class _e{constructor(je){this._doc=je}addGlobalEventListener(je,Ae,lt){const qt=(0,a.q)().getGlobalEventTarget(this._doc,je);if(!qt)throw new Error(`Unsupported event target ${qt} for event ${Ae}`);return this.addEventListener(qt,Ae,lt)}}let ke=(()=>{class tt{constructor(){this._stylesSet=new Set}addStyles(Ae){const lt=new Set;Ae.forEach(qt=>{this._stylesSet.has(qt)||(this._stylesSet.add(qt),lt.add(qt))}),this.onStylesAdded(lt)}onStylesAdded(Ae){}getAllStyles(){return Array.from(this._stylesSet)}}return tt.\u0275fac=function(Ae){return new(Ae||tt)},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),$e=(()=>{class tt extends ke{constructor(Ae){super(),this._doc=Ae,this._hostNodes=new Map,this._hostNodes.set(Ae.head,[])}_addStylesToHost(Ae,lt,qt){Ae.forEach(_n=>{const Un=this._doc.createElement("style");Un.textContent=_n,qt.push(lt.appendChild(Un))})}addHost(Ae){const lt=[];this._addStylesToHost(this._stylesSet,Ae,lt),this._hostNodes.set(Ae,lt)}removeHost(Ae){const lt=this._hostNodes.get(Ae);lt&&lt.forEach(Dt),this._hostNodes.delete(Ae)}onStylesAdded(Ae){this._hostNodes.forEach((lt,qt)=>{this._addStylesToHost(Ae,qt,lt)})}ngOnDestroy(){this._hostNodes.forEach(Ae=>Ae.forEach(Dt))}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(a.K0))},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();function Dt(tt){(0,a.q)().remove(tt)}const ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g;function Fe(tt,je,Ae){for(let lt=0;lt<je.length;lt++){let qt=je[lt];Array.isArray(qt)?Fe(tt,qt,Ae):(qt=qt.replace(pt,tt),Ae.push(qt))}return Ae}function me(tt){return je=>{if("__ngUnwrap__"===je)return tt;!1===tt(je)&&(je.preventDefault(),je.returnValue=!1)}}let Ke=(()=>{class tt{constructor(Ae,lt,qt){this.eventManager=Ae,this.sharedStylesHost=lt,this.appId=qt,this.rendererByCompId=new Map,this.defaultRenderer=new ut(Ae)}createRenderer(Ae,lt){if(!Ae||!lt)return this.defaultRenderer;switch(lt.encapsulation){case J.ifc.Emulated:{let qt=this.rendererByCompId.get(lt.id);return qt||(qt=new vt(this.eventManager,this.sharedStylesHost,lt,this.appId),this.rendererByCompId.set(lt.id,qt)),qt.applyToHost(Ae),qt}case 1:case J.ifc.ShadowDom:return new At(this.eventManager,this.sharedStylesHost,Ae,lt);default:if(!this.rendererByCompId.has(lt.id)){const qt=Fe(lt.id,lt.styles,[]);this.sharedStylesHost.addStyles(qt),this.rendererByCompId.set(lt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(Ne),J.LFG($e),J.LFG(J.AFp))},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class ut{constructor(je){this.eventManager=je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(je,Ae){return Ae?document.createElementNS(ve[Ae]||Ae,je):document.createElement(je)}createComment(je){return document.createComment(je)}createText(je){return document.createTextNode(je)}appendChild(je,Ae){je.appendChild(Ae)}insertBefore(je,Ae,lt){je&&je.insertBefore(Ae,lt)}removeChild(je,Ae){je&&je.removeChild(Ae)}selectRootElement(je,Ae){let lt="string"==typeof je?document.querySelector(je):je;if(!lt)throw new Error(`The selector "${je}" did not match any elements`);return Ae||(lt.textContent=""),lt}parentNode(je){return je.parentNode}nextSibling(je){return je.nextSibling}setAttribute(je,Ae,lt,qt){if(qt){Ae=qt+":"+Ae;const _n=ve[qt];_n?je.setAttributeNS(_n,Ae,lt):je.setAttribute(Ae,lt)}else je.setAttribute(Ae,lt)}removeAttribute(je,Ae,lt){if(lt){const qt=ve[lt];qt?je.removeAttributeNS(qt,Ae):je.removeAttribute(`${lt}:${Ae}`)}else je.removeAttribute(Ae)}addClass(je,Ae){je.classList.add(Ae)}removeClass(je,Ae){je.classList.remove(Ae)}setStyle(je,Ae,lt,qt){qt&(J.JOm.DashCase|J.JOm.Important)?je.style.setProperty(Ae,lt,qt&J.JOm.Important?"important":""):je.style[Ae]=lt}removeStyle(je,Ae,lt){lt&J.JOm.DashCase?je.style.removeProperty(Ae):je.style[Ae]=""}setProperty(je,Ae,lt){je[Ae]=lt}setValue(je,Ae){je.nodeValue=Ae}listen(je,Ae,lt){return"string"==typeof je?this.eventManager.addGlobalEventListener(je,Ae,me(lt)):this.eventManager.addEventListener(je,Ae,me(lt))}}class vt extends ut{constructor(je,Ae,lt,qt){super(je),this.component=lt;const _n=Fe(qt+"-"+lt.id,lt.styles,[]);Ae.addStyles(_n),this.contentAttr=function Ye(tt){return"_ngcontent-%COMP%".replace(pt,tt)}(qt+"-"+lt.id),this.hostAttr=function st(tt){return"_nghost-%COMP%".replace(pt,tt)}(qt+"-"+lt.id)}applyToHost(je){super.setAttribute(je,this.hostAttr,"")}createElement(je,Ae){const lt=super.createElement(je,Ae);return super.setAttribute(lt,this.contentAttr,""),lt}}class At extends ut{constructor(je,Ae,lt,qt){super(je),this.sharedStylesHost=Ae,this.hostEl=lt,this.shadowRoot=lt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _n=Fe(qt.id,qt.styles,[]);for(let Un=0;Un<_n.length;Un++){const xe=document.createElement("style");xe.textContent=_n[Un],this.shadowRoot.appendChild(xe)}}nodeOrShadowRoot(je){return je===this.hostEl?this.shadowRoot:je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(je,Ae){return super.appendChild(this.nodeOrShadowRoot(je),Ae)}insertBefore(je,Ae,lt){return super.insertBefore(this.nodeOrShadowRoot(je),Ae,lt)}removeChild(je,Ae){return super.removeChild(this.nodeOrShadowRoot(je),Ae)}parentNode(je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(je)))}}let ze=(()=>{class tt extends _e{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,lt,qt){return Ae.addEventListener(lt,qt,!1),()=>this.removeEventListener(Ae,lt,qt)}removeEventListener(Ae,lt,qt){return Ae.removeEventListener(lt,qt)}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(a.K0))},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const at=["alt","control","meta","shift"],U={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rn={alt:tt=>tt.altKey,control:tt=>tt.ctrlKey,meta:tt=>tt.metaKey,shift:tt=>tt.shiftKey};let St=(()=>{class tt extends _e{constructor(Ae){super(Ae)}supports(Ae){return null!=tt.parseEventName(Ae)}addEventListener(Ae,lt,qt){const _n=tt.parseEventName(lt),Un=tt.eventCallback(_n.fullKey,qt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(Ae,_n.domEventName,Un))}static parseEventName(Ae){const lt=Ae.toLowerCase().split("."),qt=lt.shift();if(0===lt.length||"keydown"!==qt&&"keyup"!==qt)return null;const _n=tt._normalizeKey(lt.pop());let Un="";if(at.forEach(Te=>{const $t=lt.indexOf(Te);$t>-1&&(lt.splice($t,1),Un+=Te+".")}),Un+=_n,0!=lt.length||0===_n.length)return null;const xe={};return xe.domEventName=qt,xe.fullKey=Un,xe}static getEventFullKey(Ae){let lt="",qt=function hn(tt){let je=tt.key;if(null==je){if(je=tt.keyIdentifier,null==je)return"Unidentified";je.startsWith("U+")&&(je=String.fromCharCode(parseInt(je.substring(2),16)),3===tt.location&&Qe.hasOwnProperty(je)&&(je=Qe[je]))}return U[je]||je}(Ae);return qt=qt.toLowerCase()," "===qt?qt="space":"."===qt&&(qt="dot"),at.forEach(_n=>{_n!=qt&&rn[_n](Ae)&&(lt+=_n+".")}),lt+=qt,lt}static eventCallback(Ae,lt,qt){return _n=>{tt.getEventFullKey(_n)===Ae&&qt.runGuarded(()=>lt(_n))}}static _normalizeKey(Ae){return"esc"===Ae?"escape":Ae}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(a.K0))},tt.\u0275prov=J.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const er=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:a.bD},{provide:J.g9A,useValue:function mn(){Ve.makeCurrent(),ee.init()},multi:!0},{provide:a.K0,useFactory:function Fn(){return(0,J.RDi)(document),document},deps:[]}]),Br=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function jn(){return new J.qLn},deps:[]},{provide:Xe,useClass:ze,multi:!0,deps:[a.K0,J.R0b,J.Lbi]},{provide:Xe,useClass:St,multi:!0,deps:[a.K0]},{provide:Ke,useClass:Ke,deps:[Ne,$e,J.AFp]},{provide:J.FYo,useExisting:Ke},{provide:ke,useExisting:$e},{provide:$e,useClass:$e,deps:[a.K0]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b]},{provide:Ne,useClass:Ne,deps:[Xe,J.R0b]},{provide:a.JF,useClass:ce,deps:[]}];let rr=(()=>{class tt{constructor(Ae){if(Ae)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ae){return{ngModule:tt,providers:[{provide:J.AFp,useValue:Ae.appId},{provide:Ee,useExisting:J.AFp},pe]}}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(tt,12))},tt.\u0275mod=J.oAB({type:tt}),tt.\u0275inj=J.cJS({providers:Br,imports:[a.ez,J.hGG]}),tt})();"undefined"!=typeof window&&window;let Ze=(()=>{class tt{}return tt.\u0275fac=function(Ae){return new(Ae||tt)},tt.\u0275prov=J.Yz7({token:tt,factory:function(Ae){let lt=null;return lt=Ae?new(Ae||tt):J.LFG(_t),lt},providedIn:"root"}),tt})(),_t=(()=>{class tt extends Ze{constructor(Ae){super(),this._doc=Ae}sanitize(Ae,lt){if(null==lt)return null;switch(Ae){case J.q3G.NONE:return lt;case J.q3G.HTML:return(0,J.qzn)(lt,"HTML")?(0,J.z3N)(lt):(0,J.EiD)(this._doc,String(lt)).toString();case J.q3G.STYLE:return(0,J.qzn)(lt,"Style")?(0,J.z3N)(lt):lt;case J.q3G.SCRIPT:if((0,J.qzn)(lt,"Script"))return(0,J.z3N)(lt);throw new Error("unsafe value used in a script context");case J.q3G.URL:return(0,J.yhl)(lt),(0,J.qzn)(lt,"URL")?(0,J.z3N)(lt):(0,J.mCW)(String(lt));case J.q3G.RESOURCE_URL:if((0,J.qzn)(lt,"ResourceURL"))return(0,J.z3N)(lt);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ae} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ae){return(0,J.JVY)(Ae)}bypassSecurityTrustStyle(Ae){return(0,J.L6k)(Ae)}bypassSecurityTrustScript(Ae){return(0,J.eBb)(Ae)}bypassSecurityTrustUrl(Ae){return(0,J.LAX)(Ae)}bypassSecurityTrustResourceUrl(Ae){return(0,J.pB0)(Ae)}}return tt.\u0275fac=function(Ae){return new(Ae||tt)(J.LFG(a.K0))},tt.\u0275prov=J.Yz7({token:tt,factory:function(Ae){let lt=null;return lt=Ae?new Ae:function Rt(tt){return new _t(tt.get(a.K0))}(J.LFG(J.zs3)),lt},providedIn:"root"}),tt})()},3442:(On,Ct,L)=>{"use strict";L.d(Ct,{gz:()=>kt,y6:()=>ti,OD:()=>pn,eC:()=>Hn,wm:()=>Io,wN:()=>nl,F0:()=>os,rH:()=>Cs,yS:()=>qs,Bz:()=>as,Hx:()=>an});var a=L(5e3),J=L(2866),Z=L(6688),Ve=L(826),Me=L(448),ae=L(3009);const we={};class Ee{constructor(A){this.resultSelector=A}call(A,S){return S.subscribe(new oe(A,this.resultSelector))}}class oe extends Ve.L{constructor(A,S){super(A),this.resultSelector=S,this.active=0,this.values=[],this.observables=[]}_next(A){this.values.push(we),this.observables.push(A)}_complete(){const A=this.observables,S=A.length;if(0===S)this.destination.complete();else{this.active=S,this.toRespond=S;for(let V=0;V<S;V++)this.add((0,Me.D)(this,A[V],void 0,V))}}notifyComplete(A){0==(this.active-=1)&&this.destination.complete()}notifyNext(A,S,V){const Y=this.values,Be=this.toRespond?Y[V]===we?--this.toRespond:this.toRespond:0;Y[V]=S,0===Be&&(this.resultSelector?this._tryResultSelector(Y):this.destination.next(Y.slice()))}_tryResultSelector(A){let S;try{S=this.resultSelector.apply(this,A)}catch(V){return void this.destination.error(V)}this.destination.next(S)}}var pe=L(2916),ee=L(5254),ce=L(8896);function Xe(R){return new pe.y(A=>{let S;try{S=R()}catch(Y){return void A.error(Y)}return(S?(0,ee.D)(S):(0,ce.c)()).subscribe(A)})}var Ne=L(1086),_e=L(591),ke=L(1737),$e=L(4450),Dt=L(1221),ve=L(1762),pt=L(8929),He=L(1177);function dt(R){return function(S){const V=new mt(R),Y=S.lift(V);return V.caught=Y}}class mt{constructor(A){this.selector=A}call(A,S){return S.subscribe(new Ft(A,this.selector,this.caught))}}class Ft extends He.Ds{constructor(A,S,V){super(A),this.selector=S,this.caught=V}error(A){if(!this.isStopped){let S;try{S=this.selector(A,this.caught)}catch(le){return void super.error(le)}this._unsubscribeAndRecycle();const V=new He.IY(this);this.add(V);const Y=(0,He.ft)(S,V);Y!==V&&this.add(Y)}}}var Ye=L(2198),st=L(3489),Fe=L(4231);function me(R){return function(S){return 0===R?(0,ce.c)():S.lift(new Se(R))}}class Se{constructor(A){if(this.total=A,this.total<0)throw new Fe.W}call(A,S){return S.subscribe(new Ke(A,this.total))}}class Ke extends st.L{constructor(A,S){super(A),this.total=S,this.ring=new Array,this.count=0}_next(A){const S=this.ring,V=this.total,Y=this.count++;S.length<V?S.push(A):S[Y%V]=A}_complete(){const A=this.destination;let S=this.count;if(S>0){const V=this.count>=this.total?this.total:this.count,Y=this.ring;for(let le=0;le<V;le++){const Be=S++%V;A.next(Y[Be])}}A.complete()}}var ut=L(4907),Lt=L(7314),un=L(5379),At=L(2654);class at{constructor(A){this.callback=A}call(A,S){return S.subscribe(new Et(A,this.callback))}}class Et extends st.L{constructor(A,S){super(A),this.add(new At.w(S))}}var U=L(4850),Qe=L(7545),rn=L(2986),St=L(1059),hn=L(2014),mn=L(1406),jn=L(7224),Fn=L(1709),Dn=L(2868),er=L(4327),Br=L(9146),rr=L(9808);class lr{constructor(A,S){this.id=A,this.url=S}}class pn extends lr{constructor(A,S,V="imperative",Y=null){super(A,S),this.navigationTrigger=V,this.restoredState=Y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ar extends lr{constructor(A,S,V){super(A,S),this.urlAfterRedirects=V}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vr extends lr{constructor(A,S,V){super(A,S),this.reason=V}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ir extends lr{constructor(A,S,V){super(A,S),this.error=V}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ur extends lr{constructor(A,S,V,Y){super(A,S),this.urlAfterRedirects=V,this.state=Y}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends lr{constructor(A,S,V,Y){super(A,S),this.urlAfterRedirects=V,this.state=Y}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gt extends lr{constructor(A,S,V,Y,le){super(A,S),this.urlAfterRedirects=V,this.state=Y,this.shouldActivate=le}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qe extends lr{constructor(A,S,V,Y){super(A,S),this.urlAfterRedirects=V,this.state=Y}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ie extends lr{constructor(A,S,V,Y){super(A,S),this.urlAfterRedirects=V,this.state=Y}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kt{constructor(A){this.route=A}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nt{constructor(A){this.route=A}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nn{constructor(A){this.snapshot=A}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(A){this.snapshot=A}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xn{constructor(A){this.snapshot=A}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zn{constructor(A){this.snapshot=A}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ln{constructor(A,S,V){this.routerEvent=A,this.position=S,this.anchor=V}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Hn="primary";class Er{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S[0]:S}return null}getAll(A){if(this.has(A)){const S=this.params[A];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Cr(R){return new Er(R)}const yn="ngNavigationCancelingError";function Wn(R){const A=Error("NavigationCancelingError: "+R);return A[yn]=!0,A}function Rn(R,A,S){const V=S.path.split("/");if(V.length>R.length||"full"===S.pathMatch&&(A.hasChildren()||V.length<R.length))return null;const Y={};for(let le=0;le<V.length;le++){const Be=V[le],it=R[le];if(Be.startsWith(":"))Y[Be.substring(1)]=it;else if(Be!==it.path)return null}return{consumed:R.slice(0,V.length),posParams:Y}}function wn(R,A){const S=R?Object.keys(R):void 0,V=A?Object.keys(A):void 0;if(!S||!V||S.length!=V.length)return!1;let Y;for(let le=0;le<S.length;le++)if(Y=S[le],!Yn(R[Y],A[Y]))return!1;return!0}function Yn(R,A){if(Array.isArray(R)&&Array.isArray(A)){if(R.length!==A.length)return!1;const S=[...R].sort(),V=[...A].sort();return S.every((Y,le)=>V[le]===Y)}return R===A}function Kn(R){return Array.prototype.concat.apply([],R)}function Vn(R){return R.length>0?R[R.length-1]:null}function De(R,A){for(const S in R)R.hasOwnProperty(S)&&A(R[S],S)}function Ze(R){return(0,a.CqO)(R)?R:(0,a.QGY)(R)?(0,ee.D)(Promise.resolve(R)):(0,Ne.of)(R)}const _t={exact:function Ae(R,A,S){if(!Yt(R.segments,A.segments)||!Un(R.segments,A.segments,S)||R.numberOfChildren!==A.numberOfChildren)return!1;for(const V in A.children)if(!R.children[V]||!Ae(R.children[V],A.children[V],S))return!1;return!0},subset:qt},dn={exact:function je(R,A){return wn(R,A)},subset:function lt(R,A){return Object.keys(A).length<=Object.keys(R).length&&Object.keys(A).every(S=>Yn(R[S],A[S]))},ignored:()=>!0};function tt(R,A,S){return _t[S.paths](R.root,A.root,S.matrixParams)&&dn[S.queryParams](R.queryParams,A.queryParams)&&!("exact"===S.fragment&&R.fragment!==A.fragment)}function qt(R,A,S){return _n(R,A,A.segments,S)}function _n(R,A,S,V){if(R.segments.length>S.length){const Y=R.segments.slice(0,S.length);return!(!Yt(Y,S)||A.hasChildren()||!Un(Y,S,V))}if(R.segments.length===S.length){if(!Yt(R.segments,S)||!Un(R.segments,S,V))return!1;for(const Y in A.children)if(!R.children[Y]||!qt(R.children[Y],A.children[Y],V))return!1;return!0}{const Y=S.slice(0,R.segments.length),le=S.slice(R.segments.length);return!!(Yt(R.segments,Y)&&Un(R.segments,Y,V)&&R.children[Hn])&&_n(R.children[Hn],A,le,V)}}function Un(R,A,S){return A.every((V,Y)=>dn[S](R[Y].parameters,V.parameters))}class xe{constructor(A,S,V){this.root=A,this.queryParams=S,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return ft.serialize(this)}}class Te{constructor(A,S){this.segments=A,this.children=S,this.parent=null,De(S,(V,Y)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cn(this)}}class $t{constructor(A,S){this.path=A,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Cr(this.parameters)),this._parameterMap}toString(){return pi(this)}}function Yt(R,A){return R.length===A.length&&R.every((S,V)=>S.path===A[V].path)}class an{}class En{parse(A){const S=new te(A);return new xe(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(A){const S=`/${Pn(A.root,!0)}`,V=function Hi(R){const A=Object.keys(R).map(S=>{const V=R[S];return Array.isArray(V)?V.map(Y=>`${Xr(S)}=${Xr(Y)}`).join("&"):`${Xr(S)}=${Xr(V)}`}).filter(S=>!!S);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${S}${V}${"string"==typeof A.fragment?`#${function Mr(R){return encodeURI(R)}(A.fragment)}`:""}`}}const ft=new En;function cn(R){return R.segments.map(A=>pi(A)).join("/")}function Pn(R,A){if(!R.hasChildren())return cn(R);if(A){const S=R.children[Hn]?Pn(R.children[Hn],!1):"",V=[];return De(R.children,(Y,le)=>{le!==Hn&&V.push(`${le}:${Pn(Y,!1)}`)}),V.length>0?`${S}(${V.join("//")})`:S}{const S=function Qt(R,A){let S=[];return De(R.children,(V,Y)=>{Y===Hn&&(S=S.concat(A(V,Y)))}),De(R.children,(V,Y)=>{Y!==Hn&&(S=S.concat(A(V,Y)))}),S}(R,(V,Y)=>Y===Hn?[Pn(R.children[Hn],!1)]:[`${Y}:${Pn(V,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Hn]?`${cn(R)}/${S[0]}`:`${cn(R)}/(${S.join("//")})`}}function hr(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xr(R){return hr(R).replace(/%3B/gi,";")}function ei(R){return hr(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Or(R){return decodeURIComponent(R)}function si(R){return Or(R.replace(/\+/g,"%20"))}function pi(R){return`${ei(R.path)}${function br(R){return Object.keys(R).map(A=>`;${ei(A)}=${ei(R[A])}`).join("")}(R.parameters)}`}const Ni=/^[^\/()?;=#]+/;function Si(R){const A=R.match(Ni);return A?A[0]:""}const Ci=/^[^=?&#]+/,Mi=/^[^&#]+/;class te{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(A.length>0||Object.keys(S).length>0)&&(V[Hn]=new Te(A,S)),V}parseSegment(){const A=Si(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(A),new $t(Or(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const S=Si(this.remaining);if(!S)return;this.capture(S);let V="";if(this.consumeOptional("=")){const Y=Si(this.remaining);Y&&(V=Y,this.capture(V))}A[Or(S)]=Or(V)}parseQueryParam(A){const S=function gi(R){const A=R.match(Ci);return A?A[0]:""}(this.remaining);if(!S)return;this.capture(S);let V="";if(this.consumeOptional("=")){const Be=function Ai(R){const A=R.match(Mi);return A?A[0]:""}(this.remaining);Be&&(V=Be,this.capture(V))}const Y=si(S),le=si(V);if(A.hasOwnProperty(Y)){let Be=A[Y];Array.isArray(Be)||(Be=[Be],A[Y]=Be),Be.push(le)}else A[Y]=le}parseParens(A){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=Si(this.remaining),Y=this.remaining[V.length];if("/"!==Y&&")"!==Y&&";"!==Y)throw new Error(`Cannot parse url '${this.url}'`);let le;V.indexOf(":")>-1?(le=V.substr(0,V.indexOf(":")),this.capture(le),this.capture(":")):A&&(le=Hn);const Be=this.parseChildren();S[le]=1===Object.keys(Be).length?Be[Hn]:new Te([],Be),this.consumeOptional("//")}return S}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new Error(`Expected "${A}".`)}}class ye{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const S=this.pathFromRoot(A);return S.length>1?S[S.length-2]:null}children(A){const S=Je(A,this._root);return S?S.children.map(V=>V.value):[]}firstChild(A){const S=Je(A,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(A){const S=bt(A,this._root);return S.length<2?[]:S[S.length-2].children.map(Y=>Y.value).filter(Y=>Y!==A)}pathFromRoot(A){return bt(A,this._root).map(S=>S.value)}}function Je(R,A){if(R===A.value)return A;for(const S of A.children){const V=Je(R,S);if(V)return V}return null}function bt(R,A){if(R===A.value)return[A];for(const S of A.children){const V=bt(R,S);if(V.length)return V.unshift(A),V}return[]}class be{constructor(A,S){this.value=A,this.children=S}toString(){return`TreeNode(${this.value})`}}function Oe(R){const A={};return R&&R.children.forEach(S=>A[S.value.outlet]=S),A}class yt extends ye{constructor(A,S){super(A),this.snapshot=S,xi(this,A)}toString(){return this.snapshot.toString()}}function Gt(R,A){const S=function Jt(R,A){const Be=new fr([],{},{},"",{},Hn,A,null,R.root,-1,{});return new xr("",new be(Be,[]))}(R,A),V=new _e.X([new $t("",{})]),Y=new _e.X({}),le=new _e.X({}),Be=new _e.X({}),it=new _e.X(""),ln=new kt(V,Y,Be,it,le,Hn,A,S.root);return ln.snapshot=S.root,new yt(new be(ln,[]),S)}class kt{constructor(A,S,V,Y,le,Be,it,ln){this.url=A,this.params=S,this.queryParams=V,this.fragment=Y,this.data=le,this.outlet=Be,this.component=it,this._futureSnapshot=ln}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,U.U)(A=>Cr(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,U.U)(A=>Cr(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nn(R,A="emptyOnly"){const S=R.pathFromRoot;let V=0;if("always"!==A)for(V=S.length-1;V>=1;){const Y=S[V],le=S[V-1];if(Y.routeConfig&&""===Y.routeConfig.path)V--;else{if(le.component)break;V--}}return function nr(R){return R.reduce((A,S)=>({params:Object.assign(Object.assign({},A.params),S.params),data:Object.assign(Object.assign({},A.data),S.data),resolve:Object.assign(Object.assign({},A.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(V))}class fr{constructor(A,S,V,Y,le,Be,it,ln,Jn,di,qn){this.url=A,this.params=S,this.queryParams=V,this.fragment=Y,this.data=le,this.outlet=Be,this.component=it,this.routeConfig=ln,this._urlSegment=Jn,this._lastPathIndex=di,this._resolve=qn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xr extends ye{constructor(A,S){super(S),this.url=A,xi(this,S)}toString(){return Oi(this._root)}}function xi(R,A){A.value._routerState=R,A.children.forEach(S=>xi(R,S))}function Oi(R){const A=R.children.length>0?` { ${R.children.map(Oi).join(", ")} } `:"";return`${R.value}${A}`}function rt(R){if(R.snapshot){const A=R.snapshot,S=R._futureSnapshot;R.snapshot=S,wn(A.queryParams,S.queryParams)||R.queryParams.next(S.queryParams),A.fragment!==S.fragment&&R.fragment.next(S.fragment),wn(A.params,S.params)||R.params.next(S.params),function Vt(R,A){if(R.length!==A.length)return!1;for(let S=0;S<R.length;++S)if(!wn(R[S],A[S]))return!1;return!0}(A.url,S.url)||R.url.next(S.url),wn(A.data,S.data)||R.data.next(S.data)}else R.snapshot=R._futureSnapshot,R.data.next(R._futureSnapshot.data)}function ot(R,A){const S=wn(R.params,A.params)&&function Ot(R,A){return Yt(R,A)&&R.every((S,V)=>wn(S.parameters,A[V].parameters))}(R.url,A.url);return S&&!(!R.parent!=!A.parent)&&(!R.parent||ot(R.parent,A.parent))}function on(R,A,S){if(S&&R.shouldReuseRoute(A.value,S.value.snapshot)){const V=S.value;V._futureSnapshot=A.value;const Y=function In(R,A,S){return A.children.map(V=>{for(const Y of S.children)if(R.shouldReuseRoute(V.value,Y.value.snapshot))return on(R,V,Y);return on(R,V)})}(R,A,S);return new be(V,Y)}{if(R.shouldAttach(A.value)){const le=R.retrieve(A.value);if(null!==le){const Be=le.route;return Be.value._futureSnapshot=A.value,Be.children=A.children.map(it=>on(R,it)),Be}}const V=function Qn(R){return new kt(new _e.X(R.url),new _e.X(R.params),new _e.X(R.queryParams),new _e.X(R.fragment),new _e.X(R.data),R.outlet,R.component,R)}(A.value),Y=A.children.map(le=>on(R,le));return new be(V,Y)}}function _i(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function Yr(R){return"object"==typeof R&&null!=R&&R.outlets}function ds(R,A,S,V,Y){let le={};if(V&&De(V,(it,ln)=>{le[ln]=Array.isArray(it)?it.map(Jn=>`${Jn}`):`${it}`}),R===A)return new xe(S,le,Y);const Be=Gi(R,A,S);return new xe(Be,le,Y)}function Gi(R,A,S){const V={};return De(R.children,(Y,le)=>{V[le]=Y===A?S:Gi(Y,A,S)}),new Te(R.segments,V)}class bs{constructor(A,S,V){if(this.isAbsolute=A,this.numberOfDoubleDots=S,this.commands=V,A&&V.length>0&&_i(V[0]))throw new Error("Root segment cannot have matrix parameters");const Y=V.find(Yr);if(Y&&Y!==Vn(V))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qi{constructor(A,S,V){this.segmentGroup=A,this.processChildren=S,this.index=V}}function Tr(R,A,S){if(R||(R=new Te([],{})),0===R.segments.length&&R.hasChildren())return wr(R,A,S);const V=function zi(R,A,S){let V=0,Y=A;const le={match:!1,pathIndex:0,commandIndex:0};for(;Y<R.segments.length;){if(V>=S.length)return le;const Be=R.segments[Y],it=S[V];if(Yr(it))break;const ln=`${it}`,Jn=V<S.length-1?S[V+1]:null;if(Y>0&&void 0===ln)break;if(ln&&Jn&&"object"==typeof Jn&&void 0===Jn.outlets){if(!is(ln,Jn,Be))return le;V+=2}else{if(!is(ln,{},Be))return le;V++}Y++}return{match:!0,pathIndex:Y,commandIndex:V}}(R,A,S),Y=S.slice(V.commandIndex);if(V.match&&V.pathIndex<R.segments.length){const le=new Te(R.segments.slice(0,V.pathIndex),{});return le.children[Hn]=new Te(R.segments.slice(V.pathIndex),R.children),wr(le,0,Y)}return V.match&&0===Y.length?new Te(R.segments,{}):V.match&&!R.hasChildren()?Qr(R,A,S):V.match?wr(R,0,Y):Qr(R,A,S)}function wr(R,A,S){if(0===S.length)return new Te(R.segments,{});{const V=function qr(R){return Yr(R[0])?R[0].outlets:{[Hn]:R}}(S),Y={};return De(V,(le,Be)=>{"string"==typeof le&&(le=[le]),null!==le&&(Y[Be]=Tr(R.children[Be],A,le))}),De(R.children,(le,Be)=>{void 0===V[Be]&&(Y[Be]=le)}),new Te(R.segments,Y)}}function Qr(R,A,S){const V=R.segments.slice(0,A);let Y=0;for(;Y<S.length;){const le=S[Y];if(Yr(le)){const ln=Rs(le.outlets);return new Te(V,ln)}if(0===Y&&_i(S[0])){V.push(new $t(R.segments[A].path,vo(S[0]))),Y++;continue}const Be=Yr(le)?le.outlets[Hn]:`${le}`,it=Y<S.length-1?S[Y+1]:null;Be&&it&&_i(it)?(V.push(new $t(Be,vo(it))),Y+=2):(V.push(new $t(Be,{})),Y++)}return new Te(V,{})}function Rs(R){const A={};return De(R,(S,V)=>{"string"==typeof S&&(S=[S]),null!==S&&(A[V]=Qr(new Te([],{}),0,S))}),A}function vo(R){const A={};return De(R,(S,V)=>A[V]=`${S}`),A}function is(R,A,S){return R==S.path&&wn(A,S.parameters)}class Kr{constructor(A,S,V,Y){this.routeReuseStrategy=A,this.futureState=S,this.currState=V,this.forwardEvent=Y}activate(A){const S=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,V,A),rt(this.futureState.root),this.activateChildRoutes(S,V,A)}deactivateChildRoutes(A,S,V){const Y=Oe(S);A.children.forEach(le=>{const Be=le.value.outlet;this.deactivateRoutes(le,Y[Be],V),delete Y[Be]}),De(Y,(le,Be)=>{this.deactivateRouteAndItsChildren(le,V)})}deactivateRoutes(A,S,V){const Y=A.value,le=S?S.value:null;if(Y===le)if(Y.component){const Be=V.getContext(Y.outlet);Be&&this.deactivateChildRoutes(A,S,Be.children)}else this.deactivateChildRoutes(A,S,V);else le&&this.deactivateRouteAndItsChildren(S,V)}deactivateRouteAndItsChildren(A,S){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,S):this.deactivateRouteAndOutlet(A,S)}detachAndStoreRouteSubtree(A,S){const V=S.getContext(A.value.outlet),Y=V&&A.value.component?V.children:S,le=Oe(A);for(const Be of Object.keys(le))this.deactivateRouteAndItsChildren(le[Be],Y);if(V&&V.outlet){const Be=V.outlet.detach(),it=V.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:Be,route:A,contexts:it})}}deactivateRouteAndOutlet(A,S){const V=S.getContext(A.value.outlet),Y=V&&A.value.component?V.children:S,le=Oe(A);for(const Be of Object.keys(le))this.deactivateRouteAndItsChildren(le[Be],Y);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(A,S,V){const Y=Oe(S);A.children.forEach(le=>{this.activateRoutes(le,Y[le.value.outlet],V),this.forwardEvent(new Zn(le.value.snapshot))}),A.children.length&&this.forwardEvent(new Tn(A.value.snapshot))}activateRoutes(A,S,V){const Y=A.value,le=S?S.value:null;if(rt(Y),Y===le)if(Y.component){const Be=V.getOrCreateContext(Y.outlet);this.activateChildRoutes(A,S,Be.children)}else this.activateChildRoutes(A,S,V);else if(Y.component){const Be=V.getOrCreateContext(Y.outlet);if(this.routeReuseStrategy.shouldAttach(Y.snapshot)){const it=this.routeReuseStrategy.retrieve(Y.snapshot);this.routeReuseStrategy.store(Y.snapshot,null),Be.children.onOutletReAttached(it.contexts),Be.attachRef=it.componentRef,Be.route=it.route.value,Be.outlet&&Be.outlet.attach(it.componentRef,it.route.value),rt(it.route.value),this.activateChildRoutes(A,null,Be.children)}else{const it=function jr(R){for(let A=R.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(Y.snapshot),ln=it?it.module.componentFactoryResolver:null;Be.attachRef=null,Be.route=Y,Be.resolver=ln,Be.outlet&&Be.outlet.activateWith(Y,ln),this.activateChildRoutes(A,null,Be.children)}}else this.activateChildRoutes(A,null,V)}}class ui{constructor(A,S){this.routes=A,this.module=S}}function mi(R){return"function"==typeof R}function Pi(R){return R instanceof xe}const Ei=Symbol("INITIAL_VALUE");function ys(){return(0,Qe.w)(R=>function Ce(...R){let A,S;return(0,J.K)(R[R.length-1])&&(S=R.pop()),"function"==typeof R[R.length-1]&&(A=R.pop()),1===R.length&&(0,Z.k)(R[0])&&(R=R[0]),(0,ae.n)(R,S).lift(new Ee(A))}(R.map(A=>A.pipe((0,rn.q)(1),(0,St.O)(Ei)))).pipe((0,hn.R)((A,S)=>{let V=!1;return S.reduce((Y,le,Be)=>Y!==Ei?Y:(le===Ei&&(V=!0),V||!1!==le&&Be!==S.length-1&&!Pi(le)?Y:le),A)},Ei),(0,Ye.h)(A=>A!==Ei),(0,U.U)(A=>Pi(A)?A:!0===A),(0,rn.q)(1)))}class Gs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ti,this.attachRef=null}}class ti{constructor(){this.contexts=new Map}onChildOutletCreated(A,S){const V=this.getOrCreateContext(A);V.outlet=S,this.contexts.set(A,V)}onChildOutletDestroyed(A){const S=this.getContext(A);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let S=this.getContext(A);return S||(S=new Gs,this.contexts.set(A,S)),S}getContext(A){return this.contexts.get(A)||null}}let H=(()=>{class R{constructor(S,V,Y,le,Be){this.parentContexts=S,this.location=V,this.resolver=Y,this.changeDetector=Be,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=le||Hn,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,V){this.activated=S,this._activatedRoute=V,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,V){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const Be=(V=V||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),it=this.parentContexts.getOrCreateContext(this.name).children,ln=new ie(S,it,this.location.injector);this.activated=this.location.createComponent(Be,this.location.length,ln),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return R.\u0275fac=function(S){return new(S||R)(a.Y36(ti),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},R.\u0275dir=a.lG2({type:R,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),R})();class ie{constructor(A,S,V){this.route=A,this.childContexts=S,this.parent=V}get(A,S){return A===kt?this.route:A===ti?this.childContexts:this.parent.get(A,S)}}let j=(()=>{class R{}return R.\u0275fac=function(S){return new(S||R)},R.\u0275cmp=a.Xpm({type:R,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,V){1&S&&a._UZ(0,"router-outlet")},directives:[H],encapsulation:2}),R})();function de(R,A=""){for(let S=0;S<R.length;S++){const V=R[S];nt(V,Mt(A,V))}}function nt(R,A){R.children&&de(R.children,A)}function Mt(R,A){return A?R||A.path?R&&!A.path?`${R}/`:!R&&A.path?A.path:`${R}/${A.path}`:"":R}function en(R){const A=R.children&&R.children.map(en),S=A?Object.assign(Object.assign({},R),{children:A}):Object.assign({},R);return!S.component&&(A||S.loadChildren)&&S.outlet&&S.outlet!==Hn&&(S.component=j),S}function Zt(R){return R.outlet||Hn}function oi(R,A){const S=R.filter(V=>Zt(V)===A);return S.push(...R.filter(V=>Zt(V)!==A)),S}const Hr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nr(R,A,S){var V;if(""===A.path)return"full"===A.pathMatch&&(R.hasChildren()||S.length>0)?Object.assign({},Hr):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const le=(A.matcher||Rn)(S,R,A);if(!le)return Object.assign({},Hr);const Be={};De(le.posParams,(ln,Jn)=>{Be[Jn]=ln.path});const it=le.consumed.length>0?Object.assign(Object.assign({},Be),le.consumed[le.consumed.length-1].parameters):Be;return{matched:!0,consumedSegments:le.consumed,remainingSegments:S.slice(le.consumed.length),parameters:it,positionalParamSegments:null!==(V=le.posParams)&&void 0!==V?V:{}}}function Pr(R,A,S,V,Y="corrected"){if(S.length>0&&function bi(R,A,S){return S.some(V=>Ji(R,A,V)&&Zt(V)!==Hn)}(R,S,V)){const Be=new Te(A,function ni(R,A,S,V){const Y={};Y[Hn]=V,V._sourceSegment=R,V._segmentIndexShift=A.length;for(const le of S)if(""===le.path&&Zt(le)!==Hn){const Be=new Te([],{});Be._sourceSegment=R,Be._segmentIndexShift=A.length,Y[Zt(le)]=Be}return Y}(R,A,V,new Te(S,R.children)));return Be._sourceSegment=R,Be._segmentIndexShift=A.length,{segmentGroup:Be,slicedSegments:[]}}if(0===S.length&&function ki(R,A,S){return S.some(V=>Ji(R,A,V))}(R,S,V)){const Be=new Te(R.segments,function Di(R,A,S,V,Y,le){const Be={};for(const it of V)if(Ji(R,S,it)&&!Y[Zt(it)]){const ln=new Te([],{});ln._sourceSegment=R,ln._segmentIndexShift="legacy"===le?R.segments.length:A.length,Be[Zt(it)]=ln}return Object.assign(Object.assign({},Y),Be)}(R,A,S,V,R.children,Y));return Be._sourceSegment=R,Be._segmentIndexShift=A.length,{segmentGroup:Be,slicedSegments:S}}const le=new Te(R.segments,R.children);return le._sourceSegment=R,le._segmentIndexShift=A.length,{segmentGroup:le,slicedSegments:S}}function Ji(R,A,S){return(!(R.hasChildren()||A.length>0)||"full"!==S.pathMatch)&&""===S.path}function ir(R,A,S,V){return!!(Zt(R)===V||V!==Hn&&Ji(A,S,R))&&("**"===R.path||Nr(A,R,S).matched)}function Wi(R,A,S){return 0===A.length&&!R.children[S]}class G{constructor(A){this.segmentGroup=A||null}}class B{constructor(A){this.urlTree=A}}function N(R){return(0,ke._)(new G(R))}function se(R){return(0,ke._)(new B(R))}class b{constructor(A,S,V,Y,le){this.configLoader=S,this.urlSerializer=V,this.urlTree=Y,this.config=le,this.allowRedirects=!0,this.ngModule=A.get(a.h0i)}apply(){const A=Pr(this.urlTree.root,[],[],this.config).segmentGroup,S=new Te(A.segments,A.children);return this.expandSegmentGroup(this.ngModule,this.config,S,Hn).pipe((0,U.U)(le=>this.createUrlTree(I(le),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dt(le=>{if(le instanceof B)return this.allowRedirects=!1,this.match(le.urlTree);throw le instanceof G?this.noMatchError(le):le}))}match(A){return this.expandSegmentGroup(this.ngModule,this.config,A.root,Hn).pipe((0,U.U)(Y=>this.createUrlTree(I(Y),A.queryParams,A.fragment))).pipe(dt(Y=>{throw Y instanceof G?this.noMatchError(Y):Y}))}noMatchError(A){return new Error(`Cannot match any routes. URL Segment: '${A.segmentGroup}'`)}createUrlTree(A,S,V){const Y=A.segments.length>0?new Te([],{[Hn]:A}):A;return new xe(Y,S,V)}expandSegmentGroup(A,S,V,Y){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(A,S,V).pipe((0,U.U)(le=>new Te([],le))):this.expandSegment(A,V,S,V.segments,Y,!0)}expandChildren(A,S,V){const Y=[];for(const le of Object.keys(V.children))"primary"===le?Y.unshift(le):Y.push(le);return(0,ee.D)(Y).pipe((0,mn.b)(le=>{const Be=V.children[le],it=oi(S,le);return this.expandSegmentGroup(A,it,Be,le).pipe((0,U.U)(ln=>({segment:ln,outlet:le})))}),(0,hn.R)((le,Be)=>(le[Be.outlet]=Be.segment,le),{}),function vt(R,A){const S=arguments.length>=2;return V=>V.pipe(R?(0,Ye.h)((Y,le)=>R(Y,le,V)):un.y,me(1),S?(0,Lt.d)(A):(0,ut.T)(()=>new $e.K))}())}expandSegment(A,S,V,Y,le,Be){return(0,ee.D)(V).pipe((0,mn.b)(it=>this.expandSegmentAgainstRoute(A,S,V,it,Y,le,Be).pipe(dt(Jn=>{if(Jn instanceof G)return(0,Ne.of)(null);throw Jn}))),(0,jn.P)(it=>!!it),dt((it,ln)=>{if(it instanceof $e.K||"EmptyError"===it.name)return Wi(S,Y,le)?(0,Ne.of)(new Te([],{})):N(S);throw it}))}expandSegmentAgainstRoute(A,S,V,Y,le,Be,it){return ir(Y,S,le,Be)?void 0===Y.redirectTo?this.matchSegmentAgainstRoute(A,S,Y,le,Be):it&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,S,V,Y,le,Be):N(S):N(S)}expandSegmentAgainstRouteUsingRedirect(A,S,V,Y,le,Be){return"**"===Y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,V,Y,Be):this.expandRegularSegmentAgainstRouteUsingRedirect(A,S,V,Y,le,Be)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,S,V,Y){const le=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?se(le):this.lineralizeSegments(V,le).pipe((0,Fn.zg)(Be=>{const it=new Te(Be,{});return this.expandSegment(A,it,S,Be,Y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,S,V,Y,le,Be){const{matched:it,consumedSegments:ln,remainingSegments:Jn,positionalParamSegments:di}=Nr(S,Y,le);if(!it)return N(S);const qn=this.applyRedirectCommands(ln,Y.redirectTo,di);return Y.redirectTo.startsWith("/")?se(qn):this.lineralizeSegments(Y,qn).pipe((0,Fn.zg)(vi=>this.expandSegment(A,S,V,vi.concat(Jn),Be,!1)))}matchSegmentAgainstRoute(A,S,V,Y,le){if("**"===V.path)return V.loadChildren?(V._loadedConfig?(0,Ne.of)(V._loadedConfig):this.configLoader.load(A.injector,V)).pipe((0,U.U)(qn=>(V._loadedConfig=qn,new Te(Y,{})))):(0,Ne.of)(new Te(Y,{}));const{matched:Be,consumedSegments:it,remainingSegments:ln}=Nr(S,V,Y);return Be?this.getChildConfig(A,V,Y).pipe((0,Fn.zg)(di=>{const qn=di.module,vi=di.routes,{segmentGroup:ii,slicedSegments:Vr}=Pr(S,it,ln,vi),lo=new Te(ii.segments,ii.children);if(0===Vr.length&&lo.hasChildren())return this.expandChildren(qn,vi,lo).pipe((0,U.U)(hs=>new Te(it,hs)));if(0===vi.length&&0===Vr.length)return(0,Ne.of)(new Te(it,{}));const Qo=Zt(V)===le;return this.expandSegment(qn,lo,vi,Vr,Qo?Hn:le,!0).pipe((0,U.U)(Lr=>new Te(it.concat(Lr.segments),Lr.children)))})):N(S)}getChildConfig(A,S,V){return S.children?(0,Ne.of)(new ui(S.children,A)):S.loadChildren?void 0!==S._loadedConfig?(0,Ne.of)(S._loadedConfig):this.runCanLoadGuards(A.injector,S,V).pipe((0,Fn.zg)(Y=>Y?this.configLoader.load(A.injector,S).pipe((0,U.U)(le=>(S._loadedConfig=le,le))):function v(R){return(0,ke._)(Wn(`Cannot load children because the guard of the route "path: '${R.path}'" returned false`))}(S))):(0,Ne.of)(new ui([],A))}runCanLoadGuards(A,S,V){const Y=S.canLoad;if(!Y||0===Y.length)return(0,Ne.of)(!0);const le=Y.map(Be=>{const it=A.get(Be);let ln;if(function so(R){return R&&mi(R.canLoad)}(it))ln=it.canLoad(S,V);else{if(!mi(it))throw new Error("Invalid CanLoad guard");ln=it(S,V)}return Ze(ln)});return(0,Ne.of)(le).pipe(ys(),(0,Dn.b)(Be=>{if(!Pi(Be))return;const it=Wn(`Redirecting to "${this.urlSerializer.serialize(Be)}"`);throw it.url=Be,it}),(0,U.U)(Be=>!0===Be))}lineralizeSegments(A,S){let V=[],Y=S.root;for(;;){if(V=V.concat(Y.segments),0===Y.numberOfChildren)return(0,Ne.of)(V);if(Y.numberOfChildren>1||!Y.children[Hn])return(0,ke._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${A.redirectTo}'`));Y=Y.children[Hn]}}applyRedirectCommands(A,S,V){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),A,V)}applyRedirectCreatreUrlTree(A,S,V,Y){const le=this.createSegmentGroup(A,S.root,V,Y);return new xe(le,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(A,S){const V={};return De(A,(Y,le)=>{if("string"==typeof Y&&Y.startsWith(":")){const it=Y.substring(1);V[le]=S[it]}else V[le]=Y}),V}createSegmentGroup(A,S,V,Y){const le=this.createSegments(A,S.segments,V,Y);let Be={};return De(S.children,(it,ln)=>{Be[ln]=this.createSegmentGroup(A,it,V,Y)}),new Te(le,Be)}createSegments(A,S,V,Y){return S.map(le=>le.path.startsWith(":")?this.findPosParam(A,le,Y):this.findOrReturn(le,V))}findPosParam(A,S,V){const Y=V[S.path.substring(1)];if(!Y)throw new Error(`Cannot redirect to '${A}'. Cannot find '${S.path}'.`);return Y}findOrReturn(A,S){let V=0;for(const Y of S){if(Y.path===A.path)return S.splice(V),Y;V++}return A}}function I(R){const A={};for(const V of Object.keys(R.children)){const le=I(R.children[V]);(le.segments.length>0||le.hasChildren())&&(A[V]=le)}return function E(R){if(1===R.numberOfChildren&&R.children[Hn]){const A=R.children[Hn];return new Te(R.segments.concat(A.segments),A.children)}return R}(new Te(R.segments,A))}class fe{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Le{constructor(A,S){this.component=A,this.route=S}}function It(R,A,S){const V=R._root;return pr(V,A?A._root:null,S,[V.value])}function kn(R,A,S){const V=function An(R){if(!R)return null;for(let A=R.parent;A;A=A.parent){const S=A.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(A);return(V?V.module.injector:S).get(R)}function pr(R,A,S,V,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=Oe(A);return R.children.forEach(Be=>{(function Mn(R,A,S,V,Y={canDeactivateChecks:[],canActivateChecks:[]}){const le=R.value,Be=A?A.value:null,it=S?S.getContext(R.value.outlet):null;if(Be&&le.routeConfig===Be.routeConfig){const ln=function zr(R,A,S){if("function"==typeof S)return S(R,A);switch(S){case"pathParamsChange":return!Yt(R.url,A.url);case"pathParamsOrQueryParamsChange":return!Yt(R.url,A.url)||!wn(R.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ot(R,A)||!wn(R.queryParams,A.queryParams);default:return!ot(R,A)}}(Be,le,le.routeConfig.runGuardsAndResolvers);ln?Y.canActivateChecks.push(new fe(V)):(le.data=Be.data,le._resolvedData=Be._resolvedData),pr(R,A,le.component?it?it.children:null:S,V,Y),ln&&it&&it.outlet&&it.outlet.isActivated&&Y.canDeactivateChecks.push(new Le(it.outlet.component,Be))}else Be&&Dr(A,it,Y),Y.canActivateChecks.push(new fe(V)),pr(R,null,le.component?it?it.children:null:S,V,Y)})(Be,le[Be.value.outlet],S,V.concat([Be.value]),Y),delete le[Be.value.outlet]}),De(le,(Be,it)=>Dr(Be,S.getContext(it),Y)),Y}function Dr(R,A,S){const V=Oe(R),Y=R.value;De(V,(le,Be)=>{Dr(le,Y.component?A?A.children.getContext(Be):null:A,S)}),S.canDeactivateChecks.push(new Le(Y.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,Y))}class co{}function Eo(R){return new pe.y(A=>A.error(R))}class Ro{constructor(A,S,V,Y,le,Be){this.rootComponentType=A,this.config=S,this.urlTree=V,this.url=Y,this.paramsInheritanceStrategy=le,this.relativeLinkResolution=Be}recognize(){const A=Pr(this.urlTree.root,[],[],this.config.filter(Be=>void 0===Be.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,A,Hn);if(null===S)return null;const V=new fr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Hn,this.rootComponentType,null,this.urlTree.root,-1,{}),Y=new be(V,S),le=new xr(this.url,Y);return this.inheritParamsAndData(le._root),le}inheritParamsAndData(A){const S=A.value,V=Nn(S,this.paramsInheritanceStrategy);S.params=Object.freeze(V.params),S.data=Object.freeze(V.data),A.children.forEach(Y=>this.inheritParamsAndData(Y))}processSegmentGroup(A,S,V){return 0===S.segments.length&&S.hasChildren()?this.processChildren(A,S):this.processSegment(A,S,S.segments,V)}processChildren(A,S){const V=[];for(const le of Object.keys(S.children)){const Be=S.children[le],it=oi(A,le),ln=this.processSegmentGroup(it,Be,le);if(null===ln)return null;V.push(...ln)}const Y=fo(V);return function Bo(R){R.sort((A,S)=>A.value.outlet===Hn?-1:S.value.outlet===Hn?1:A.value.outlet.localeCompare(S.value.outlet))}(Y),Y}processSegment(A,S,V,Y){for(const le of A){const Be=this.processSegmentAgainstRoute(le,S,V,Y);if(null!==Be)return Be}return Wi(S,V,Y)?[]:null}processSegmentAgainstRoute(A,S,V,Y){if(A.redirectTo||!ir(A,S,V,Y))return null;let le,Be=[],it=[];if("**"===A.path){const ii=V.length>0?Vn(V).parameters:{};le=new fr(V,ii,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wl(A),Zt(A),A.component,A,Ta(S),Mo(S)+V.length,Oo(A))}else{const ii=Nr(S,A,V);if(!ii.matched)return null;Be=ii.consumedSegments,it=ii.remainingSegments,le=new fr(Be,ii.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wl(A),Zt(A),A.component,A,Ta(S),Mo(S)+Be.length,Oo(A))}const ln=function ho(R){return R.children?R.children:R.loadChildren?R._loadedConfig.routes:[]}(A),{segmentGroup:Jn,slicedSegments:di}=Pr(S,Be,it,ln.filter(ii=>void 0===ii.redirectTo),this.relativeLinkResolution);if(0===di.length&&Jn.hasChildren()){const ii=this.processChildren(ln,Jn);return null===ii?null:[new be(le,ii)]}if(0===ln.length&&0===di.length)return[new be(le,[])];const qn=Zt(A)===Y,vi=this.processSegment(ln,Jn,di,qn?Hn:Y);return null===vi?null:[new be(le,vi)]}}function Wo(R){const A=R.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function fo(R){const A=[],S=new Set;for(const V of R){if(!Wo(V)){A.push(V);continue}const Y=A.find(le=>V.value.routeConfig===le.value.routeConfig);void 0!==Y?(Y.children.push(...V.children),S.add(Y)):A.push(V)}for(const V of S){const Y=fo(V.children);A.push(new be(V.value,Y))}return A.filter(V=>!S.has(V))}function Ta(R){let A=R;for(;A._sourceSegment;)A=A._sourceSegment;return A}function Mo(R){let A=R,S=A._segmentIndexShift?A._segmentIndexShift:0;for(;A._sourceSegment;)A=A._sourceSegment,S+=A._segmentIndexShift?A._segmentIndexShift:0;return S-1}function wl(R){return R.data||{}}function Oo(R){return R.resolve||{}}function lu(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function tl(R){return(0,Qe.w)(A=>{const S=R(A);return S?(0,ee.D)(S).pipe((0,U.U)(()=>A)):(0,Ne.of)(A)})}class nl{}class bo extends class fa{shouldDetach(A){return!1}store(A,S){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,S){return A.routeConfig===S.routeConfig}}{}const wo=new a.OlP("ROUTES");class pa{constructor(A,S,V,Y){this.injector=A,this.compiler=S,this.onLoadStartListener=V,this.onLoadEndListener=Y}load(A,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const Y=this.loadModuleFactory(S.loadChildren).pipe((0,U.U)(le=>{this.onLoadEndListener&&this.onLoadEndListener(S);const Be=le.create(A);return new ui(Kn(Be.injector.get(wo,void 0,a.XFs.Self|a.XFs.Optional)).map(en),Be)}),dt(le=>{throw S._loader$=void 0,le}));return S._loader$=new ve.c(Y,()=>new pt.xQ).pipe((0,er.x)()),S._loader$}loadModuleFactory(A){return Ze(A()).pipe((0,Fn.zg)(S=>S instanceof a.YKP?(0,Ne.of)(S):(0,ee.D)(this.compiler.compileModuleAsync(S))))}}class qo{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,S){return A}}function $a(R){throw R}function po(R,A,S){return A.parse("/")}function Yo(R,A){return(0,Ne.of)(null)}const Ko={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ba={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class R{constructor(S,V,Y,le,Be,it,ln){this.rootComponentType=S,this.urlSerializer=V,this.rootContexts=Y,this.location=le,this.config=ln,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pt.xQ,this.errorHandler=$a,this.malformedUriErrorHandler=po,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yo,afterPreactivation:Yo},this.urlHandlingStrategy=new qo,this.routeReuseStrategy=new bo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Be.get(a.h0i),this.console=Be.get(a.c2e);const qn=Be.get(a.R0b);this.isNgZoneEnabled=qn instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(ln),this.currentUrlTree=function Rt(){return new xe(new Te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pa(Be,it,vi=>this.triggerEvent(new Kt(vi)),vi=>this.triggerEvent(new Nt(vi))),this.routerState=Gt(this.currentUrlTree,this.rootComponentType),this.transitions=new _e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const V=this.events;return S.pipe((0,Ye.h)(Y=>0!==Y.id),(0,U.U)(Y=>Object.assign(Object.assign({},Y),{extractedUrl:this.urlHandlingStrategy.extract(Y.rawUrl)})),(0,Qe.w)(Y=>{let le=!1,Be=!1;return(0,Ne.of)(Y).pipe((0,Dn.b)(it=>{this.currentNavigation={id:it.id,initialUrl:it.currentRawUrl,extractedUrl:it.extractedUrl,trigger:it.source,extras:it.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Qe.w)(it=>{const ln=this.browserUrlTree.toString(),Jn=!this.navigated||it.extractedUrl.toString()!==ln||ln!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Jn)&&this.urlHandlingStrategy.shouldProcessUrl(it.rawUrl))return Ll(it.source)&&(this.browserUrlTree=it.extractedUrl),(0,Ne.of)(it).pipe((0,Qe.w)(qn=>{const vi=this.transitions.getValue();return V.next(new pn(qn.id,this.serializeUrl(qn.extractedUrl),qn.source,qn.restoredState)),vi!==this.transitions.getValue()?ce.E:Promise.resolve(qn)}),function q(R,A,S,V){return(0,Qe.w)(Y=>function P(R,A,S,V,Y){return new b(R,A,S,V,Y).apply()}(R,A,S,Y.extractedUrl,V).pipe((0,U.U)(le=>Object.assign(Object.assign({},Y),{urlAfterRedirects:le}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Dn.b)(qn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:qn.urlAfterRedirects})}),function Ws(R,A,S,V,Y){return(0,Fn.zg)(le=>function da(R,A,S,V,Y="emptyOnly",le="legacy"){try{const Be=new Ro(R,A,S,V,Y,le).recognize();return null===Be?Eo(new co):(0,Ne.of)(Be)}catch(Be){return Eo(Be)}}(R,A,le.urlAfterRedirects,S(le.urlAfterRedirects),V,Y).pipe((0,U.U)(Be=>Object.assign(Object.assign({},le),{targetSnapshot:Be}))))}(this.rootComponentType,this.config,qn=>this.serializeUrl(qn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Dn.b)(qn=>{if("eager"===this.urlUpdateStrategy){if(!qn.extras.skipLocationChange){const ii=this.urlHandlingStrategy.merge(qn.urlAfterRedirects,qn.rawUrl);this.setBrowserUrl(ii,qn)}this.browserUrlTree=qn.urlAfterRedirects}const vi=new ur(qn.id,this.serializeUrl(qn.extractedUrl),this.serializeUrl(qn.urlAfterRedirects),qn.targetSnapshot);V.next(vi)}));if(Jn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:vi,extractedUrl:ii,source:Vr,restoredState:lo,extras:Qo}=it,Yi=new pn(vi,this.serializeUrl(ii),Vr,lo);V.next(Yi);const Lr=Gt(ii,this.rootComponentType).snapshot;return(0,Ne.of)(Object.assign(Object.assign({},it),{targetSnapshot:Lr,urlAfterRedirects:ii,extras:Object.assign(Object.assign({},Qo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=it.rawUrl,it.resolve(null),ce.E}),tl(it=>{const{targetSnapshot:ln,id:Jn,extractedUrl:di,rawUrl:qn,extras:{skipLocationChange:vi,replaceUrl:ii}}=it;return this.hooks.beforePreactivation(ln,{navigationId:Jn,appliedUrlTree:di,rawUrlTree:qn,skipLocationChange:!!vi,replaceUrl:!!ii})}),(0,Dn.b)(it=>{const ln=new ar(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(ln)}),(0,U.U)(it=>Object.assign(Object.assign({},it),{guards:It(it.targetSnapshot,it.currentSnapshot,this.rootContexts)})),function Fi(R,A){return(0,Fn.zg)(S=>{const{targetSnapshot:V,currentSnapshot:Y,guards:{canActivateChecks:le,canDeactivateChecks:Be}}=S;return 0===Be.length&&0===le.length?(0,Ne.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function Fr(R,A,S,V){return(0,ee.D)(R).pipe((0,Fn.zg)(Y=>function Ki(R,A,S,V,Y){const le=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!le||0===le.length)return(0,Ne.of)(!0);const Be=le.map(it=>{const ln=kn(it,A,Y);let Jn;if(function Os(R){return R&&mi(R.canDeactivate)}(ln))Jn=Ze(ln.canDeactivate(R,A,S,V));else{if(!mi(ln))throw new Error("Invalid CanDeactivate guard");Jn=Ze(ln(R,A,S,V))}return Jn.pipe((0,jn.P)())});return(0,Ne.of)(Be).pipe(ys())}(Y.component,Y.route,S,A,V)),(0,jn.P)(Y=>!0!==Y,!0))}(Be,V,Y,R).pipe((0,Fn.zg)(it=>it&&function wi(R){return"boolean"==typeof R}(it)?function Ri(R,A,S,V){return(0,ee.D)(A).pipe((0,mn.b)(Y=>(0,Dt.z)(function zs(R,A){return null!==R&&A&&A(new nn(R)),(0,Ne.of)(!0)}(Y.route.parent,V),function Li(R,A){return null!==R&&A&&A(new Xn(R)),(0,Ne.of)(!0)}(Y.route,V),function es(R,A,S){const V=A[A.length-1],le=A.slice(0,A.length-1).reverse().map(Be=>function sn(R){const A=R.routeConfig?R.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:R,guards:A}:null}(Be)).filter(Be=>null!==Be).map(Be=>Xe(()=>{const it=Be.guards.map(ln=>{const Jn=kn(ln,Be.node,S);let di;if(function Ms(R){return R&&mi(R.canActivateChild)}(Jn))di=Ze(Jn.canActivateChild(V,R));else{if(!mi(Jn))throw new Error("Invalid CanActivateChild guard");di=Ze(Jn(V,R))}return di.pipe((0,jn.P)())});return(0,Ne.of)(it).pipe(ys())}));return(0,Ne.of)(le).pipe(ys())}(R,Y.path,S),function ci(R,A,S){const V=A.routeConfig?A.routeConfig.canActivate:null;if(!V||0===V.length)return(0,Ne.of)(!0);const Y=V.map(le=>Xe(()=>{const Be=kn(le,A,S);let it;if(function ss(R){return R&&mi(R.canActivate)}(Be))it=Ze(Be.canActivate(A,R));else{if(!mi(Be))throw new Error("Invalid CanActivate guard");it=Ze(Be(A,R))}return it.pipe((0,jn.P)())}));return(0,Ne.of)(Y).pipe(ys())}(R,Y.route,S))),(0,jn.P)(Y=>!0!==Y,!0))}(V,le,R,A):(0,Ne.of)(it)),(0,U.U)(it=>Object.assign(Object.assign({},S),{guardsResult:it})))})}(this.ngModule.injector,it=>this.triggerEvent(it)),(0,Dn.b)(it=>{if(Pi(it.guardsResult)){const Jn=Wn(`Redirecting to "${this.serializeUrl(it.guardsResult)}"`);throw Jn.url=it.guardsResult,Jn}const ln=new gt(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot,!!it.guardsResult);this.triggerEvent(ln)}),(0,Ye.h)(it=>!!it.guardsResult||(this.restoreHistory(it),this.cancelNavigationTransition(it,""),!1)),tl(it=>{if(it.guards.canActivateChecks.length)return(0,Ne.of)(it).pipe((0,Dn.b)(ln=>{const Jn=new qe(ln.id,this.serializeUrl(ln.extractedUrl),this.serializeUrl(ln.urlAfterRedirects),ln.targetSnapshot);this.triggerEvent(Jn)}),(0,Qe.w)(ln=>{let Jn=!1;return(0,Ne.of)(ln).pipe(function ha(R,A){return(0,Fn.zg)(S=>{const{targetSnapshot:V,guards:{canActivateChecks:Y}}=S;if(!Y.length)return(0,Ne.of)(S);let le=0;return(0,ee.D)(Y).pipe((0,mn.b)(Be=>function ts(R,A,S,V){return function el(R,A,S,V){const Y=lu(R);if(0===Y.length)return(0,Ne.of)({});const le={};return(0,ee.D)(Y).pipe((0,Fn.zg)(Be=>function Il(R,A,S,V){const Y=kn(R,A,V);return Ze(Y.resolve?Y.resolve(A,S):Y(A,S))}(R[Be],A,S,V).pipe((0,Dn.b)(it=>{le[Be]=it}))),me(1),(0,Fn.zg)(()=>lu(le).length===Y.length?(0,Ne.of)(le):ce.E))}(R._resolve,R,A,V).pipe((0,U.U)(le=>(R._resolvedData=le,R.data=Object.assign(Object.assign({},R.data),Nn(R,S).resolve),null)))}(Be.route,V,R,A)),(0,Dn.b)(()=>le++),me(1),(0,Fn.zg)(Be=>le===Y.length?(0,Ne.of)(S):ce.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Dn.b)({next:()=>Jn=!0,complete:()=>{Jn||(this.restoreHistory(ln),this.cancelNavigationTransition(ln,"At least one route resolver didn't emit any value."))}}))}),(0,Dn.b)(ln=>{const Jn=new Ie(ln.id,this.serializeUrl(ln.extractedUrl),this.serializeUrl(ln.urlAfterRedirects),ln.targetSnapshot);this.triggerEvent(Jn)}))}),tl(it=>{const{targetSnapshot:ln,id:Jn,extractedUrl:di,rawUrl:qn,extras:{skipLocationChange:vi,replaceUrl:ii}}=it;return this.hooks.afterPreactivation(ln,{navigationId:Jn,appliedUrlTree:di,rawUrlTree:qn,skipLocationChange:!!vi,replaceUrl:!!ii})}),(0,U.U)(it=>{const ln=function Tt(R,A,S){const V=on(R,A._root,S?S._root:void 0);return new yt(V,A)}(this.routeReuseStrategy,it.targetSnapshot,it.currentRouterState);return Object.assign(Object.assign({},it),{targetRouterState:ln})}),(0,Dn.b)(it=>{this.currentUrlTree=it.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(it.urlAfterRedirects,it.rawUrl),this.routerState=it.targetRouterState,"deferred"===this.urlUpdateStrategy&&(it.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,it),this.browserUrlTree=it.urlAfterRedirects)}),((R,A,S)=>(0,U.U)(V=>(new Kr(A,V.targetRouterState,V.currentRouterState,S).activate(R),V)))(this.rootContexts,this.routeReuseStrategy,it=>this.triggerEvent(it)),(0,Dn.b)({next(){le=!0},complete(){le=!0}}),function ze(R){return A=>A.lift(new at(R))}(()=>{var it;le||Be||this.cancelNavigationTransition(Y,`Navigation ID ${Y.id} is not equal to the current navigation id ${this.navigationId}`),(null===(it=this.currentNavigation)||void 0===it?void 0:it.id)===Y.id&&(this.currentNavigation=null)}),dt(it=>{if(Be=!0,function cr(R){return R&&R[yn]}(it)){const ln=Pi(it.url);ln||(this.navigated=!0,this.restoreHistory(Y,!0));const Jn=new vr(Y.id,this.serializeUrl(Y.extractedUrl),it.message);V.next(Jn),ln?setTimeout(()=>{const di=this.urlHandlingStrategy.merge(it.url,this.rawUrlTree),qn={skipLocationChange:Y.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ll(Y.source)};this.scheduleNavigation(di,"imperative",null,qn,{resolve:Y.resolve,reject:Y.reject,promise:Y.promise})},0):Y.resolve(!1)}else{this.restoreHistory(Y,!0);const ln=new Ir(Y.id,this.serializeUrl(Y.extractedUrl),it);V.next(ln);try{Y.resolve(this.errorHandler(it))}catch(Jn){Y.reject(Jn)}}return ce.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const V="popstate"===S.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{var Y;const le={replaceUrl:!0},Be=(null===(Y=S.state)||void 0===Y?void 0:Y.navigationId)?S.state:null;if(Be){const ln=Object.assign({},Be);delete ln.navigationId,delete ln.\u0275routerPageId,0!==Object.keys(ln).length&&(le.state=ln)}const it=this.parseUrl(S.url);this.scheduleNavigation(it,V,Be,le)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){de(S),this.config=S.map(en),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,V={}){const{relativeTo:Y,queryParams:le,fragment:Be,queryParamsHandling:it,preserveFragment:ln}=V,Jn=Y||this.routerState.root,di=ln?this.currentUrlTree.fragment:Be;let qn=null;switch(it){case"merge":qn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),le);break;case"preserve":qn=this.currentUrlTree.queryParams;break;default:qn=le||null}return null!==qn&&(qn=this.removeEmptyProps(qn)),function ri(R,A,S,V,Y){if(0===S.length)return ds(A.root,A.root,A.root,V,Y);const le=function Ss(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new bs(!0,0,R);let A=0,S=!1;const V=R.reduce((Y,le,Be)=>{if("object"==typeof le&&null!=le){if(le.outlets){const it={};return De(le.outlets,(ln,Jn)=>{it[Jn]="string"==typeof ln?ln.split("/"):ln}),[...Y,{outlets:it}]}if(le.segmentPath)return[...Y,le.segmentPath]}return"string"!=typeof le?[...Y,le]:0===Be?(le.split("/").forEach((it,ln)=>{0==ln&&"."===it||(0==ln&&""===it?S=!0:".."===it?A++:""!=it&&Y.push(it))}),Y):[...Y,le]},[]);return new bs(S,A,V)}(S);if(le.toRoot())return ds(A.root,A.root,new Te([],{}),V,Y);const Be=function As(R,A,S){if(R.isAbsolute)return new Qi(A.root,!0,0);if(-1===S.snapshot._lastPathIndex){const le=S.snapshot._urlSegment;return new Qi(le,le===A.root,0)}const V=_i(R.commands[0])?0:1;return function xs(R,A,S){let V=R,Y=A,le=S;for(;le>Y;){if(le-=Y,V=V.parent,!V)throw new Error("Invalid number of '../'");Y=V.segments.length}return new Qi(V,!1,Y-le)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+V,R.numberOfDoubleDots)}(le,A,R),it=Be.processChildren?wr(Be.segmentGroup,Be.index,le.commands):Tr(Be.segmentGroup,Be.index,le.commands);return ds(A.root,Be.segmentGroup,it,V,Y)}(Jn,this.currentUrlTree,S,qn,null!=di?di:null)}navigateByUrl(S,V={skipLocationChange:!1}){const Y=Pi(S)?S:this.parseUrl(S),le=this.urlHandlingStrategy.merge(Y,this.rawUrlTree);return this.scheduleNavigation(le,"imperative",null,V)}navigate(S,V={skipLocationChange:!1}){return function Cl(R){for(let A=0;A<R.length;A++){const S=R[A];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${A}`)}}(S),this.navigateByUrl(this.createUrlTree(S,V),V)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let V;try{V=this.urlSerializer.parse(S)}catch(Y){V=this.malformedUriErrorHandler(Y,this.urlSerializer,S)}return V}isActive(S,V){let Y;if(Y=!0===V?Object.assign({},Ko):!1===V?Object.assign({},Ba):V,Pi(S))return tt(this.currentUrlTree,S,Y);const le=this.parseUrl(S);return tt(this.currentUrlTree,le,Y)}removeEmptyProps(S){return Object.keys(S).reduce((V,Y)=>{const le=S[Y];return null!=le&&(V[Y]=le),V},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Ar(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,V,Y,le,Be){var it,ln;if(this.disposed)return Promise.resolve(!1);let Jn,di,qn;Be?(Jn=Be.resolve,di=Be.reject,qn=Be.promise):qn=new Promise((Vr,lo)=>{Jn=Vr,di=lo});const vi=++this.navigationId;let ii;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Y=this.location.getState()),ii=Y&&Y.\u0275routerPageId?Y.\u0275routerPageId:le.replaceUrl||le.skipLocationChange?null!==(it=this.browserPageId)&&void 0!==it?it:0:(null!==(ln=this.browserPageId)&&void 0!==ln?ln:0)+1):ii=0,this.setTransition({id:vi,targetPageId:ii,source:V,restoredState:Y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:le,resolve:Jn,reject:di,promise:qn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qn.catch(Vr=>Promise.reject(Vr))}setBrowserUrl(S,V){const Y=this.urlSerializer.serialize(S),le=Object.assign(Object.assign({},V.extras.state),this.generateNgRouterState(V.id,V.targetPageId));this.location.isCurrentPathEqualTo(Y)||V.extras.replaceUrl?this.location.replaceState(Y,"",le):this.location.go(Y,"",le)}restoreHistory(S,V=!1){var Y,le;if("computed"===this.canceledNavigationResolution){const Be=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Y=this.currentNavigation)||void 0===Y?void 0:Y.finalUrl)||0===Be?this.currentUrlTree===(null===(le=this.currentNavigation)||void 0===le?void 0:le.finalUrl)&&0===Be&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Be)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,V){const Y=new vr(S.id,this.serializeUrl(S.extractedUrl),V);this.triggerEvent(Y),S.resolve(!1)}generateNgRouterState(S,V){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:V}:{navigationId:S}}}return R.\u0275fac=function(S){a.$Z()},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac}),R})();function Ll(R){return"imperative"!==R}let Cs=(()=>{class R{constructor(S,V,Y,le,Be){this.router=S,this.route=V,this.tabIndexAttribute=Y,this.renderer=le,this.el=Be,this.commands=null,this.onChanges=new pt.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(S){if(null!=this.tabIndexAttribute)return;const V=this.renderer,Y=this.el.nativeElement;null!==S?V.setAttribute(Y,"tabindex",S):V.removeAttribute(Y,"tabindex")}ngOnChanges(S){this.onChanges.next(this)}set routerLink(S){null!=S?(this.commands=Array.isArray(S)?S:[S],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const S={skipLocationChange:ns(this.skipLocationChange),replaceUrl:ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,S),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ns(this.preserveFragment)})}}return R.\u0275fac=function(S){return new(S||R)(a.Y36(os),a.Y36(kt),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},R.\u0275dir=a.lG2({type:R,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,V){1&S&&a.NdJ("click",function(){return V.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),R})(),qs=(()=>{class R{constructor(S,V,Y){this.router=S,this.route=V,this.locationStrategy=Y,this.commands=null,this.href=null,this.onChanges=new pt.xQ,this.subscription=S.events.subscribe(le=>{le instanceof Ar&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,V,Y,le,Be){if(0!==S||V||Y||le||Be||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const it={skipLocationChange:ns(this.skipLocationChange),replaceUrl:ns(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,it),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ns(this.preserveFragment)})}}return R.\u0275fac=function(S){return new(S||R)(a.Y36(os),a.Y36(kt),a.Y36(rr.S$))},R.\u0275dir=a.lG2({type:R,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,V){1&S&&a.NdJ("click",function(le){return V.onClick(le.button,le.ctrlKey,le.shiftKey,le.altKey,le.metaKey)}),2&S&&a.uIk("target",V.target)("href",V.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),R})();function ns(R){return""===R||!!R}class ga{}class Io{preload(A,S){return S().pipe(dt(()=>(0,Ne.of)(null)))}}class oo{preload(A,S){return(0,Ne.of)(null)}}let Uo=(()=>{class R{constructor(S,V,Y,le){this.router=S,this.injector=Y,this.preloadingStrategy=le,this.loader=new pa(Y,V,ln=>S.triggerEvent(new Kt(ln)),ln=>S.triggerEvent(new Nt(ln)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ye.h)(S=>S instanceof Ar),(0,mn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(a.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,V){const Y=[];for(const le of V)if(le.loadChildren&&!le.canLoad&&le._loadedConfig){const Be=le._loadedConfig;Y.push(this.processRoutes(Be.module,Be.routes))}else le.loadChildren&&!le.canLoad?Y.push(this.preloadConfig(S,le)):le.children&&Y.push(this.processRoutes(S,le.children));return(0,ee.D)(Y).pipe((0,Br.J)(),(0,U.U)(le=>{}))}preloadConfig(S,V){return this.preloadingStrategy.preload(V,()=>(V._loadedConfig?(0,Ne.of)(V._loadedConfig):this.loader.load(S.injector,V)).pipe((0,Fn.zg)(le=>(V._loadedConfig=le,this.processRoutes(le.module,le.routes)))))}}return R.\u0275fac=function(S){return new(S||R)(a.LFG(os),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(ga))},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac}),R})(),$i=(()=>{class R{constructor(S,V,Y={}){this.router=S,this.viewportScroller=V,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof pn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Ar&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Ln&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,V){this.router.triggerEvent(new Ln(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return R.\u0275fac=function(S){a.$Z()},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac}),R})();const _s=new a.OlP("ROUTER_CONFIGURATION"),ma=new a.OlP("ROUTER_FORROOT_GUARD"),ya=[rr.Ye,{provide:an,useClass:En},{provide:os,useFactory:function xn(R,A,S,V,Y,le,Be={},it,ln){const Jn=new os(null,R,A,S,V,Y,Kn(le));return it&&(Jn.urlHandlingStrategy=it),ln&&(Jn.routeReuseStrategy=ln),function Ur(R,A){R.errorHandler&&(A.errorHandler=R.errorHandler),R.malformedUriErrorHandler&&(A.malformedUriErrorHandler=R.malformedUriErrorHandler),R.onSameUrlNavigation&&(A.onSameUrlNavigation=R.onSameUrlNavigation),R.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=R.paramsInheritanceStrategy),R.relativeLinkResolution&&(A.relativeLinkResolution=R.relativeLinkResolution),R.urlUpdateStrategy&&(A.urlUpdateStrategy=R.urlUpdateStrategy),R.canceledNavigationResolution&&(A.canceledNavigationResolution=R.canceledNavigationResolution)}(Be,Jn),Be.enableTracing&&Jn.events.subscribe(di=>{var qn,vi;null===(qn=console.group)||void 0===qn||qn.call(console,`Router Event: ${di.constructor.name}`),console.log(di.toString()),console.log(di),null===(vi=console.groupEnd)||void 0===vi||vi.call(console)}),Jn},deps:[an,ti,rr.Ye,a.zs3,a.Sil,wo,_s,[class Zi{},new a.FiY],[nl,new a.FiY]]},ti,{provide:kt,useFactory:function qi(R){return R.routerState.root},deps:[os]},Uo,oo,Io,{provide:_s,useValue:{enableTracing:!1}}];function Dl(){return new a.PXZ("Router",os)}let as=(()=>{class R{constructor(S,V){}static forRoot(S,V){return{ngModule:R,providers:[ya,Xo(S),{provide:ma,useFactory:ao,deps:[[os,new a.FiY,new a.tp0]]},{provide:_s,useValue:V||{}},{provide:rr.S$,useFactory:Po,deps:[rr.lw,[new a.tBr(rr.mr),new a.FiY],_s]},{provide:$i,useFactory:Zo,deps:[os,rr.EM,_s]},{provide:ga,useExisting:V&&V.preloadingStrategy?V.preloadingStrategy:oo},{provide:a.PXZ,multi:!0,useFactory:Dl},[eo,{provide:a.ip1,multi:!0,useFactory:sr,deps:[eo]},{provide:Ua,useFactory:kr,deps:[eo]},{provide:a.tb,multi:!0,useExisting:Ua}]]}}static forChild(S){return{ngModule:R,providers:[Xo(S)]}}}return R.\u0275fac=function(S){return new(S||R)(a.LFG(ma,8),a.LFG(os,8))},R.\u0275mod=a.oAB({type:R}),R.\u0275inj=a.cJS({}),R})();function Zo(R,A,S){return S.scrollOffset&&A.setOffset(S.scrollOffset),new $i(R,A,S)}function Po(R,A,S={}){return S.useHash?new rr.Do(R,A):new rr.b0(R,A)}function ao(R){return"guarded"}function Xo(R){return[{provide:a.deG,multi:!0,useValue:R},{provide:wo,multi:!0,useValue:R}]}let eo=(()=>{class R{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pt.xQ}appInitializer(){return this.injector.get(rr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let V=null;const Y=new Promise(it=>V=it),le=this.injector.get(os),Be=this.injector.get(_s);return"disabled"===Be.initialNavigation?(le.setUpLocationChangeListener(),V(!0)):"enabled"===Be.initialNavigation||"enabledBlocking"===Be.initialNavigation?(le.hooks.afterPreactivation=()=>this.initNavigation?(0,Ne.of)(null):(this.initNavigation=!0,V(!0),this.resultOfPreactivationDone),le.initialNavigation()):V(!0),Y})}bootstrapListener(S){const V=this.injector.get(_s),Y=this.injector.get(Uo),le=this.injector.get($i),Be=this.injector.get(os),it=this.injector.get(a.z2F);S===it.components[0]&&(("enabledNonBlocking"===V.initialNavigation||void 0===V.initialNavigation)&&Be.initialNavigation(),Y.setUpPreloading(),le.init(),Be.resetRootComponentType(it.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return R.\u0275fac=function(S){return new(S||R)(a.LFG(a.zs3))},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac}),R})();function sr(R){return R.appInitializer.bind(R)}function kr(R){return R.bootstrapListener.bind(R)}const Ua=new a.OlP("Router Initializer")},3942:(On,Ct,L)=>{"use strict";L.d(Ct,{Z:()=>Ne});var a=L(2090),J=L(4859),Z=L(9681),Ve=L(1877);class Me{constructor(ke,$e){this._delegate=ke,this.firebase=$e,(0,Z._addComponent)(ke,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(ke,$e=Z._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const ve=this._delegate.container.getProvider(ke);return!ve.isInitialized()&&"EXPLICIT"===(null===(Dt=ve.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&ve.initialize(),ve.getImmediate({identifier:$e})}_removeServiceInstance(ke,$e=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance($e)}_addComponent(ke){(0,Z._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,Z._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Ee(){const _e=function Ce(_e){const ke={},$e={__esModule:!0,initializeApp:function pt(Ft,Ye={}){const st=Z.initializeApp(Ft,Ye);if((0,a.r3)(ke,st.name))return ke[st.name];const Fe=new _e(st,$e);return ke[st.name]=Fe,Fe},app:ve,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function dt(Ft){const Ye=Ft.name,st=Ye.replace("-compat","");if(Z._registerComponent(Ft)&&"PUBLIC"===Ft.type){const Fe=(me=ve())=>{if("function"!=typeof me[st])throw we.create("invalid-app-argument",{appName:Ye});return me[st]()};void 0!==Ft.serviceProps&&(0,a.ZB)(Fe,Ft.serviceProps),$e[st]=Fe,_e.prototype[st]=function(...me){return this._getService.bind(this,Ye).apply(this,Ft.multipleInstances?me:[])}}return"PUBLIC"===Ft.type?$e[st]:null},removeApp:function Dt(Ft){delete ke[Ft]},useAsService:function mt(Ft,Ye){return"serverAuth"===Ye?null:Ye},modularAPIs:Z}};function ve(Ft){if(!(0,a.r3)(ke,Ft=Ft||Z._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ft});return ke[Ft]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function He(){return Object.keys(ke).map(Ft=>ke[Ft])}}),ve.App=_e,$e}(Me);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function ke($e){(0,a.ZB)(_e,$e)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),_e}(),pe=new Ve.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=oe;!function Xe(_e){(0,Z.registerVersion)("@firebase/app-compat","0.1.22",_e)}()},9681:(On,Ct,L)=>{"use strict";L.r(Ct),L.d(Ct,{FirebaseError:()=>Ve.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>vt,_addComponent:()=>Et,_addOrOverwriteComponent:()=>U,_apps:()=>ze,_clearComponents:()=>hn,_components:()=>at,_getProvider:()=>rn,_registerComponent:()=>Qe,_removeServiceInstance:()=>St,deleteApp:()=>lr,getApp:()=>Br,getApps:()=>rr,initializeApp:()=>er,onLog:()=>vr,registerVersion:()=>Ar,setLogLevel:()=>Ir});var a=L(5861),J=L(4859),Z=L(1877),Ve=L(2090);class Me{constructor(Vt){this.container=Vt}getPlatformInfoString(){return this.container.getProviders().map(wn=>{if(function ae(Rn){const Vt=Rn.getComponent();return"VERSION"===(null==Vt?void 0:Vt.type)}(wn)){const Yn=wn.getImmediate();return`${Yn.library}/${Yn.version}`}return null}).filter(wn=>wn).join(" ")}}const we="@firebase/app",Ee=new Z.Yd("@firebase/app"),vt="[DEFAULT]",At={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ze=new Map,at=new Map;function Et(Rn,Vt){try{Rn.container.addComponent(Vt)}catch(wn){Ee.debug(`Component ${Vt.name} failed to register with FirebaseApp ${Rn.name}`,wn)}}function U(Rn,Vt){Rn.container.addOrOverwriteComponent(Vt)}function Qe(Rn){const Vt=Rn.name;if(at.has(Vt))return Ee.debug(`There were multiple attempts to register component ${Vt}.`),!1;at.set(Vt,Rn);for(const wn of ze.values())Et(wn,Rn);return!0}function rn(Rn,Vt){const wn=Rn.container.getProvider("heartbeat").getImmediate({optional:!0});return wn&&wn.triggerHeartbeat(),Rn.container.getProvider(Vt)}function St(Rn,Vt,wn=vt){rn(Rn,Vt).clearInstance(wn)}function hn(){at.clear()}const jn=new Ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fn{constructor(Vt,wn,Yn){this._isDeleted=!1,this._options=Object.assign({},Vt),this._config=Object.assign({},wn),this._name=wn.name,this._automaticDataCollectionEnabled=wn.automaticDataCollectionEnabled,this._container=Yn,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Vt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Vt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Vt){this._isDeleted=Vt}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const Dn="9.6.11";function er(Rn,Vt={}){"object"!=typeof Vt&&(Vt={name:Vt});const wn=Object.assign({name:vt,automaticDataCollectionEnabled:!1},Vt),Yn=wn.name;if("string"!=typeof Yn||!Yn)throw jn.create("bad-app-name",{appName:String(Yn)});const Kn=ze.get(Yn);if(Kn){if((0,Ve.vZ)(Rn,Kn.options)&&(0,Ve.vZ)(wn,Kn.config))return Kn;throw jn.create("duplicate-app",{appName:Yn})}const Vn=new J.H0(Yn);for(const De of at.values())Vn.addComponent(De);const We=new Fn(Rn,wn,Vn);return ze.set(Yn,We),We}function Br(Rn=vt){const Vt=ze.get(Rn);if(!Vt)throw jn.create("no-app",{appName:Rn});return Vt}function rr(){return Array.from(ze.values())}function lr(Rn){return pn.apply(this,arguments)}function pn(){return(pn=(0,a.Z)(function*(Rn){const Vt=Rn.name;ze.has(Vt)&&(ze.delete(Vt),yield Promise.all(Rn.container.getProviders().map(wn=>wn.delete())),Rn.isDeleted=!0)})).apply(this,arguments)}function Ar(Rn,Vt,wn){var Yn;let Kn=null!==(Yn=At[Rn])&&void 0!==Yn?Yn:Rn;wn&&(Kn+=`-${wn}`);const Vn=Kn.match(/\s|\//),We=Vt.match(/\s|\//);if(Vn||We){const De=[`Unable to register library "${Kn}" with version "${Vt}":`];return Vn&&De.push(`library name "${Kn}" contains illegal characters (whitespace or "/")`),Vn&&We&&De.push("and"),We&&De.push(`version name "${Vt}" contains illegal characters (whitespace or "/")`),void Ee.warn(De.join(" "))}Qe(new J.wA(`${Kn}-version`,()=>({library:Kn,version:Vt}),"VERSION"))}function vr(Rn,Vt){if(null!==Rn&&"function"!=typeof Rn)throw jn.create("invalid-log-argument");(0,Z.Am)(Rn,Vt)}function Ir(Rn){(0,Z.Ub)(Rn)}const gt="firebase-heartbeat-store";let qe=null;function Ie(){return qe||(qe=(0,Ve.X3)("firebase-heartbeat-database",1,(Rn,Vt)=>{0===Vt&&Rn.createObjectStore(gt)}).catch(Rn=>{throw jn.create("storage-open",{originalErrorMessage:Rn.message})})),qe}function Nt(){return(Nt=(0,a.Z)(function*(Rn){try{return(yield Ie()).transaction(gt).objectStore(gt).get(Xn(Rn))}catch(Vt){throw jn.create("storage-get",{originalErrorMessage:Vt.message})}})).apply(this,arguments)}function nn(Rn,Vt){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,a.Z)(function*(Rn,Vt){try{const Yn=(yield Ie()).transaction(gt,"readwrite");return yield Yn.objectStore(gt).put(Vt,Xn(Rn)),Yn.complete}catch(wn){throw jn.create("storage-set",{originalErrorMessage:wn.message})}})).apply(this,arguments)}function Xn(Rn){return`${Rn.name}!${Rn.options.appId}`}class Hn{constructor(Vt){this.container=Vt,this._heartbeatsCache=null;const wn=this.container.getProvider("app").getImmediate();this._storage=new yn(wn),this._heartbeatsCachePromise=this._storage.read().then(Yn=>(this._heartbeatsCache=Yn,Yn))}triggerHeartbeat(){var Vt=this;return(0,a.Z)(function*(){const Yn=Vt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Kn=Er();if(null===Vt._heartbeatsCache&&(Vt._heartbeatsCache=yield Vt._heartbeatsCachePromise),Vt._heartbeatsCache.lastSentHeartbeatDate!==Kn&&!Vt._heartbeatsCache.heartbeats.some(Vn=>Vn.date===Kn))return Vt._heartbeatsCache.heartbeats.push({date:Kn,agent:Yn}),Vt._heartbeatsCache.heartbeats=Vt._heartbeatsCache.heartbeats.filter(Vn=>{const We=new Date(Vn.date).valueOf();return Date.now()-We<=2592e6}),Vt._storage.overwrite(Vt._heartbeatsCache)})()}getHeartbeatsHeader(){var Vt=this;return(0,a.Z)(function*(){if(null===Vt._heartbeatsCache&&(yield Vt._heartbeatsCachePromise),null===Vt._heartbeatsCache||0===Vt._heartbeatsCache.heartbeats.length)return"";const wn=Er(),{heartbeatsToSend:Yn,unsentEntries:Kn}=function Cr(Rn,Vt=1024){const wn=[];let Yn=Rn.slice();for(const Kn of Rn){const Vn=wn.find(We=>We.agent===Kn.agent);if(Vn){if(Vn.dates.push(Kn.date),Wn(wn)>Vt){Vn.dates.pop();break}}else if(wn.push({agent:Kn.agent,dates:[Kn.date]}),Wn(wn)>Vt){wn.pop();break}Yn=Yn.slice(1)}return{heartbeatsToSend:wn,unsentEntries:Yn}}(Vt._heartbeatsCache.heartbeats),Vn=(0,Ve.L)(JSON.stringify({version:2,heartbeats:Yn}));return Vt._heartbeatsCache.lastSentHeartbeatDate=wn,Kn.length>0?(Vt._heartbeatsCache.heartbeats=Kn,yield Vt._storage.overwrite(Vt._heartbeatsCache)):(Vt._heartbeatsCache.heartbeats=[],Vt._storage.overwrite(Vt._heartbeatsCache)),Vn})()}}function Er(){return(new Date).toISOString().substring(0,10)}class yn{constructor(Vt){this.app=Vt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Ve.hl)()&&(0,Ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Vt=this;return(0,a.Z)(function*(){return(yield Vt._canUseIndexedDBPromise)&&(yield function Kt(Rn){return Nt.apply(this,arguments)}(Vt.app))||{heartbeats:[]}})()}overwrite(Vt){var wn=this;return(0,a.Z)(function*(){var Yn;if(yield wn._canUseIndexedDBPromise){const Vn=yield wn.read();return nn(wn.app,{lastSentHeartbeatDate:null!==(Yn=Vt.lastSentHeartbeatDate)&&void 0!==Yn?Yn:Vn.lastSentHeartbeatDate,heartbeats:Vt.heartbeats})}})()}add(Vt){var wn=this;return(0,a.Z)(function*(){var Yn;if(yield wn._canUseIndexedDBPromise){const Vn=yield wn.read();return nn(wn.app,{lastSentHeartbeatDate:null!==(Yn=Vt.lastSentHeartbeatDate)&&void 0!==Yn?Yn:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...Vt.heartbeats]})}})()}}function Wn(Rn){return(0,Ve.L)(JSON.stringify({version:2,heartbeats:Rn})).length}!function cr(Rn){Qe(new J.wA("platform-logger",Vt=>new Me(Vt),"PRIVATE")),Qe(new J.wA("heartbeat",Vt=>new Hn(Vt),"PRIVATE")),Ar(we,"0.7.21",Rn),Ar(we,"0.7.21","esm2017"),Ar("fire-js","")}("")},4859:(On,Ct,L)=>{"use strict";L.d(Ct,{wA:()=>Z,H0:()=>Ce,zt:()=>Me});var a=L(5861),J=L(2090);class Z{constructor(oe,pe,ee){this.name=oe,this.instanceFactory=pe,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Ve="[DEFAULT]";class Me{constructor(oe,pe){this.name=oe,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const pe=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(pe)){const ee=new J.BH;if(this.instancesDeferred.set(pe,ee),this.isInitialized(pe)||this.shouldAutoInitialize())try{const ce=this.getOrInitializeService({instanceIdentifier:pe});ce&&ee.resolve(ce)}catch(ce){}}return this.instancesDeferred.get(pe).promise}getImmediate(oe){var pe;const ee=this.normalizeInstanceIdentifier(null==oe?void 0:oe.identifier),ce=null!==(pe=null==oe?void 0:oe.optional)&&void 0!==pe&&pe;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Xe){if(ce)return null;throw Xe}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function we(Ee){return"EAGER"===Ee.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Ve})}catch(pe){}for(const[pe,ee]of this.instancesDeferred.entries()){const ce=this.normalizeInstanceIdentifier(pe);try{const Xe=this.getOrInitializeService({instanceIdentifier:ce});ee.resolve(Xe)}catch(Xe){}}}}clearInstance(oe=Ve){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,a.Z)(function*(){const pe=Array.from(oe.instances.values());yield Promise.all([...pe.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...pe.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Ve){return this.instances.has(oe)}getOptions(oe=Ve){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:pe={}}=oe,ee=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ce=this.getOrInitializeService({instanceIdentifier:ee,options:pe});for(const[Xe,Ne]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Xe)&&Ne.resolve(ce);return ce}onInit(oe,pe){var ee;const ce=this.normalizeInstanceIdentifier(pe),Xe=null!==(ee=this.onInitCallbacks.get(ce))&&void 0!==ee?ee:new Set;Xe.add(oe),this.onInitCallbacks.set(ce,Xe);const Ne=this.instances.get(ce);return Ne&&oe(Ne,ce),()=>{Xe.delete(oe)}}invokeOnInitCallbacks(oe,pe){const ee=this.onInitCallbacks.get(pe);if(ee)for(const ce of ee)try{ce(oe,pe)}catch(Xe){}}getOrInitializeService({instanceIdentifier:oe,options:pe={}}){let ee=this.instances.get(oe);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=oe,Ee===Ve?void 0:Ee),options:pe}),this.instances.set(oe,ee),this.instancesOptions.set(oe,pe),this.invokeOnInitCallbacks(ee,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,ee)}catch(ce){}var Ee;return ee||null}normalizeInstanceIdentifier(oe=Ve){return this.component?this.component.multipleInstances?oe:Ve:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const pe=this.getProvider(oe.name);if(pe.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);pe.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const pe=new Me(oe,this);return this.providers.set(oe,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(On,Ct,L)=>{"use strict";L.d(Ct,{in:()=>J,Yd:()=>we,Ub:()=>Ce,Am:()=>Ee});const a=[];var J=(()=>{return(oe=J||(J={}))[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",J;var oe})();const Z={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Ve=J.INFO,Me={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ae=(oe,pe,...ee)=>{if(pe<oe.logLevel)return;const ce=(new Date).toISOString(),Xe=Me[pe];if(!Xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[Xe](`[${ce}]  ${oe.name}:`,...ee)};class we{constructor(pe){this.name=pe,this._logLevel=Ve,this._logHandler=ae,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in J))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?Z[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...pe),this._logHandler(this,J.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...pe),this._logHandler(this,J.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,J.INFO,...pe),this._logHandler(this,J.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,J.WARN,...pe),this._logHandler(this,J.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...pe),this._logHandler(this,J.ERROR,...pe)}}function Ce(oe){a.forEach(pe=>{pe.setLogLevel(oe)})}function Ee(oe,pe){for(const ee of a){let ce=null;pe&&pe.level&&(ce=Z[pe.level]),ee.userLogHandler=null===oe?null:(Xe,Ne,..._e)=>{const ke=_e.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch(Dt){return null}}).filter($e=>$e).join(" ");Ne>=(null!=ce?ce:Xe.logLevel)&&oe({level:J[Ne].toLowerCase(),message:ke,args:_e,type:Xe.name})}}}},5861:(On,Ct,L)=>{"use strict";function a(Z,Ve,Me,ae,we,Ce,Ee){try{var oe=Z[Ce](Ee),pe=oe.value}catch(ee){return void Me(ee)}oe.done?Ve(pe):Promise.resolve(pe).then(ae,we)}function J(Z){return function(){var Ve=this,Me=arguments;return new Promise(function(ae,we){var Ce=Z.apply(Ve,Me);function Ee(pe){a(Ce,ae,we,Ee,oe,"next",pe)}function oe(pe){a(Ce,ae,we,Ee,oe,"throw",pe)}Ee(void 0)})}}L.d(Ct,{Z:()=>J})}},On=>{On(On.s=539)}]);